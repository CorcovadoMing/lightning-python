window._define=window.define,window.define=void 0,window._require=window.require,window.require=void 0,function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){(function(e){function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t){return this instanceof i?(this.length=0,this.parent=void 0,"number"==typeof t?o(this,t):"string"==typeof t?a(this,t,arguments.length>1?arguments[1]:"utf8"):s(this,t)):arguments.length>1?new i(t,arguments[1]):new i(t)}function o(t,e){if(t=d(t,0>e?0:0|m(e)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;e>n;n++)t[n]=0;return t}function a(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|y(e,n);return t=d(t,r),t.write(e,n),t}function s(t,e){if(i.isBuffer(e))return u(t,e);if(Z(e))return l(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return c(t,e);if(e instanceof ArrayBuffer)return h(t,e)}return e.length?f(t,e):p(t,e)}function u(t,e){var n=0|m(e.length);return t=d(t,n),e.copy(t,0,0,n),t}function l(t,e){var n=0|m(e.length);t=d(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function c(t,e){var n=0|m(e.length);t=d(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function h(t,e){return i.TYPED_ARRAY_SUPPORT?(e.byteLength,t=i._augment(new Uint8Array(e))):t=c(t,new Uint8Array(e)),t}function f(t,e){var n=0|m(e.length);t=d(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function p(t,e){var n,r=0;"Buffer"===e.type&&Z(e.data)&&(n=e.data,r=0|m(n.length)),t=d(t,r);for(var i=0;r>i;i+=1)t[i]=255&n[i];return t}function d(t,e){i.TYPED_ARRAY_SUPPORT?(t=i._augment(new Uint8Array(e)),t.__proto__=i.prototype):(t.length=e,t._isBuffer=!0);var n=0!==e&&e<=i.poolSize>>>1;return n&&(t.parent=K),t}function m(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function g(t,e){if(!(this instanceof g))return new g(t,e);var n=new i(t,e);return delete n.parent,n}function y(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(r)return G(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return S(this,e,n);case"binary":return L(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[n+a]=s}return a}function _(t,e,n,r){return X(G(e,t.length-n),t,n,r)}function x(t,e,n,r){return X(W(e),t,n,r)}function w(t,e,n,r){return x(t,e,n,r)}function M(t,e,n,r){return X(j(e),t,n,r)}function C(t,e,n,r){return X(H(e,t.length-n),t,n,r)}function P(t,e,n){return 0===e&&n===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;n>i;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=i+s){var u,l,c,h;switch(s){case 1:128>o&&(a=o);break;case 2:u=t[i+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(a=h));break;case 3:u=t[i+1],l=t[i+2],128===(192&u)&&128===(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l,h>2047&&(55296>h||h>57343)&&(a=h));break;case 4:u=t[i+1],l=t[i+2],c=t[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&1114112>h&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return T(r)}function T(t){var e=t.length;if(J>=e)return String.fromCharCode.apply(String,t);for(var n="",r=0;e>r;)n+=String.fromCharCode.apply(String,t.slice(r,r+=J));return n}function S(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(127&t[i]);return r}function L(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function A(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=V(t[o]);return i}function D(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,n,r,o,a){if(!i.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||a>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range")}function N(t,e,n,r){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);o>i;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function B(t,e,n,r){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);o>i;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function O(t,e,n,r,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function R(t,e,n,r,i){return i||O(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),q.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return i||O(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),q.write(t,e,n,r,52,8),n+8}function U(t){if(t=z(t).replace($,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return 16>t?"0"+t.toString(16):t.toString(16)}function G(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;r>a;a++){if(n=t.charCodeAt(a),n>55295&&57344>n){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function H(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);a++)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function j(t){return Y.toByteArray(U(t))}function X(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}var Y=t("base64-js"),q=t("ieee754"),Z=t("is-array");n.Buffer=i,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,i.poolSize=8192;var K={};i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}(),i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array),i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,a=Math.min(n,r);a>o&&t[o]===e[o];)++o;return o!==a&&(n=t[o],r=e[o]),r>n?-1:n>r?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Z(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new i(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var r=new i(e),o=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(r,o),o+=a.length}return r},i.byteLength=y,i.prototype.length=void 0,i.prototype.parent=void 0,i.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):v.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:i.compare(this,t)},i.prototype.indexOf=function(t,e){function n(t,e,n){for(var r=-1,i=0;n+i<t.length;i++)if(t[n+i]===e[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===e.length)return n+r}else r=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(i.isBuffer(t))return n(this,t,e);if("number"==typeof t)return i.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):n(this,[t],e);throw new TypeError("val must be string, number or Buffer")},i.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},i.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=e,e=0|n,n=i}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return x(this,t,e,n);case"binary":return w(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var r;if(i.TYPED_ARRAY_SUPPORT)r=i._augment(this.subarray(t,e));else{var o=e-t;r=new i(o,void 0);for(var a=0;o>a;a++)r[a]=this[a+t]}return r.length&&(r.parent=this.parent||this),r},i.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},i.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||I(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},i.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||I(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},i.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),q.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),q.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),q.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),q.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||k(this,t,e,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||k(this,t,e,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,1,255,0),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):N(this,t,e,!1),e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):B(this,t,e,!0),e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):B(this,t,e,!1),e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=0,a=1,s=0>t?1:0;for(this[e]=255&t;++o<n&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,1,127,-128),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):N(this,t,e,!1),e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||k(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):B(this,t,e,!1),e+4},i.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,a=r-n;if(this===t&&e>n&&r>e)for(o=a-1;o>=0;o--)t[o+e]=this[o+n];else if(1e3>a||!i.TYPED_ARRAY_SUPPORT)for(o=0;a>o;o++)t[o+e]=this[o+n];else t._set(this.subarray(n,n+a),e);return a},i.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=G(t.toString()),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i.TYPED_ARRAY_SUPPORT)return new i(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=i.prototype;i._augment=function(t){return t.constructor=i,t._isBuffer=!0,t._set=t.set,t.get=Q.get,t.set=Q.set,t.write=Q.write,t.toString=Q.toString,t.toLocaleString=Q.toString,t.toJSON=Q.toJSON,t.equals=Q.equals,t.compare=Q.compare,t.indexOf=Q.indexOf,t.copy=Q.copy,t.slice=Q.slice,t.readUIntLE=Q.readUIntLE,t.readUIntBE=Q.readUIntBE,t.readUInt8=Q.readUInt8,t.readUInt16LE=Q.readUInt16LE,t.readUInt16BE=Q.readUInt16BE,t.readUInt32LE=Q.readUInt32LE,t.readUInt32BE=Q.readUInt32BE,t.readIntLE=Q.readIntLE,t.readIntBE=Q.readIntBE,t.readInt8=Q.readInt8,t.readInt16LE=Q.readInt16LE,t.readInt16BE=Q.readInt16BE,t.readInt32LE=Q.readInt32LE,t.readInt32BE=Q.readInt32BE,t.readFloatLE=Q.readFloatLE,t.readFloatBE=Q.readFloatBE,t.readDoubleLE=Q.readDoubleLE,t.readDoubleBE=Q.readDoubleBE,t.writeUInt8=Q.writeUInt8,t.writeUIntLE=Q.writeUIntLE,t.writeUIntBE=Q.writeUIntBE,t.writeUInt16LE=Q.writeUInt16LE,t.writeUInt16BE=Q.writeUInt16BE,t.writeUInt32LE=Q.writeUInt32LE,t.writeUInt32BE=Q.writeUInt32BE,t.writeIntLE=Q.writeIntLE,t.writeIntBE=Q.writeIntBE,t.writeInt8=Q.writeInt8,t.writeInt16LE=Q.writeInt16LE,t.writeInt16BE=Q.writeInt16BE,t.writeInt32LE=Q.writeInt32LE,t.writeInt32BE=Q.writeInt32BE,t.writeFloatLE=Q.writeFloatLE,t.writeFloatBE=Q.writeFloatBE,t.writeDoubleLE=Q.writeDoubleLE,t.writeDoubleBE=Q.writeDoubleBE,t.fill=Q.fill,t.inspect=Q.inspect,t.toArrayBuffer=Q.toArrayBuffer,t};var $=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:3,"is-array":4}],2:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===h?62:e===s||e===f?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:l+26>e?e-l+26:void 0}function n(t){function n(t){l[h++]=t}var r,i,a,s,u,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,l=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var h=0;for(r=0,i=0;a>r;r+=4,i+=3)s=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&s)):1===u&&(s=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(s>>8&255),n(255&s)),l}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,s=t.length%3,u="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),h="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],3:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*m}},{}],4:[function(t,e,n){var r=Array.isArray,i=Object.prototype.toString;e.exports=r||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],5:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];n.apply(this,o)}else if(a(n)){for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];for(l=n.slice(),r=l.length,u=0;r>u;u++)l[u].apply(this,o)}return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-->0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],6:[function(t,e,n){e.exports=t("./src")},{"./src":28}],7:[function(t,e,n){!function(){var t={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],
9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};"function"==typeof define&&define.amd?define(t):"object"==typeof e&&e.exports?e.exports=t:this.colorbrewer=t}()},{}],8:[function(t,e,n){e.exports=t("./colorbrewer.js")},{"./colorbrewer.js":7}],9:[function(t,e,n){!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function i(t){return null===t?NaN:+t}function o(t){return!isNaN(t)}function a(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function s(t){return t.length}function u(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function c(){this._=Object.create(null)}function h(t){return(t+="")===ga||t[0]===ya?ya+t:t}function f(t){return(t+="")[0]===ya?t.slice(1):t}function p(t){return h(t)in this._}function d(t){return(t=h(t))in this._&&delete this._[t]}function m(){var t=[];for(var e in this._)t.push(f(e));return t}function g(){var t=0;for(var e in this._)++t;return t}function y(){for(var t in this._)return!1;return!0}function v(){this._=Object.create(null)}function b(t){return t}function _(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function x(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=va.length;r>n;++n){var i=va[n]+e;if(i in t)return i}}function w(){}function M(){}function C(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new c;return e.on=function(e,i){var o,a=r.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function P(){ra.event.preventDefault()}function E(){for(var t,e=ra.event;t=e.sourceEvent;)e=t;return e}function T(t){for(var e=new M,n=0,r=arguments.length;++n<r;)e[arguments[n]]=C(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=ra.event;i.target=t,ra.event=i,e[i.type].apply(n,r)}finally{ra.event=o}}},e}function S(t){return _a(t,Ca),t}function L(t){return"function"==typeof t?t:function(){return xa(t,this)}}function A(t){return"function"==typeof t?t:function(){return wa(t,this)}}function D(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=ra.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:a:t.local?o:i}function I(t){return t.trim().replace(/\s+/g," ")}function k(t){return new RegExp("(?:^|\\s+)"+ra.requote(t)+"(?:\\s+|$)","g")}function N(t){return(t+"").trim().split(/^|\s+/)}function B(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=N(t).map(O);var i=t.length;return"function"==typeof e?r:n}function O(t){var e=k(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",I(i+" "+t))):n.setAttribute("class",I(i.replace(e," ")))}}function R(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function F(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function U(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ra.ns.qualify(t)).local?n:e}function z(){var t=this.parentNode;t&&t.removeChild(this)}function V(t){return{__data__:t}}function G(t){return function(){return Ma(this,t)}}function W(t){return arguments.length||(t=r),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function H(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],a=0,s=o.length;s>a;a++)(i=o[a])&&e(i,a,n);return t}function j(t){return _a(t,Ea),t}function X(t){var e,n;return function(r,i,o){var a,s=t[o].update,u=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<u;);return a}}function Y(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){var i=u(e,oa(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=n),i._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+ra.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var a="__on"+t,s=t.indexOf("."),u=q;s>0&&(t=t.slice(0,s));var l=Ta.get(t);return l&&(t=l,u=Z),s?e?i:r:e?w:o}function q(t,e){return function(n){var r=ra.event;ra.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ra.event=r}}}function Z(t,e){var n=q(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function K(e){var r=".dragsuppress-"+ ++La,i="click"+r,o=ra.select(n(e)).on("touchmove"+r,P).on("dragstart"+r,P).on("selectstart"+r,P);if(null==Sa&&(Sa="onselectstart"in e?!1:x(e.style,"userSelect")),Sa){var a=t(e).style,s=a[Sa];a[Sa]="none"}return function(t){if(o.on(r,null),Sa&&(a[Sa]=s),t){var e=function(){o.on(i,null)};o.on(i,function(){P(),e()},!0),setTimeout(e,0)}}}function J(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Aa){var o=n(t);if(o.scrollX||o.scrollY){r=ra.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Aa=!(a.f||a.e),r.remove()}}return Aa?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function Q(){return ra.event.changedTouches[0].identifier}function $(t){return t>0?1:0>t?-1:0}function tt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function et(t){return t>1?0:-1>t?ka:Math.acos(t)}function nt(t){return t>1?Oa:-1>t?-Oa:Math.asin(t)}function rt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function ot(t){return((t=Math.exp(2*t))-1)/(t+1)}function at(t){return(t=Math.sin(t/2))*t}function st(){}function ut(t,e,n){return this instanceof ut?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ut?new ut(t.h,t.s,t.l):wt(""+t,Mt,ut):new ut(t,e,n)}function lt(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,new vt(i(t+120),i(t),i(t-120))}function ct(t,e,n){return this instanceof ct?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ct?new ct(t.h,t.c,t.l):t instanceof ft?dt(t.l,t.a,t.b):dt((t=Ct((t=ra.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ct(t,e,n)}function ht(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ft(n,Math.cos(t*=Ra)*e,Math.sin(t)*e)}function ft(t,e,n){return this instanceof ft?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ft?new ft(t.l,t.a,t.b):t instanceof ct?ht(t.h,t.c,t.l):Ct((t=vt(t)).r,t.g,t.b):new ft(t,e,n)}function pt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=mt(i)*qa,r=mt(r)*Za,o=mt(o)*Ka,new vt(yt(3.2404542*i-1.5371385*r-.4985314*o),yt(-.969266*i+1.8760108*r+.041556*o),yt(.0556434*i-.2040259*r+1.0572252*o))}function dt(t,e,n){return t>0?new ct(Math.atan2(n,e)*Fa,Math.sqrt(e*e+n*n),t):new ct(NaN,NaN,t)}function mt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function gt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function yt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function vt(t,e,n){return this instanceof vt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof vt?new vt(t.r,t.g,t.b):wt(""+t,vt,lt):new vt(t,e,n)}function bt(t){return new vt(t>>16,t>>8&255,255&t)}function _t(t){return bt(t)+""}function xt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,e,n){t=t.toLowerCase();var r,i,o,a=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Et(i[0]),Et(i[1]),Et(i[2]))}return(o=$a.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,u=15&o,u=u<<4|u):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),e(a,s,u))}function Mt(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,u=(a+o)/2;return s?(i=.5>u?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=u>0&&1>u?0:r),new ut(r,i,u)}function Ct(t,e,n){t=Pt(t),e=Pt(e),n=Pt(n);var r=gt((.4124564*t+.3575761*e+.1804375*n)/qa),i=gt((.2126729*t+.7151522*e+.072175*n)/Za),o=gt((.0193339*t+.119192*e+.9503041*n)/Ka);return ft(116*i-16,500*(r-i),200*(i-o))}function Pt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Et(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Tt(t){return"function"==typeof t?t:function(){return t}}function St(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Lt(e,n,t,r)}}function Lt(t,e,n,r){function i(){var t,e=u.status;if(!e&&Dt(u)||e>=200&&300>e||304===e){try{t=n.call(o,u)}catch(r){return void a.error.call(o,r)}a.load.call(o,t)}else a.error.call(o,u)}var o={},a=ra.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(t){var e=ra.event;ra.event=t;try{a.progress.call(o,u)}finally{ra.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(l=t,o):l},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(oa(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),u.setRequestHeader)for(var c in s)u.setRequestHeader(c,s[c]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=l&&(u.responseType=l),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},ra.rebind(o,a,"on"),null==r?o:o.get(At(r))}function At(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Dt(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function It(){var t=kt(),e=Nt()-t;e>24?(isFinite(e)&&(clearTimeout(rs),rs=setTimeout(It,e)),ns=0):(ns=1,os(It))}function kt(){var t=Date.now();for(is=ts;is;)t>=is.t&&(is.f=is.c(t-is.t)),is=is.n;return t}function Nt(){for(var t,e=ts,n=1/0;e;)e.f?e=t?t.n=e.n:ts=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return es=t,n}function Bt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Ot(t,e){var n=Math.pow(10,3*ma(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Rt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],a=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:b;return function(t){var n=ss.exec(t),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",u=n[4]||"",l=n[5],c=+n[6],h=n[7],f=n[8],p=n[9],d=1,m="",g="",y=!1,v=!0;switch(f&&(f=+f.substring(1)),(l||"0"===r&&"="===a)&&(l=r="0",a="="),p){case"n":h=!0,p="g";break;case"%":d=100,g="%",p="f";break;case"p":d=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+p.toLowerCase());case"c":v=!1;case"d":y=!0,f=0;break;case"s":d=-1,p="r"}"$"===u&&(m=i[0],g=i[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):("e"==p||"f"==p)&&(f=Math.max(0,Math.min(20,f)))),p=us.get(p)||Ft;var b=l&&h;return function(t){var n=g;if(y&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>d){var u=ra.formatPrefix(t,f);t=u.scale(t),n=u.symbol+g}else t*=d;t=p(t,f);var _,x,w=t.lastIndexOf(".");if(0>w){var M=v?t.lastIndexOf("e"):-1;0>M?(_=t,x=""):(_=t.substring(0,M),x=t.substring(M))}else _=t.substring(0,w),x=e+t.substring(w+1);!l&&h&&(_=o(_,1/0));var C=m.length+_.length+x.length+(b?0:i.length),P=c>C?new Array(C=c-C+1).join(r):"";return b&&(_=o(P+_,P.length?c-x.length:1/0)),i+=m,t=_+x,("<"===a?i+t+P:">"===a?P+i+t:"^"===a?P.substring(0,C>>=1)+i+t+P.substring(C):i+(b?t:P+t))+n}}}function Ft(t){return t+""}function Ut(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function zt(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new cs(n-1)),1),n}function o(t,n){return e(t=new cs(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;r>a;)s.push(new Date(+a)),e(a,1);return s}function s(t,e,n){try{cs=Ut;var r=new Ut;return r._=t,a(r,e,n)}finally{cs=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var u=t.utc=Vt(t);return u.floor=u,u.round=Vt(r),u.ceil=Vt(i),u.offset=Vt(o),u.range=s,t}function Vt(t){return function(e,n){try{cs=Ut;var r=new Ut;return r._=e,t(r,n)._}finally{cs=Date}}}function Gt(t){function e(t){function e(e){for(var n,i,o,a=[],s=-1,u=0;++s<r;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=fs[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=S[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),a.push(n),u=s+1);return a.push(t.slice(u,s)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&cs!==Ut,a=new(o?Ut:cs);return"j"in r?a.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,s=0,u=e.length,l=n.length;u>s;){if(r>=l)return-1;if(i=e.charCodeAt(s++),37===i){if(a=e.charAt(s++),o=L[a in fs?e.charAt(s++):a],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){w.lastIndex=0;var r=w.exec(e.slice(n));return r?(t.w=M.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){E.lastIndex=0;var r=E.exec(e.slice(n));return r?(t.m=T.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){C.lastIndex=0;var r=C.exec(e.slice(n));return r?(t.m=P.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,r){return n(t,S.c.toString(),e,r)}function u(t,e,r){return n(t,S.x.toString(),e,r)}function l(t,e,r){return n(t,S.X.toString(),e,r)}function c(t,e,n){var r=b.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var h=t.dateTime,f=t.date,p=t.time,d=t.periods,m=t.days,g=t.shortDays,y=t.months,v=t.shortMonths;e.utc=function(t){function n(t){try{cs=Ut;var e=new cs;return e._=t,r(e)}finally{cs=Date}}var r=e(t);return n.parse=function(t){try{cs=Ut;var e=r.parse(t);return e&&e._}finally{cs=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=ue;var b=ra.map(),_=Ht(m),x=jt(m),w=Ht(g),M=jt(g),C=Ht(y),P=jt(y),E=Ht(v),T=jt(v);d.forEach(function(t,e){b.set(t.toLowerCase(),e)});var S={a:function(t){return g[t.getDay()]},A:function(t){return m[t.getDay()]},b:function(t){return v[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:e(h),d:function(t,e){return Wt(t.getDate(),e,2)},e:function(t,e){return Wt(t.getDate(),e,2)},H:function(t,e){return Wt(t.getHours(),e,2)},I:function(t,e){return Wt(t.getHours()%12||12,e,2)},j:function(t,e){return Wt(1+ls.dayOfYear(t),e,3)},L:function(t,e){return Wt(t.getMilliseconds(),e,3)},m:function(t,e){return Wt(t.getMonth()+1,e,2)},M:function(t,e){return Wt(t.getMinutes(),e,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,e){return Wt(t.getSeconds(),e,2)},U:function(t,e){return Wt(ls.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Wt(ls.mondayOfYear(t),e,2)},x:e(f),X:e(p),y:function(t,e){return Wt(t.getFullYear()%100,e,2)},Y:function(t,e){return Wt(t.getFullYear()%1e4,e,4)},Z:ae,"%":function(){return"%"}},L={a:r,A:i,b:o,B:a,c:s,d:te,e:te,H:ne,I:ne,j:ee,L:oe,m:$t,M:re,p:c,S:ie,U:Yt,w:Xt,W:qt,x:u,X:l,y:Kt,Y:Zt,Z:Jt,"%":se};return e}function Wt(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function Ht(t){return new RegExp("^(?:"+t.map(ra.requote).join("|")+")","i")}function jt(t){for(var e=new c,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Xt(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Yt(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function qt(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Zt(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Kt(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+2));return r?(t.y=Qt(+r[0]),n+r[0].length):-1}function Jt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function $t(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function te(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ee(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ne(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function re(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ie(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function oe(t,e,n){ps.lastIndex=0;var r=ps.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ae(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=ma(e)/60|0,i=ma(e)%60;return n+Wt(r,"0",2)+Wt(i,"0",2)}function se(t,e,n){ds.lastIndex=0;var r=ds.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ue(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function le(){}function ce(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function he(t,e){t&&vs.hasOwnProperty(t.type)&&vs[t.type](t,e)}function fe(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function pe(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)fe(t[n],e,1);e.polygonEnd()}function de(){function t(t,e){t*=Ra,e=e*Ra/2+ka/4;var n=t-r,a=n>=0?1:-1,s=a*n,u=Math.cos(e),l=Math.sin(e),c=o*l,h=i*u+c*Math.cos(s),f=c*a*Math.sin(s);_s.add(Math.atan2(f,h)),r=t,i=u,o=l}var e,n,r,i,o;xs.point=function(a,s){xs.point=t,r=(e=a)*Ra,i=Math.cos(s=(n=s)*Ra/2+ka/4),o=Math.sin(s)},xs.lineEnd=function(){t(e,n)}}function me(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function ge(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ye(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]];
}function ve(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function be(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function _e(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function xe(t){return[Math.atan2(t[1],t[0]),nt(t[2])]}function we(t,e){return ma(t[0]-e[0])<Da&&ma(t[1]-e[1])<Da}function Me(t,e){t*=Ra;var n=Math.cos(e*=Ra);Ce(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Ce(t,e,n){++ws,Cs+=(t-Cs)/ws,Ps+=(e-Ps)/ws,Es+=(n-Es)/ws}function Pe(){function t(t,i){t*=Ra;var o=Math.cos(i*=Ra),a=o*Math.cos(t),s=o*Math.sin(t),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*u-r*s)*l+(l=r*a-e*u)*l+(l=e*s-n*a)*l),e*a+n*s+r*u);Ms+=l,Ts+=l*(e+(e=a)),Ss+=l*(n+(n=s)),Ls+=l*(r+(r=u)),Ce(e,n,r)}var e,n,r;ks.point=function(i,o){i*=Ra;var a=Math.cos(o*=Ra);e=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),ks.point=t,Ce(e,n,r)}}function Ee(){ks.point=Me}function Te(){function t(t,e){t*=Ra;var n=Math.cos(e*=Ra),a=n*Math.cos(t),s=n*Math.sin(t),u=Math.sin(e),l=i*u-o*s,c=o*a-r*u,h=r*s-i*a,f=Math.sqrt(l*l+c*c+h*h),p=r*a+i*s+o*u,d=f&&-et(p)/f,m=Math.atan2(f,p);As+=d*l,Ds+=d*c,Is+=d*h,Ms+=m,Ts+=m*(r+(r=a)),Ss+=m*(i+(i=s)),Ls+=m*(o+(o=u)),Ce(r,i,o)}var e,n,r,i,o;ks.point=function(a,s){e=a,n=s,ks.point=t,a*=Ra;var u=Math.cos(s*=Ra);r=u*Math.cos(a),i=u*Math.sin(a),o=Math.sin(s),Ce(r,i,o)},ks.lineEnd=function(){t(e,n),ks.lineEnd=Ee,ks.point=Me}}function Se(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Le(){return!0}function Ae(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(we(n,r)){i.lineStart();for(var s=0;e>s;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var u=new Ie(n,t,null,!0),l=new Ie(n,null,u,!1);u.o=l,o.push(u),a.push(l),u=new Ie(r,t,null,!1),l=new Ie(r,null,u,!0),u.o=l,o.push(u),a.push(l)}}),a.sort(e),De(o),De(a),o.length){for(var s=0,u=n,l=a.length;l>s;++s)a[s].e=u=!u;for(var c,h,f=o[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var s=0,l=c.length;l>s;++s)i.point((h=c[s])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var s=c.length-1;s>=0;--s)i.point((h=c[s])[0],h[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}}function De(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Ie(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ke(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);g.point(n[0],n[1])}function u(){v.point=s,g.lineStart()}function l(){v.point=a,g.lineEnd()}function c(t,e){m.push([t,e]);var n=i(t,e);_.point(n[0],n[1])}function h(){_.lineStart(),m=[]}function f(){c(m[0][0],m[0][1]),_.lineEnd();var t,e=_.clean(),n=b.buffer(),r=n.length;if(m.pop(),d.push(m),m=null,r)if(1&e){t=n[0];var i,r=t.length-1,a=-1;if(r>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Ne))}var p,d,m,g=e(o),y=i.invert(r[0],r[1]),v={point:a,lineStart:u,lineEnd:l,polygonStart:function(){v.point=c,v.lineStart=h,v.lineEnd=f,p=[],d=[]},polygonEnd:function(){v.point=a,v.lineStart=u,v.lineEnd=l,p=ra.merge(p);var t=ze(y,d);p.length?(x||(o.polygonStart(),x=!0),Ae(p,Oe,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=Be(),_=e(b),x=!1;return v}}function Ne(t){return t.length>1}function Be(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:w,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Oe(t,e){return((t=t.x)[0]<0?t[1]-Oa-Da:Oa-t[1])-((e=e.x)[0]<0?e[1]-Oa-Da:Oa-e[1])}function Re(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?ka:-ka,u=ma(o-n);ma(u-ka)<Da?(t.point(n,r=(r+a)/2>0?Oa:-Oa),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=ka&&(ma(n-i)<Da&&(n-=i*Da),ma(o-s)<Da&&(o-=s*Da),r=Fe(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Fe(t,e,n,r){var i,o,a=Math.sin(t-n);return ma(a)>Da?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}function Ue(t,e,n,r){var i;if(null==t)i=n*Oa,r.point(-ka,i),r.point(0,i),r.point(ka,i),r.point(ka,0),r.point(ka,-i),r.point(0,-i),r.point(-ka,-i),r.point(-ka,0),r.point(-ka,i);else if(ma(t[0]-e[0])>Da){var o=t[0]<e[0]?ka:-ka;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function ze(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;_s.reset();for(var s=0,u=e.length;u>s;++s){var l=e[s],c=l.length;if(c)for(var h=l[0],f=h[0],p=h[1]/2+ka/4,d=Math.sin(p),m=Math.cos(p),g=1;;){g===c&&(g=0),t=l[g];var y=t[0],v=t[1]/2+ka/4,b=Math.sin(v),_=Math.cos(v),x=y-f,w=x>=0?1:-1,M=w*x,C=M>ka,P=d*b;if(_s.add(Math.atan2(P*w*Math.sin(M),m*_+P*Math.cos(M))),o+=C?x+w*Na:x,C^f>=n^y>=n){var E=ye(me(h),me(t));_e(E);var T=ye(i,E);_e(T);var S=(C^x>=0?-1:1)*nt(T[2]);(r>S||r===S&&(E[0]||E[1]))&&(a+=C^x>=0?1:-1)}if(!g++)break;f=y,d=b,m=_,h=t}}return(-Da>o||Da>o&&0>_s)^1&a}function Ve(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],m=e(h,f),g=a?m?0:i(h,f):m?i(h+(0>h?ka:-ka),f):0;if(!n&&(l=u=m)&&t.lineStart(),m!==u&&(p=r(n,d),(we(n,p)||we(d,p))&&(d[0]+=Da,d[1]+=Da,m=e(d[0],d[1]))),m!==u)c=0,m?(t.lineStart(),p=r(d,n),t.point(p[0],p[1])):(p=r(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(s&&n&&a^m){var y;g&o||!(y=r(d,n,!0))||(c=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!m||n&&we(n,d)||t.point(d[0],d[1]),n=d,u=m,o=g},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function r(t,e,n){var r=me(t),i=me(e),a=[1,0,0],s=ye(r,i),u=ge(s,s),l=s[0],c=u-l*l;if(!c)return!n&&t;var h=o*u/c,f=-o*l/c,p=ye(a,s),d=be(a,h),m=be(s,f);ve(d,m);var g=p,y=ge(d,g),v=ge(g,g),b=y*y-v*(ge(d,d)-1);if(!(0>b)){var _=Math.sqrt(b),x=be(g,(-y-_)/v);if(ve(x,d),x=xe(x),!n)return x;var w,M=t[0],C=e[0],P=t[1],E=e[1];M>C&&(w=M,M=C,C=w);var T=C-M,S=ma(T-ka)<Da,L=S||Da>T;if(!S&&P>E&&(w=P,P=E,E=w),L?S?P+E>0^x[1]<(ma(x[0]-M)<Da?P:E):P<=x[1]&&x[1]<=E:T>ka^(M<=x[0]&&x[0]<=C)){var A=be(g,(-y+_)/v);return ve(A,d),[x,xe(A)]}}}function i(e,n){var r=a?t:ka-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(t),a=o>0,s=ma(o)>Da,u=mn(t,6*Ra);return ke(e,n,u,a?[0,-t]:[-ka,t-ka])}function Ge(t,e,n,r){return function(i){var o,a=i.a,s=i.b,u=a.x,l=a.y,c=s.x,h=s.y,f=0,p=1,d=c-u,m=h-l;if(o=t-u,d||!(o>0)){if(o/=d,0>d){if(f>o)return;p>o&&(p=o)}else if(d>0){if(o>p)return;o>f&&(f=o)}if(o=n-u,d||!(0>o)){if(o/=d,0>d){if(o>p)return;o>f&&(f=o)}else if(d>0){if(f>o)return;p>o&&(p=o)}if(o=e-l,m||!(o>0)){if(o/=m,0>m){if(f>o)return;p>o&&(p=o)}else if(m>0){if(o>p)return;o>f&&(f=o)}if(o=r-l,m||!(0>o)){if(o/=m,0>m){if(o>p)return;o>f&&(f=o)}else if(m>0){if(f>o)return;p>o&&(p=o)}return f>0&&(i.a={x:u+f*d,y:l+f*m}),1>p&&(i.b={x:u+p*d,y:l+p*m}),i}}}}}}function We(t,e,n,r){function i(r,i){return ma(r[0]-t)<Da?i>0?0:3:ma(r[0]-n)<Da?i>0?2:1:ma(r[1]-e)<Da?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t){for(var e=0,n=g.length,r=t[1],i=0;n>i;++i)for(var o,a=1,s=g[i],u=s.length,l=s[0];u>a;++a)o=s[a],l[1]<=r?o[1]>r&&tt(l,o,t)>0&&++e:o[1]<=r&&tt(l,o,t)<0&&--e,l=o;return 0!==e}function l(o,s,u,l){var c=0,h=0;if(null==o||(c=i(o,u))!==(h=i(s,u))||a(o,s)<0^u>0){do l.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+u+4)%4)!==h)}else l.point(s[0],s[1])}function c(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function h(t,e){c(t,e)&&s.point(t,e)}function f(){L.point=d,g&&g.push(y=[]),C=!0,M=!1,x=w=NaN}function p(){m&&(d(v,b),_&&M&&T.rejoin(),m.push(T.buffer())),L.point=h,M&&s.lineEnd()}function d(t,e){t=Math.max(-Bs,Math.min(Bs,t)),e=Math.max(-Bs,Math.min(Bs,e));var n=c(t,e);if(g&&y.push([t,e]),C)v=t,b=e,_=n,C=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&M)s.point(t,e);else{var r={a:{x:x,y:w},b:{x:t,y:e}};S(r)?(M||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),P=!1):n&&(s.lineStart(),s.point(t,e),P=!1)}x=t,w=e,M=n}var m,g,y,v,b,_,x,w,M,C,P,E=s,T=Be(),S=Ge(t,e,n,r),L={point:h,lineStart:f,lineEnd:p,polygonStart:function(){s=T,m=[],g=[],P=!0},polygonEnd:function(){s=E,m=ra.merge(m);var e=u([t,r]),n=P&&e,i=m.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&Ae(m,o,e,l,s),s.polygonEnd()),m=g=y=null}};return L}}function He(t){var e=0,n=ka/3,r=sn(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*ka/180,n=t[1]*ka/180):[e/ka*180,n/ka*180]},i}function je(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,nt((o-(t*t+n*n)*i*i)/(2*i))]},n}function Xe(){function t(t,e){Rs+=i*t-r*e,r=t,i=e}var e,n,r,i;Gs.point=function(o,a){Gs.point=t,e=r=o,n=i=a},Gs.lineEnd=function(){t(e,n)}}function Ye(t,e){Fs>t&&(Fs=t),t>zs&&(zs=t),Us>e&&(Us=e),e>Vs&&(Vs=e)}function qe(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function r(){s.point=t}function i(){a.push("Z")}var o=Ze(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=Ze(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Ze(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ke(t,e){Cs+=t,Ps+=e,++Es}function Je(){function t(t,r){var i=t-e,o=r-n,a=Math.sqrt(i*i+o*o);Ts+=a*(e+t)/2,Ss+=a*(n+r)/2,Ls+=a,Ke(e=t,n=r)}var e,n;Hs.point=function(r,i){Hs.point=t,Ke(e=r,n=i)}}function Qe(){Hs.point=Ke}function $e(){function t(t,e){var n=t-r,o=e-i,a=Math.sqrt(n*n+o*o);Ts+=a*(r+t)/2,Ss+=a*(i+e)/2,Ls+=a,a=i*t-r*e,As+=a*(r+t),Ds+=a*(i+e),Is+=3*a,Ke(r=t,i=e)}var e,n,r,i;Hs.point=function(o,a){Hs.point=t,Ke(e=r=o,n=i=a)},Hs.lineEnd=function(){t(e,n)}}function tn(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,Na)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return a=t,s},result:w};return s}function en(t){function e(t){return(s?r:n)(t)}function n(e){return on(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){b=NaN,C.point=o,e.lineStart()}function o(n,r){var o=me([n,r]),a=t(n,r);i(b,_,v,x,w,M,b=a[0],_=a[1],v=n,x=o[0],w=o[1],M=o[2],s,e),e.point(b,_)}function a(){C.point=n,e.lineEnd()}function u(){r(),C.point=l,C.lineEnd=c}function l(t,e){o(h=t,f=e),p=b,d=_,m=x,g=w,y=M,C.point=o}function c(){i(b,_,v,x,w,M,p,d,h,m,g,y,s,e),C.lineEnd=a,a()}var h,f,p,d,m,g,y,v,b,_,x,w,M,C={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),C.lineStart=u},polygonEnd:function(){e.polygonEnd(),C.lineStart=r}};return C}function i(e,n,r,s,u,l,c,h,f,p,d,m,g,y){var v=c-e,b=h-n,_=v*v+b*b;if(_>4*o&&g--){var x=s+p,w=u+d,M=l+m,C=Math.sqrt(x*x+w*w+M*M),P=Math.asin(M/=C),E=ma(ma(M)-1)<Da||ma(r-f)<Da?(r+f)/2:Math.atan2(w,x),T=t(E,P),S=T[0],L=T[1],A=S-e,D=L-n,I=b*A-v*D;(I*I/_>o||ma((v*A+b*D)/_-.5)>.3||a>s*p+u*d+l*m)&&(i(e,n,r,s,u,l,S,L,E,x/=C,w/=C,M,g,y),y.point(S,L),i(S,L,E,x,w,M,c,h,f,p,d,m,g,y))}}var o=.5,a=Math.cos(30*Ra),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function nn(t){var e=en(function(e,n){return t([e*Fa,n*Fa])});return function(t){return un(e(t))}}function rn(t){this.stream=t}function on(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function an(t){return sn(function(){return t})()}function sn(t){function e(t){return t=s(t[0]*Ra,t[1]*Ra),[t[0]*f+u,l-t[1]*f]}function n(t){return t=s.invert((t[0]-u)/f,(l-t[1])/f),t&&[t[0]*Fa,t[1]*Fa]}function r(){s=Se(a=hn(y,v,_),o);var t=o(m,g);return u=p-t[0]*f,l=d+t[1]*f,i()}function i(){return c&&(c.valid=!1,c=null),e}var o,a,s,u,l,c,h=en(function(t,e){return t=o(t,e),[t[0]*f+u,l-t[1]*f]}),f=150,p=480,d=250,m=0,g=0,y=0,v=0,_=0,x=Ns,w=b,M=null,C=null;return e.stream=function(t){return c&&(c.valid=!1),c=un(x(a,h(w(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(x=null==t?(M=t,Ns):Ve((M=+t)*Ra),i()):M},e.clipExtent=function(t){return arguments.length?(C=t,w=t?We(t[0][0],t[0][1],t[1][0],t[1][1]):b,i()):C},e.scale=function(t){return arguments.length?(f=+t,r()):f},e.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},e.center=function(t){return arguments.length?(m=t[0]%360*Ra,g=t[1]%360*Ra,r()):[m*Fa,g*Fa]},e.rotate=function(t){return arguments.length?(y=t[0]%360*Ra,v=t[1]%360*Ra,_=t.length>2?t[2]%360*Ra:0,r()):[y*Fa,v*Fa,_*Fa]},ra.rebind(e,h,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function un(t){return on(t,function(e,n){t.point(e*Ra,n*Ra)})}function ln(t,e){return[t,e]}function cn(t,e){return[t>ka?t-Na:-ka>t?t+Na:t,e]}function hn(t,e,n){return t?e||n?Se(pn(t),dn(e,n)):pn(t):e||n?dn(e,n):cn}function fn(t){return function(e,n){return e+=t,[e>ka?e-Na:-ka>e?e+Na:e,n]}}function pn(t){var e=fn(t);return e.invert=fn(-t),e}function dn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*r+s*i;return[Math.atan2(u*o-c*a,s*r-l*i),nt(c*o+u*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*o-u*a;return[Math.atan2(u*o+l*a,s*r+c*i),nt(c*r-s*i)]},n}function mn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var u=a*e;null!=i?(i=gn(n,i),o=gn(n,o),(a>0?o>i:i>o)&&(i+=a*Na)):(i=t+a*Na,o=t-.5*u);for(var l,c=i;a>0?c>o:o>c;c-=u)s.point((l=xe([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function gn(t,e){var n=me(e);n[0]-=t,_e(n);var r=et(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Da)%(2*Math.PI)}function yn(t,e,n){var r=ra.range(t,e-Da,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function vn(t,e,n){var r=ra.range(t,e-Da,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function bn(t){return t.source}function _n(t){return t.target}function xn(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),s=Math.sin(r),u=i*Math.cos(t),l=i*Math.sin(t),c=a*Math.cos(n),h=a*Math.sin(n),f=2*Math.asin(Math.sqrt(at(r-e)+i*a*at(n-t))),p=1/Math.sin(f),d=f?function(t){var e=Math.sin(t*=f)*p,n=Math.sin(f-t)*p,r=n*u+e*c,i=n*l+e*h,a=n*o+e*s;return[Math.atan2(i,r)*Fa,Math.atan2(a,Math.sqrt(r*r+i*i))*Fa]}:function(){return[t*Fa,e*Fa]};return d.distance=f,d}function wn(){function t(t,i){var o=Math.sin(i*=Ra),a=Math.cos(i),s=ma((t*=Ra)-e),u=Math.cos(s);js+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*u)*s),n*o+r*a*u),e=t,n=o,r=a}var e,n,r;Xs.point=function(i,o){e=i*Ra,n=Math.sin(o*=Ra),r=Math.cos(o),Xs.point=t},Xs.lineEnd=function(){Xs.point=Xs.lineEnd=w}}function Mn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}function Cn(t,e){function n(t,e){a>0?-Oa+Da>e&&(e=-Oa+Da):e>Oa-Da&&(e=Oa-Da);var n=a/Math.pow(i(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(ka/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,r=$(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/r,1/o))-Oa]},n):En}function Pn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return ma(i)<Da?ln:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-$(i)*Math.sqrt(t*t+n*n)]},n)}function En(t,e){return[t,Math.log(Math.tan(ka/4+e/2))]}function Tn(t){var e,n=an(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=ka*r(),u=i();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function Sn(t,e){return[Math.log(Math.tan(ka/4+e/2)),-t]}function Ln(t){return t[0]}function An(t){return t[1]}function Dn(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&tt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function In(t,e){return t[0]-e[0]||t[1]-e[1]}function kn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Nn(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,u=t[1],l=n[1],c=e[1]-u,h=r[1]-l,f=(s*(u-l)-h*(i-o))/(h*a-s*c);return[i+f*a,u+f*c]}function Bn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function On(){rr(this),this.edge=this.site=this.circle=null}function Rn(t){var e=iu.pop()||new On;return e.site=t,e}function Fn(t){qn(t),eu.remove(t),iu.push(t),rr(t)}function Un(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];Fn(t);for(var u=o;u.circle&&ma(n-u.circle.x)<Da&&ma(r-u.circle.cy)<Da;)o=u.P,s.unshift(u),Fn(u),u=o;s.unshift(u),qn(u);for(var l=a;l.circle&&ma(n-l.circle.x)<Da&&ma(r-l.circle.cy)<Da;)a=l.N,s.push(l),Fn(l),l=a;s.push(l),qn(l);var c,h=s.length;for(c=1;h>c;++c)l=s[c],u=s[c-1],tr(l.edge,u.site,l.site,i);u=s[0],l=s[h-1],l.edge=Qn(u.site,l.site,null,i),Yn(u),Yn(l)}function zn(t){for(var e,n,r,i,o=t.x,a=t.y,s=eu._;s;)if(r=Vn(s,a)-o,r>Da)s=s.L;else{if(i=o-Gn(s,a),!(i>Da)){r>-Da?(e=s.P,n=s):i>-Da?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=Rn(t);if(eu.insert(e,u),e||n){if(e===n)return qn(e),n=Rn(e.site),eu.insert(u,n),u.edge=n.edge=Qn(e.site,u.site),Yn(e),void Yn(n);if(!n)return void(u.edge=Qn(e.site,u.site));qn(e),qn(n);var l=e.site,c=l.x,h=l.y,f=t.x-c,p=t.y-h,d=n.site,m=d.x-c,g=d.y-h,y=2*(f*g-p*m),v=f*f+p*p,b=m*m+g*g,_={x:(g*v-p*b)/y+c,y:(f*b-m*v)/y+h};tr(n.edge,l,d,_),u.edge=Qn(l,t,null,_),n.edge=Qn(t,d,null,_),Yn(e),Yn(n)}}function Vn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n.x,u=n.y,l=u-e;if(!l)return s;var c=s-r,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+s)/2}function Gn(t,e){var n=t.N;if(n)return Vn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Wn(t){this.site=t,this.edges=[]}function Hn(t){for(var e,n,r,i,o,a,s,u,l,c,h=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],m=tu,g=m.length;g--;)if(o=m[g],o&&o.prepare())for(s=o.edges,u=s.length,a=0;u>a;)c=s[a].end(),r=c.x,i=c.y,l=s[++a%u].start(),e=l.x,n=l.y,(ma(r-e)>Da||ma(i-n)>Da)&&(s.splice(a,0,new er($n(o.site,c,ma(r-h)<Da&&d-i>Da?{x:h,y:ma(e-h)<Da?n:d}:ma(i-d)<Da&&f-r>Da?{x:ma(n-d)<Da?e:f,y:d}:ma(r-f)<Da&&i-p>Da?{x:f,y:ma(e-f)<Da?n:p}:ma(i-p)<Da&&r-h>Da?{x:ma(n-p)<Da?e:h,y:p}:null),o.site,null)),++u)}function jn(t,e){return e.angle-t.angle}function Xn(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,u=r.x-a,l=r.y-s,c=o.x-a,h=o.y-s,f=2*(u*h-l*c);if(!(f>=-Ia)){var p=u*u+l*l,d=c*c+h*h,m=(h*p-l*d)/f,g=(u*d-c*p)/f,h=g+s,y=ou.pop()||new Xn;y.arc=t,y.site=i,y.x=m+a,y.y=h+Math.sqrt(m*m+g*g),y.cy=h,t.circle=y;for(var v=null,b=ru._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){v=b.P;break}b=b.L}else{if(!b.R){v=b;break}b=b.R}ru.insert(v,y),v||(nu=y)}}}}function qn(t){var e=t.circle;e&&(e.P||(nu=e.N),ru.remove(e),ou.push(e),rr(e),t.circle=null)}function Zn(t){for(var e,n=$s,r=Ge(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!Kn(e,t)||!r(e)||ma(e.a.x-e.b.x)<Da&&ma(e.a.y-e.b.y)<Da)&&(e.a=e.b=null,n.splice(i,1))}function Kn(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],u=e[0][1],l=e[1][1],c=t.l,h=t.r,f=c.x,p=c.y,d=h.x,m=h.y,g=(f+d)/2,y=(p+m)/2;if(m===p){if(a>g||g>=s)return;if(f>d){if(o){if(o.y>=l)return}else o={x:g,y:u};n={x:g,y:l}}else{if(o){if(o.y<u)return}else o={x:g,y:l};n={x:g,y:u}}}else if(r=(f-d)/(m-p),i=y-r*g,-1>r||r>1)if(f>d){if(o){if(o.y>=l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(o){if(o.y<u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(m>p){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Jn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Qn(t,e,n,r){var i=new Jn(t,e);return $s.push(i),n&&tr(i,t,e,n),r&&tr(i,e,t,r),tu[t.i].edges.push(new er(i,t,e)),tu[e.i].edges.push(new er(i,e,t)),i}function $n(t,e,n){var r=new Jn(t,null);return r.a=e,r.b=n,$s.push(r),r}function tr(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function er(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function nr(){this._=null}function rr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ir(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ar(t){for(;t.L;)t=t.L;return t}function sr(t,e){var n,r,i,o=t.sort(ur).pop();for($s=[],tu=new Array(t.length),eu=new nr,ru=new nr;;)if(i=nu,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&(tu[o.i]=new Wn(o),zn(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;Un(i.arc)}e&&(Zn(e),Hn(e));var a={cells:tu,edges:$s};return eu=ru=$s=tu=null,a}function ur(t,e){return e.y-t.y||e.x-t.x}function lr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function cr(t){return t.x}function hr(t){return t.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pr(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),u=e.nodes;u[0]&&pr(t,u[0],n,r,a,s),u[1]&&pr(t,u[1],a,r,i,s),u[2]&&pr(t,u[2],n,s,a,o),u[3]&&pr(t,u[3],a,s,i,o)}}function dr(t,e,n,r,i,o,a){var s,u=1/0;return function l(t,c,h,f,p){if(!(c>o||h>a||r>f||i>p)){if(d=t.point){var d,m=e-t.x,g=n-t.y,y=m*m+g*g;if(u>y){var v=Math.sqrt(u=y);r=e-v,i=n-v,o=e+v,a=n+v,s=d}}for(var b=t.nodes,_=.5*(c+f),x=.5*(h+p),w=e>=_,M=n>=x,C=M<<1|w,P=C+4;P>C;++C)if(t=b[3&C])switch(3&C){case 0:l(t,c,h,_,x);break;case 1:l(t,_,h,f,x);break;case 2:l(t,c,x,_,p);break;case 3:l(t,_,x,f,p)}}}(t,r,i,o,a),s}function mr(t,e){t=ra.rgb(t),e=ra.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,s=e.b-i;return function(t){return"#"+xt(Math.round(n+o*t))+xt(Math.round(r+a*t))+xt(Math.round(i+s*t))}}function gr(t,e){var n,r={},i={};for(n in t)n in e?r[n]=br(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function yr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vr(t,e){var n,r,i,o=su.lastIndex=uu.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=su.exec(t))&&(r=uu.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:yr(n,r)})),o=uu.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;e>r;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function br(t,e){for(var n,r=ra.interpolators.length;--r>=0&&!(n=ra.interpolators[r](t,e)););return n}function _r(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(br(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function xr(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function wr(t){return function(e){return 1-t(1-e)}}function Mr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Cr(t){return t*t}function Pr(t){return t*t*t}function Er(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Tr(t){return function(e){return Math.pow(e,t)}}function Sr(t){return 1-Math.cos(t*Oa)}function Lr(t){return Math.pow(2,10*(t-1))}function Ar(t){return 1-Math.sqrt(1-t*t)}function Dr(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Na*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Na/e)}}function Ir(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function kr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Nr(t,e){t=ra.hcl(t),e=ra.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,a=e.c-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ht(n+o*t,r+a*t,i+s*t)+""}}function Br(t,e){t=ra.hsl(t),e=ra.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,a=e.s-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return lt(n+o*t,r+a*t,i+s*t)+""}}function Or(t,e){t=ra.lab(t),e=ra.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,s=e.b-i;return function(t){return pt(n+o*t,r+a*t,i+s*t)+""}}function Rr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Fr(t){var e=[t.a,t.b],n=[t.c,t.d],r=zr(e),i=Ur(e,n),o=zr(Vr(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Fa,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Fa:0}function Ur(t,e){return t[0]*e[0]+t[1]*e[1]}function zr(t){var e=Math.sqrt(Ur(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Vr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Gr(t,e){var n,r=[],i=[],o=ra.transform(t),a=ra.transform(e),s=o.translate,u=a.translate,l=o.rotate,c=a.rotate,h=o.skew,f=a.skew,p=o.scale,d=a.scale;return s[0]!=u[0]||s[1]!=u[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:yr(s[0],u[0])},{i:3,x:yr(s[1],u[1])})):u[0]||u[1]?r.push("translate("+u+")"):r.push(""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:yr(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),h!=f?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:yr(h,f)}):f&&r.push(r.pop()+"skewX("+f+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:yr(p[0],d[0])},{i:n-2,x:yr(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(t){for(var e,o=-1;++o<n;)r[(e=i[o]).i]=e.x(t);return r.join("")}}function Wr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Hr(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function jr(t){for(var e=t.source,n=t.target,r=Yr(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Xr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Yr(t,e){if(t===e)return t;for(var n=Xr(t),r=Xr(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function qr(t){t.fixed|=2}function Zr(t){t.fixed&=-7}function Kr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Jr(t){t.fixed&=-5}function Qr(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,u=-1;++u<s;)o=a[u],null!=o&&(Qr(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,r+=l*t.point.x,i+=l*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function $r(t,e){return ra.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=oi,t}function ti(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ei(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function ni(t){return t.children}function ri(t){return t.value}function ii(t,e){return e.value-t.value}function oi(t){return ra.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function ai(t){return t.x}function si(t){return t.y}function ui(t,e,n){t.y0=e,t.y=n}function li(t){return ra.range(t.length)}function ci(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function hi(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function fi(t){return t.reduce(pi,0)}function pi(t,e){return t+e[1]}function di(t,e){return mi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function mi(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function gi(t){return[ra.min(t),ra.max(t)]}function yi(t,e){return t.value-e.value}function vi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function bi(t,e){t._pack_next=e,e._pack_prev=t}function _i(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function xi(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(l=n.length)){var n,r,i,o,a,s,u,l,c=1/0,h=-(1/0),f=1/0,p=-(1/0);if(n.forEach(wi),r=n[0],r.x=-r.r,r.y=0,e(r),l>1&&(i=n[1],i.x=i.r,i.y=0,e(i),l>2))for(o=n[2],Pi(r,i,o),e(o),vi(r,o),r._pack_prev=o,vi(o,i),i=r._pack_next,a=3;l>a;a++){Pi(r,i,o=n[a]);var d=0,m=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,m++)if(_i(s,o)){d=1;break}if(1==d)for(u=r._pack_prev;u!==s._pack_prev&&!_i(u,o);u=u._pack_prev,g++);d?(g>m||m==g&&i.r<r.r?bi(r,i=s):bi(r=u,i),a--):(vi(r,o),i=o,e(o))}var y=(c+h)/2,v=(f+p)/2,b=0;for(a=0;l>a;a++)o=n[a],o.x-=y,o.y-=v,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(Mi)}}function wi(t){t._pack_next=t._pack_prev=t}function Mi(t){delete t._pack_next,delete t._pack_prev}function Ci(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ci(i[o],e,n,r)}function Pi(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o;a*=a,r*=r;var u=.5+(r-a)/(2*s),l=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+u*i+l*o,n.y=t.y+u*o-l*i}else n.x=t.x+r,n.y=t.y}function Ei(t,e){return t.parent==e.parent?1:2}function Ti(t){var e=t.children;return e.length?e[0]:t.t}function Si(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Li(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Ai(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Di(t,e,n){return t.a.parent===e.parent?t.a:n}function Ii(t){return 1+ra.max(t,function(t){return t.y})}function ki(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ni(t){var e=t.children;return e&&e.length?Ni(e[0]):t}function Bi(t){var e,n=t.children;return n&&(e=n.length)?Bi(n[e-1]):t}function Oi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ri(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Fi(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Ui(t){return t.rangeExtent?t.rangeExtent():Fi(t.range());
}function zi(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Vi(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Gi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:bu}function Wi(t,e,n,r){var i=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=ra.bisect(t,e,1,s)-1;return o[n](i[n](e))}}function Hi(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Wi:zi,u=r?Hr:Wr;return a=i(t,e,u,n),s=i(e,t,u,br),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(Rr)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return qi(t,e)},o.tickFormat=function(e,n){return Zi(t,e,n)},o.nice=function(e){return Xi(t,e),i()},o.copy=function(){return Hi(t,e,n,r)},i()}function ji(t,e){return ra.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Xi(t,e){return Vi(t,Gi(Yi(t,e)[2]))}function Yi(t,e){null==e&&(e=10);var n=Fi(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function qi(t,e){return ra.range.apply(ra,Yi(t,e))}function Zi(t,e,n){var r=Yi(t,e);if(n){var i=ss.exec(n);if(i.shift(),"s"===i[8]){var o=ra.formatPrefix(Math.max(ma(r[0]),ma(r[1])));return i[7]||(i[7]="."+Ki(o.scale(r[2]))),i[8]="f",n=ra.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+Ji(i[8],r)),n=i.join("")}else n=",."+Ki(r[2])+"f";return ra.format(n)}function Ki(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Ji(t,e){var n=Ki(e[2]);return t in _u?Math.abs(n-Ki(Math.max(ma(e[0]),ma(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Qi(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(i(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),a):e},a.nice=function(){var e=Vi(r.map(i),n?Math:wu);return t.domain(e),r=e.map(o),a},a.ticks=function(){var t=Fi(r),a=[],s=t[0],u=t[1],l=Math.floor(i(s)),c=Math.ceil(i(u)),h=e%1?2:e;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var f=1;h>f;f++)a.push(o(l)*f);a.push(o(l))}else for(a.push(o(l));l++<c;)for(var f=h-1;f>0;f--)a.push(o(l)*f);for(l=0;a[l]<s;l++);for(c=a.length;a[c-1]>u;c--);a=a.slice(l,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return xu;arguments.length<2?e=xu:"function"!=typeof e&&(e=ra.format(e));var r,s=Math.max(.1,t/a.ticks().length),u=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/o(u(i(t)+r))<=s?e(t):""}},a.copy=function(){return Qi(t.copy(),e,n,r)},ji(a,t)}function $i(t,e,n){function r(e){return t(i(e))}var i=to(e),o=to(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return qi(n,t)},r.tickFormat=function(t,e){return Zi(n,t,e)},r.nice=function(t){return r.domain(Xi(n,t))},r.exponent=function(a){return arguments.length?(i=to(e=a),o=to(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return $i(t.copy(),e,n)},ji(r,t)}function to(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function eo(t,e){function n(n){return o[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%o.length]}function r(e,n){return ra.range(t.length).map(function(t){return e+n*t})}var i,o,a;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new c;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=t.length<2?(u=(u+l)/2,0):(l-u)/(t.length-1+s);return o=r(u+c*s/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=t.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(t.length-1+s)|0;return o=r(u+Math.round(c*s/2+(l-u-(t.length-1+s)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],h=i[1-l],f=(h-c)/(t.length-s+2*u);return o=r(c+f*u,f),l&&o.reverse(),a=f*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],h=i[1-l],f=Math.floor((h-c)/(t.length-s+2*u));return o=r(c+Math.round((h-c-(t.length-s)*f)/2),f),l&&o.reverse(),a=Math.round(f*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Fi(e.a[0])},n.copy=function(){return eo(t,e)},n.domain(t)}function no(t,e){function n(){var n=0,r=e.length;for(s=[];++n<r;)s[n-1]=ra.quantile(t,n/r);return a}function a(t){return isNaN(t=+t)?void 0:e[ra.bisect(s,t)]}var s;return a.domain=function(e){return arguments.length?(t=e.map(i).filter(o).sort(r),n()):t},a.range=function(t){return arguments.length?(e=t,n()):e},a.quantiles=function(){return s},a.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},a.copy=function(){return no(t,e)},n()}function ro(t,e,n){function r(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/o+t,[e,e+1/o]},r.copy=function(){return ro(t,e,n)},i()}function io(t,e){function n(n){return n>=n?e[ra.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return io(t,e)},n}function oo(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return qi(t,e)},e.tickFormat=function(e,n){return Zi(t,e,n)},e.copy=function(){return oo(t)},e}function ao(){return 0}function so(t){return t.innerRadius}function uo(t){return t.outerRadius}function lo(t){return t.startAngle}function co(t){return t.endAngle}function ho(t){return t&&t.padAngle}function fo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function po(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),u=s*a,l=-s*o,c=t[0]+u,h=t[1]+l,f=e[0]+u,p=e[1]+l,d=(c+f)/2,m=(h+p)/2,g=f-c,y=p-h,v=g*g+y*y,b=n-r,_=c*p-f*h,x=(0>y?-1:1)*Math.sqrt(b*b*v-_*_),w=(_*y-g*x)/v,M=(-_*g-y*x)/v,C=(_*y+g*x)/v,P=(-_*g+y*x)/v,E=w-d,T=M-m,S=C-d,L=P-m;return E*E+T*T>S*S+L*L&&(w=C,M=P),[[w-u,M-l],[w*n/b,M*n/b]]}function mo(t){function e(e){function a(){l.push("M",o(t(c),s))}for(var u,l=[],c=[],h=-1,f=e.length,p=Tt(n),d=Tt(r);++h<f;)i.call(this,u=e[h],h)?c.push([+p.call(this,u,h),+d.call(this,u,h)]):c.length&&(a(),c=[]);return c.length&&a(),l.length?l.join(""):null}var n=Ln,r=An,i=Le,o=go,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Su.get(t)||go).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function go(t){return t.join("L")}function yo(t){return go(t)+"Z"}function vo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function bo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function _o(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function xo(t,e){return t.length<4?go(t):t[1]+Co(t.slice(1,-1),Po(t,e))}function wo(t,e){return t.length<3?go(t):t[0]+Co((t.push(t[0]),t),Po([t[t.length-2]].concat(t,[t[1]]),e))}function Mo(t,e){return t.length<3?go(t):t[0]+Co(t,Po(t,e))}function Co(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return go(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,u=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],u=2),e.length>1){s=e[1],o=t[u],u++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var l=2;l<e.length;l++,u++)o=t[u],s=e[l],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[u];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Po(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,u=t.length;++s<u;)n=o,o=a,a=t[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Eo(t){if(t.length<3)return go(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],u=[i,",",o,"L",Ao(Du,a),",",Ao(Du,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Do(u,a,s);return t.pop(),u.push("L",r),u.join("")}function To(t){if(t.length<4)return go(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);for(n.push(Ao(Du,o)+","+Ao(Du,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Do(n,o,a);return n.join("")}function So(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];++r<4;)n=t[r%i],a.push(n[0]),s.push(n[1]);for(e=[Ao(Du,a),",",Ao(Du,s)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Do(e,a,s);return e.join("")}function Lo(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,u=t[n][1]-a,l=-1;++l<=n;)r=t[l],i=l/n,r[0]=e*r[0]+(1-e)*(o+i*s),r[1]=e*r[1]+(1-e)*(a+i*u);return Eo(t)}function Ao(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Do(t,e,n){t.push("C",Ao(Lu,e),",",Ao(Lu,n),",",Ao(Au,e),",",Ao(Au,n),",",Ao(Du,e),",",Ao(Du,n))}function Io(t,e){return(e[1]-t[1])/(e[0]-t[0])}function ko(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Io(i,o);++e<n;)r[e]=(a+(a=Io(i=o,o=t[e+1])))/2;return r[e]=a,r}function No(t){for(var e,n,r,i,o=[],a=ko(t),s=-1,u=t.length-1;++s<u;)e=Io(t[s],t[s+1]),ma(e)<Da?a[s]=a[s+1]=0:(n=a[s]/e,r=a[s+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));for(s=-1;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function Bo(t){return t.length<3?go(t):t[0]+Co(t,No(t))}function Oo(t){for(var e,n,r,i=-1,o=t.length;++i<o;)e=t[i],n=e[0],r=e[1]-Oa,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Ro(t){function e(e){function u(){m.push("M",s(t(y),h),c,l(t(g.reverse()),h),"Z")}for(var f,p,d,m=[],g=[],y=[],v=-1,b=e.length,_=Tt(n),x=Tt(i),w=n===r?function(){return p}:Tt(r),M=i===o?function(){return d}:Tt(o);++v<b;)a.call(this,f=e[v],v)?(g.push([p=+_.call(this,f,v),d=+x.call(this,f,v)]),y.push([+w.call(this,f,v),+M.call(this,f,v)])):g.length&&(u(),g=[],y=[]);return g.length&&u(),m.length?m.join(""):null}var n=Ln,r=Ln,i=0,o=An,a=Le,s=go,u=s.key,l=s,c="L",h=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?s=t:(s=Su.get(t)||go).key,l=s.reverse||s,c=s.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Fo(t){return t.radius}function Uo(t){return[t.x,t.y]}function zo(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Oa;return[n*Math.cos(r),n*Math.sin(r)]}}function Vo(){return 64}function Go(){return"circle"}function Wo(t){var e=Math.sqrt(t/ka);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Ho(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function jo(t,e,n){return _a(t,Fu),t.namespace=e,t.id=n,t}function Xo(t,e,n,r){var i=t.id,o=t.namespace;return H(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Yo(t){return null==t&&(t=""),function(){this.textContent=t}}function qo(t){return null==t?"__transition__":"__transition_"+t+"__"}function Zo(t,e,n,r,i){var o=t[n]||(t[n]={active:0,count:0}),a=o[r];if(!a){var s=i.time;a=o[r]={tween:new c,time:s,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++o.count,ra.timer(function(i){function u(n){if(o.active>r)return c();var i=o[o.active];i&&(--o.count,delete o[o.active],i.event&&i.event.interrupt.call(t,t.__data__,i.index)),o.active=r,a.event&&a.event.start.call(t,t.__data__,e),a.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&m.push(r)}),f=a.ease,h=a.duration,ra.timer(function(){return d.c=l(n||1)?Le:l,1},0,s)}function l(n){if(o.active!==r)return 1;for(var i=n/h,s=f(i),u=m.length;u>0;)m[--u].call(t,s);return i>=1?(a.event&&a.event.end.call(t,t.__data__,e),c()):void 0}function c(){return--o.count?delete o[r]:delete t[n],1}var h,f,p=a.delay,d=is,m=[];return d.t=p+s,i>=p?u(i-p):void(d.c=u)},0,s)}}function Ko(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Jo(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function Qo(t){return t.toISOString()}function $o(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,o=ra.bisect(Yu,i);return o==Yu.length?[e.year,Yi(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/Yu[o-1]<Yu[o]/i?o-1:o]:[Ku,Yi(t,n)[2]]}return r.invert=function(e){return ta(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(ta)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,ta(+n+1),e).length}var o=r.domain(),a=Fi(o),s=null==t?i(a,10):"number"==typeof t&&i(a,t);return s&&(t=s[0],e=s[1]),r.domain(Vi(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=ta(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=ta(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Fi(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],ta(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return $o(t.copy(),e,n)},ji(r,t)}function ta(t){return new Date(t)}function ea(t){return JSON.parse(t.responseText)}function na(t){var e=aa.createRange();return e.selectNode(aa.body),e.createContextualFragment(t.responseText)}var ra={version:"3.5.6"},ia=[].slice,oa=function(t){return ia.call(t)},aa=this.document;if(aa)try{oa(aa.documentElement.childNodes)[0].nodeType}catch(sa){oa=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),aa)try{aa.createElement("DIV").style.setProperty("opacity",0,"")}catch(ua){var la=this.Element.prototype,ca=la.setAttribute,ha=la.setAttributeNS,fa=this.CSSStyleDeclaration.prototype,pa=fa.setProperty;la.setAttribute=function(t,e){ca.call(this,t,e+"")},la.setAttributeNS=function(t,e,n){ha.call(this,t,e,n+"")},fa.setProperty=function(t,e,n){pa.call(this,t,e+"",n)}}ra.ascending=r,ra.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},ra.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},ra.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},ra.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},ra.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)o(n=+t[a])&&(r+=n);else for(;++a<i;)o(n=+e.call(t,t[a],a))&&(r+=n);return r},ra.mean=function(t,e){var n,r=0,a=t.length,s=-1,u=a;if(1===arguments.length)for(;++s<a;)o(n=i(t[s]))?r+=n:--u;else for(;++s<a;)o(n=i(e.call(t,t[s],s)))?r+=n:--u;return u?r/u:void 0},ra.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},ra.median=function(t,e){var n,a=[],s=t.length,u=-1;if(1===arguments.length)for(;++u<s;)o(n=i(t[u]))&&a.push(n);else for(;++u<s;)o(n=i(e.call(t,t[u],u)))&&a.push(n);return a.length?ra.quantile(a.sort(r),.5):void 0},ra.variance=function(t,e){var n,r,a=t.length,s=0,u=0,l=-1,c=0;if(1===arguments.length)for(;++l<a;)o(n=i(t[l]))&&(r=n-s,s+=r/++c,u+=r*(n-s));else for(;++l<a;)o(n=i(e.call(t,t[l],l)))&&(r=n-s,s+=r/++c,u+=r*(n-s));return c>1?u/(c-1):void 0},ra.deviation=function(){var t=ra.variance.apply(this,arguments);return t?Math.sqrt(t):t};var da=a(r);ra.bisectLeft=da.left,ra.bisect=ra.bisectRight=da.right,ra.bisector=function(t){return a(1===t.length?function(e,n){return r(t(e),n)}:t)},ra.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},ra.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},ra.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],o=new Array(0>r?0:r);r>n;)o[n]=[e=i,i=t[++n]];return o},ra.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=ra.min(arguments,s),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},ra.transpose=function(t){return ra.zip.apply(ra,t)},ra.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ra.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ra.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ra.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n};var ma=Math.abs;ra.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=u(ma(n)),a=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},ra.map=function(t,e){var n=new c;if(t instanceof c)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var ga="__proto__",ya="\x00";l(c,{has:p,get:function(t){return this._[h(t)]},set:function(t,e){return this._[h(t)]=e},remove:d,keys:m,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:f(e),value:this._[e]});return t},size:g,empty:y,forEach:function(t){for(var e in this._)t.call(this,f(e),this._[e])}}),ra.nest=function(){function t(e,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var u,l,h,f,p=-1,d=a.length,m=o[s++],g=new c;++p<d;)(f=g.get(u=m(l=a[p])))?f.push(l):g.set(u,[l]);return e?(l=e(),h=function(n,r){l.set(n,t(e,r,s))}):(l={},h=function(n,r){l[n]=t(e,r,s)}),g.forEach(h),l}function e(t,n){if(n>=o.length)return t;var r=[],i=a[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(ra.map,n,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},ra.set=function(t){var e=new v;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},l(v,{has:p,add:function(t){return this._[h(t+="")]=!0,t},remove:d,values:m,size:g,empty:y,forEach:function(t){for(var e in this._)t.call(this,f(e))}}),ra.behavior={},ra.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=_(t,e,e[n]);return t};var va=["webkit","ms","moz","Moz","o","O"];ra.dispatch=function(){for(var t=new M,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=C(t);return t},M.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ra.event=null,ra.requote=function(t){return t.replace(ba,"\\$&")};var ba=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,_a={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},xa=function(t,e){return e.querySelector(t)},wa=function(t,e){return e.querySelectorAll(t)},Ma=function(t,e){var n=t.matches||t[x(t,"matchesSelector")];return(Ma=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(xa=function(t,e){return Sizzle(t,e)[0]||null},wa=Sizzle,Ma=Sizzle.matchesSelector),ra.selection=function(){return ra.select(aa.documentElement)};var Ca=ra.selection.prototype=[];Ca.select=function(t){var e,n,r,i,o=[];t=L(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return S(o)},Ca.selectAll=function(t){var e,n,r=[];t=A(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,u=a.length;++s<u;)(n=a[s])&&(r.push(e=oa(t.call(n,n.__data__,s,i))),e.parentNode=n);return S(r)};var Pa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ra.ns={prefix:Pa,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),Pa.hasOwnProperty(n)?{space:Pa[n],local:t}:t}},Ca.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=ra.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(D(e,t[e]));return this}return this.each(D(t,e))},Ca.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=N(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!k(t[i]).test(e))return!1;return!0}for(e in t)this.each(B(e,t[e]));return this}return this.each(B(t,e))},Ca.style=function(t,e,r){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(r in t)this.each(R(r,t[r],e));return this}if(2>i){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(R(t,e,r))},Ca.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(F(e,t[e]));return this}return this.each(F(t,e))},Ca.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ca.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ca.append=function(t){return t=U(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ca.insert=function(t,e){return t=U(t),e=L(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Ca.remove=function(){return this.each(z)},Ca.data=function(t,e){function n(t,n){var r,i,o,a=t.length,h=n.length,f=Math.min(a,h),p=new Array(h),d=new Array(h),m=new Array(a);if(e){var g,y=new c,v=new Array(a);for(r=-1;++r<a;)y.has(g=e.call(i=t[r],i.__data__,r))?m[r]=i:y.set(g,i),v[r]=g;for(r=-1;++r<h;)(i=y.get(g=e.call(n,o=n[r],r)))?i!==!0&&(p[r]=i,i.__data__=o):d[r]=V(o),y.set(g,!0);for(r=-1;++r<a;)y.get(v[r])!==!0&&(m[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],o=n[r],i?(i.__data__=o,p[r]=i):d[r]=V(o);for(;h>r;++r)d[r]=V(n[r]);for(;a>r;++r)m[r]=t[r]}d.update=p,d.parentNode=p.parentNode=m.parentNode=t.parentNode,s.push(d),u.push(p),l.push(m)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=j([]),u=S([]),l=S([]);if("function"==typeof t)for(;++o<a;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],t);return u.enter=function(){return s},u.exit=function(){return l},u},Ca.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ca.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=G(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return S(i)},Ca.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Ca.sort=function(t){t=W.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Ca.each=function(t){return H(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Ca.call=function(t){var e=oa(arguments);return t.apply(e[0]=this,e),this},Ca.empty=function(){return!this.node()},Ca.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},Ca.size=function(){var t=0;return H(this,function(){++t}),t};var Ea=[];ra.selection.enter=j,ra.selection.enter.prototype=Ea,Ea.append=Ca.append,Ea.empty=Ca.empty,Ea.node=Ca.node,Ea.call=Ca.call,Ea.size=Ca.size,Ea.select=function(t){for(var e,n,r,i,o,a=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(e.push(r[l]=n=t.call(i.parentNode,o.__data__,l,s)),n.__data__=o.__data__):e.push(null)}return S(a)},Ea.insert=function(t,e){return arguments.length<2&&(e=X(this)),Ca.insert.call(this,t,e)},ra.select=function(e){var n;return"string"==typeof e?(n=[xa(e,aa)],n.parentNode=aa.documentElement):(n=[e],n.parentNode=t(e)),S([n])},ra.selectAll=function(t){var e;return"string"==typeof t?(e=oa(wa(t,aa)),e.parentNode=aa.documentElement):(e=t,e.parentNode=null),S([e])},Ca.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(Y(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(Y(t,e,n))};var Ta=ra.map({mouseenter:"mouseover",mouseleave:"mouseout"});aa&&Ta.forEach(function(t){"on"+t in aa&&Ta.remove(t)});var Sa,La=0;ra.mouse=function(t){return J(t,E())};var Aa=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ra.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=E().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return J(t,r)},ra.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function e(t,e,n,o,a){return function(){function s(){var t,n,r=e(f,m);r&&(t=r[0]-b[0],n=r[1]-b[1],d|=t|n,b=r,p({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:n}))}function u(){e(f,m)&&(y.on(o+g,null).on(a+g,null),v(d&&ra.event.target===h),p({type:"dragend"}))}var l,c=this,h=ra.event.target,f=c.parentNode,p=r.of(c,arguments),d=0,m=t(),g=".drag"+(null==m?"":"-"+m),y=ra.select(n(h)).on(o+g,s).on(a+g,u),v=K(h),b=e(f,m);i?(l=i.apply(c,arguments),l=[l.x-b[0],l.y-b[1]]):l=[0,0],p({type:"dragstart"})}}var r=T(t,"drag","dragstart","dragend"),i=null,o=e(w,ra.mouse,n,"mousemove","mouseup"),a=e(Q,ra.touch,b,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},ra.rebind(t,r,"on")},ra.touches=function(t,e){return arguments.length<2&&(e=E().touches),e?oa(e).map(function(e){var n=J(t,e);return n.identifier=e.identifier,n}):[]};var Da=1e-6,Ia=Da*Da,ka=Math.PI,Na=2*ka,Ba=Na-Da,Oa=ka/2,Ra=ka/180,Fa=180/ka,Ua=Math.SQRT2,za=2,Va=4;ra.interpolateZoom=function(t,e){function n(t){var e=t*v;if(y){var n=it(m),a=o/(za*f)*(n*ot(Ua*e+m)-rt(m));return[r+a*l,i+a*c,o*n/it(Ua*e+m)]}return[r+t*l,i+t*c,o*Math.exp(Ua*e)]}var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2],l=a-r,c=s-i,h=l*l+c*c,f=Math.sqrt(h),p=(u*u-o*o+Va*h)/(2*o*za*f),d=(u*u-o*o-Va*h)/(2*u*za*f),m=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(d*d+1)-d),y=g-m,v=(y||Math.log(u/o))/Ua;return n.duration=1e3*v,n},ra.behavior.zoom=function(){function t(t){t.on(D,h).on(Wa+".zoom",p).on("dblclick.zoom",d).on(N,f)}function e(t){return[(t[0]-C.x)/C.k,(t[1]-C.y)/C.k]}function r(t){return[t[0]*C.k+C.x,t[1]*C.k+C.y]}function i(t){C.k=Math.max(S[0],Math.min(S[1],t))}function o(t,e){e=r(e),C.x+=t[0]-e[0],C.y+=t[1]-e[1]}function a(e,n,r,a){e.__chart__={x:C.x,y:C.y,k:C.k},i(Math.pow(2,a)),o(g=n,r),e=ra.select(e),L>0&&(e=e.transition().duration(L)),e.call(t.event)}function s(){x&&x.domain(_.range().map(function(t){return(t-C.x)/C.k}).map(_.invert)),M&&M.domain(w.range().map(function(t){return(t-C.y)/C.k}).map(w.invert))}function u(t){A++||t({type:"zoomstart"})}function l(t){s(),t({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function c(t){--A||(t({type:"zoomend"}),g=null)}function h(){function t(){h=1,o(ra.mouse(i),p),l(s)}function r(){f.on(I,null).on(k,null),d(h&&ra.event.target===a),c(s)}var i=this,a=ra.event.target,s=B.of(i,arguments),h=0,f=ra.select(n(i)).on(I,t).on(k,r),p=e(ra.mouse(i)),d=K(i);Ru.call(i),u(s)}function f(){function t(){var t=ra.touches(d);return p=C.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=e(t))}),t}function n(){var e=ra.event.target;ra.select(e).on(_,r).on(x,s),w.push(e);for(var n=ra.event.changedTouches,i=0,o=n.length;o>i;++i)g[n[i].identifier]=null;var u=t(),l=Date.now();if(1===u.length){if(500>l-b){var c=u[0];a(d,c,g[c.identifier],Math.floor(Math.log(C.k)/Math.LN2)+1),P()}b=l}else if(u.length>1){var c=u[0],h=u[1],f=c[0]-h[0],p=c[1]-h[1];y=f*f+p*p}}function r(){var t,e,n,r,a=ra.touches(d);Ru.call(d);for(var s=0,u=a.length;u>s;++s,r=null)if(n=a[s],r=g[n.identifier]){if(e)break;t=n,e=r}if(r){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,h=y&&Math.sqrt(c/y);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],i(h*p)}b=null,o(t,e),l(m)}function s(){if(ra.event.touches.length){for(var e=ra.event.changedTouches,n=0,r=e.length;r>n;++n)delete g[e[n].identifier];for(var i in g)return void t()}ra.selectAll(w).on(v,null),M.on(D,h).on(N,f),E(),c(m)}var p,d=this,m=B.of(d,arguments),g={},y=0,v=".zoom-"+ra.event.changedTouches[0].identifier,_="touchmove"+v,x="touchend"+v,w=[],M=ra.select(d),E=K(d);n(),u(m),M.on(D,null).on(N,n)}function p(){var t=B.of(this,arguments);v?clearTimeout(v):(Ru.call(this),m=e(g=y||ra.mouse(this)),u(t)),v=setTimeout(function(){v=null,c(t)},50),P(),i(Math.pow(2,.002*Ga())*C.k),o(g,m),l(t)}function d(){var t=ra.mouse(this),n=Math.log(C.k)/Math.LN2;a(this,t,e(t),ra.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var m,g,y,v,b,_,x,w,M,C={
x:0,y:0,k:1},E=[960,500],S=Ha,L=250,A=0,D="mousedown.zoom",I="mousemove.zoom",k="mouseup.zoom",N="touchstart.zoom",B=T(t,"zoomstart","zoom","zoomend");return Wa||(Wa="onwheel"in aa?(Ga=function(){return-ra.event.deltaY*(ra.event.deltaMode?120:1)},"wheel"):"onmousewheel"in aa?(Ga=function(){return ra.event.wheelDelta},"mousewheel"):(Ga=function(){return-ra.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=B.of(this,arguments),e=C;Bu?ra.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var n=E[0],r=E[1],i=g?g[0]:n/2,o=g?g[1]:r/2,a=ra.interpolateZoom([(i-C.x)/C.k,(o-C.y)/C.k,n/C.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=a(e),s=n/r[2];this.__chart__=C={x:i-r[0]*s,y:o-r[1]*s,k:s},l(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=C,u(t),l(t),c(t))})},t.translate=function(e){return arguments.length?(C={x:+e[0],y:+e[1],k:C.k},s(),t):[C.x,C.y]},t.scale=function(e){return arguments.length?(C={x:C.x,y:C.y,k:+e},s(),t):C.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?Ha:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(y=e&&[+e[0],+e[1]],t):y},t.size=function(e){return arguments.length?(E=e&&[+e[0],+e[1]],t):E},t.duration=function(e){return arguments.length?(L=+e,t):L},t.x=function(e){return arguments.length?(x=e,_=e.copy(),C={x:0,y:0,k:1},t):x},t.y=function(e){return arguments.length?(M=e,w=e.copy(),C={x:0,y:0,k:1},t):M},ra.rebind(t,B,"on")};var Ga,Wa,Ha=[0,1/0];ra.color=st,st.prototype.toString=function(){return this.rgb()+""},ra.hsl=ut;var ja=ut.prototype=new st;ja.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ut(this.h,this.s,this.l/t)},ja.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ut(this.h,this.s,t*this.l)},ja.rgb=function(){return lt(this.h,this.s,this.l)},ra.hcl=ct;var Xa=ct.prototype=new st;Xa.brighter=function(t){return new ct(this.h,this.c,Math.min(100,this.l+Ya*(arguments.length?t:1)))},Xa.darker=function(t){return new ct(this.h,this.c,Math.max(0,this.l-Ya*(arguments.length?t:1)))},Xa.rgb=function(){return ht(this.h,this.c,this.l).rgb()},ra.lab=ft;var Ya=18,qa=.95047,Za=1,Ka=1.08883,Ja=ft.prototype=new st;Ja.brighter=function(t){return new ft(Math.min(100,this.l+Ya*(arguments.length?t:1)),this.a,this.b)},Ja.darker=function(t){return new ft(Math.max(0,this.l-Ya*(arguments.length?t:1)),this.a,this.b)},Ja.rgb=function(){return pt(this.l,this.a,this.b)},ra.rgb=vt;var Qa=vt.prototype=new st;Qa.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new vt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new vt(i,i,i)},Qa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new vt(t*this.r,t*this.g,t*this.b)},Qa.hsl=function(){return Mt(this.r,this.g,this.b)},Qa.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var $a=ra.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$a.forEach(function(t,e){$a.set(t,bt(e))}),ra.functor=Tt,ra.xhr=St(b),ra.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Lt(t,e,null==n?r:i(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?r:i(t)):n},a}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(c>=l)return a;if(i)return i=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l>c;){var r=t.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return t.slice(e,c-s)}return t.slice(e)}for(var r,i,o={},a={},s=[],l=t.length,c=0,h=0;(r=n())!==a;){for(var f=[];r!==o&&r!==a;)f.push(r),r=n();e&&null==(f=e(f,h++))||s.push(f)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new v,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(a).join(t)].concat(e.map(function(e){return i.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},ra.csv=ra.dsv(",","text/csv"),ra.tsv=ra.dsv("	","text/tab-separated-values");var ts,es,ns,rs,is,os=this[x(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ra.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,f:!1,n:null};es?es.n=o:ts=o,es=o,ns||(rs=clearTimeout(rs),ns=1,os(It))},ra.timer.flush=function(){kt(),Nt()},ra.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var as=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ot);ra.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=ra.round(t,Bt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),as[8+n/3]};var ss=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,us=ra.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ra.round(t,Bt(t,e))).toFixed(Math.max(0,Math.min(20,Bt(t*(1+1e-15),e))))}}),ls=ra.time={},cs=Date;Ut.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){hs.setUTCDate.apply(this._,arguments)},setDay:function(){hs.setUTCDay.apply(this._,arguments)},setFullYear:function(){hs.setUTCFullYear.apply(this._,arguments)},setHours:function(){hs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){hs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){hs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){hs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){hs.setUTCSeconds.apply(this._,arguments)},setTime:function(){hs.setTime.apply(this._,arguments)}};var hs=Date.prototype;ls.year=zt(function(t){return t=ls.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ls.years=ls.year.range,ls.years.utc=ls.year.utc.range,ls.day=zt(function(t){var e=new cs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ls.days=ls.day.range,ls.days.utc=ls.day.utc.range,ls.dayOfYear=function(t){var e=ls.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ls[t]=zt(function(t){return(t=ls.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ls.year(t).getDay();return Math.floor((ls.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ls[t+"s"]=n.range,ls[t+"s"].utc=n.utc.range,ls[t+"OfYear"]=function(t){var n=ls.year(t).getDay();return Math.floor((ls.dayOfYear(t)+(n+e)%7)/7)}}),ls.week=ls.sunday,ls.weeks=ls.sunday.range,ls.weeks.utc=ls.sunday.utc.range,ls.weekOfYear=ls.sundayOfYear;var fs={"-":"",_:" ",0:"0"},ps=/^\s*\d+/,ds=/^%/;ra.locale=function(t){return{numberFormat:Rt(t),timeFormat:Gt(t)}};var ms=ra.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ra.format=ms.numberFormat,ra.geo={},le.prototype={s:0,t:0,add:function(t){ce(t,this.t,gs),ce(gs.s,this.s,this),this.s?this.t+=gs.t:this.s=gs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gs=new le;ra.geo.stream=function(t,e){t&&ys.hasOwnProperty(t.type)?ys[t.type](t,e):he(t,e)};var ys={Feature:function(t,e){he(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)he(n[r].geometry,e)}},vs={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){fe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)fe(n[r],e,0)},Polygon:function(t,e){pe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)pe(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)he(n[r],e)}};ra.geo.area=function(t){return bs=0,ra.geo.stream(t,xs),bs};var bs,_s=new le,xs={sphere:function(){bs+=4*ka},point:w,lineStart:w,lineEnd:w,polygonStart:function(){_s.reset(),xs.lineStart=de},polygonEnd:function(){var t=2*_s;bs+=0>t?4*ka+t:t,xs.lineStart=xs.lineEnd=xs.point=w}};ra.geo.bounds=function(){function t(t,e){b.push(_=[c=t,f=t]),h>e&&(h=e),e>p&&(p=e)}function e(e,n){var r=me([e*Ra,n*Ra]);if(y){var i=ye(y,r),o=[i[1],-i[0],0],a=ye(o,i);_e(a),a=xe(a);var u=e-d,l=u>0?1:-1,m=a[0]*Fa*l,g=ma(u)>180;if(g^(m>l*d&&l*e>m)){var v=a[1]*Fa;v>p&&(p=v)}else if(m=(m+360)%360-180,g^(m>l*d&&l*e>m)){var v=-a[1]*Fa;h>v&&(h=v)}else h>n&&(h=n),n>p&&(p=n);g?d>e?s(c,e)>s(c,f)&&(f=e):s(e,f)>s(c,f)&&(c=e):f>=c?(c>e&&(c=e),e>f&&(f=e)):e>d?s(c,e)>s(c,f)&&(f=e):s(e,f)>s(c,f)&&(c=e)}else t(e,n);y=r,d=e}function n(){x.point=e}function r(){_[0]=c,_[1]=f,x.point=t,y=null}function i(t,n){if(y){var r=t-d;v+=ma(r)>180?r+(r>0?360:-360):r}else m=t,g=n;xs.point(t,n),e(t,n)}function o(){xs.lineStart()}function a(){i(m,g),xs.lineEnd(),ma(v)>Da&&(c=-(f=180)),_[0]=c,_[1]=f,y=null}function s(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,h,f,p,d,m,g,y,v,b,_,x={point:t,lineStart:n,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=o,x.lineEnd=a,v=0,xs.polygonStart()},polygonEnd:function(){xs.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=r,0>_s?(c=-(f=180),h=-(p=90)):v>Da?p=90:-Da>v&&(h=-90),_[0]=c,_[1]=f}};return function(t){p=f=-(c=h=1/0),b=[],ra.geo.stream(t,x);var e=b.length;if(e){b.sort(u);for(var n,r=1,i=b[0],o=[i];e>r;++r)n=b[r],l(n[0],i)||l(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,d=-(1/0),e=o.length-1,r=0,i=o[e];e>=r;i=n,++r)n=o[r],(a=s(i[1],n[0]))>d&&(d=a,c=n[0],f=i[1])}return b=_=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[f,p]]}}(),ra.geo.centroid=function(t){ws=Ms=Cs=Ps=Es=Ts=Ss=Ls=As=Ds=Is=0,ra.geo.stream(t,ks);var e=As,n=Ds,r=Is,i=e*e+n*n+r*r;return Ia>i&&(e=Ts,n=Ss,r=Ls,Da>Ms&&(e=Cs,n=Ps,r=Es),i=e*e+n*n+r*r,Ia>i)?[NaN,NaN]:[Math.atan2(n,e)*Fa,nt(r/Math.sqrt(i))*Fa]};var ws,Ms,Cs,Ps,Es,Ts,Ss,Ls,As,Ds,Is,ks={sphere:w,point:Me,lineStart:Pe,lineEnd:Ee,polygonStart:function(){ks.lineStart=Te},polygonEnd:function(){ks.lineStart=Pe}},Ns=ke(Le,Re,Ue,[-ka,-ka/2]),Bs=1e9;ra.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(s){return arguments.length?(o=We(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(ra.geo.conicEqualArea=function(){return He(je)}).raw=je,ra.geo.albers=function(){return ra.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ra.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}var e,n,r,i,o=ra.geo.albers(),a=ra.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ra.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var l=o.scale(),c=+e[0],h=+e[1];return n=o.translate(e).clipExtent([[c-.455*l,h-.238*l],[c+.455*l,h+.238*l]]).stream(u).point,r=a.translate([c-.307*l,h+.201*l]).clipExtent([[c-.425*l+Da,h+.12*l+Da],[c-.214*l-Da,h+.234*l-Da]]).stream(u).point,i=s.translate([c-.205*l,h+.212*l]).clipExtent([[c-.214*l+Da,h+.166*l+Da],[c-.115*l-Da,h+.234*l-Da]]).stream(u).point,t},t.scale(1070)};var Os,Rs,Fs,Us,zs,Vs,Gs={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Rs=0,Gs.lineStart=Xe},polygonEnd:function(){Gs.lineStart=Gs.lineEnd=Gs.point=w,Os+=ma(Rs/2)}},Ws={point:Ye,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Hs={point:Ke,lineStart:Je,lineEnd:Qe,polygonStart:function(){Hs.lineStart=$e},polygonEnd:function(){Hs.point=Ke,Hs.lineStart=Je,Hs.lineEnd=Qe}};ra.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),ra.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,r,i,o,a,s=4.5;return t.area=function(t){return Os=0,ra.geo.stream(t,i(Gs)),Os},t.centroid=function(t){return Cs=Ps=Es=Ts=Ss=Ls=As=Ds=Is=0,ra.geo.stream(t,i(Hs)),Is?[As/Is,Ds/Is]:Ls?[Ts/Ls,Ss/Ls]:Es?[Cs/Es,Ps/Es]:[NaN,NaN]},t.bounds=function(t){return zs=Vs=-(Fs=Us=1/0),ra.geo.stream(t,i(Ws)),[[Fs,Us],[zs,Vs]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||nn(t):b,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new qe:new tn(t),"function"!=typeof s&&o.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(ra.geo.albersUsa()).context(null)},ra.geo.transform=function(t){return{stream:function(e){var n=new rn(e);for(var r in t)n[r]=t[r];return n}}},rn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ra.geo.projection=an,ra.geo.projectionMutator=sn,(ra.geo.equirectangular=function(){return an(ln)}).raw=ln.invert=ln,ra.geo.rotation=function(t){function e(e){return e=t(e[0]*Ra,e[1]*Ra),e[0]*=Fa,e[1]*=Fa,e}return t=hn(t[0]%360*Ra,t[1]*Ra,t.length>2?t[2]*Ra:0),e.invert=function(e){return e=t.invert(e[0]*Ra,e[1]*Ra),e[0]*=Fa,e[1]*=Fa,e},e},cn.invert=ln,ra.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=hn(-t[0]*Ra,-t[1]*Ra,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Fa,t[1]*=Fa}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=mn((e=+r)*Ra,i*Ra),t):e},t.precision=function(r){return arguments.length?(n=mn(e*Ra,(i=+r)*Ra),t):i},t.angle(90)},ra.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Ra,i=t[1]*Ra,o=e[1]*Ra,a=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=l*c-u*h*s)*n),u*c+l*h*s)},ra.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ra.range(Math.ceil(o/g)*g,i,g).map(f).concat(ra.range(Math.ceil(l/y)*y,u,y).map(p)).concat(ra.range(Math.ceil(r/d)*d,n,d).filter(function(t){return ma(t%g)>Da}).map(c)).concat(ra.range(Math.ceil(s/m)*m,a,m).filter(function(t){return ma(t%y)>Da}).map(h))}var n,r,i,o,a,s,u,l,c,h,f,p,d=10,m=d,g=90,y=360,v=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(p(u).slice(1),f(i).reverse().slice(1),p(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],l=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),l>u&&(e=l,l=u,u=e),t.precision(v)):[[o,l],[i,u]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(v)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(g=+e[0],y=+e[1],t):[g,y]},t.minorStep=function(e){return arguments.length?(d=+e[0],m=+e[1],t):[d,m]},t.precision=function(e){return arguments.length?(v=+e,c=yn(s,a,90),h=vn(r,n,v),f=yn(l,u,90),p=vn(o,i,v),t):v},t.majorExtent([[-180,-90+Da],[180,90-Da]]).minorExtent([[-180,-80-Da],[180,80+Da]])},ra.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=bn,i=_n;return t.distance=function(){return ra.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},ra.geo.interpolate=function(t,e){return xn(t[0]*Ra,t[1]*Ra,e[0]*Ra,e[1]*Ra)},ra.geo.length=function(t){return js=0,ra.geo.stream(t,Xs),js};var js,Xs={sphere:w,point:w,lineStart:wn,lineEnd:w,polygonStart:w,polygonEnd:w},Ys=Mn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ra.geo.azimuthalEqualArea=function(){return an(Ys)}).raw=Ys;var qs=Mn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},b);(ra.geo.azimuthalEquidistant=function(){return an(qs)}).raw=qs,(ra.geo.conicConformal=function(){return He(Cn)}).raw=Cn,(ra.geo.conicEquidistant=function(){return He(Pn)}).raw=Pn;var Zs=Mn(function(t){return 1/t},Math.atan);(ra.geo.gnomonic=function(){return an(Zs)}).raw=Zs,En.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Oa]},(ra.geo.mercator=function(){return Tn(En)}).raw=En;var Ks=Mn(function(){return 1},Math.asin);(ra.geo.orthographic=function(){return an(Ks)}).raw=Ks;var Js=Mn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ra.geo.stereographic=function(){return an(Js)}).raw=Js,Sn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Oa]},(ra.geo.transverseMercator=function(){var t=Tn(Sn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Sn,ra.geom={},ra.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Tt(n),o=Tt(r),a=t.length,s=[],u=[];for(e=0;a>e;e++)s.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(In),e=0;a>e;e++)u.push([s[e][0],-s[e][1]]);var l=Dn(s),c=Dn(u),h=c[0]===l[0],f=c[c.length-1]===l[l.length-1],p=[];for(e=l.length-1;e>=0;--e)p.push(t[s[l[e]][2]]);for(e=+h;e<c.length-f;++e)p.push(t[s[c[e]][2]]);return p}var n=Ln,r=An;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},ra.geom.polygon=function(t){return _a(t,Qs),t};var Qs=ra.geom.polygon.prototype=[];Qs.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Qs.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},Qs.clip=function(t){for(var e,n,r,i,o,a,s=Bn(t),u=-1,l=this.length-Bn(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,i=this[u],o=e[(r=e.length-s)-1],n=-1;++n<r;)a=e[n],kn(a,c,i)?(kn(o,c,i)||t.push(Nn(o,a,c,i)),t.push(a)):kn(o,c,i)&&t.push(Nn(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var $s,tu,eu,nu,ru,iu=[],ou=[];Wn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(jn),e.length},er.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ar(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ir(this,n),t=n,n=t.U),n.C=!1,r.C=!0,or(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(or(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ir(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?ar(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,ir(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,or(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ir(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,or(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ir(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,or(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ra.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return sr(n(t),s).cells.forEach(function(n,s){var u=n.edges,l=n.site,c=e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=r&&l.x<=o&&l.y>=i&&l.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Da)*Da,y:Math.round(a(t,e)/Da)*Da,i:e}})}var r=Ln,i=An,o=r,a=i,s=au;return t?e(t):(e.links=function(t){return sr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return sr(n(t)).cells.forEach(function(n,r){for(var i,o,a=n.site,s=n.edges.sort(jn),u=-1,l=s.length,c=s[l-1].edge,h=c.l===a?c.r:c.l;++u<l;)i=c,o=h,c=s[u].edge,h=c.l===a?c.r:c.l,r<o.i&&r<h.i&&lr(a,o,h)<0&&e.push([t[r],t[o.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(o=Tt(r=t),e):r},e.y=function(t){return arguments.length?(a=Tt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?au:t,e):s===au?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===au?null:s&&s[1]},e)};var au=[[-1e6,-1e6],[1e6,1e6]];ra.geom.delaunay=function(t){return ra.geom.voronoi().triangles(t)},ra.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(ma(u-n)+ma(c-r)<.01)l(t,e,n,r,i,o,a,s);else{var h=t.point;t.x=t.y=t.point=null,l(t,h,u,c,i,o,a,s),l(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else l(t,e,n,r,i,o,a,s)}function l(t,e,n,r,i,a,s,u){var l=.5*(i+s),c=.5*(a+u),h=n>=l,f=r>=c,p=f<<1|h;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=fr()),h?i=l:s=l,f?a=c:u=c,o(t,e,n,r,i,a,s,u)}var c,h,f,p,d,m,g,y,v,b=Tt(s),_=Tt(u);if(null!=e)m=e,g=n,y=r,v=i;else if(y=v=-(m=g=1/0),h=[],f=[],d=t.length,a)for(p=0;d>p;++p)c=t[p],c.x<m&&(m=c.x),c.y<g&&(g=c.y),c.x>y&&(y=c.x),c.y>v&&(v=c.y),h.push(c.x),f.push(c.y);else for(p=0;d>p;++p){var x=+b(c=t[p],p),w=+_(c,p);m>x&&(m=x),g>w&&(g=w),x>y&&(y=x),w>v&&(v=w),h.push(x),f.push(w)}var M=y-m,C=v-g;M>C?v=g+M:y=m+C;var P=fr();if(P.add=function(t){o(P,t,+b(t,++p),+_(t,p),m,g,y,v)},P.visit=function(t){pr(t,P,m,g,y,v)},P.find=function(t){return dr(P,t[0],t[1],m,g,y,v)},p=-1,null==e){for(;++p<d;)o(P,t[p],h[p],f[p],m,g,y,v);--p}else t.forEach(P.add);return h=f=t=c=null,P}var a,s=Ln,u=An;return(a=arguments.length)?(s=cr,u=hr,3===a&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},ra.interpolateRgb=mr,ra.interpolateObject=gr,ra.interpolateNumber=yr,ra.interpolateString=vr;var su=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uu=new RegExp(su.source,"g");ra.interpolate=br,ra.interpolators=[function(t,e){var n=typeof e;return("string"===n?$a.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?mr:vr:e instanceof st?mr:Array.isArray(e)?_r:"object"===n&&isNaN(e)?gr:yr)(t,e)}],ra.interpolateArray=_r;var lu=function(){return b},cu=ra.map({linear:lu,poly:Tr,quad:function(){return Cr},cubic:function(){return Pr},sin:function(){return Sr},exp:function(){return Lr},circle:function(){return Ar},elastic:Dr,back:Ir,bounce:function(){return kr}}),hu=ra.map({"in":b,out:wr,"in-out":Mr,"out-in":function(t){return Mr(wr(t))}});ra.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=cu.get(n)||lu,r=hu.get(r)||b,xr(r(n.apply(null,ia.call(arguments,1))))},ra.interpolateHcl=Nr,ra.interpolateHsl=Br,ra.interpolateLab=Or,ra.interpolateRound=Rr,ra.transform=function(t){var e=aa.createElementNS(ra.ns.prefix.svg,"g");return(ra.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Fr(n?n.matrix:fu)})(t)},Fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fu={a:1,b:0,c:0,d:1,e:0,f:0};ra.interpolateTransform=Gr,ra.layout={},ra.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(jr(t[n]));return e}},ra.layout.chord=function(){function t(){var t,l,h,f,p,d={},m=[],g=ra.range(o),y=[];for(n=[],r=[],t=0,f=-1;++f<o;){for(l=0,p=-1;++p<o;)l+=i[f][p];m.push(l),y.push(ra.range(o)),t+=l}for(a&&g.sort(function(t,e){return a(m[t],m[e])}),s&&y.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(Na-c*o)/t,l=0,f=-1;++f<o;){for(h=l,p=-1;++p<o;){var v=g[f],b=y[v][p],_=i[v][b],x=l,w=l+=_*t;d[v+"-"+b]={index:v,subindex:b,startAngle:x,endAngle:w,value:_}}r[v]={index:v,startAngle:h,endAngle:l,value:(l-h)/t},l+=c}for(f=-1;++f<o;)for(p=f-1;++p<o;){var M=d[f+"-"+p],C=d[p+"-"+f];(M.value||C.value)&&n.push(M.value<C.value?{source:C,target:M}:{source:M,target:C})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,a,s,u,l={},c=0;return l.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,l):i},l.padding=function(t){return arguments.length?(c=t,n=r=null,l):c},l.sortGroups=function(t){return arguments.length?(a=t,n=r=null,l):a},l.sortSubgroups=function(t){return arguments.length?(s=t,n=null,l):s},l.sortChords=function(t){return arguments.length?(u=t,n&&e(),l):u},l.chords=function(){return n||t(),n},l.groups=function(){return r||t(),r},l},ra.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,u=o*o+a*a;if(u>s*s/g){if(d>u){var l=e.charge/u;t.px-=o*l,t.py-=a*l}return!0}if(e.point&&u&&d>u){var l=e.pointCharge/u;t.px-=o*l,t.py-=a*l}}return!e.charge}}function e(t){t.px=ra.event.x,t.py=ra.event.y,s.resume()}var n,r,i,o,a,s={},u=ra.dispatch("start","tick","end"),l=[1,1],c=.9,h=pu,f=du,p=-30,d=mu,m=.1,g=.64,y=[],v=[];
return s.tick=function(){if((r*=.99)<.005)return u.end({type:"end",alpha:r=0}),!0;var e,n,s,h,f,d,g,b,_,x=y.length,w=v.length;for(n=0;w>n;++n)s=v[n],h=s.source,f=s.target,b=f.x-h.x,_=f.y-h.y,(d=b*b+_*_)&&(d=r*o[n]*((d=Math.sqrt(d))-i[n])/d,b*=d,_*=d,f.x-=b*(g=h.weight/(f.weight+h.weight)),f.y-=_*g,h.x+=b*(g=1-g),h.y+=_*g);if((g=r*m)&&(b=l[0]/2,_=l[1]/2,n=-1,g))for(;++n<x;)s=y[n],s.x+=(b-s.x)*g,s.y+=(_-s.y)*g;if(p)for(Qr(e=ra.geom.quadtree(y),r,a),n=-1;++n<x;)(s=y[n]).fixed||e.visit(t(s));for(n=-1;++n<x;)s=y[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*c,s.y-=(s.py-(s.py=s.y))*c);u.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(y=t,s):y},s.links=function(t){return arguments.length?(v=t,s):v},s.size=function(t){return arguments.length?(l=t,s):l},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.chargeDistance=function(t){return arguments.length?(d=t*t,s):Math.sqrt(d)},s.gravity=function(t){return arguments.length?(m=+t,s):m},s.theta=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(u.start({type:"start",alpha:r=t}),ra.timer(s.tick)),s):r},s.start=function(){function t(t,r){if(!n){for(n=new Array(u),s=0;u>s;++s)n[s]=[];for(s=0;c>s;++s){var i=v[s];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var o,a=n[e],s=-1,l=a.length;++s<l;)if(!isNaN(o=a[s][t]))return o;return Math.random()*r}var e,n,r,u=y.length,c=v.length,d=l[0],m=l[1];for(e=0;u>e;++e)(r=y[e]).index=e,r.weight=0;for(e=0;c>e;++e)r=v[e],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(e=0;u>e;++e)r=y[e],isNaN(r.x)&&(r.x=t("x",d)),isNaN(r.y)&&(r.y=t("y",m)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof h)for(e=0;c>e;++e)i[e]=+h.call(this,v[e],e);else for(e=0;c>e;++e)i[e]=h;if(o=[],"function"==typeof f)for(e=0;c>e;++e)o[e]=+f.call(this,v[e],e);else for(e=0;c>e;++e)o[e]=f;if(a=[],"function"==typeof p)for(e=0;u>e;++e)a[e]=+p.call(this,y[e],e);else for(e=0;u>e;++e)a[e]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=ra.behavior.drag().origin(b).on("dragstart.force",qr).on("drag.force",e).on("dragend.force",Zr)),arguments.length?void this.on("mouseover.force",Kr).on("mouseout.force",Jr).call(n):n},ra.rebind(s,u,"on")};var pu=20,du=1,mu=1/0;ra.layout.hierarchy=function(){function t(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(l=n.call(t,o,o.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)a.push(c=l[u]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=l}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return ei(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),s}var e=ii,n=ni,r=ri;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(ti(e,function(t){t.children&&(t.value=0)}),ei(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},ra.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,u,l=-1;for(r=e.value?r/e.value:0;++l<a;)t(s=o[l],n,u=s.value*r,i),n+=u}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return t(a[0],0,i[0],i[1]/e(a[0])),a}var r=ra.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},$r(n,r)},ra.layout.pie=function(){function t(a){var s,u=a.length,l=a.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),h=("function"==typeof i?i.apply(this,arguments):i)-c,f=Math.min(Math.abs(h)/u,+("function"==typeof o?o.apply(this,arguments):o)),p=f*(0>h?-1:1),d=(h-u*p)/ra.sum(l),m=ra.range(u),g=[];return null!=n&&m.sort(n===gu?function(t,e){return l[e]-l[t]}:function(t,e){return n(a[t],a[e])}),m.forEach(function(t){g[t]={data:a[t],value:s=l[t],startAngle:c,endAngle:c+=s*d+p,padAngle:f}}),g}var e=Number,n=gu,r=0,i=Na,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var gu={};ra.layout.stack=function(){function t(s,u){if(!(f=s.length))return s;var l=s.map(function(n,r){return e.call(t,n,r)}),c=l.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),h=n.call(t,c,u);l=ra.permute(l,h),c=ra.permute(c,h);var f,p,d,m,g=r.call(t,c,u),y=l[0].length;for(d=0;y>d;++d)for(i.call(t,l[0][d],m=g[d],c[0][d][1]),p=1;f>p;++p)i.call(t,l[p][d],m+=c[p-1][d][1],c[p][d][1]);return s}var e=b,n=li,r=ci,i=ui,o=ai,a=si;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:yu.get(e)||li,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:vu.get(e)||ci,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var yu=ra.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(hi),o=t.map(fi),a=ra.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,u=0,l=[],c=[];for(e=0;r>e;++e)n=a[e],u>s?(s+=o[n],l.push(n)):(u+=o[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return ra.range(t.length).reverse()},"default":li}),vu=ra.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,u=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)u[n]=(s-a[n])/2;return u},wiggle:function(t){var e,n,r,i,o,a,s,u,l,c=t.length,h=t[0],f=h.length,p=[];for(p[0]=u=l=0,n=1;f>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,o=0,s=h[n][0]-h[n-1][0];c>e;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);e>r;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}p[n]=u-=i?o/i*s:0,l>u&&(l=u)}for(n=0;f>n;++n)p[n]-=l;return p},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:ci});ra.layout.histogram=function(){function t(t,o){for(var a,s,u=[],l=t.map(n,this),c=r.call(this,l,o),h=i.call(this,c,l,o),o=-1,f=l.length,p=h.length-1,d=e?1:1/f;++o<p;)a=u[o]=[],a.dx=h[o+1]-(a.x=h[o]),a.y=0;if(p>0)for(o=-1;++o<f;)s=l[o],s>=c[0]&&s<=c[1]&&(a=u[ra.bisect(h,s,1,p)-1],a.y+=d,a.push(t[o]));return u}var e=!0,n=Number,r=gi,i=di;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Tt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return mi(t,e)}:Tt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ra.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],u=i[0],l=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,ei(s,function(t){t.r=+c(t.value)}),ei(s,xi),r){var h=r*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;ei(s,function(t){t.r+=h}),ei(s,xi),ei(s,function(t){t.r-=h})}return Ci(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),a}var e,n=ra.layout.hierarchy().sort(yi),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},$r(t,n)},ra.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),h=c[0],f=e(h);if(ei(f,n),f.parent.m=-f.z,ti(f,r),l)ti(h,o);else{var p=h,d=h,m=h;ti(h,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>m.depth&&(m=t)});var g=s(p,d)/2-p.x,y=u[0]/(d.x+s(d,p)/2+g),v=u[1]/(m.depth||1);ti(h,function(t){t.x=(t.x+g)*y,t.y=t.depth*v})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Ai(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+s(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+s(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,o=t,a=e,u=i.parent.children[0],l=i.m,c=o.m,h=a.m,f=u.m;a=Si(a),i=Ti(i),a&&i;)u=Ti(u),o=Si(o),o.a=t,r=a.z+h-i.z-l+s(a._,i._),r>0&&(Li(Di(a,t,n),t,r),l+=r,c+=r),h+=a.m,l+=i.m,f+=u.m,c+=o.m;a&&!Si(o)&&(o.t=a,o.m+=h-c),i&&!Ti(u)&&(u.t=i,u.m+=l-f,n=t)}return n}function o(t){t.x*=u[0],t.y=t.depth*u[1]}var a=ra.layout.hierarchy().sort(null).value(null),s=Ei,u=[1,1],l=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(l=null==(u=e)?o:null,t):l?null:u},t.nodeSize=function(e){return arguments.length?(l=null==(u=e)?null:o,t):l?u:null},$r(t,a)},ra.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),u=s[0],l=0;ei(u,function(t){var e=t.children;e&&e.length?(t.x=ki(e),t.y=Ii(e)):(t.x=a?l+=n(t,a):0,t.y=0,a=t)});var c=Ni(u),h=Bi(u),f=c.x-n(c,h)/2,p=h.x+n(h,c)/2;return ei(u,i?function(t){t.x=(t.x-u.x)*r[0],t.y=(u.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),s}var e=ra.layout.hierarchy().sort(null).value(null),n=Ei,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},$r(t,e)},ra.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var a,s,u,l=h(n),c=[],f=o.slice(),d=1/0,m="slice"===p?l.dx:"dice"===p?l.dy:"slice-dice"===p?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(f,l.dx*l.dy/n.value),c.area=0;(u=f.length)>0;)c.push(a=f[u-1]),c.area+=a.area,"squarify"!==p||(s=r(c,m))<=d?(f.pop(),d=s):(c.area-=c.pop().area,i(c,m,l,!1),m=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(i(c,m,l,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,a=h(e),s=r.slice(),u=[];for(t(s,a.dx*a.dy/e.value),u.area=0;o=s.pop();)u.push(o),u.area+=o.area,null!=o.z&&(i(u,o.z?a.dx:a.dy,a,!s.length),u.length=u.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*d/r,r/(e*o*d)):1/0}function i(t,e,n,r){var i,o=-1,a=t.length,s=n.x,l=n.y,c=e?u(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)i=t[o],i.x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)i=t[o],i.x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=0,o.y=0,o.dx=l[0],o.dy=l[1],a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),f&&(a=i),i}var a,s=ra.layout.hierarchy(),u=Math.round,l=[1,1],c=null,h=Oi,f=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(l=t,o):l},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Oi(e):Ri(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Ri(e,t)}if(!arguments.length)return c;var r;return h=null==(c=t)?Oi:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(f=t,a=null,o):f},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},$r(o,s)},ra.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ra.random.normal.apply(ra,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ra.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},ra.scale={};var bu={floor:b,ceil:b};ra.scale.linear=function(){return Hi([0,1],[0,1],br,!1)};var _u={s:1,g:1,p:1,r:1,e:1};ra.scale.log=function(){return Qi(ra.scale.linear().domain([0,1]),10,!0,[1,10])};var xu=ra.format(".0e"),wu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ra.scale.pow=function(){return $i(ra.scale.linear(),1,[0,1])},ra.scale.sqrt=function(){return ra.scale.pow().exponent(.5)},ra.scale.ordinal=function(){return eo([],{t:"range",a:[[]]})},ra.scale.category10=function(){return ra.scale.ordinal().range(Mu)},ra.scale.category20=function(){return ra.scale.ordinal().range(Cu)},ra.scale.category20b=function(){return ra.scale.ordinal().range(Pu)},ra.scale.category20c=function(){return ra.scale.ordinal().range(Eu)};var Mu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(_t),Cu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(_t),Pu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(_t),Eu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(_t);ra.scale.quantile=function(){return no([],[])},ra.scale.quantize=function(){return ro(0,1,[0,1])},ra.scale.threshold=function(){return io([.5],[0,1])},ra.scale.identity=function(){return oo([0,1])},ra.svg={},ra.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Oa,h=s.apply(this,arguments)-Oa,f=Math.abs(h-c),p=c>h?0:1;if(t>l&&(d=l,l=t,t=d),f>=Ba)return e(l,p)+(t?e(t,1-p):"")+"Z";var d,m,g,y,v,b,_,x,w,M,C,P,E=0,T=0,S=[];if((y=(+u.apply(this,arguments)||0)/2)&&(g=o===Tu?Math.sqrt(t*t+l*l):+o.apply(this,arguments),p||(T*=-1),l&&(T=nt(g/l*Math.sin(y))),t&&(E=nt(g/t*Math.sin(y)))),l){v=l*Math.cos(c+T),b=l*Math.sin(c+T),_=l*Math.cos(h-T),x=l*Math.sin(h-T);var L=Math.abs(h-c-2*T)<=ka?0:1;if(T&&fo(v,b,_,x)===p^L){var A=(c+h)/2;v=l*Math.cos(A),b=l*Math.sin(A),_=x=null}}else v=b=0;if(t){w=t*Math.cos(h-E),M=t*Math.sin(h-E),C=t*Math.cos(c+E),P=t*Math.sin(c+E);var D=Math.abs(c-h+2*E)<=ka?0:1;if(E&&fo(w,M,C,P)===1-p^D){var I=(c+h)/2;w=t*Math.cos(I),M=t*Math.sin(I),C=P=null}}else w=M=0;if((d=Math.min(Math.abs(l-t)/2,+i.apply(this,arguments)))>.001){m=l>t^p?0:1;var k=null==C?[w,M]:null==_?[v,b]:Nn([v,b],[C,P],[_,x],[w,M]),N=v-k[0],B=b-k[1],O=_-k[0],R=x-k[1],F=1/Math.sin(Math.acos((N*O+B*R)/(Math.sqrt(N*N+B*B)*Math.sqrt(O*O+R*R)))/2),U=Math.sqrt(k[0]*k[0]+k[1]*k[1]);if(null!=_){var z=Math.min(d,(l-U)/(F+1)),V=po(null==C?[w,M]:[C,P],[v,b],l,z,p),G=po([_,x],[w,M],l,z,p);d===z?S.push("M",V[0],"A",z,",",z," 0 0,",m," ",V[1],"A",l,",",l," 0 ",1-p^fo(V[1][0],V[1][1],G[1][0],G[1][1]),",",p," ",G[1],"A",z,",",z," 0 0,",m," ",G[0]):S.push("M",V[0],"A",z,",",z," 0 1,",m," ",G[0])}else S.push("M",v,",",b);if(null!=C){var W=Math.min(d,(t-U)/(F-1)),H=po([v,b],[C,P],t,-W,p),j=po([w,M],null==_?[v,b]:[_,x],t,-W,p);d===W?S.push("L",j[0],"A",W,",",W," 0 0,",m," ",j[1],"A",t,",",t," 0 ",p^fo(j[1][0],j[1][1],H[1][0],H[1][1]),",",1-p," ",H[1],"A",W,",",W," 0 0,",m," ",H[0]):S.push("L",j[0],"A",W,",",W," 0 0,",m," ",H[0])}else S.push("L",w,",",M)}else S.push("M",v,",",b),null!=_&&S.push("A",l,",",l," 0 ",L,",",p," ",_,",",x),S.push("L",w,",",M),null!=C&&S.push("A",t,",",t," 0 ",D,",",1-p," ",C,",",P);return S.push("Z"),S.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=so,r=uo,i=ao,o=Tu,a=lo,s=co,u=ho;return t.innerRadius=function(e){return arguments.length?(n=Tt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Tt(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=Tt(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==Tu?Tu:Tt(e),t):o},t.startAngle=function(e){return arguments.length?(a=Tt(e),t):a},t.endAngle=function(e){return arguments.length?(s=Tt(e),t):s},t.padAngle=function(e){return arguments.length?(u=Tt(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Oa;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Tu="auto";ra.svg.line=function(){return mo(b)};var Su=ra.map({linear:go,"linear-closed":yo,step:vo,"step-before":bo,"step-after":_o,basis:Eo,"basis-open":To,"basis-closed":So,bundle:Lo,cardinal:Mo,"cardinal-open":xo,"cardinal-closed":wo,monotone:Bo});Su.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Lu=[0,2/3,1/3,0],Au=[0,1/3,2/3,0],Du=[0,1/6,2/3,1/6];ra.svg.line.radial=function(){var t=mo(Oo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},bo.reverse=_o,_o.reverse=bo,ra.svg.area=function(){return Ro(b)},ra.svg.area.radial=function(){var t=Ro(Oo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ra.svg.chord=function(){function t(t,s){var u=e(this,o,t,s),l=e(this,a,t,s);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,l)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,u.r,u.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=s.call(t,i,r),a=u.call(t,i,r)-Oa,c=l.call(t,i,r)-Oa;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>ka)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=bn,a=_n,s=Fo,u=lo,l=co;return t.radius=function(e){return arguments.length?(s=Tt(e),t):s},t.source=function(e){return arguments.length?(o=Tt(e),t):o},t.target=function(e){return arguments.length?(a=Tt(e),t):a},t.startAngle=function(e){return arguments.length?(u=Tt(e),t):u},t.endAngle=function(e){return arguments.length?(l=Tt(e),t):l},t},ra.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=bn,n=_n,r=Uo;return t.source=function(n){return arguments.length?(e=Tt(n),t):e},t.target=function(e){return arguments.length?(n=Tt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},ra.svg.diagonal.radial=function(){var t=ra.svg.diagonal(),e=Uo,n=t.projection;return t.projection=function(t){return arguments.length?n(zo(e=t)):e},t},ra.svg.symbol=function(){function t(t,r){return(Iu.get(e.call(this,t,r))||Wo)(n.call(this,t,r))}var e=Go,n=Vo;return t.type=function(n){return arguments.length?(e=Tt(n),t):e},t.size=function(e){return arguments.length?(n=Tt(e),t):n},t};var Iu=ra.map({circle:Wo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Nu)),n=e*Nu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ku),n=e*ku/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ku),n=e*ku/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ra.svg.symbolTypes=Iu.keys();var ku=Math.sqrt(3),Nu=Math.tan(30*Ra);Ca.transition=function(t){for(var e,n,r=Bu||++Uu,i=qo(t),o=[],a=Ou||{time:Date.now(),ease:Er,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(n=l[c])&&Zo(n,c,i,r,a),e.push(n)}return jo(o,i,r)},Ca.interrupt=function(t){return this.each(null==t?Ru:Ho(qo(t)))};var Bu,Ou,Ru=Ho(qo()),Fu=[],Uu=0;Fu.call=Ca.call,Fu.empty=Ca.empty,Fu.node=Ca.node,Fu.size=Ca.size,ra.transition=function(t,e){return t&&t.transition?Bu?t.transition(e):t:ra.selection().transition(t)},ra.transition.prototype=Fu,Fu.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=L(t);for(var s=-1,u=this.length;++s<u;){a.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(r=l[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Zo(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return jo(a,o,i)},Fu.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,u=[];t=A(t);for(var l=-1,c=this.length;++l<c;)for(var h=this[l],f=-1,p=h.length;++f<p;)if(r=h[f]){o=r[s][a],n=t.call(r,r.__data__,f,l),u.push(e=[]);for(var d=-1,m=n.length;++d<m;)(i=n[d])&&Zo(i,d,s,a,o),e.push(i)}return jo(u,s,a)},Fu.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=G(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]);for(var n=this[o],s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return jo(i,this.namespace,this.id)},Fu.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):H(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Fu.attr=function(t,e){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Gr:br,s=ra.ns.qualify(t);return Xo(this,"attr."+t,e,s.local?o:i)},Fu.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=ra.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Fu.style=function(t,e,r){function i(){this.style.removeProperty(t)}function o(e){return null==e?i:(e+="",function(){var i,o=n(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(i=br(o,e),function(e){this.style.setProperty(t,i(e),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(e="");for(r in t)this.style(r,t[r],e);return this}r=""}return Xo(this,"style."+t,e,o)},Fu.styleTween=function(t,e,r){function i(i,o){var a=e.call(this,i,o,n(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Fu.text=function(t){return Xo(this,"text",t,Yo)},Fu.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Fu.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=ra.ease.apply(ra,arguments)),H(this,function(r){r[n][e].ease=t}))},Fu.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:H(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Fu.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:H(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Fu.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Ou,o=Bu;try{Bu=n,H(this,function(e,i,o){Ou=e[r][n],t.call(e,e.__data__,i,o)})}finally{Ou=i,Bu=o}}else H(this,function(i){var o=i[r][n];(o.event||(o.event=ra.dispatch("start","end","interrupt"))).on(t,e)});return this},Fu.transition=function(){for(var t,e,n,r,i=this.id,o=++Uu,a=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(t=[]);for(var e=this[u],c=0,h=e.length;h>c;c++)(n=e[c])&&(r=n[a][i],Zo(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return jo(s,a,o)},ra.svg.axis=function(){function t(t){t.each(function(){var t,l=ra.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),f=null==u?h.ticks?h.ticks.apply(h,s):h.domain():u,p=null==e?h.tickFormat?h.tickFormat.apply(h,s):b:e,d=l.selectAll(".tick").data(f,h),m=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Da),g=ra.transition(d.exit()).style("opacity",Da).remove(),y=ra.transition(d.order()).style("opacity",1),v=Math.max(i,0)+a,_=Ui(h),x=l.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),ra.transition(x));m.append("line"),m.append("text");var M,C,P,E,T=m.select("line"),S=y.select("line"),L=d.select("text").text(p),A=m.select("text"),D=y.select("text"),I="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=Ko,M="x",P="y",C="x2",E="y2",L.attr("dy",0>I?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+I*o+"V0H"+_[1]+"V"+I*o)):(t=Jo,M="y",P="x",C="y2",E="x2",L.attr("dy",".32em").style("text-anchor",0>I?"end":"start"),w.attr("d","M"+I*o+","+_[0]+"H0V"+_[1]+"H"+I*o)),T.attr(E,I*i),A.attr(P,I*v),S.attr(C,0).attr(E,I*i),D.attr(M,0).attr(P,I*v),h.rangeBand){var k=h,N=k.rangeBand()/2;c=h=function(t){return k(t)+N}}else c.rangeBand?c=h:g.call(t,h,c);m.call(t,c,h),y.call(t,h,h)})}var e,n=ra.scale.linear(),r=zu,i=6,o=6,a=3,s=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Vu?e+"":zu,t):r},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var zu="bottom",Vu={top:1,right:1,bottom:1,left:1};ra.svg.brush=function(){function t(n){n.each(function(){var n=ra.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=n.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=n.selectAll(".resize").data(m,b);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Gu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var u,h=ra.transition(n),f=ra.transition(a);l&&(u=Ui(l),f.attr("x",u[0]).attr("width",u[1]-u[0]),r(h)),c&&(u=Ui(c),f.attr("y",u[0]).attr("height",u[1]-u[0]),i(h)),e(h)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",h[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function i(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function o(){function o(){32==ra.event.keyCode&&(L||(b=null,D[0]-=h[1],D[1]-=f[1],L=2),P())}function m(){32==ra.event.keyCode&&2==L&&(D[0]+=h[1],D[1]+=f[1],L=0,P())}function g(){var t=ra.mouse(x),n=!1;_&&(t[0]+=_[0],t[1]+=_[1]),L||(ra.event.altKey?(b||(b=[(h[0]+h[1])/2,(f[0]+f[1])/2]),D[0]=h[+(t[0]<b[0])],D[1]=f[+(t[1]<b[1])]):b=null),T&&y(t,l,0)&&(r(C),n=!0),S&&y(t,c,1)&&(i(C),n=!0),n&&(e(C),M({type:"brush",mode:L?"move":"resize"}))}function y(t,e,n){var r,i,o=Ui(e),u=o[0],l=o[1],c=D[n],m=n?f:h,g=m[1]-m[0];return L&&(u-=c,l-=g+c),r=(n?d:p)?Math.max(u,Math.min(l,t[n])):t[n],L?i=(r+=c)+g:(b&&(c=Math.max(u,Math.min(l,2*b[n]-r))),r>c?(i=r,r=c):i=c),m[0]!=r||m[1]!=i?(n?s=null:a=null,m[0]=r,m[1]=i,!0):void 0}function v(){g(),C.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ra.select("body").style("cursor",null),I.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),M({type:"brushend"})}var b,_,x=this,w=ra.select(ra.event.target),M=u.of(x,arguments),C=ra.select(x),E=w.datum(),T=!/^(n|s)$/.test(E)&&l,S=!/^(e|w)$/.test(E)&&c,L=w.classed("extent"),A=K(x),D=ra.mouse(x),I=ra.select(n(x)).on("keydown.brush",o).on("keyup.brush",m);if(ra.event.changedTouches?I.on("touchmove.brush",g).on("touchend.brush",v):I.on("mousemove.brush",g).on("mouseup.brush",v),C.interrupt().selectAll("*").interrupt(),L)D[0]=h[0]-D[0],D[1]=f[0]-D[1];else if(E){var k=+/w$/.test(E),N=+/^n/.test(E);_=[h[1-k]-D[0],f[1-N]-D[1]],D[0]=h[k],D[1]=f[N]}else ra.event.altKey&&(b=D.slice());C.style("pointer-events","none").selectAll(".resize").style("display",null),ra.select("body").style("cursor",w.style("cursor")),M({type:"brushstart"}),g()}var a,s,u=T(t,"brushstart","brush","brushend"),l=null,c=null,h=[0,0],f=[0,0],p=!0,d=!0,m=Wu[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:h,y:f,i:a,j:s},n=this.__chart__||e;this.__chart__=e,Bu?ra.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,h=n.x,f=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=_r(h,e.x),r=_r(f,e.y);return a=s=null,function(i){h=e.x=n(i),f=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,m=Wu[!l<<1|!c],t):l},t.y=function(e){return arguments.length?(c=e,m=Wu[!l<<1|!c],t):c},t.clamp=function(e){return arguments.length?(l&&c?(p=!!e[0],d=!!e[1]):l?p=!!e:c&&(d=!!e),t):l&&c?[p,d]:l?p:c?d:null},t.extent=function(e){var n,r,i,o,u;return arguments.length?(l&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),a=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(u=n,n=r,r=u),(n!=h[0]||r!=h[1])&&(h=[n,r])),c&&(i=e[0],o=e[1],l&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),i>o&&(u=i,i=o,o=u),(i!=f[0]||o!=f[1])&&(f=[i,o])),t):(l&&(a?(n=a[0],r=a[1]):(n=h[0],r=h[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(u=n,n=r,r=u))),c&&(s?(i=s[0],o=s[1]):(i=f[0],o=f[1],c.invert&&(i=c.invert(i),o=c.invert(o)),i>o&&(u=i,i=o,o=u))),l&&c?[[n,i],[r,o]]:l?[n,r]:c&&[i,o])},t.clear=function(){return t.empty()||(h=[0,0],f=[0,0],a=s=null),t},t.empty=function(){return!!l&&h[0]==h[1]||!!c&&f[0]==f[1]},ra.rebind(t,u,"on")};var Gu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Hu=ls.format=ms.timeFormat,ju=Hu.utc,Xu=ju("%Y-%m-%dT%H:%M:%S.%LZ");
Hu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Qo:Xu,Qo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Qo.toString=Xu.toString,ls.second=zt(function(t){return new cs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ls.seconds=ls.second.range,ls.seconds.utc=ls.second.utc.range,ls.minute=zt(function(t){return new cs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ls.minutes=ls.minute.range,ls.minutes.utc=ls.minute.utc.range,ls.hour=zt(function(t){var e=t.getTimezoneOffset()/60;return new cs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ls.hours=ls.hour.range,ls.hours.utc=ls.hour.utc.range,ls.month=zt(function(t){return t=ls.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ls.months=ls.month.range,ls.months.utc=ls.month.utc.range;var Yu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],qu=[[ls.second,1],[ls.second,5],[ls.second,15],[ls.second,30],[ls.minute,1],[ls.minute,5],[ls.minute,15],[ls.minute,30],[ls.hour,1],[ls.hour,3],[ls.hour,6],[ls.hour,12],[ls.day,1],[ls.day,2],[ls.week,1],[ls.month,1],[ls.month,3],[ls.year,1]],Zu=Hu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Le]]),Ku={range:function(t,e,n){return ra.range(Math.ceil(t/n)*n,+e,n).map(ta)},floor:b,ceil:b};qu.year=ls.year,ls.scale=function(){return $o(ra.scale.linear(),qu,Zu)};var Ju=qu.map(function(t){return[t[0].utc,t[1]]}),Qu=ju.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Le]]);Ju.year=ls.year.utc,ls.scale.utc=function(){return $o(ra.scale.linear(),Ju,Qu)},ra.text=St(function(t){return t.responseText}),ra.json=function(t,e){return Lt(t,"application/json",ea,e)},ra.html=function(t,e){return Lt(t,"text/html",na,e)},ra.xml=St(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(ra):"object"==typeof e&&e.exports&&(e.exports=ra),this.d3=ra}()},{}],10:[function(t,e,n){"use strict";var r,i=t("lodash"),o=t("superagent"),a=t("d3-color"),s=t("d3-scale"),u=t("colorbrewer"),l=t("color"),c={preloadImages:function(t){i.each(t,function(t){c.preloadImage(t)})},preloadImage:function(t){var e=new Image;e.src=t},randomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},linspace:function(t,e,n){var r=(e-t)/(n-1),o=i.range(t,e,r);return o.length==n?o:o.concat(e)},getThumbnail:function(t){return t+"_small"},cleanImageURL:function(t){return t.indexOf("http")>-1?t:window.lightning&&window.lightning.host?window.lightning.host+t:t},mapRange:function(t,e,n,r,i){return r+(i-r)*((t-e)/(n-e))},getColors:function(t){for(var e=["#A38EF3","#7ABFEA","#5BC69F","#E96B88","#F0E86B","#C2B08C","#F9B070","#F19A9A","#AADA90","#DBB1F2"],n=[],r=0;t>r;r++)n.push(e[r%e.length]);return n},getColorFromData:function(t){var e,n;if(t.hasOwnProperty("group")){var r=t.group,o=Math.min.apply(null,r),l=Math.max.apply(null,r),c=l-o+1,h=this.getColors(c);e=r.map(function(t){return a.rgb(h[t-o])})}else if(t.hasOwnProperty("color"))n=t.color,e=n.map(function(t){return a.rgb(t[0],t[1],t[2])});else if(t.hasOwnProperty("values")){var f=t.values,p=i.uniq(t.values).length;p>8&&(p=8);var d=t.colormap?t.colormap:"Purples";n="Lightning"==d?this.getColors(p):u[d][p];var m=Math.min.apply(null,f),g=Math.max.apply(null,f),y=this.linspace(m,g,p),v=s.linear().domain(y).range(n);e=f.map(function(t){return a.rgb(v(t))})}else e=[];return e},buildRGBA:function(t,e){var n=l(t);return n.alpha(e),n.rgbString()},trackTransforms:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=e.createSVGMatrix();t.getTransform=function(){return n};var r=[],i=t.save;t.save=function(){return r.push(n.translate(0,0)),i.call(t)};var o=t.restore;t.restore=function(){return n=r.pop(),o.call(t)};var a=t.scale;t.scale=function(e,r){var i=n;return n=n.scaleNonUniform(e,r),n.d<1?void(n=i):a.call(t,e,r)};var s=t.rotate;t.rotate=function(e){return n=n.rotate(180*e/Math.PI),s.call(t,e)};var u=t.translate;t.translate=function(e,r){return n=n.translate(e,r),u.call(t,e,r)};var l=t.transform;t.transform=function(r,i,o,a,s,u){var c=e.createSVGMatrix();return c.a=r,c.b=i,c.c=o,c.d=a,c.e=s,c.f=u,n=n.multiply(c),l.call(t,r,i,o,a,s,u)};var c=t.setTransform;t.setTransform=function(e,r,i,o,a,s){return n.a=e,n.b=r,n.c=i,n.d=o,n.e=a,n.f=s,c.call(t,e,r,i,o,a,s)};var h=e.createSVGPoint();t.transformedPoint=function(t,e){return h.x=t,h.y=e,h.matrixTransform(n.inverse())}},addCanvasZoomPanListeners:function(t,e,n){var r,i,o=t.width/2,a=t.height/2;t.addEventListener("mousedown",function(n){o=n.offsetX||n.pageX-t.offsetLeft,a=n.offsetY||n.pageY-t.offsetTop,r=e.transformedPoint(o,a),i=!1},!1),t.addEventListener("mousemove",function(s){if(o=s.offsetX||s.pageX-t.offsetLeft,a=s.offsetY||s.pageY-t.offsetTop,i=!0,r){var u=e.transformedPoint(o,a);e.translate(u.x-r.x,u.y-r.y),n()}},!1),t.addEventListener("mouseup",function(t){r=null,i||u(t.shiftKey?-1:1)},!1);var s=1.025,u=function(t){var r=e.transformedPoint(o,a);e.translate(r.x,r.y);var i=Math.pow(s,t);e.scale(i,i),e.translate(-r.x,-r.y),n()},l=function(t){var e=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail:0;return e&&u(e),t.preventDefault()&&!1};t.addEventListener("DOMMouseScroll",l,!1),t.addEventListener("mousewheel",l,!1)},isEditorOrPreview:function(){var t=document.URL;return/https?:\/\/[^\/]+\/visualization-types\/*/.test(t)},getId:function(t){var e=t.$el;return t.$el||(e=$(t.selector)),e.closest("[data-model=visualization]").data("model-id")},getUrl:function(t){var e=this.getId(t),n="/";return window.lightning&&window.lightning.host&&(n=window.lightning.host),n+"visualizations/"+e},fetchData:function(t,e,n){if(t.$el||console.warn("Must set .$el property on your visualization"),this.isEditorOrPreview())setTimeout(function(){var t=$("#data-editor").next(".CodeMirror").find(".CodeMirror-code span")[0].innerHTML,r=JSON.parse(t);i.each(e,function(t){r=r[t]}),n(null,r)},0);else{var a=this.getUrl(t);r&&r.abort(),r=o.get(a+"/data/"+e.join("/")+"/",function(t,e){return t?n(t):void n(null,(e.body||{}).data)})}},getSettings:function(t,e){if(this.isEditorOrPreview())return void setTimeout(function(){e(null,{})},0);var n=this.getUrl(t);r=o.get(n+"/settings/",function(t,n){return t?e(t):void e(null,(n.body||{}).settings)})},getUniqueId:function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},updateSettings:function(t,e,n){if(this.isEditorOrPreview())return void setTimeout(function(){n(null,e)},0);var i=this.getUrl(t);r=o.post(i+"/settings/",e,function(t,e){return t?n(t):void n(null,(e.body||{}).settings)})},getCommForViz:function(t){var e=(window.lightning||{}).comm_map;return e?e[this.getId(t)]:void 0},sendCommMessage:function(t,e,n){var r=this.getCommForViz(t);r&&r.send(JSON.stringify({type:e,data:n}))},nearestPoint:function(t,e,n,r){for(var i,o,a,s=0,u=0;0==u&s<t.length;)a=t[s],o=Math.sqrt(Math.pow(n(a.x)-e[0],2)+Math.pow(r(a.y)-e[1],2)),o<=a.s&&(i=a,u=1),s++;return i}};e.exports=c},{color:11,colorbrewer:8,"d3-color":16,"d3-scale":17,lodash:18,superagent:19}],11:[function(t,e,n){var r=t("color-convert"),i=t("color-string"),o=function(t){if(t instanceof o)return t;if(!(this instanceof o))return new o(t);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof t){var e=i.getRgba(t);if(e)this.setValues("rgb",e);else if(e=i.getHsla(t))this.setValues("hsl",e);else{if(!(e=i.getHwb(t)))throw new Error('Unable to parse color from string "'+t+'"');this.setValues("hwb",e)}}else if("object"==typeof t){var e=t;if(void 0!==e.r||void 0!==e.red)this.setValues("rgb",e);else if(void 0!==e.l||void 0!==e.lightness)this.setValues("hsl",e);else if(void 0!==e.v||void 0!==e.value)this.setValues("hsv",e);else if(void 0!==e.w||void 0!==e.whiteness)this.setValues("hwb",e);else{if(void 0===e.c&&void 0===e.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(t));this.setValues("cmyk",e)}}};o.prototype={rgb:function(t){return this.setSpace("rgb",arguments)},hsl:function(t){return this.setSpace("hsl",arguments)},hsv:function(t){return this.setSpace("hsv",arguments)},hwb:function(t){return this.setSpace("hwb",arguments)},cmyk:function(t){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values.rgb;return t.concat([this.values.alpha])},hslaArray:function(){var t=this.values.hsl;return t.concat([this.values.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return i.hexString(this.values.rgb)},rgbString:function(){return i.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return i.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return i.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return i.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return i.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return i.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return i.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=.03928>=r?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb,e=(299*t[0]+587*t[1]+114*t[2])/1e3;return 128>e},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;3>e;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){return this.values.hsl[2]+=this.values.hsl[2]*t,this.setValues("hsl",this.values.hsl),this},darken:function(t){return this.values.hsl[2]-=this.values.hsl[2]*t,this.setValues("hsl",this.values.hsl),this},saturate:function(t){return this.values.hsl[1]+=this.values.hsl[1]*t,this.setValues("hsl",this.values.hsl),this},desaturate:function(t){return this.values.hsl[1]-=this.values.hsl[1]*t,this.setValues("hsl",this.values.hsl),this},whiten:function(t){return this.values.hwb[1]+=this.values.hwb[1]*t,this.setValues("hwb",this.values.hwb),this},blacken:function(t){return this.values.hwb[2]+=this.values.hwb[2]*t,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){return this.setValues("alpha",this.values.alpha-this.values.alpha*t),this},opaquer:function(t){return this.setValues("alpha",this.values.alpha+this.values.alpha*t),this},rotate:function(t){var e=this.values.hsl[0];return e=(e+t)%360,e=0>e?360+e:e,this.values.hsl[0]=e,this.setValues("hsl",this.values.hsl),this},mix:function(t,e){e=1-(null==e?.5:e);for(var n=2*e-1,r=this.alpha()-t.alpha(),i=((n*r==-1?n:(n+r)/(1+n*r))+1)/2,o=1-i,a=this.rgbArray(),s=t.rgbArray(),u=0;u<a.length;u++)a[u]=a[u]*i+s[u]*o;this.setValues("rgb",a);var l=this.alpha()*e+t.alpha()*(1-e);return this.setValues("alpha",l),this},toJSON:function(){return this.rgb()},clone:function(){return new o(this.rgb())}},o.prototype.getValues=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=this.values[t][n];return 1!=this.values.alpha&&(e.a=this.values.alpha),e},o.prototype.setValues=function(t,e){var n={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},i={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},o=1;if("alpha"==t)o=e;else if(e.length)this.values[t]=e.slice(0,t.length),o=e[t.length];else if(void 0!==e[t[0]]){for(var a=0;a<t.length;a++)this.values[t][a]=e[t[a]];o=e.a}else if(void 0!==e[n[t][0]]){for(var s=n[t],a=0;a<t.length;a++)this.values[t][a]=e[s[a]];o=e.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==o?o:this.values.alpha)),"alpha"!=t){for(var a=0;a<t.length;a++){var u=Math.max(0,Math.min(i[t][a],this.values[t][a]));this.values[t][a]=Math.round(u)}for(var l in n){l!=t&&(this.values[l]=r[t][l](this.values[t]));for(var a=0;a<l.length;a++){var u=Math.max(0,Math.min(i[l][a],this.values[l][a]));this.values[l][a]=Math.round(u)}}return!0}},o.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},o.prototype.setChannel=function(t,e,n){return void 0===n?this.values[t][e]:(this.values[t][e]=n,this.setValues(t,this.values[t]),this)},e.exports=o},{"color-convert":13,"color-string":14}],12:[function(t,e,n){function i(t){var e,n,r,i=t[0]/255,o=t[1]/255,a=t[2]/255,s=Math.min(i,o,a),u=Math.max(i,o,a),l=u-s;return u==s?e=0:i==u?e=(o-a)/l:o==u?e=2+(a-i)/l:a==u&&(e=4+(i-o)/l),e=Math.min(60*e,360),0>e&&(e+=360),r=(s+u)/2,n=u==s?0:.5>=r?l/(u+s):l/(2-u-s),[e,100*n,100*r]}function o(t){var e,n,r,i=t[0],o=t[1],a=t[2],s=Math.min(i,o,a),u=Math.max(i,o,a),l=u-s;return n=0==u?0:l/u*1e3/10,u==s?e=0:i==u?e=(o-a)/l:o==u?e=2+(a-i)/l:a==u&&(e=4+(i-o)/l),e=Math.min(60*e,360),0>e&&(e+=360),r=u/255*1e3/10,[e,n,r]}function a(t){var e=t[0],n=t[1],r=t[2],o=i(t)[0],a=1/255*Math.min(e,Math.min(n,r)),r=1-1/255*Math.max(e,Math.max(n,r));return[o,100*a,100*r]}function s(t){var e,n,r,i,o=t[0]/255,a=t[1]/255,s=t[2]/255;return i=Math.min(1-o,1-a,1-s),e=(1-o-i)/(1-i)||0,n=(1-a-i)/(1-i)||0,r=(1-s-i)/(1-i)||0,[100*e,100*n,100*r,100*i]}function u(t){return J[JSON.stringify(t)]}function l(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var i=.4124*e+.3576*n+.1805*r,o=.2126*e+.7152*n+.0722*r,a=.0193*e+.1192*n+.9505*r;return[100*i,100*o,100*a]}function c(t){var e,n,r,i=l(t),o=i[0],a=i[1],s=i[2];return o/=95.047,a/=100,s/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,e=116*a-16,n=500*(o-a),r=200*(a-s),[e,n,r]}function h(t){return F(c(t))}function f(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0==s)return o=255*u,[o,o,o];n=.5>u?u*(1+s):u+s-u*s,e=2*u-n,i=[0,0,0];for(var l=0;3>l;l++)r=a+1/3*-(l-1),0>r&&r++,r>1&&r--,o=1>6*r?e+6*(n-e)*r:1>2*r?n:2>3*r?e+(n-e)*(2/3-r)*6:e,i[l]=255*o;return i}function p(t){var e,n,r=t[0],i=t[1]/100,o=t[2]/100;return 0===o?[0,0,0]:(o*=2,i*=1>=o?o:2-o,n=(o+i)/2,e=2*i/(o+i),[r,100*e,100*n])}function d(t){return a(f(t))}function m(t){return s(f(t))}function y(t){return u(f(t))}function v(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*r*(1-n),s=255*r*(1-n*o),u=255*r*(1-n*(1-o)),r=255*r;switch(i){case 0:return[r,u,a];case 1:return[s,r,a];case 2:return[a,r,u];case 3:return[a,s,r];case 4:return[u,a,r];case 5:return[r,a,s]}}function _(t){var e,n,r=t[0],i=t[1]/100,o=t[2]/100;return n=(2-i)*o,e=i*o,e/=1>=n?n:2-n,e=e||0,n/=2,[r,100*e,100*n]}function x(t){return a(v(t))}function w(t){return s(v(t))}function M(t){return u(v(t))}function C(t){var e,n,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100,l=s+u;switch(l>1&&(s/=l,u/=l),e=Math.floor(6*a),n=1-u,i=6*a-e,0!=(1&e)&&(i=1-i),o=s+i*(n-s),e){default:case 6:case 0:r=n,g=o,b=s;break;case 1:r=o,g=n,b=s;break;case 2:r=s,g=n,b=o;break;case 3:r=s,g=o,b=n;break;case 4:r=o,g=s,b=n;break;case 5:r=n,g=s,b=o}return[255*r,255*g,255*b]}function P(t){return i(C(t))}function E(t){return o(C(t))}function T(t){return s(C(t))}function S(t){return u(C(t))}function L(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100,s=t[3]/100;return e=1-Math.min(1,i*(1-s)+s),n=1-Math.min(1,o*(1-s)+s),r=1-Math.min(1,a*(1-s)+s),[255*e,255*n,255*r]}function A(t){return i(L(t))}function D(t){return o(L(t))}function I(t){return a(L(t))}function k(t){return u(L(t))}function N(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100;return e=3.2406*i+-1.5372*o+a*-.4986,n=i*-.9689+1.8758*o+.0415*a,r=.0557*i+o*-.204+1.057*a,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:e=12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n=12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=12.92*r,e=Math.min(Math.max(0,e),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[255*e,255*n,255*r]}function B(t){var e,n,r,i=t[0],o=t[1],a=t[2];return i/=95.047,o/=100,a/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,e=116*o-16,n=500*(i-o),r=200*(o-a),[e,n,r]}function O(t){return F(B(t))}function R(t){var e,n,r,i,o=t[0],a=t[1],s=t[2];return 8>=o?(n=100*o/903.3,i=7.787*(n/100)+16/116):(n=100*Math.pow((o+16)/116,3),i=Math.pow(n/100,1/3)),e=.008856>=e/95.047?e=95.047*(a/500+i-16/116)/7.787:95.047*Math.pow(a/500+i,3),r=.008859>=r/108.883?r=108.883*(i-s/200-16/116)/7.787:108.883*Math.pow(i-s/200,3),[e,n,r]}function F(t){var e,n,r,i=t[0],o=t[1],a=t[2];return e=Math.atan2(a,o),n=360*e/2/Math.PI,0>n&&(n+=360),r=Math.sqrt(o*o+a*a),[i,r,n]}function U(t){return N(R(t))}function z(t){var e,n,r,i=t[0],o=t[1],a=t[2];return r=a/360*2*Math.PI,e=o*Math.cos(r),n=o*Math.sin(r),[i,e,n]}function V(t){return R(z(t))}function G(t){return U(z(t))}function W(t){return K[t]}function H(t){return i(W(t))}function j(t){return o(W(t))}function X(t){return a(W(t))}function Y(t){return s(W(t))}function q(t){return c(W(t))}function Z(t){return l(W(t))}e.exports={rgb2hsl:i,rgb2hsv:o,rgb2hwb:a,rgb2cmyk:s,rgb2keyword:u,rgb2xyz:l,rgb2lab:c,rgb2lch:h,hsl2rgb:f,hsl2hsv:p,hsl2hwb:d,hsl2cmyk:m,hsl2keyword:y,hsv2rgb:v,hsv2hsl:_,hsv2hwb:x,hsv2cmyk:w,hsv2keyword:M,hwb2rgb:C,hwb2hsl:P,hwb2hsv:E,hwb2cmyk:T,hwb2keyword:S,cmyk2rgb:L,cmyk2hsl:A,cmyk2hsv:D,cmyk2hwb:I,cmyk2keyword:k,keyword2rgb:W,keyword2hsl:H,keyword2hsv:j,keyword2hwb:X,keyword2cmyk:Y,keyword2lab:q,keyword2xyz:Z,xyz2rgb:N,xyz2lab:B,xyz2lch:O,lab2xyz:R,lab2rgb:U,lab2lch:F,lch2lab:z,lch2xyz:V,lch2rgb:G};var K={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},J={};for(var Q in K)J[JSON.stringify(K[Q])]=Q},{}],13:[function(t,e,n){var r=t("./conversions"),i=function(){return new l};for(var o in r){i[o+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),r[t](e)}}(o);var a=/(\w+)2(\w+)/.exec(o),s=a[1],u=a[2];i[s]=i[s]||{},i[s][u]=i[o]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var n=r[t](e);if("string"==typeof n||void 0===n)return n;for(var i=0;i<n.length;i++)n[i]=Math.round(n[i]);return n}}(o)}var l=function(){this.convs={}};l.prototype.routeSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n))},l.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},l.prototype.getValues=function(t){var e=this.convs[t];if(!e){var n=this.space,r=this.convs[n];e=i[n][t](r),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){l.prototype[t]=function(e){return this.routeSpace(t,arguments)}}),e.exports=i},{"./conversions":12}],14:[function(t,e,n){function r(t){if(t){var e=/^#([a-fA-F0-9]{3})$/,n=/^#([a-fA-F0-9]{6})$/,r=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d\.]+)\s*)?\)$/,i=/^rgba?\(\s*([\d\.]+)\%\s*,\s*([\d\.]+)\%\s*,\s*([\d\.]+)\%\s*(?:,\s*([\d\.]+)\s*)?\)$/,o=/(\D+)/,a=[0,0,0],s=1,u=t.match(e);if(u){u=u[1];for(var l=0;l<a.length;l++)a[l]=parseInt(u[l]+u[l],16)}else if(u=t.match(n)){u=u[1];for(var l=0;l<a.length;l++)a[l]=parseInt(u.slice(2*l,2*l+2),16)}else if(u=t.match(r)){for(var l=0;l<a.length;l++)a[l]=parseInt(u[l+1]);s=parseFloat(u[4])}else if(u=t.match(i)){for(var l=0;l<a.length;l++)a[l]=Math.round(2.55*parseFloat(u[l+1]));s=parseFloat(u[4])}else if(u=t.match(o)){if("transparent"==u[1])return[0,0,0,0];if(a=_[u[1]],!a)return}for(var l=0;l<a.length;l++)a[l]=v(a[l],0,255);return s=s||0==s?v(s,0,1):1,a[3]=s,a}}function i(t){if(t){var e=/^hsla?\(\s*(\d+)(?:deg)?\s*,\s*([\d\.]+)%\s*,\s*([\d\.]+)%\s*(?:,\s*([\d\.]+)\s*)?\)/,n=t.match(e);if(n){var r=v(parseInt(n[1]),0,360),i=v(parseFloat(n[2]),0,100),o=v(parseFloat(n[3]),0,100),a=v(parseFloat(n[4])||1,0,1);return[r,i,o,a]}}}function o(t){if(t){var e=/^hwb\(\s*(\d+)(?:deg)?\s*,\s*([\d\.]+)%\s*,\s*([\d\.]+)%\s*(?:,\s*([\d\.]+)\s*)?\)/,n=t.match(e);if(n){var r=v(parseInt(n[1]),0,360),i=v(parseFloat(n[2]),0,100),o=v(parseFloat(n[3]),0,100),a=v(parseFloat(n[4])||1,0,1);return[r,i,o,a]}}}function a(t){var e=r(t);return e&&e.slice(0,3)}function s(t){var e=i(t);return e&&e.slice(0,3)}function u(t){var e=r(t);return e?e[3]:(e=i(t))?e[3]:(e=o(t))?e[3]:void 0}function l(t){return"#"+b(t[0])+b(t[1])+b(t[2])}function c(t,e){return 1>e||t[3]&&t[3]<1?h(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"}function h(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function f(t,e){if(1>e||t[3]&&t[3]<1)return p(t,e);var n=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return"rgb("+n+"%, "+r+"%, "+i+"%)"}function p(t,e){var n=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return"rgba("+n+"%, "+r+"%, "+i+"%, "+(e||t[3]||1)+")"}function d(t,e){return 1>e||t[3]&&t[3]<1?m(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"}function m(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function g(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"}function y(t){return x[t.slice(0,3)]}function v(t,e,n){return Math.min(Math.max(e,t),n)}function b(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var _=t("color-name");e.exports={getRgba:r,getHsla:i,getRgb:a,getHsl:s,getHwb:o,getAlpha:u,hexString:l,rgbString:c,rgbaString:h,percentString:f,percentaString:p,hslString:d,hslaString:m,hwbString:g,keyword:y};var x={};for(var w in _)x[_[w]]=w},{"color-name":15}],15:[function(t,e,n){e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],16:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.color={})}(this,function(t){"use strict";function e(t,e){var n=t-e;return n>180||-180>n?n-360*Math.round(n/360):n}function n(){}function r(t){var e;return t=(t+"").trim().toLowerCase(),(e=L.exec(t))?(e=parseInt(e[1],16),o(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e)):(e=A.exec(t))?i(parseInt(e[1],16)):(e=D.exec(t))?o(e[1],e[2],e[3]):(e=I.exec(t))?o(2.55*e[1],2.55*e[2],2.55*e[3]):(e=k.exec(t))?u(e[1],.01*e[2],.01*e[3]):N.hasOwnProperty(t)?i(N[t]):null}function i(t){return o(t>>16&255,t>>8&255,255&t)}function o(t,e,i){return 1===arguments.length&&(t instanceof n||(t=r(t)),t?(t=t.rgb(),i=t.b,e=t.g,t=t.r):t=e=i=NaN),new a(t,e,i)}function a(t,e,n){this.r=+t,this.g=+e,this.b=+n}function s(t,e,n){return"#"+(isNaN(t)?"00":(t=Math.round(t))<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16))+(isNaN(e)?"00":(e=Math.round(e))<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16))+(isNaN(n)?"00":(n=Math.round(n))<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16))}function u(t,e,i){if(1===arguments.length)if(t instanceof l)i=t.l,e=t.s,t=t.h;else if(t instanceof n||(t=r(t)),t){if(t instanceof l)return t;t=t.rgb();var o=t.r/255,a=t.g/255,s=t.b/255,u=Math.min(o,a,s),c=Math.max(o,a,s),h=c-u;
i=(c+u)/2,h?(e=.5>i?h/(c+u):h/(2-c-u),t=o===c?(a-s)/h+6*(s>a):a===c?(s-o)/h+2:(o-a)/h+4,t*=60):(t=NaN,e=i>0&&1>i?0:t)}else t=e=i=NaN;return new l(t,e,i)}function l(t,e,n){this.h=+t,this.s=+e,this.l=+n}function c(t,e,n){return 255*(60>t?e+(n-e)*t/60:180>t?n:240>t?e+(n-e)*(240-t)/60:e)}function h(t,e,n){if(1===arguments.length)if(t instanceof f)n=t.b,e=t.a,t=t.l;else if(t instanceof v){var r=t.h*q;n=Math.sin(r)*t.c,e=Math.cos(r)*t.c,t=t.l}else{t instanceof a||(t=o(t));var i=g(t.r),s=g(t.g),n=g(t.b),u=p((.4124564*i+.3575761*s+.1804375*n)/z),l=p((.2126729*i+.7151522*s+.072175*n)/V),c=p((.0193339*i+.119192*s+.9503041*n)/G);n=200*(l-c),e=500*(u-l),t=116*l-16}return new f(t,e,n)}function f(t,e,n){this.l=+t,this.a=+e,this.b=+n}function p(t){return t>X?Math.pow(t,1/3):t/j+W}function d(t){return t>H?t*t*t:j*(t-W)}function m(t){return 255*(.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function g(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function y(t,e,n){return 1===arguments.length&&(t instanceof v?(n=t.l,e=t.c,t=t.h):(t instanceof f||(t=h(t)),n=t.l,e=Math.sqrt(t.a*t.a+t.b*t.b),t=Math.atan2(t.b,t.a)*Z,0>t&&(t+=360))),new v(t,e,n)}function v(t,e,n){this.h=+t,this.c=+e,this.l=+n}function b(t,e,n){if(1===arguments.length)if(t instanceof _)n=t.l,e=t.s,t=t.h;else{t instanceof a||(t=o(t));var r=t.r/255,i=t.g/255,s=t.b/255;n=(it*s+nt*r-rt*i)/(it+nt-rt);var u=s-n,l=(et*(i-n)-$*u)/tt;e=Math.sqrt(l*l+u*u)/(et*n*(1-n)),t=e?Math.atan2(l,u)*Z-120:NaN,0>t&&(t+=360)}return new _(t,e,n)}function _(t,e,n){this.h=+t,this.s=+e,this.l=+n}function x(t){return function(n,r){n=b(n),r=b(r);var i=isNaN(n.h)?r.h:n.h,o=isNaN(n.s)?r.s:n.s,a=n.l,s=isNaN(r.h)?0:e(r.h,i),u=isNaN(r.s)?0:r.s-o,l=r.l-a;return function(e){return n.h=i+s*e,n.s=o+u*e,n.l=a+l*Math.pow(e,t),n+""}}}function w(t){return function(e,n){e=b(e),n=b(n);var r=isNaN(e.h)?n.h:e.h,i=isNaN(e.s)?n.s:e.s,o=e.l,a=isNaN(n.h)?0:n.h-r,s=isNaN(n.s)?0:n.s-i,u=n.l-o;return function(n){return e.h=r+a*n,e.s=i+s*n,e.l=o+u*Math.pow(n,t),e+""}}}function M(t,e){t=y(t),e=y(e);var n=isNaN(t.h)?e.h:t.h,r=isNaN(t.c)?e.c:t.c,i=t.l,o=isNaN(e.h)?0:e.h-n,a=isNaN(e.c)?0:e.c-r,s=e.l-i;return function(e){return t.h=n+o*e,t.c=r+a*e,t.l=i+s*e,t+""}}function C(t,n){t=y(t),n=y(n);var r=isNaN(t.h)?n.h:t.h,i=isNaN(t.c)?n.c:t.c,o=t.l,a=isNaN(n.h)?0:e(n.h,r),s=isNaN(n.c)?0:n.c-i,u=n.l-o;return function(e){return t.h=r+a*e,t.c=i+s*e,t.l=o+u*e,t+""}}function P(t,e){t=h(t),e=h(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,s=e.b-i;return function(e){return t.l=n+o*e,t.a=r+a*e,t.b=i+s*e,t+""}}function E(t,e){t=u(t),e=u(e);var n=isNaN(t.h)?e.h:t.h,r=isNaN(t.s)?e.s:t.s,i=t.l,o=isNaN(e.h)?0:e.h-n,a=isNaN(e.s)?0:e.s-r,s=e.l-i;return function(e){return t.h=n+o*e,t.s=r+a*e,t.l=i+s*e,t+""}}function T(t,n){t=u(t),n=u(n);var r=isNaN(t.h)?n.h:t.h,i=isNaN(t.s)?n.s:t.s,o=t.l,a=isNaN(n.h)?0:e(n.h,r),s=isNaN(n.s)?0:n.s-i,l=n.l-o;return function(e){return t.h=r+a*e,t.s=i+s*e,t.l=o+l*e,t+""}}function S(t,e){t=o(t),e=o(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,u=e.g-r,l=e.b-i;return function(t){return s(Math.round(n+a*t),Math.round(r+u*t),Math.round(i+l*t))}}var L=/^#([0-9a-f]{3})$/,A=/^#([0-9a-f]{6})$/,D=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,I=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,k=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/;r.prototype=n.prototype={displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}};var N={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},B=.7,O=1/B,R=o.prototype=a.prototype=new n;R.brighter=function(t){return t=null==t?O:Math.pow(O,t),new a(this.r*t,this.g*t,this.b*t)},R.darker=function(t){return t=null==t?B:Math.pow(B,t),new a(this.r*t,this.g*t,this.b*t)},R.rgb=function(){return this},R.displayable=function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255},R.toString=function(){return s(this.r,this.g,this.b)};var F=u.prototype=l.prototype=new n;F.brighter=function(t){return t=null==t?O:Math.pow(O,t),new l(this.h,this.s,this.l*t)},F.darker=function(t){return t=null==t?B:Math.pow(B,t),new l(this.h,this.s,this.l*t)},F.rgb=function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(.5>n?n:1-n)*e,i=2*n-r;return new a(c(t>=240?t-240:t+120,i,r),c(t,i,r),c(120>t?t+240:t-120,i,r))},F.displayable=function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1};var U=18,z=.95047,V=1,G=1.08883,W=4/29,H=6/29,j=3*H*H,X=H*H*H,Y=h.prototype=f.prototype=new n;Y.brighter=function(t){return new f(this.l+U*(null==t?1:t),this.a,this.b)},Y.darker=function(t){return new f(this.l-U*(null==t?1:t),this.a,this.b)},Y.rgb=function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=V*d(t),e=z*d(e),n=G*d(n),new a(m(3.2404542*e-1.5371385*t-.4985314*n),m(-.969266*e+1.8760108*t+.041556*n),m(.0556434*e-.2040259*t+1.0572252*n))};var q=Math.PI/180,Z=180/Math.PI,K=y.prototype=v.prototype=new n;K.brighter=function(t){return new v(this.h,this.c,this.l+U*(null==t?1:t))},K.darker=function(t){return new v(this.h,this.c,this.l-U*(null==t?1:t))},K.rgb=function(){return h(this).rgb()};var J=-.14861,Q=1.78277,$=-.29227,tt=-.90649,et=1.97294,nt=et*tt,rt=et*Q,it=Q*$-tt*J,ot=b.prototype=_.prototype=new n;ot.brighter=function(t){return t=null==t?O:Math.pow(O,t),new _(this.h,this.s,this.l*t)},ot.darker=function(t){return t=null==t?B:Math.pow(B,t),new _(this.h,this.s,this.l*t)},ot.rgb=function(){var t=isNaN(this.h)?0:(this.h+120)*q,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new a(255*(e+n*(J*r+Q*i)),255*(e+n*($*r+tt*i)),255*(e+n*(et*r)))};var at=x(1),st=w(1);t.interpolateCubehelix=at,t.interpolateCubehelixLong=st,t.color=r,t.rgb=o,t.hsl=u,t.lab=h,t.hcl=y,t.cubehelix=b,t.interpolateRgb=S,t.interpolateHsl=T,t.interpolateHslLong=E,t.interpolateLab=P,t.interpolateHcl=C,t.interpolateHclLong=M,t.interpolateCubehelixGamma=x,t.interpolateCubehelixGammaLong=w})},{}],17:[function(t,e,n){"undefined"==typeof Map?(Map=function(){this.clear()},Map.prototype={set:function(t,e){return this._[t]=e,this},get:function(t){return this._[t]},has:function(t){return t in this._},"delete":function(t){return t in this._&&delete this._[t]},clear:function(){this._=Object.create(null)},get size(){var t=0;for(var e in this._)++t;return t},forEach:function(t){for(var e in this._)t(this._[e],e,this)}}):function(){var t=new Map;t.set(0,0)!==t&&(t=t.set,Map.prototype.set=function(){return t.apply(this,arguments),this})}(),function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.scale={})}(this,function(t){"use strict";function e(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function n(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function i(t,e,n){var r=Ee.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function o(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function a(t,e,n){var r=Te.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function s(t,e,n){var r=Te.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function u(t,e,n){var r=Te.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function l(t,e,n){var r=Te.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function c(t,e,n){var r=Te.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function h(t,e,n){var r=Te.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function f(t,e,n){var r=Te.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function p(t,e,n){var r=Te.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function d(t,e,n){var r=Te.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function m(t,e,n){var r=Te.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function g(t,e,n){var r=Te.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function y(t,e,n){var r=Te.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function v(){return"%"}function b(){return"+0000"}function _(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function x(t,e){return _(t.getUTCFullYear()%1e4,e,4)}function w(t,e){return _(t.getUTCFullYear()%100,e,2)}function M(t,e,n){function r(e){return t(e=new Date(+e)),e}return r.floor=r,r.round=function(n){var r=new Date(+n),i=new Date(n-1);return t(r),t(i),e(i,1),i-n>n-r?r:i},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,r,i){var o=[];if(n=new Date(n-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>n&&i>0))return o;for(e(n,1),t(n),r>n&&o.push(new Date(+n));e(n,i),t(n),r>n;)o.push(new Date(+n));return o},r.filter=function(n){return M(function(e){for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,r){return Le.setTime(+e),Se.setTime(+r),t(Le),t(Se),Math.floor(n(Le,Se))}),r}function C(t){return M(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}function P(t,e){return _(De.count(Ae(t),t),e,2)}function E(t){return t.getUTCDay()}function T(t,e){return _(Ie.count(Ae(t),t),e,2)}function S(t,e){return _(t.getUTCSeconds(),e,2)}function L(t,e){return _(t.getUTCMinutes(),e,2)}function A(t,e){return _(t.getUTCMonth()+1,e,2)}function D(t,e){return _(t.getUTCMilliseconds(),e,3)}function I(t,e){return _(1+ke.count(Ae(t),t),e,3)}function k(t,e){return _(t.getUTCHours()%12||12,e,2)}function N(t,e){return _(t.getUTCHours(),e,2)}function B(t,e){return _(t.getUTCDate(),e,2)}function O(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_(e/60|0,"0",2)+_(e%60,"0",2)}function R(t,e){return _(t.getFullYear()%1e4,e,4)}function F(t,e){return _(t.getFullYear()%100,e,2)}function U(t){return M(function(e){e.setHours(0,0,0,0),e.setDate(e.getDate()-(e.getDay()+7-t)%7)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}function z(t,e){return _(Be.count(Ne(t),t),e,2)}function V(t){return t.getDay()}function G(t,e){return _(Oe.count(Ne(t),t),e,2)}function W(t,e){return _(t.getSeconds(),e,2)}function H(t,e){return _(t.getMinutes(),e,2)}function j(t,e){return _(t.getMonth()+1,e,2)}function X(t,e){return _(t.getMilliseconds(),e,3)}function Y(t,e){return _(1+Re.count(Ne(t),t),e,3)}function q(t,e){return _(t.getHours()%12||12,e,2)}function Z(t,e){return _(t.getHours(),e,2)}function K(t,e){return _(t.getDate(),e,2)}function J(t){for(var e=new Map,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Q(t){return t.replace(Fe,"\\$&")}function $(t){return new RegExp("^(?:"+t.map(Q).join("|")+")","i")}function tt(t){function _(t,e){return function(n){for(var r,i,o,a=[],s=-1,u=0,l=t.length;++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Pe[r=t.charAt(++s)])&&(r=t.charAt(++s)),(o=e[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function M(t,n){return function(i){var o=r(1900),a=C(o,t,i,0);if(a!=i.length)return null;if("p"in o&&(o.H=o.H%12+12*o.p),"Z"in o){if("w"in o&&("W"in o||"U"in o)){var s=e(r(o.y)).getUTCDay();"W"in o&&(o.U=o.W,o.w=(o.w+6)%7,--s),o.m=0,o.d=o.w+7*o.U-(s+6)%7}return o.H+=o.Z/100|0,o.M+=o.Z%100,e(o)}if("w"in o&&("W"in o||"U"in o)){var s=n(r(o.y)).getDay();"W"in o&&(o.U=o.W,o.w=(o.w+6)%7,--s),o.m=0,o.d=o.w+7*o.U-(s+6)%7}return n(o)}}function C(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;s>a;){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=Bt[i in Pe?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function U(t,e,n){var r=Tt.exec(e.slice(n));return r?(t.w=St.get(r[0].toLowerCase()),n+r[0].length):-1}function Q(t,e,n){var r=Pt.exec(e.slice(n));return r?(t.w=Et.get(r[0].toLowerCase()),n+r[0].length):-1}function tt(t,e,n){var r=Dt.exec(e.slice(n));return r?(t.m=It.get(r[0].toLowerCase()),n+r[0].length):-1}function et(t,e,n){var r=Lt.exec(e.slice(n));return r?(t.m=At.get(r[0].toLowerCase()),n+r[0].length):-1}function nt(t,e,n){return C(t,gt,e,n)}function rt(t,e,n){return C(t,yt,e,n)}function it(t,e,n){return C(t,vt,e,n)}function ot(t,e,n){var r=Ct.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}function at(t){return xt[t.getDay()]}function st(t){return _t[t.getDay()]}function ut(t){return Mt[t.getMonth()]}function lt(t){return wt[t.getMonth()]}function ct(t){return bt[+(t.getHours()>=12)]}function ht(t){return xt[t.getUTCDay()]}function ft(t){return _t[t.getUTCDay()]}function pt(t){return Mt[t.getUTCMonth()]}function dt(t){return wt[t.getUTCMonth()]}function mt(t){return bt[+(t.getUTCHours()>=12)]}var gt=t.dateTime,yt=t.date,vt=t.time,bt=t.periods,_t=t.days,xt=t.shortDays,wt=t.months,Mt=t.shortMonths,Ct=J(bt),Pt=$(_t),Et=J(_t),Tt=$(xt),St=J(xt),Lt=$(wt),At=J(wt),Dt=$(Mt),It=J(Mt),kt={a:at,A:st,b:ut,B:lt,c:null,d:K,e:K,H:Z,I:q,j:Y,L:X,m:j,M:H,p:ct,S:W,U:G,w:V,W:z,x:null,X:null,y:F,Y:R,Z:O,"%":v},Nt={a:ht,A:ft,b:pt,B:dt,c:null,d:B,e:B,H:N,I:k,j:I,L:D,m:A,M:L,p:mt,S:S,U:T,w:E,W:P,x:null,X:null,y:w,Y:x,Z:b,"%":v},Bt={a:U,A:Q,b:tt,B:et,c:nt,d:h,e:h,H:p,I:p,j:f,L:g,m:c,M:d,p:ot,S:m,U:s,w:a,W:u,x:rt,X:it,y:l,Y:y,Z:o,"%":i};return kt.x=_(yt,kt),kt.X=_(vt,kt),kt.c=_(gt,kt),Nt.x=_(yt,Nt),Nt.X=_(vt,Nt),Nt.c=_(gt,Nt),{format:function(t){var e=_(t+="",kt);return e.parse=M(t,n),e.toString=function(){return t},e},utcFormat:function(t){var n=_(t+="",Nt);return n.parse=M(t,e),n.toString=function(){return t},n}}}function et(t){return($e(t)<t?Qe:Je(t)<t?Ke:Ze(t)<t?qe:ke(t)<t?Ye:Xe(t)<t?je(t)<t?He:We:Ae(t)<t?Ge:Ve)(t)}function nt(t){return new Date(t)}function rt(t,e){return t.range=function(){var n=e.range.apply(e,arguments);return n===e?t:n},t.rangeRound=function(){var n=e.rangeRound.apply(e,arguments);return n===e?t:n},t.clamp=function(){var n=e.clamp.apply(e,arguments);return n===e?t:n},t.interpolate=function(){var n=e.interpolate.apply(e,arguments);return n===e?t:n},t}function it(t,e){null==e&&(e=10);var n=t[0],r=t[t.length-1];n>r&&(a=r,r=n,n=a);var i=r-n,o=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=i/e/o;return a>=nn?o*=10:a>=en?o*=5:a>=tn&&(o*=2),[Math.ceil(n/o)*o,Math.floor(r/o)*o+o/2,o]}function ot(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function at(t){return function(e,n){return ot(t(e),n)}}function st(t){return 1===t.length&&(t=at(t)),{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function ut(t,e,n){var r=Math.abs(e-t)/n,i=fn(hn,r);return i===hn.length?["years",it([t/un,e/un],n)[2]]:i?hn[r/hn[i-1][2]<hn[i][2]/r?i-1:i]:["milliseconds",it([t,e],n)[2]]}function lt(t,e,n,r){function i(e){return t(e)}function o(t,n,r,i){switch(null==t&&(t=10),typeof t){case"number":t=ut(n,r,t),i=t[1],t=t[0];break;case"string":i=null==i?1:Math.floor(i);break;default:return t}return isFinite(i)&&i>0?e(t,i):null}return i.invert=function(e){return nt(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(nt)},i.ticks=function(e,n){var r,i=t.domain(),a=i[0],s=i[i.length-1];return a>s&&(r=a,a=s,s=r),(e=o(e,a,s,n))?e.range(a,s+1):[]},i.tickFormat=function(t){return null==t?n:r(t)},i.nice=function(e,n){var r,a=t.domain(),s=0,u=a.length-1,l=a[s],c=a[u];return l>c&&(r=s,s=u,u=r,r=l,l=c,c=r),(e=o(e,l,c,n))&&(a[s]=+e.floor(l),a[u]=+e.ceil(c),t.domain(a)),i},i.copy=function(){return lt(t.copy(),e,n,r)},rt(i,t)}function ct(t){for(var e=1;t*e%1;)e*=10;return e}function ht(t,e,n){(i=arguments.length)<3&&(n=1,2>i&&(e=t,t=0));var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=ct(Math.abs(n)),a=new Array(i);for(t*=o,n*=o;++r<i;)a[r]=(t+r*n)/o;return a}function ft(t){return{range:function(e,n){return ht(Math.ceil(e/t)*t,n,t).map(nt)},floor:function(e){return nt(Math.floor(e/t)*t)},ceil:function(e){return nt(Math.ceil(e/t)*t)}}}function pt(t,e){switch(t){case"milliseconds":return ft(e);case"seconds":return e>1?$e.filter(function(t){return t.getUTCSeconds()%e===0}):$e;case"minutes":return e>1?Je.filter(function(t){return t.getUTCMinutes()%e===0}):Je;case"hours":return e>1?Ze.filter(function(t){return t.getUTCHours()%e===0}):Ze;case"days":return e>1?ke.filter(function(t){return(t.getUTCDate()-1)%e===0}):ke;case"weeks":return e>1?je.filter(function(t){return je.count(0,t)%e===0}):je;case"months":return e>1?Xe.filter(function(t){return t.getUTCMonth()%e===0}):Xe;case"years":return e>1?Ae.filter(function(t){return t.getUTCFullYear()%e===0}):Ae}}function dt(t,e){return t=+t,e-=t,function(n){return t+e*n}}function mt(t,e){var n,r={},i={};for(n in t)n in e?r[n]=At(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function gt(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(At(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function yt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),isNaN(n)&&(n=0),"#"+(16>t?"0"+t.toString(16):t.toString(16))+(16>e?"0"+e.toString(16):e.toString(16))+(16>n?"0"+n.toString(16):n.toString(16))}function vt(t,e,n){this.r=Math.max(0,Math.min(255,Math.round(t))),this.g=Math.max(0,Math.min(255,Math.round(e))),this.b=Math.max(0,Math.min(255,Math.round(n)))}function bt(){}function _t(t){return Pt(t>>16&255,t>>8&255,255&t)}function xt(t,e,n){this.h=+t,this.s=Math.max(0,Math.min(1,+e)),this.l=Math.max(0,Math.min(1,+n))}function wt(t,e,n){return 255*(60>t?e+(n-e)*t/60:180>t?n:240>t?e+(n-e)*(240-t)/60:e)}function Mt(t,e,n){if(1===arguments.length)if(t instanceof xt)n=t.l,e=t.s,t=t.h;else if(t instanceof bt||(t=Ct(t)),t){if(t instanceof xt)return t;t=t.rgb();var r=t.r/255,i=t.g/255,o=t.b/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;n=(s+a)/2,u?(e=.5>n?u/(s+a):u/(2-s-a),t=r===s?(i-o)/u+6*(o>i):i===s?(o-r)/u+2:(r-i)/u+4,t*=60):(t=NaN,e=n>0&&1>n?0:t)}else t=e=n=NaN;return new xt(t,e,n)}function Ct(t){var e;return t=(t+"").trim().toLowerCase(),(e=Mn.exec(t))?(e=parseInt(e[1],16),Pt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e)):(e=wn.exec(t))?_t(parseInt(e[1],16)):(e=xn.exec(t))?Pt(e[1],e[2],e[3]):(e=_n.exec(t))?Pt(2.55*e[1],2.55*e[2],2.55*e[3]):(e=bn.exec(t))?Mt(e[1],.01*e[2],.01*e[3]):gn.has(t)?_t(gn.get(t)):null}function Pt(t,e,n){return 1===arguments.length&&(t instanceof bt||(t=Ct(t)),t?(t=t.rgb(),n=t.b,e=t.g,t=t.r):t=e=n=NaN),new vt(t,e,n)}function Et(t,e){t=Pt(t),e=Pt(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,s=e.b-i;return function(t){return yt(Math.round(n+o*t),Math.round(r+a*t),Math.round(i+s*t))}}function Tt(t){return function(){return t}}function St(t){return function(e){return t(e)+""}}function Lt(t,e){var n,r,i,o=Cn.lastIndex=Pn.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Cn.exec(t))&&(r=Pn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:dt(n,r)})),o=Pn.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?St(u[0].x):Tt(e):(e=u.length,function(t){for(var n,r=0;e>r;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function At(t,e){for(var n,r=En.length;--r>=0&&!(n=En[r](t,e)););return n}function Dt(t,e){if(t=t.slice(),!e)return t;var n,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=Math.floor(o/e)*e,t[i]=Math.ceil(a/e)*e,t}function It(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function kt(t){return t=It(Math.abs(t)),t?t[1]:NaN}function Nt(t,e){var n=It(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(vn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+It(t,e+o-1)[0]}function Bt(t,e){var n=It(t,e);if(!n)return t+"";var r=n[0],i=n[1];return 0>i?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function Ot(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,o=-1;r>i;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t}function Rt(t){if(!(e=Ln.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],u=!!e[7],l=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(u=!0,c="g"):Sn[c]||(c=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=l,this.type=c}function Ft(t){return new Rt(t)}function Ut(t){return t}function zt(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Vt(t){function e(t){t=Ft(t);var e=t.fill,n=t.align,a=t.sign,s=t.symbol,u=t.zero,l=t.width,c=t.comma,h=t.precision,f=t.type,p="$"===s?i[0]:"#"===s&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",d="$"===s?i[1]:/[%p]/.test(f)?"%":"",m=Sn[f],g=!f||/[defgprs%]/.test(f);return h=null==h?f?6:12:/[gprs]/.test(f)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),function(t){var i=p,s=d;if("c"===f)s=m(t)+s,t="";else{t=+t;var y=(0>t||0>1/t)&&(t*=-1,!0);if(t=m(t,h),i=(y?"("===a?a:"-":"-"===a||"("===a?"":a)+i,s=s+("s"===f?Tn[8+vn/3]:"")+(y&&"("===a?")":""),g)for(var v,b=-1,_=t.length;++b<_;)if(v=t.charCodeAt(b),48>v||v>57){s=(46===v?o+t.slice(b+1):t.slice(b))+s,t=t.slice(0,b);break}}c&&!u&&(t=r(t,1/0));var x=i.length+t.length+s.length,w=l>x?new Array(l-x+1).join(e):"";switch(c&&u&&(t=r(w+t,w.length?l-s.length:1/0),w=""),n){case"<":return i+t+s+w;case"=":return i+w+t+s;case"^":return w.slice(0,x=w.length>>1)+i+t+s+w.slice(x)}return w+i+t+s}}function n(t,n){var r=e((t=Ft(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(kt(n)/3))),o=Math.pow(10,-i),a=Tn[8+i/3];return function(t){return r(o*t)+a}}var r=t.grouping&&t.thousands?zt(t.grouping,t.thousands):Ut,i=t.currency,o=t.decimal;return{format:e,formatPrefix:n}}function Gt(t){return Math.max(0,-kt(Math.abs(t)))}function Wt(t,e){return Math.max(0,kt(Math.abs(e))-kt(Math.abs(t)))+1}function Ht(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(kt(e)/3)))-kt(Math.abs(t)))}function jt(t,e,n){var r=it(t,e);if(null==n)n=",."+Gt(r[2])+"f";else switch(n=Ft(n),n.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=Ht(r[2],i)),In(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=Wt(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=Gt(r[2])-2*("%"===n.type))}return Dn(n)}function Xt(t,e){return ht.apply(null,it(t,e))}function Yt(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}function qt(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Zt(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Kt(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Jt(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=Bn(t,e,1,i)-1;return a[n](o[n](e))}}function Qt(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Jt:Kt,u=r?Zt:qt;return a=i(t,e,u,n),s=i(e,t,u,dt),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t.slice()},o.range=function(t){return arguments.length?(e=t.slice(),i()):e.slice()},o.rangeRound=function(t){return o.range(t).interpolate(Yt)},o.clamp=function(t){return arguments.length?(r=!!t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return Xt(t,e)},o.tickFormat=function(e,n){return jt(t,e,n)},o.nice=function(e){return t=Dt(t,it(t,e)[2]),i()},o.copy=function(){return Qt(t,e,n,r)},i()}function $t(){return Qt([0,1],[0,1],At,!1)}function te(){return lt($t(),pt,et,ze).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function ee(t){return(Zn(t)<t?qn:Yn(t)<t?Xn:jn(t)<t?Hn:Re(t)<t?Wn:Gn(t)<t?Vn(t)<t?zn:Un:Ne(t)<t?Fn:Rn)(t)}function ne(t,e){switch(t){case"milliseconds":return ft(e);case"seconds":return e>1?Zn.filter(function(t){return t.getSeconds()%e===0}):Zn;case"minutes":return e>1?Yn.filter(function(t){return t.getMinutes()%e===0}):Yn;case"hours":return e>1?jn.filter(function(t){return t.getHours()%e===0}):jn;case"days":return e>1?Re.filter(function(t){return(t.getDate()-1)%e===0}):Re;case"weeks":return e>1?Vn.filter(function(t){return Vn.count(0,t)%e===0}):Vn;case"months":return e>1?Gn.filter(function(t){return t.getMonth()%e===0}):Gn;case"years":return e>1?Ne.filter(function(t){return t.getFullYear()%e===0}):Ne}}function re(){return lt($t(),ne,ee,On).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function ie(t,e,n){function r(r){return r>=r?e[Bn(t,r,0,n)]:void 0}return r.domain=function(i){return arguments.length?(t=i.slice(),n=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(i){return arguments.length?(e=i.slice(),n=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},r.copy=function(){return ie(t,e)},r}function oe(){return ie([.5],[0,1],1)}function ae(t,e,n){function r(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}function i(t){return 0>t?-Math.pow(-t,1/e):Math.pow(t,1/e)}function o(e){return t(r(e))}return o.invert=function(e){return i(t.invert(e))},o.exponent=function(t){return arguments.length?(e=+t,o.domain(n)):e},o.domain=function(e){return arguments.length?(n=e.map(Number),t.domain(n.map(r)),o):n.slice()},o.ticks=function(t){return Xt(n,t)},o.tickFormat=function(t,e){return jt(n,t,e)},o.nice=function(t){return o.domain(Dt(n,it(n,t)[2]))},o.copy=function(){return ae(t.copy(),e,n)},rt(o,t)}function se(){return ae($t(),.5,[0,1])}function ue(t,e,n){function r(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t.slice(),i()):n.slice()},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/o+t,[e,e+1/o]},r.copy=function(){return ue(t,e,n)},i()}function le(){return ue(0,1,[0,1])}function ce(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i}function he(t,e){function n(){var n=0,o=e.length;for(i=[];++n<o;)i[n-1]=ce(t,n/o);return r}function r(t){return isNaN(t=+t)?void 0:e[Bn(i,t)]}var i;return r.domain=function(e){if(!arguments.length)return t;t=[];for(var r,i=0,o=e.length;o>i;++i)r=e[i],null==r||isNaN(r=+r)||t.push(r);return t.sort(ot),n()},r.range=function(t){return arguments.length?(e=t.slice(),n()):e.slice()},r.quantiles=function(){return i},r.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?i[n-1]:t[0],n<i.length?i[n]:t[t.length-1]]},r.copy=function(){return he(t,e)},n()}function fe(){return he([],[])}function pe(){return ae($t(),1,[0,1])}function de(t,e,n){for(var r=new Array(t),i=-1;++i<t;)r[i]=e+n*i;return r}function me(t,e){function n(n){var o=n+"",a=r.get(o);if(!a){if("range"!==e.t)return;r.set(o,a=t.push(n))}return i[(a-1)%i.length]}var r,i,o;return n.domain=function(i){if(!arguments.length)return t.slice();t=[],r=new Map;for(var o,a,s=-1,u=i.length;++s<u;)r.has(a=(o=i[s])+"")||r.set(a,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(i=t.slice(),o=0,e={t:"range",a:arguments},n):i.slice()},n.rangePoints=function(r,a){a=arguments.length<2?0:+a;var s=+r[0],u=+r[1],l=t.length<2?(s=(s+u)/2,0):(u-s)/(t.length-1+a);return i=de(t.length,s+l*a/2,l),o=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,a){a=arguments.length<2?0:+a;var s=+r[0],u=+r[1],l=t.length<2?(s=u=Math.round((s+u)/2),0):(u-s)/(t.length-1+a)|0;return i=de(t.length,s+Math.round(l*a/2+(u-s-(t.length-1+a)*l)/2),l),o=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,a,s){a=arguments.length<2?0:+a,s=arguments.length<3?a:+s;var u=+r[1]<+r[0],l=+r[u-0],c=+r[1-u],h=(c-l)/(t.length-a+2*s);return i=de(t.length,l+h*s,h),u&&i.reverse(),o=h*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,a,s){a=arguments.length<2?0:+a,s=arguments.length<3?a:+s;var u=+r[1]<+r[0],l=+r[u-0],c=+r[1-u],h=Math.floor((c-l)/(t.length-a+2*s));return i=de(t.length,l+Math.round((c-l-(t.length-a)*h)/2),h),u&&i.reverse(),o=Math.round(h*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){var t=e.a[0],n=t[0],r=t[t.length-1];
return n>r&&(t=r,r=n,n=t),[n,r]},n.copy=function(){return me(t,e)},n.domain(t)}function ge(){return me([],{t:"range",a:[[]]})}function ye(t,e,n){function r(t){return(n[0]<0?-Math.log(t>0?0:-t):Math.log(0>t?0:t))/Math.log(e)}function i(t){return n[0]<0?-Math.pow(e,-t):Math.pow(e,t)}function o(e){return t(r(e))}return o.invert=function(e){return i(t.invert(e))},o.base=function(t){return arguments.length?(e=+t,o.domain(n)):e},o.domain=function(e){return arguments.length?(n=e.map(Number),t.domain(n.map(r)),o):n.slice()},o.nice=function(){var e=Dt(t.domain(),1);return t.domain(e),n=e.map(i),o},o.ticks=function(){var t=n[0],o=n[n.length-1];t>o&&(u=t,t=o,o=u);var a,s,u=Math.floor(r(t)),l=Math.ceil(r(o)),c=e%1?2:e,h=[];if(isFinite(l-u))if(t>0){for(--l,a=1;c>a;++a){if((s=i(u)*a)<t)continue;h.push(s)}for(;++u<l;)for(a=1;c>a;++a)h.push(i(u)*a);for(a=1;c>a&&!((s=i(u)*a)>o);++a)h.push(s)}else{for(++u,a=c-1;a>=1;--a){if((s=i(u)*a)<t)continue;h.push(s)}for(;++u<l;)for(a=c-1;a>=1;--a)h.push(i(u)*a);for(a=c-1;a>=1&&!((s=i(u)*a)>o);--a)h.push(s)}return h},o.tickFormat=function(t,a){if(null==a?a=10===e?Jn:Kn:"function"!=typeof a&&(a=Dn(a)),null==t)return a;var s,u=Math.min(e,o.ticks().length/t),l=n[0]>0?(s=1e-12,Math.ceil):(s=-1e-12,Math.floor);return function(t){return i(l(r(t)+s))/t>=u?a(t):""}},o.copy=function(){return ye(t.copy(),e,n)},rt(o,t)}function ve(){return ye($t(),10,[1,10])}function be(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(Number),e):t.slice()},e.ticks=function(e){return Xt(t,e)},e.tickFormat=function(e,n){return jt(t,e,n)},e.copy=function(){return be(t)},e}function _e(){return be([0,1])}function xe(){return ge().range(["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"])}function we(){return ge().range(["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"])}function Me(){return ge().range(["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"])}function Ce(){return ge().range(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"])}var Pe={"-":"",_:" ",0:"0"},Ee=/^%/,Te=/^\s*\d+/,Se=new Date,Le=new Date,Ae=M(function(t){t.setUTCHours(0,0,0,0),t.setUTCMonth(0,1)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),De=C(1),Ie=C(0),ke=M(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5}),Ne=M(function(t){t.setHours(0,0,0,0),t.setMonth(0,1)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()}),Be=U(1),Oe=U(0),Re=M(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),Fe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ue=tt({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ze=Ue.utcFormat,Ve=ze("%Y"),Ge=ze("%B"),We=ze("%b %d"),He=ze("%a %d"),je=Ie,Xe=M(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(1)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),Ye=ze("%I %p"),qe=ze("%I:%M"),Ze=M(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5}),Ke=ze(":%S"),Je=M(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4}),Qe=ze(".%L"),$e=M(function(t){t.setUTCMilliseconds(0)},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3}),tn=Math.sqrt(2),en=Math.sqrt(10),nn=Math.sqrt(50),rn=1e3,on=60*rn,an=60*on,sn=24*an,un=365*sn,ln=30*sn,cn=7*sn,hn=[["seconds",1,rn],["seconds",5,5*rn],["seconds",15,15*rn],["seconds",30,30*rn],["minutes",1,on],["minutes",5,5*on],["minutes",15,15*on],["minutes",30,30*on],["hours",1,an],["hours",3,3*an],["hours",6,6*an],["hours",12,12*an],["days",1,sn],["days",2,2*sn],["weeks",1,cn],["months",1,ln],["months",3,3*ln],["years",1,un]],fn=st(function(t){return t[2]}).right;bt.prototype={toString:function(){return this.rgb()+""}};var pn=vt.prototype=new bt,dn=.7;pn.darker=function(t){return t=null==t?dn:Math.pow(dn,t),new vt(this.r*t,this.g*t,this.b*t)};var mn=1/dn;pn.brighter=function(t){return t=null==t?mn:Math.pow(mn,t),new vt(this.r*t,this.g*t,this.b*t)},pn.rgb=function(){return this},pn.toString=function(){return yt(this.r,this.g,this.b)};var gn=(new Map).set("aliceblue",15792383).set("antiquewhite",16444375).set("aqua",65535).set("aquamarine",8388564).set("azure",15794175).set("beige",16119260).set("bisque",16770244).set("black",0).set("blanchedalmond",16772045).set("blue",255).set("blueviolet",9055202).set("brown",10824234).set("burlywood",14596231).set("cadetblue",6266528).set("chartreuse",8388352).set("chocolate",13789470).set("coral",16744272).set("cornflowerblue",6591981).set("cornsilk",16775388).set("crimson",14423100).set("cyan",65535).set("darkblue",139).set("darkcyan",35723).set("darkgoldenrod",12092939).set("darkgray",11119017).set("darkgreen",25600).set("darkgrey",11119017).set("darkkhaki",12433259).set("darkmagenta",9109643).set("darkolivegreen",5597999).set("darkorange",16747520).set("darkorchid",10040012).set("darkred",9109504).set("darksalmon",15308410).set("darkseagreen",9419919).set("darkslateblue",4734347).set("darkslategray",3100495).set("darkslategrey",3100495).set("darkturquoise",52945).set("darkviolet",9699539).set("deeppink",16716947).set("deepskyblue",49151).set("dimgray",6908265).set("dimgrey",6908265).set("dodgerblue",2003199).set("firebrick",11674146).set("floralwhite",16775920).set("forestgreen",2263842).set("fuchsia",16711935).set("gainsboro",14474460).set("ghostwhite",16316671).set("gold",16766720).set("goldenrod",14329120).set("gray",8421504).set("green",32768).set("greenyellow",11403055).set("grey",8421504).set("honeydew",15794160).set("hotpink",16738740).set("indianred",13458524).set("indigo",4915330).set("ivory",16777200).set("khaki",15787660).set("lavender",15132410).set("lavenderblush",16773365).set("lawngreen",8190976).set("lemonchiffon",16775885).set("lightblue",11393254).set("lightcoral",15761536).set("lightcyan",14745599).set("lightgoldenrodyellow",16448210).set("lightgray",13882323).set("lightgreen",9498256).set("lightgrey",13882323).set("lightpink",16758465).set("lightsalmon",16752762).set("lightseagreen",2142890).set("lightskyblue",8900346).set("lightslategray",7833753).set("lightslategrey",7833753).set("lightsteelblue",11584734).set("lightyellow",16777184).set("lime",65280).set("limegreen",3329330).set("linen",16445670).set("magenta",16711935).set("maroon",8388608).set("mediumaquamarine",6737322).set("mediumblue",205).set("mediumorchid",12211667).set("mediumpurple",9662683).set("mediumseagreen",3978097).set("mediumslateblue",8087790).set("mediumspringgreen",64154).set("mediumturquoise",4772300).set("mediumvioletred",13047173).set("midnightblue",1644912).set("mintcream",16121850).set("mistyrose",16770273).set("moccasin",16770229).set("navajowhite",16768685).set("navy",128).set("oldlace",16643558).set("olive",8421376).set("olivedrab",7048739).set("orange",16753920).set("orangered",16729344).set("orchid",14315734).set("palegoldenrod",15657130).set("palegreen",10025880).set("paleturquoise",11529966).set("palevioletred",14381203).set("papayawhip",16773077).set("peachpuff",16767673).set("peru",13468991).set("pink",16761035).set("plum",14524637).set("powderblue",11591910).set("purple",8388736).set("rebeccapurple",6697881).set("red",16711680).set("rosybrown",12357519).set("royalblue",4286945).set("saddlebrown",9127187).set("salmon",16416882).set("sandybrown",16032864).set("seagreen",3050327).set("seashell",16774638).set("sienna",10506797).set("silver",12632256).set("skyblue",8900331).set("slateblue",6970061).set("slategray",7372944).set("slategrey",7372944).set("snow",16775930).set("springgreen",65407).set("steelblue",4620980).set("tan",13808780).set("teal",32896).set("thistle",14204888).set("tomato",16737095).set("turquoise",4251856).set("violet",15631086).set("wheat",16113331).set("white",16777215).set("whitesmoke",16119285).set("yellow",16776960).set("yellowgreen",10145074),yn=xt.prototype=new bt;yn.brighter=function(t){return t=null==t?mn:Math.pow(mn,t),new xt(this.h,this.s,this.l*t)},yn.darker=function(t){return t=null==t?dn:Math.pow(dn,t),new xt(this.h,this.s,this.l*t)},yn.rgb=function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=.5>=n?n*(1+e):n+e-n*e,i=2*n-r;return new vt(wt(t>=240?t-240:t+120,i,r),wt(t,i,r),wt(120>t?t+240:t-120,i,r))};var vn,bn=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,_n=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,xn=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,wn=/^#([0-9a-f]{6})$/,Mn=/^#([0-9a-f]{3})$/,Cn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pn=new RegExp(Cn.source,"g"),En=[function(t,e){var n,r=typeof e;return("string"===r?(n=Ct(e))?(e=n,Et):Lt:e instanceof Ct?Et:Array.isArray(e)?gt:"object"===r&&isNaN(e)?mt:dt)(t,e)}],Tn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],Sn={"":Ot,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Bt(100*t,e)},r:Bt,s:Nt,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Ln=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Rt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var An=Vt({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Dn=An.format,In=An.formatPrefix,kn=st(ot),Nn=kn.right,Bn=Nn,On=Ue.format,Rn=On("%Y"),Fn=On("%B"),Un=On("%b %d"),zn=On("%a %d"),Vn=Oe,Gn=M(function(t){t.setHours(0,0,0,0),t.setDate(1)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),Wn=On("%I %p"),Hn=On("%I:%M"),jn=M(function(t){t.setMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5}),Xn=On(":%S"),Yn=M(function(t){t.setSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4}),qn=On(".%L"),Zn=M(function(t){t.setMilliseconds(0)},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3}),Kn=Dn(","),Jn=Dn(".0e");t.category10=Ce,t.category20=Me,t.category20b=we,t.category20c=xe,t.identity=_e,t.linear=$t,t.log=ve,t.ordinal=ge,t.pow=pe,t.quantile=fe,t.quantize=le,t.sqrt=se,t.threshold=oe,t.time=re,t.utcTime=te})},{}],18:[function(t,e,n){(function(t){(function(){function r(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function i(t,e){var n=typeof e;if(t=t.cache,"boolean"==n||null==e)return t[e]?0:-1;"number"!=n&&"string"!=n&&(n="object");var i="number"==n?e:_+e;return t=(t=t[n])&&t[i],"object"==n?t&&r(t,e)>-1?0:-1:t?0:-1}function o(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:_+t,i=e[n]||(e[n]={});"object"==n?(i[r]||(i[r]=[])).push(t):i[r]=!0}}function a(t){return t.charCodeAt(0)}function s(t,e){for(var n=t.criteria,r=e.criteria,i=-1,o=n.length;++i<o;){var a=n[i],s=r[i];if(a!==s){if(a>s||"undefined"==typeof a)return 1;if(s>a||"undefined"==typeof s)return-1}}return t.index-e.index}function u(t){var e=-1,n=t.length,r=t[0],i=t[n/2|0],a=t[n-1];if(r&&"object"==typeof r&&i&&"object"==typeof i&&a&&"object"==typeof a)return!1;var s=h();s["false"]=s["null"]=s["true"]=s.undefined=!1;var u=h();for(u.array=t,u.cache=s,u.push=o;++e<n;)u.push(t[e]);return u}function l(t){return"\\"+K[t]}function c(){return y.pop()||[]}function h(){return v.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function f(t){t.length=0,y.length<w&&y.push(t)}function p(t){var e=t.cache;e&&p(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,v.length<w&&v.push(t)}function d(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(0>i?0:i);++r<i;)o[r]=t[e+r];return o}function m(t){function e(t){return t&&"object"==typeof t&&!Qn(t)&&Nn.call(t,"__wrapped__")?t:new n(t)}function n(t,e){this.__chain__=!!e,this.__wrapped__=t}function o(t){function e(){if(r){var t=d(r);Bn.apply(t,arguments)}if(this instanceof e){var o=v(n.prototype),a=n.apply(o,t||arguments);return At(a)?a:o}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return Jn(e,t),e}function y(t,e,n,r,i){if(n){var o=n(t);if("undefined"!=typeof o)return o}var a=At(t);if(!a)return t;var s=Tn.call(t);if(!X[s])return t;var u=Zn[s];switch(s){case U:case z:return new u(+t);case G:case j:return new u(t);case H:return o=u(t.source,S.exec(t)),o.lastIndex=t.lastIndex,o}var l=Qn(t);if(e){var h=!r;r||(r=c()),i||(i=c());for(var p=r.length;p--;)if(r[p]==t)return i[p];o=l?u(t.length):{}}else o=l?d(t):or({},t);return l&&(Nn.call(t,"index")&&(o.index=t.index),Nn.call(t,"input")&&(o.input=t.input)),e?(r.push(t),i.push(o),(l?Kt:ur)(t,function(t,a){o[a]=y(t,e,n,r,i)}),h&&(f(r),f(i)),o):o}function v(t,e){return At(t)?zn(t):{}}function w(t,e,n){if("function"!=typeof t)return Je;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(Kn.funcNames&&(r=!t.name),r=r||!Kn.funcDecomp,!r)){var i=In.call(t);Kn.funcNames||(r=!L.test(i)),r||(r=k.test(i),Jn(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return Ne(t,e)}function K(t){function e(){var t=u?a:this;if(i){var p=d(i);Bn.apply(p,arguments)}if((o||c)&&(p||(p=d(arguments)),o&&Bn.apply(p,o),c&&p.length<s))return r|=16,K([n,h?r:-4&r,p,null,a,s]);if(p||(p=arguments),l&&(n=t[f]),this instanceof e){t=v(n.prototype);var m=n.apply(t,p);return At(m)?m:t}return n.apply(t,p)}var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=1&r,l=2&r,c=4&r,h=8&r,f=n;return Jn(e,t),e}function Q(t,e){var n=-1,o=ut(),a=t?t.length:0,s=a>=x&&o===r,l=[];if(s){var c=u(e);c?(o=i,e=c):s=!1}for(;++n<a;){var h=t[n];o(e,h)<0&&l.push(h)}return s&&p(e),l}function $(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,a=[];++i<o;){var s=t[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Qn(s)||ft(s))){e||(s=$(s,e,n));var u=-1,l=s.length,c=a.length;for(a.length+=l;++u<l;)a[c++]=s[u]}else n||a.push(s)}return a}function tt(t,e,n,r,i,o){if(n){var a=n(t,e);if("undefined"!=typeof a)return!!a}if(t===e)return 0!==t||1/t==1/e;var s=typeof t,u=typeof e;if(!(t!==t||t&&Z[s]||e&&Z[u]))return!1;if(null==t||null==e)return t===e;var l=Tn.call(t),h=Tn.call(e);if(l==R&&(l=W),h==R&&(h=W),l!=h)return!1;switch(l){case U:case z:return+t==+e;case G:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case H:case j:return t==wn(e)}var p=l==F;if(!p){var d=Nn.call(t,"__wrapped__"),m=Nn.call(e,"__wrapped__");if(d||m)return tt(d?t.__wrapped__:t,m?e.__wrapped__:e,n,r,i,o);if(l!=W)return!1;var g=t.constructor,y=e.constructor;if(g!=y&&!(Lt(g)&&g instanceof g&&Lt(y)&&y instanceof y)&&"constructor"in t&&"constructor"in e)return!1}var v=!i;i||(i=c()),o||(o=c());for(var b=i.length;b--;)if(i[b]==t)return o[b]==e;var _=0;if(a=!0,i.push(t),o.push(e),p){if(b=t.length,_=e.length,a=_==b,a||r)for(;_--;){var x=b,w=e[_];if(r)for(;x--&&!(a=tt(t[x],w,n,r,i,o)););else if(!(a=tt(t[_],w,n,r,i,o)))break}}else sr(e,function(e,s,u){return Nn.call(u,s)?(_++,a=Nn.call(t,s)&&tt(t[s],e,n,r,i,o)):void 0}),a&&!r&&sr(t,function(t,e,n){return Nn.call(n,e)?a=--_>-1:void 0});return i.pop(),o.pop(),v&&(f(i),f(o)),a}function et(t,e,n,r,i){(Qn(e)?Kt:ur)(e,function(e,o){var a,s,u=e,l=t[o];if(e&&((s=Qn(e))||lr(e))){for(var c=r.length;c--;)if(a=r[c]==e){l=i[c];break}if(!a){var h;n&&(u=n(l,e),(h="undefined"!=typeof u)&&(l=u)),h||(l=s?Qn(l)?l:[]:lr(l)?l:{}),r.push(e),i.push(l),h||et(l,e,n,r,i)}}else n&&(u=n(l,e),"undefined"==typeof u&&(u=e)),"undefined"!=typeof u&&(l=u);t[o]=l})}function rt(t,e){return t+Dn(qn()*(e-t+1))}function it(t,e,n){var o=-1,a=ut(),s=t?t.length:0,l=[],h=!e&&s>=x&&a===r,d=n||h?c():l;if(h){var m=u(d);a=i,d=m}for(;++o<s;){var g=t[o],y=n?n(g,o,t):g;(e?!o||d[d.length-1]!==y:a(d,y)<0)&&((n||h)&&d.push(y),l.push(g))}return h?(f(d.array),p(d)):n&&f(d),l}function ot(t){return function(n,r,i){var o={};r=e.createCallback(r,i,3);var a=-1,s=n?n.length:0;if("number"==typeof s)for(;++a<s;){var u=n[a];t(o,u,r(u,a,n),n)}else ur(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function at(t,e,n,r,i,a){var s=1&e,u=2&e,l=4&e,c=16&e,h=32&e;if(!u&&!Lt(t))throw new Mn;c&&!n.length&&(e&=-17,c=n=!1),h&&!r.length&&(e&=-33,h=r=!1);var f=t&&t.__bindData__;if(f&&f!==!0)return f=d(f),f[2]&&(f[2]=d(f[2])),f[3]&&(f[3]=d(f[3])),!s||1&f[1]||(f[4]=i),!s&&1&f[1]&&(e|=8),!l||4&f[1]||(f[5]=a),c&&Bn.apply(f[2]||(f[2]=[]),n),h&&Fn.apply(f[3]||(f[3]=[]),r),f[1]|=e,at.apply(null,f);var p=1==e||17===e?o:K;return p([t,e,n,r,i,a])}function st(t){return er[t]}function ut(){var t=(t=e.indexOf)===ye?r:t;return t}function lt(t){return"function"==typeof t&&Sn.test(t)}function ct(t){var e,n;return t&&Tn.call(t)==W&&(e=t.constructor,!Lt(e)||e instanceof e)?(sr(t,function(t,e){n=e}),"undefined"==typeof n||Nn.call(t,n)):!1}function ht(t){return nr[t]}function ft(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Tn.call(t)==R||!1}function pt(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),y(t,e,"function"==typeof n&&w(n,r,1))}function dt(t,e,n){return y(t,!0,"function"==typeof e&&w(e,n,1))}function mt(t,e){var n=v(t);return e?or(n,e):n}function gt(t,n,r){var i;return n=e.createCallback(n,r,3),ur(t,function(t,e,r){return n(t,e,r)?(i=e,!1):void 0}),i}function yt(t,n,r){var i;return n=e.createCallback(n,r,3),bt(t,function(t,e,r){return n(t,e,r)?(i=e,!1):void 0}),i}function vt(t,e,n){var r=[];sr(t,function(t,e){r.push(e,t)});var i=r.length;for(e=w(e,n,3);i--&&e(r[i--],r[i],t)!==!1;);return t}function bt(t,e,n){var r=tr(t),i=r.length;for(e=w(e,n,3);i--;){var o=r[i];if(e(t[o],o,t)===!1)break}return t}function _t(t){var e=[];return sr(t,function(t,n){Lt(t)&&e.push(n)}),e.sort()}function xt(t,e){return t?Nn.call(t,e):!1}function wt(t){for(var e=-1,n=tr(t),r=n.length,i={};++e<r;){var o=n[e];i[t[o]]=o}return i}function Mt(t){return t===!0||t===!1||t&&"object"==typeof t&&Tn.call(t)==U||!1}function Ct(t){return t&&"object"==typeof t&&Tn.call(t)==z||!1}function Pt(t){return t&&1===t.nodeType||!1}function Et(t){var e=!0;if(!t)return e;var n=Tn.call(t),r=t.length;return n==F||n==j||n==R||n==W&&"number"==typeof r&&Lt(t.splice)?!r:(ur(t,function(){return e=!1}),e)}function Tt(t,e,n,r){return tt(t,e,"function"==typeof n&&w(n,r,2))}function St(t){return Gn(t)&&!Wn(parseFloat(t))}function Lt(t){return"function"==typeof t}function At(t){return!(!t||!Z[typeof t])}function Dt(t){return kt(t)&&t!=+t}function It(t){return null===t}function kt(t){return"number"==typeof t||t&&"object"==typeof t&&Tn.call(t)==G||!1}function Nt(t){return t&&"object"==typeof t&&Tn.call(t)==H||!1}function Bt(t){return"string"==typeof t||t&&"object"==typeof t&&Tn.call(t)==j||!1}function Ot(t){return"undefined"==typeof t}function Rt(t,n,r){var i={};return n=e.createCallback(n,r,3),ur(t,function(t,e,r){i[e]=n(t,e,r)}),i}function Ft(t){var e=arguments,n=2;if(!At(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=w(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var i=d(arguments,1,n),o=-1,a=c(),s=c();++o<n;)et(t,i[o],r,a,s);return f(a),f(s),t}function Ut(t,n,r){var i={};if("function"!=typeof n){var o=[];sr(t,function(t,e){o.push(e)}),o=Q(o,$(arguments,!0,!1,1));for(var a=-1,s=o.length;++a<s;){var u=o[a];i[u]=t[u]}}else n=e.createCallback(n,r,3),sr(t,function(t,e,r){n(t,e,r)||(i[e]=t)});return i}function zt(t){for(var e=-1,n=tr(t),r=n.length,i=dn(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function Vt(t,n,r){var i={};if("function"!=typeof n)for(var o=-1,a=$(arguments,!0,!1,1),s=At(t)?a.length:0;++o<s;){var u=a[o];u in t&&(i[u]=t[u])}else n=e.createCallback(n,r,3),sr(t,function(t,e,r){n(t,e,r)&&(i[e]=t)});return i}function Gt(t,n,r,i){var o=Qn(t);if(null==r)if(o)r=[];else{var a=t&&t.constructor,s=a&&a.prototype;r=v(s)}return n&&(n=e.createCallback(n,i,4),(o?Kt:ur)(t,function(t,e,i){return n(r,t,e,i)})),r}function Wt(t){for(var e=-1,n=tr(t),r=n.length,i=dn(r);++e<r;)i[e]=t[n[e]];return i}function Ht(t){for(var e=arguments,n=-1,r=$(e,!0,!1,1),i=e[2]&&e[2][e[1]]===t?1:r.length,o=dn(i);++n<i;)o[n]=t[r[n]];return o}function jt(t,e,n){var r=-1,i=ut(),o=t?t.length:0,a=!1;return n=(0>n?jn(0,o+n):n)||0,Qn(t)?a=i(t,e,n)>-1:"number"==typeof o?a=(Bt(t)?t.indexOf(e,n):i(t,e,n))>-1:ur(t,function(t){return++r>=n?!(a=t===e):void 0}),a}function Xt(t,n,r){var i=!0;n=e.createCallback(n,r,3);var o=-1,a=t?t.length:0;if("number"==typeof a)for(;++o<a&&(i=!!n(t[o],o,t)););else ur(t,function(t,e,r){return i=!!n(t,e,r)});return i}function Yt(t,n,r){var i=[];n=e.createCallback(n,r,3);var o=-1,a=t?t.length:0;if("number"==typeof a)for(;++o<a;){var s=t[o];n(s,o,t)&&i.push(s)}else ur(t,function(t,e,r){n(t,e,r)&&i.push(t)});return i}function qt(t,n,r){n=e.createCallback(n,r,3);var i=-1,o=t?t.length:0;if("number"!=typeof o){var a;return ur(t,function(t,e,r){return n(t,e,r)?(a=t,!1):void 0}),a}for(;++i<o;){var s=t[i];if(n(s,i,t))return s}}function Zt(t,n,r){var i;return n=e.createCallback(n,r,3),Jt(t,function(t,e,r){return n(t,e,r)?(i=t,!1):void 0}),i}function Kt(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:w(e,n,3),"number"==typeof i)for(;++r<i&&e(t[r],r,t)!==!1;);else ur(t,e);return t}function Jt(t,e,n){var r=t?t.length:0;if(e=e&&"undefined"==typeof n?e:w(e,n,3),"number"==typeof r)for(;r--&&e(t[r],r,t)!==!1;);else{var i=tr(t);r=i.length,ur(t,function(t,n,o){return n=i?i[--r]:--r,e(o[n],n,o)})}return t}function Qt(t,e){var n=d(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,a=dn("number"==typeof o?o:0);return Kt(t,function(t){a[++r]=(i?e:t[e]).apply(t,n)}),a}function $t(t,n,r){var i=-1,o=t?t.length:0;if(n=e.createCallback(n,r,3),"number"==typeof o)for(var a=dn(o);++i<o;)a[i]=n(t[i],i,t);else a=[],ur(t,function(t,e,r){a[++i]=n(t,e,r)});return a}function te(t,n,r){var i=-(1/0),o=i;if("function"!=typeof n&&r&&r[n]===t&&(n=null),null==n&&Qn(t))for(var s=-1,u=t.length;++s<u;){var l=t[s];l>o&&(o=l)}else n=null==n&&Bt(t)?a:e.createCallback(n,r,3),Kt(t,function(t,e,r){var a=n(t,e,r);a>i&&(i=a,o=t)});return o}function ee(t,n,r){var i=1/0,o=i;if("function"!=typeof n&&r&&r[n]===t&&(n=null),null==n&&Qn(t))for(var s=-1,u=t.length;++s<u;){var l=t[s];o>l&&(o=l)}else n=null==n&&Bt(t)?a:e.createCallback(n,r,3),Kt(t,function(t,e,r){var a=n(t,e,r);i>a&&(i=a,o=t)});return o}function ne(t,n,r,i){if(!t)return r;var o=arguments.length<3;n=e.createCallback(n,i,4);var a=-1,s=t.length;if("number"==typeof s)for(o&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);else ur(t,function(t,e,i){r=o?(o=!1,t):n(r,t,e,i)});return r}function re(t,n,r,i){var o=arguments.length<3;return n=e.createCallback(n,i,4),Jt(t,function(t,e,i){r=o?(o=!1,t):n(r,t,e,i)}),r}function ie(t,n,r){return n=e.createCallback(n,r,3),Yt(t,function(t,e,r){return!n(t,e,r)})}function oe(t,e,n){if(t&&"number"!=typeof t.length&&(t=Wt(t)),null==e||n)return t?t[rt(0,t.length-1)]:g;var r=ae(t);return r.length=Xn(jn(0,e),r.length),r}function ae(t){var e=-1,n=t?t.length:0,r=dn("number"==typeof n?n:0);return Kt(t,function(t){var n=rt(0,++e);r[e]=r[n],r[n]=t}),r}function se(t){var e=t?t.length:0;return"number"==typeof e?e:tr(t).length}function ue(t,n,r){var i;n=e.createCallback(n,r,3);var o=-1,a=t?t.length:0;if("number"==typeof a)for(;++o<a&&!(i=n(t[o],o,t)););else ur(t,function(t,e,r){return!(i=n(t,e,r))});return!!i}function le(t,n,r){var i=-1,o=Qn(n),a=t?t.length:0,u=dn("number"==typeof a?a:0);for(o||(n=e.createCallback(n,r,3)),Kt(t,function(t,e,r){var a=u[++i]=h();o?a.criteria=$t(n,function(e){return t[e]}):(a.criteria=c())[0]=n(t,e,r),a.index=i,a.value=t}),a=u.length,u.sort(s);a--;){var l=u[a];u[a]=l.value,o||f(l.criteria),p(l)}return u}function ce(t){return t&&"number"==typeof t.length?d(t):Wt(t)}function he(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function fe(t){return Q(t,$(arguments,!0,!0,1))}function pe(t,n,r){var i=-1,o=t?t.length:0;for(n=e.createCallback(n,r,3);++i<o;)if(n(t[i],i,t))return i;return-1}function de(t,n,r){var i=t?t.length:0;for(n=e.createCallback(n,r,3);i--;)if(n(t[i],i,t))return i;return-1}function me(t,n,r){var i=0,o=t?t.length:0;if("number"!=typeof n&&null!=n){var a=-1;for(n=e.createCallback(n,r,3);++a<o&&n(t[a],a,t);)i++}else if(i=n,null==i||r)return t?t[0]:g;return d(t,0,Xn(jn(0,i),o))}function ge(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(t=$t(t,n,r)),$(t,e)}function ye(t,e,n){if("number"==typeof n){var i=t?t.length:0;n=0>n?jn(0,i+n):n||0}else if(n){var o=Ee(t,e);return t[o]===e?o:-1}return r(t,e,n)}function ve(t,n,r){var i=0,o=t?t.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=e.createCallback(n,r,3);a--&&n(t[a],a,t);)i++}else i=null==n||r?1:n||i;return d(t,0,Xn(jn(0,o-i),o))}function be(){for(var t=[],e=-1,n=arguments.length,o=c(),a=ut(),s=a===r,l=c();++e<n;){var h=arguments[e];(Qn(h)||ft(h))&&(t.push(h),o.push(s&&h.length>=x&&u(e?t[e]:l)))}var d=t[0],m=-1,g=d?d.length:0,y=[];t:for(;++m<g;){var v=o[0];if(h=d[m],(v?i(v,h):a(l,h))<0){for(e=n,(v||l).push(h);--e;)if(v=o[e],(v?i(v,h):a(t[e],h))<0)continue t;y.push(h)}}for(;n--;)v=o[n],v&&p(v);return f(o),f(l),y}function _e(t,n,r){var i=0,o=t?t.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=e.createCallback(n,r,3);a--&&n(t[a],a,t);)i++}else if(i=n,null==i||r)return t?t[o-1]:g;return d(t,jn(0,o-i))}function xe(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?jn(0,r+n):Xn(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function we(t){for(var e=arguments,n=0,r=e.length,i=t?t.length:0;++n<r;)for(var o=-1,a=e[n];++o<i;)t[o]===a&&(Rn.call(t,o--,1),i--);return t}function Me(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var r=-1,i=jn(0,Ln((e-t)/(n||1))),o=dn(i);++r<i;)o[r]=t,t+=n;return o}function Ce(t,n,r){var i=-1,o=t?t.length:0,a=[];for(n=e.createCallback(n,r,3);++i<o;){var s=t[i];n(s,i,t)&&(a.push(s),Rn.call(t,i--,1),o--)}return a}function Pe(t,n,r){if("number"!=typeof n&&null!=n){var i=0,o=-1,a=t?t.length:0;for(n=e.createCallback(n,r,3);++o<a&&n(t[o],o,t);)i++}else i=null==n||r?1:jn(0,n);return d(t,i)}function Ee(t,n,r,i){var o=0,a=t?t.length:o;for(r=r?e.createCallback(r,i,1):Je,n=r(n);a>o;){var s=o+a>>>1;r(t[s])<n?o=s+1:a=s}return o}function Te(){return it($(arguments,!0,!0))}function Se(t,n,r,i){return"boolean"!=typeof n&&null!=n&&(i=r,r="function"!=typeof n&&i&&i[n]===t?null:n,n=!1),null!=r&&(r=e.createCallback(r,i,3)),it(t,n,r)}function Le(t){return Q(t,d(arguments,1))}function Ae(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Qn(n)||ft(n))var r=r?it(Q(r,n).concat(Q(n,r))):n}return r||[]}function De(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?te(pr(t,"length")):0,r=dn(0>n?0:n);++e<n;)r[e]=pr(t,e);return r}function Ie(t,e){var n=-1,r=t?t.length:0,i={};for(e||!r||Qn(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function ke(t,e){if(!Lt(e))throw new Mn;return function(){return--t<1?e.apply(this,arguments):void 0}}function Ne(t,e){return arguments.length>2?at(t,17,d(arguments,2),null,e):at(t,1,null,null,e)}function Be(t){for(var e=arguments.length>1?$(arguments,!0,!1,1):_t(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=at(t[i],1,null,null,t)}return t}function Oe(t,e){return arguments.length>2?at(e,19,d(arguments,2),null,t):at(e,3,null,null,t)}function Re(){for(var t=arguments,e=t.length;e--;)if(!Lt(t[e]))throw new Mn;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Fe(t,e){return e="number"==typeof e?e:+e||t.length,at(t,4,null,null,null,e)}function Ue(t,e,n){var r,i,o,a,s,u,l,c=0,h=!1,f=!0;if(!Lt(t))throw new Mn;if(e=jn(0,e)||0,n===!0){var p=!0;f=!1}else At(n)&&(p=n.leading,h="maxWait"in n&&(jn(e,n.maxWait)||0),f="trailing"in n?n.trailing:f);var d=function(){var n=e-(mr()-a);if(0>=n){i&&An(i);var h=l;i=u=l=g,h&&(c=mr(),o=t.apply(s,r),u||i||(r=s=null))}else u=On(d,n)},m=function(){u&&An(u),i=u=l=g,(f||h!==e)&&(c=mr(),o=t.apply(s,r),u||i||(r=s=null))};return function(){if(r=arguments,a=mr(),s=this,l=f&&(u||!p),h===!1)var n=p&&!u;else{i||p||(c=a);var g=h-(a-c),y=0>=g;y?(i&&(i=An(i)),c=a,o=t.apply(s,r)):i||(i=On(m,g))}return y&&u?u=An(u):u||e===h||(u=On(d,e)),n&&(y=!0,o=t.apply(s,r)),!y||u||i||(r=s=null),o}}function ze(t){if(!Lt(t))throw new Mn;var e=d(arguments,1);return On(function(){t.apply(g,e)},1)}function Ve(t,e){if(!Lt(t))throw new Mn;var n=d(arguments,2);return On(function(){t.apply(g,n)},e)}function Ge(t,e){if(!Lt(t))throw new Mn;var n=function(){var r=n.cache,i=e?e.apply(this,arguments):_+arguments[0];return Nn.call(r,i)?r[i]:r[i]=t.apply(this,arguments)};return n.cache={},n}function We(t){var e,n;if(!Lt(t))throw new Mn;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function He(t){return at(t,16,d(arguments,1))}function je(t){return at(t,32,null,d(arguments,1))}function Xe(t,e,n){var r=!0,i=!0;if(!Lt(t))throw new Mn;return n===!1?r=!1:At(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),Y.leading=r,Y.maxWait=e,Y.trailing=i,Ue(t,e,Y)}function Ye(t,e){return at(e,16,[t])}function qe(t){return function(){return t}}function Ze(t,e,n){var r=typeof t;if(null==t||"function"==r)return w(t,e,n);if("object"!=r)return en(t);var i=tr(t),o=i[0],a=t[o];return 1!=i.length||a!==a||At(a)?function(e){for(var n=i.length,r=!1;n--&&(r=tt(e[i[n]],t[i[n]],null,!0)););return r}:function(t){var e=t[o];return a===e&&(0!==a||1/a==1/e)}}function Ke(t){return null==t?"":wn(t).replace(ir,st)}function Je(t){return t}function Qe(t,r,i){var o=!0,a=r&&_t(r);r&&(i||a.length)||(null==i&&(i=r),s=n,r=t,t=e,a=_t(r)),i===!1?o=!1:At(i)&&"chain"in i&&(o=i.chain);var s=t,u=Lt(s);Kt(a,function(e){var n=t[e]=r[e];u&&(s.prototype[e]=function(){var e=this.__chain__,r=this.__wrapped__,i=[r];Bn.apply(i,arguments);var a=n.apply(t,i);if(o||e){if(r===a&&At(a))return this;a=new s(a),a.__chain__=e}return a})})}function $e(){return t._=En,this}function tn(){}function en(t){return function(e){return e[t]}}function nn(t,e,n){var r=null==t,i=null==e;if(null==n&&("boolean"==typeof t&&i?(n=t,t=1):i||"boolean"!=typeof e||(n=e,i=!0)),r&&i&&(e=1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=qn();return Xn(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return rt(t,e)}function rn(t,e){if(t){var n=t[e];return Lt(n)?t[e]():n}}function on(t,n,r){var i=e.templateSettings;t=wn(t||""),r=ar({},r,i);var o,a=ar({},r.imports,i.imports),s=tr(a),u=Wt(a),c=0,h=r.interpolate||I,f="__p += '",p=xn((r.escape||I).source+"|"+h.source+"|"+(h===A?T:I).source+"|"+(r.evaluate||I).source+"|$","g");
t.replace(p,function(e,n,r,i,a,s){return r||(r=i),f+=t.slice(c,s).replace(N,l),n&&(f+="' +\n__e("+n+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+e.length,e}),f+="';\n";var d=r.variable,m=d;m||(d="obj",f="with ("+d+") {\n"+f+"\n}\n"),f=(o?f.replace(C,""):f).replace(P,"$1").replace(E,"$1;"),f="function("+d+") {\n"+(m?"":d+" || ("+d+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var y="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+O++ +"]")+"\n*/";try{var v=yn(s,"return "+f+y).apply(g,u)}catch(b){throw b.source=f,b}return n?v(n):(v.source=f,v)}function an(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=dn(t);for(e=w(e,n,1);++r<t;)i[r]=e(r);return i}function sn(t){return null==t?"":wn(t).replace(rr,ht)}function un(t){var e=++b;return wn(null==t?"":t)+e}function ln(t){return t=new n(t),t.__chain__=!0,t}function cn(t,e){return e(t),t}function hn(){return this.__chain__=!0,this}function fn(){return wn(this.__wrapped__)}function pn(){return this.__wrapped__}t=t?nt.defaults(J.Object(),t,nt.pick(J,B)):J;var dn=t.Array,mn=t.Boolean,gn=t.Date,yn=t.Function,vn=t.Math,bn=t.Number,_n=t.Object,xn=t.RegExp,wn=t.String,Mn=t.TypeError,Cn=[],Pn=_n.prototype,En=t._,Tn=Pn.toString,Sn=xn("^"+wn(Tn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Ln=vn.ceil,An=t.clearTimeout,Dn=vn.floor,In=yn.prototype.toString,kn=lt(kn=_n.getPrototypeOf)&&kn,Nn=Pn.hasOwnProperty,Bn=Cn.push,On=t.setTimeout,Rn=Cn.splice,Fn=Cn.unshift,Un=function(){try{var t={},e=lt(e=_n.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),zn=lt(zn=_n.create)&&zn,Vn=lt(Vn=dn.isArray)&&Vn,Gn=t.isFinite,Wn=t.isNaN,Hn=lt(Hn=_n.keys)&&Hn,jn=vn.max,Xn=vn.min,Yn=t.parseInt,qn=vn.random,Zn={};Zn[F]=dn,Zn[U]=mn,Zn[z]=gn,Zn[V]=yn,Zn[W]=_n,Zn[G]=bn,Zn[H]=xn,Zn[j]=wn,n.prototype=e.prototype;var Kn=e.support={};Kn.funcDecomp=!lt(t.WinRTError)&&k.test(m),Kn.funcNames="string"==typeof yn.name,e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:A,variable:"",imports:{_:e}},zn||(v=function(){function e(){}return function(n){if(At(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}());var Jn=Un?function(t,e){q.value=e,Un(t,"__bindData__",q),q.value=null}:tn,Qn=Vn||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Tn.call(t)==F||!1},$n=function(t){var e,n=t,r=[];if(!n)return r;if(!Z[typeof t])return r;for(e in n)Nn.call(n,e)&&r.push(e);return r},tr=Hn?function(t){return At(t)?Hn(t):[]}:$n,er={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nr=wt(er),rr=xn("("+tr(nr).join("|")+")","g"),ir=xn("["+tr(er).join("")+"]","g"),or=function(t,e,n){var r,i=t,o=i;if(!i)return o;var a=arguments,s=0,u="number"==typeof n?2:a.length;if(u>3&&"function"==typeof a[u-2])var l=w(a[--u-1],a[u--],2);else u>2&&"function"==typeof a[u-1]&&(l=a[--u]);for(;++s<u;)if(i=a[s],i&&Z[typeof i])for(var c=-1,h=Z[typeof i]&&tr(i),f=h?h.length:0;++c<f;)r=h[c],o[r]=l?l(o[r],i[r]):i[r];return o},ar=function(t,e,n){var r,i=t,o=i;if(!i)return o;for(var a=arguments,s=0,u="number"==typeof n?2:a.length;++s<u;)if(i=a[s],i&&Z[typeof i])for(var l=-1,c=Z[typeof i]&&tr(i),h=c?c.length:0;++l<h;)r=c[l],"undefined"==typeof o[r]&&(o[r]=i[r]);return o},sr=function(t,e,n){var r,i=t,o=i;if(!i)return o;if(!Z[typeof i])return o;e=e&&"undefined"==typeof n?e:w(e,n,3);for(r in i)if(e(i[r],r,t)===!1)return o;return o},ur=function(t,e,n){var r,i=t,o=i;if(!i)return o;if(!Z[typeof i])return o;e=e&&"undefined"==typeof n?e:w(e,n,3);for(var a=-1,s=Z[typeof i]&&tr(i),u=s?s.length:0;++a<u;)if(r=s[a],e(i[r],r,t)===!1)return o;return o},lr=kn?function(t){if(!t||Tn.call(t)!=W)return!1;var e=t.valueOf,n=lt(e)&&(n=kn(e))&&kn(n);return n?t==n||kn(t)==n:ct(t)}:ct,cr=ot(function(t,e,n){Nn.call(t,n)?t[n]++:t[n]=1}),hr=ot(function(t,e,n){(Nn.call(t,n)?t[n]:t[n]=[]).push(e)}),fr=ot(function(t,e,n){t[n]=e}),pr=$t,dr=Yt,mr=lt(mr=gn.now)&&mr||function(){return(new gn).getTime()},gr=8==Yn(M+"08")?Yn:function(t,e){return Yn(Bt(t)?t.replace(D,""):t,e||0)};return e.after=ke,e.assign=or,e.at=Ht,e.bind=Ne,e.bindAll=Be,e.bindKey=Oe,e.chain=ln,e.compact=he,e.compose=Re,e.constant=qe,e.countBy=cr,e.create=mt,e.createCallback=Ze,e.curry=Fe,e.debounce=Ue,e.defaults=ar,e.defer=ze,e.delay=Ve,e.difference=fe,e.filter=Yt,e.flatten=ge,e.forEach=Kt,e.forEachRight=Jt,e.forIn=sr,e.forInRight=vt,e.forOwn=ur,e.forOwnRight=bt,e.functions=_t,e.groupBy=hr,e.indexBy=fr,e.initial=ve,e.intersection=be,e.invert=wt,e.invoke=Qt,e.keys=tr,e.map=$t,e.mapValues=Rt,e.max=te,e.memoize=Ge,e.merge=Ft,e.min=ee,e.omit=Ut,e.once=We,e.pairs=zt,e.partial=He,e.partialRight=je,e.pick=Vt,e.pluck=pr,e.property=en,e.pull=we,e.range=Me,e.reject=ie,e.remove=Ce,e.rest=Pe,e.shuffle=ae,e.sortBy=le,e.tap=cn,e.throttle=Xe,e.times=an,e.toArray=ce,e.transform=Gt,e.union=Te,e.uniq=Se,e.values=Wt,e.where=dr,e.without=Le,e.wrap=Ye,e.xor=Ae,e.zip=De,e.zipObject=Ie,e.collect=$t,e.drop=Pe,e.each=Kt,e.eachRight=Jt,e.extend=or,e.methods=_t,e.object=Ie,e.select=Yt,e.tail=Pe,e.unique=Se,e.unzip=De,Qe(e),e.clone=pt,e.cloneDeep=dt,e.contains=jt,e.escape=Ke,e.every=Xt,e.find=qt,e.findIndex=pe,e.findKey=gt,e.findLast=Zt,e.findLastIndex=de,e.findLastKey=yt,e.has=xt,e.identity=Je,e.indexOf=ye,e.isArguments=ft,e.isArray=Qn,e.isBoolean=Mt,e.isDate=Ct,e.isElement=Pt,e.isEmpty=Et,e.isEqual=Tt,e.isFinite=St,e.isFunction=Lt,e.isNaN=Dt,e.isNull=It,e.isNumber=kt,e.isObject=At,e.isPlainObject=lr,e.isRegExp=Nt,e.isString=Bt,e.isUndefined=Ot,e.lastIndexOf=xe,e.mixin=Qe,e.noConflict=$e,e.noop=tn,e.now=mr,e.parseInt=gr,e.random=nn,e.reduce=ne,e.reduceRight=re,e.result=rn,e.runInContext=m,e.size=se,e.some=ue,e.sortedIndex=Ee,e.template=on,e.unescape=sn,e.uniqueId=un,e.all=Xt,e.any=ue,e.detect=qt,e.findWhere=qt,e.foldl=ne,e.foldr=re,e.include=jt,e.inject=ne,Qe(function(){var t={};return ur(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.first=me,e.last=_e,e.sample=oe,e.take=me,e.head=me,ur(e,function(t,r){var i="sample"!==r;e.prototype[r]||(e.prototype[r]=function(e,r){var o=this.__chain__,a=t(this.__wrapped__,e,r);return o||null!=e&&(!r||i&&"function"==typeof e)?new n(a,o):a})}),e.VERSION="2.4.2",e.prototype.chain=hn,e.prototype.toString=fn,e.prototype.value=pn,e.prototype.valueOf=pn,Kt(["join","pop","shift"],function(t){var r=Cn[t];e.prototype[t]=function(){var t=this.__chain__,e=r.apply(this.__wrapped__,arguments);return t?new n(e,t):e}}),Kt(["push","reverse","sort","unshift"],function(t){var n=Cn[t];e.prototype[t]=function(){return n.apply(this.__wrapped__,arguments),this}}),Kt(["concat","slice","splice"],function(t){var r=Cn[t];e.prototype[t]=function(){return new n(r.apply(this.__wrapped__,arguments),this.__chain__)}}),e}var g,y=[],v=[],b=0,_=+new Date+"",x=75,w=40,M=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",C=/\b__p \+= '';/g,P=/\b(__p \+=) '' \+/g,E=/(__e\(.*?\)|\b__t\)) \+\n'';/g,T=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/\w*$/,L=/^\s*function[ \n\r\t]+\w/,A=/<%=([\s\S]+?)%>/g,D=RegExp("^["+M+"]*0+(?=.$)"),I=/($^)/,k=/\bthis\b/,N=/['\n\r\t\u2028\u2029\\]/g,B=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],O=0,R="[object Arguments]",F="[object Array]",U="[object Boolean]",z="[object Date]",V="[object Function]",G="[object Number]",W="[object Object]",H="[object RegExp]",j="[object String]",X={};X[V]=!1,X[R]=X[F]=X[U]=X[z]=X[G]=X[W]=X[H]=X[j]=!0;var Y={leading:!1,maxWait:0,trailing:!1},q={configurable:!1,enumerable:!1,value:null,writable:!1},Z={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},K={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},J=Z[typeof window]&&window||this,Q=Z[typeof n]&&n&&!n.nodeType&&n,$=Z[typeof e]&&e&&!e.nodeType&&e,tt=$&&$.exports===Q&&Q,et=Z[typeof t]&&t;!et||et.global!==et&&et.window!==et||(J=et);var nt=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(J._=nt,define(function(){return nt})):Q&&$?tt?($.exports=nt)._=nt:Q._=nt:J._=nt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,e,n){function r(){}function i(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(){if(y.XMLHttpRequest&&("file:"!=y.location.protocol||!y.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function a(t){return t===Object(t)}function s(t){if(!a(t))return t;var e=[];for(var n in t)null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function u(t){for(var e,n,r={},i=t.split("&"),o=0,a=i.length;a>o;++o)n=i[o],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function l(t){var e,n,r,i,o=t.split(/\r?\n/),a={};o.pop();for(var s=0,u=o.length;u>s;++s)n=o[s],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),i=v(n.slice(e+1)),a[r]=i;return a}function c(t){return t.split(/ *; */).shift()}function h(t){return g(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t},{})}function f(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method?this.xhr.responseText:null,this.setStatusProperties(this.xhr.status),this.header=this.headers=l(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function p(t,e){var n=this;m.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new f(n)}catch(r){t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r}n.callback(t,e)})}function d(t,e){return"function"==typeof e?new p("GET",t).end(e):1==arguments.length?new p("GET",t):new p(t,e)}var m=t("emitter"),g=t("reduce"),y="undefined"==typeof window?this:window,v="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=s,d.parseString=u,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":u,"application/json":JSON.parse},f.prototype.get=function(t){return this.header[t.toLowerCase()]},f.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=c(e);var n=h(e);for(var r in n)this[r]=n[r]},f.prototype.parseBody=function(t){var e=d.parse[this.type];return e&&t&&t.length?e(t):null},f.prototype.setStatusProperties=function(t){var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},f.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=e,i.url=n,i},d.Response=f,m(p.prototype),p.prototype.use=function(t){return t(this),this},p.prototype.timeout=function(t){return this._timeout=t,this},p.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.set=function(t,e){if(a(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},p.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},p.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},p.prototype.type=function(t){return this.set("Content-Type",d.types[t]||t),this},p.prototype.accept=function(t){return this.set("Accept",d.types[t]||t),this},p.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},p.prototype.query=function(t){return"string"!=typeof t&&(t=s(t)),t&&this._query.push(t),this},p.prototype.field=function(t,e){return this._formData||(this._formData=new FormData),this._formData.append(t,e),this},p.prototype.attach=function(t,e,n){return this._formData||(this._formData=new FormData),this._formData.append(t,e,n),this},p.prototype.send=function(t){var e=a(t),n=this.getHeader("Content-Type");if(e&&a(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return e?(n||this.type("json"),this):this},p.prototype.callback=function(t,e){var n=this._callback;return this.clearTimeout(),2==n.length?n(t,e):t?this.emit("error",t):void n(e)},p.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},p.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(t){var e=this,n=this.xhr=o(),a=this._query.join("&"),s=this._timeout,u=this._formData||this._data;if(this._callback=t||r,n.onreadystatechange=function(){return 4==n.readyState?0==n.status?e.aborted?e.timeoutError():e.crossDomainError():void e.emit("end"):void 0},n.upload&&(n.upload.onprogress=function(t){t.percent=t.loaded/t.total*100,e.emit("progress",t)}),s&&!this._timer&&(this._timer=setTimeout(function(){e.abort()},s)),a&&(a=d.serializeObject(a),this.url+=~this.url.indexOf("?")?"&"+a:"?"+a),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof u&&!i(u)){var l=d.serialize[this.getHeader("Content-Type")];l&&(u=l(u))}for(var c in this.header)null!=this.header[c]&&n.setRequestHeader(c,this.header[c]);return this.emit("request",this),n.send(u),this},d.Request=p,d.get=function(t,e,n){var r=d("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},d.head=function(t,e,n){var r=d("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.del=function(t,e){var n=d("DELETE",t);return e&&n.end(e),n},d.patch=function(t,e,n){var r=d("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.post=function(t,e,n){var r=d("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.put=function(t,e,n){var r=d("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},e.exports=d},{emitter:20,reduce:21}],20:[function(t,e,n){function r(t){return t?i(t):void 0}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],21:[function(t,e,n){e.exports=function(t,e,n){for(var r=0,i=t.length,o=3==arguments.length?n:t[r++];i>r;)o=e.call(null,o,t[r],++r,t);return o}},{}],22:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":27,dup:6}],23:[function(t,e,n){var r=t("lodash"),i=t("insert-css"),o=t("inherits"),a=t("qwery"),s=function(t,e,n,i){this.options=r.defaults(i||{},this.getDefaultOptions()),this.styles=this.getDefaultStyles(),this.qwery=a,this.el=a(t)[0],this.width=this.options.width||this.el.offsetWidth,this.height=this.options.height||(this.getHeight?this.getHeight():.6*this.width),this.data=this.formatData(e||{}),this.images=n||[],this.selector=t,this.init()};o(s,t("events").EventEmitter),s.prototype.getDefaultOptions=function(){return{}},s.prototype.getDefaultStyles=function(){return{}},s.prototype.init=function(){console.warn("init not implemented")},s.prototype.formatData=function(t){return console.warn("formatData not implemented"),t},s.prototype.updateData=function(t){console.warn("updateData not implemented")},s.prototype.appendData=function(t){console.warn("appendData not implemented")},s.extend=function(t,e){var n,o=this,a=["appendData","updateData"];r.each(a,function(e){if(t[e]){var n=t[e];t[e]=function(t){var e=this.formatData(t);return n.call(this,e)}}}),t&&r.has(t,"constructor")?n=t.constructor:(n=function(){return this.css&&!n._stylesInitialized&&(i(this.css),n._stylesInitialized=!0),o.apply(this,arguments)},n._initializedStyles=!1),r.extend(n,o,e);var s=function(){this.constructor=n};return s.prototype=o.prototype,n.prototype=new s,t&&r.extend(n.prototype,t),n.__super__=o.prototype,n},e.exports=s},{events:5,inherits:24,"insert-css":25,lodash:394,qwery:26}],24:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],25:[function(t,e,n){var r={};e.exports=function(t,e){if(!r[t]){r[t]=!0;var n=document.createElement("style");n.setAttribute("type","text/css"),"textContent"in n?n.textContent=t:n.styleSheet.cssText=t;var i=document.getElementsByTagName("head")[0];e&&e.prepend?i.insertBefore(n,i.childNodes[0]):i.appendChild(n)}}},{}],26:[function(t,e,n){!function(t,n,r){"undefined"!=typeof e&&e.exports?e.exports=r():"function"==typeof define&&define.amd?define(r):n[t]=r()}("qwery",this,function(){function t(t){return[].slice.call(t,0)}function e(t){var e;return t&&"object"==typeof t&&(e=t.nodeType)&&(1==e||9==e)}function n(t){return"object"==typeof t&&isFinite(t.length)}function r(t){for(var e=[],r=0,i=t.length;i>r;++r)n(t[r])?e=e.concat(t[r]):e[e.length]=t[r];return e}function i(t){var e,n,r=[];t:for(e=0;e<t.length;e++){for(n=0;n<r.length;n++)if(r[n]==t[e])continue t;r[r.length]=t[e]}return r}function o(t){return t?"string"==typeof t?a(t)[0]:!t[h]&&n(t)?t[0]:t:u}function a(i,a){var c,h=o(a);return h&&i?i===l||e(i)?!a||i!==l&&e(h)&&f(i,h)?[i]:[]:i&&n(i)?r(i):u.getElementsByClassName&&"string"==i&&(c=i.match(s))?t(h.getElementsByClassName(c[1])):i&&(i.document||i.nodeType&&9==i.nodeType)?a?[]:[i]:t(h.querySelectorAll(i)):[]}var s=/^\.([\w\-]+)$/,u=document,l=window,c=u.documentElement,h="nodeType",f="compareDocumentPosition"in c?function(t,e){return 16==(16&e.compareDocumentPosition(t))}:function(t,e){return e=e==u||e==window?c:e,e!==t&&e.contains(t)};return a.uniq=i,a},this)},{}],27:[function(t,e,n){(function(n){"use strict";var r=t("d3"),i=t("lodash"),o=t("lightning-client-utils"),a=t("colorbrewer"),s=t("lightning-visualization"),u=n("QGltcG9ydCB1cmwoaHR0cDovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zKTsKCi5heGlzLWxhYmVsIHsKCWZpbGw6ICM5Mzk1OTg7CiAgICBmb250LWZhbWlseTogJ09wZW4gU2FucycsIHNhbnMtc2VyaWY7CiAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lOwogICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKfQoKLnNlbGVjdGVkIHsKCWZpbGw6IGJsYWNrOwp9Cgouc2VsZWN0ZWQtc3RpY2t5IHsKCWZpbGw6IGJsYWNrOwp9","base64"),l=s.extend({getDefaultStyles:function(){return{colormap:"Purples"}},getDefaultOptions:function(){return{numbers:!1}},init:function(){this.margin={left:0,top:0},this.data.rowLabels&&(this.margin.left=80),this.data.columnLabels&&(this.margin.top=80),this.render()},css:u,render:function(){function t(){r.select(this).classed("selected",!0)}function e(){r.select(this).classed("selected",!1)}function n(){var t=r.select(this),e=t.node().__data__,n=i.indexOf(p.columnLabels,e),o=i.indexOf(p.rowLabels,e);n>-1&&(D=a(D,n)),o>-1&&(I=a(I,o)),u()}function a(t,e){return i.indexOf(t,e)>-1?[]:[e]}function s(){D=[],I=[],u()}function u(){r.selectAll(".row-label").classed("selected-sticky",function(t){return I.length>0?i.indexOf(p.rowLabels,t)==I:!1}),r.selectAll(".column-label").classed("selected-sticky",function(t){return D.length>0?i.indexOf(p.columnLabels,t)==D:!1}),S.clearRect(0,0,c,h),i.forEach(p.entries,function(t){var e;e=D.length>0||I.length>0?D.length>0&&i.indexOf(D,t.x)>-1?1:I.length>0&&i.indexOf(I,t.y)>-1?1:.2:1;var n=g.getColor(t,e);if(S.beginPath(),S.fillStyle=n,S.strokeStyle="white",S.lineWidth=b,S.rect(g.x(t.x),g.y(t.y),g.x.rangeBand(),g.y.rangeBand()),S.fill(),S.stroke(),S.closePath(),d.numbers){var r=g.formatLabel(t.z);S.font=A+"px monospace",t.z<=g.data.zmin+(g.data.zmax-g.data.zmin)/2?1>e?S.fillStyle=o.buildRGBA("black",e/5):S.fillStyle=o.buildRGBA("black",e):S.fillStyle=o.buildRGBA("white",e),S.textBaseline="middle",S.textAlign="center",S.fillText(r,g.x(t.x)+g.x.rangeBand()/2,g.y(t.y)+g.y.rangeBand()/2)}})}function l(){if(38==r.event.keyCode||40==r.event.keyCode){if(r.event.preventDefault(),38==r.event.keyCode&&(P+=.05,P>.4))return void(P=.4);if(40==r.event.keyCode&&(P-=.05,-2>P))return void(P=-2);var t=g.data.zmax-g.data.zmin,e=o.linspace(g.data.zmin+t*P,g.data.zmax-t*P,g.data.distinct);g.updateDomain(e),u()}(37==r.event.keyCode||39==r.event.keyCode)&&(r.event.preventDefault(),37==r.event.keyCode&&(C-=1,0>C&&(C=M.length-1)),39==r.event.keyCode&&(C+=1,C>M.length-1&&(C=0)),g.updateRange(M[C]),u())}var c=this.width,h=this.height,f=this.margin,p=this.data,d=this.options,m=this.selector,g=this,y=p.nrow,v=p.ncol,b=Math.max(1-9e-5*y*v,.1),_=p.colormap?p.colormap:this.styles.colormap;this.makeScales(_);var x,w=r.select(m).append("div").style("width",c).style("height",h).style("position","relative");x=v>y?Math.min((h-f.top)/y,(c-f.left)/v):(h-f.top)/y,this.y=r.scale.ordinal().rangeBands([0,y*x]).domain(r.range(y)),this.x=r.scale.ordinal().rangeBands([0,v*x]).domain(r.range(v)),this.sortRows(""),h=y*g.y.rangeBand(),c=v*g.x.rangeBand();var M=["Purples","Blues","Greens","Oranges","Reds","Greys"],C=0,P=0,E=w.append("svg").attr("width",c+f.left).attr("height",h+f.top).style("position","absolute").on("dblclick",s),T=w.append("canvas").attr("width",c).attr("height",h).attr("id","canvas1").style("margin-left",f.left+"px").style("margin-top",f.top+"px"),S=T.node().getContext("2d");r.select(m).attr("tabindex",-1),r.select(m).on("keydown",l);var L=Math.min(72*x/96/2,14);L=Math.max(L,8);var A=72*x/96/2.5;p.columnLabels&&E.selectAll(".column-label").data(p.columnLabels).enter().append("text").attr("text-anchor","start").attr("transform",function(t,e){return"translate("+(f.left+g.x(e)+g.x.rangeBand()/2)+","+.9*f.top+")rotate(-50)"}).attr("class","axis-label column-label").style("font-size",L+"px").text(function(t){return t}).on("mouseover",t).on("mouseout",e).on("click",n),p.rowLabels&&E.selectAll(".row-label").data(p.rowLabels).enter().append("text").attr("text-anchor","end").attr("x",.9*f.left).attr("y",function(t,e){return f.top+g.y(e)+g.y.rangeBand()/2}).attr("dy","0.35em").attr("class","axis-label row-label").style("font-size",L+"px").text(function(t){return t}).on("mouseover",t).on("mouseout",e).on("click",n);var D=[],I=[];u()},sortRows:function(t){},makeScales:function(t){this.c=r.scale.linear(),this.c.domain(o.linspace(this.data.zmin,this.data.zmax,this.data.distinct));var e;e="Lightning"==t?o.getColors(this.data.distinct):a[t][this.data.distinct],this.c.range(e)},updateRange:function(t){this.c.range(a[t][this.data.distinct])},updateDomain:function(t){this.c.domain(t)},getColor:function(t,e){return o.buildRGBA(this.c(t.z),e)},formatLabel:function(t){return parseFloat(r.format(".2f")(t)).toString()},formatData:function(t){var e=[];i.each(t.matrix,function(n,r){i.each(n,function(n,i){var o={};o.x=i,o.y=r,o.z=n,t.rowLabels&&(o.r=t.rowLabels[r]),t.columnLabels&&(o.c=t.columnLabels[i]),e.push(o)})});var n=t.matrix.length,o=t.matrix[0].length,a=r.min(e,function(t){return t.z}),s=r.max(e,function(t){return t.z}),u=i.uniq(i.flatten(t.matrix)).length;return u>8&&(u=8),{entries:e,nrow:n,ncol:o,colormap:t.colormap,rowLabels:t.rowLabels,columnLabels:t.columnLabels,zmin:a,zmax:s,distinct:u}},updateData:function(t){this.data=t,this.draw()}});e.exports=l}).call(this,t("buffer").Buffer)},{buffer:1,colorbrewer:8,d3:9,"lightning-client-utils":10,"lightning-visualization":23,lodash:394}],28:[function(t,e,n){"use strict";var r=t("lightning-matrix"),i=t("d3"),o=t("lightning-client-utils"),a=t("lodash"),s=r.extend({getDefaultOptions:function(){return{numbers:!1,symmetric:!0,sort:"group"}},formatData:function(t){var e=[],n=this,r=t.nodes.length,o=t.group?t.group:a.times(r,a.constant(0));o=o.map(function(t){return t-i.min(o)}),t.nodes.forEach(function(t,n){e[n]=i.range(r).map(function(t){return{x:t,y:n,z:0,c:"black"}})}),t.links.forEach(function(t){e[t[0]][t[1]].z=t[2],o[t[0]]==o[t[1]]?e[t[0]][t[1]].l=o[t[0]]:e[t[0]][t[1]].l=-1}),n.options.symmetric&&t.links.forEach(function(t){e[t[1]][t[0]].z=t[2],o[t[0]]==o[t[1]]?e[t[1]][t[0]].l=o[t[0]]:e[t[1]][t[0]].l=-1}),i.range(r).forEach(function(t){e[t][t].z=c,e[t][t].l=o[t]});var s=a.flatten(e),u=e.length,l=e[0].length,c=i.min(t.links,function(t){return t[2]}),h=i.max(t.links,function(t){return t[2]}),f=a.map(a.range(u),function(t){return i.sum(a.filter(s,function(e){return e.y==t}),function(t){return t.z})}),p=a.map(a.range(l),function(t){return i.sum(a.filter(s,function(e){return e.x==t}),function(t){return t.z})});return{entries:s,nrow:u,ncol:l,rowsum:f,colsum:p,zmin:c,zmax:h,group:o,rowLabels:t.labels,columnLabels:t.labels}},sortRows:function(){var t=this;if("group"==this.options.sort){var e=function(e,n){return t.data.group[n]-t.data.group[e]};this.y.domain(i.range(this.data.nrow).sort(e)),this.x.domain(i.range(this.data.ncol).sort(e))}if("degree"==this.options.sort){var n=function(e,n){return t.data.colsum[n]-t.data.colsum[e]},r=function(e,n){return t.data.colsum[n]-t.data.colsum[e]};this.y.domain(i.range(this.data.nrow).sort(r)),this.x.domain(i.range(this.data.ncol).sort(n))}},makeScales:function(){var t=this,e=a.uniq(this.data.group).length,n=o.getColors(e);this.c=i.scale.ordinal(),this.c.domain(i.range(e)).range(n),this.z=i.scale.linear(),this.z.domain(o.linspace(t.data.zmin,t.data.zmax,9)).range([.3,1]).clamp(!0)},updateRange:function(t){this.c.range(colorbrewer[t][9])},updateDomain:function(t){this.z.domain(t)},formatLabel:function(t){return 0==t||isNaN(t)?"":parseFloat(i.format(".2f")(t)).toString()},getColor:function(t,e){var n;return n=-1==t.l?"rgb(150,150,150)":this.c(t.l),0==t.z&&(n="#eee"),1>e?o.buildRGBA(n,.15):0!=t.z?o.buildRGBA(n,this.z(t.z)*e):"#eee"}});e.exports=s},{d3:9,"lightning-client-utils":10,"lightning-matrix":22,lodash:394}],29:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":53,dup:6}],30:[function(t,e,n){var r=t("./src");"undefined"!=typeof e?e.exports=r:"function"==typeof define&&define.amd?define(function(){return r}):window.d3_multiaxis_zoom=r},{"./src":31}],31:[function(t,e,n){var r=function(t){function e(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function n(){this._=Object.create(null)}function r(t){return(t+="")===Yt||t[0]===qt?qt+t:t}function i(t){return(t+="")[0]===qt?t.slice(1):t}function o(t){return r(t)in this._}function a(t){return(t=r(t))in this._&&delete this._[t]}function s(){var t=[];for(var e in this._)t.push(i(e));return t}function u(){var t=0;for(var e in this._)++t;return t}function l(){for(var t in this._)return!1;return!0}function c(){}function h(t){function e(){for(var e,n=r,i=-1,o=n.length;++i<o;)(e=n[i].on)&&e.apply(this,arguments);return t}var r=[],i=new n;return e.on=function(e,n){var o,a=i.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,r=r.slice(0,o=r.indexOf(a)).concat(r.slice(o+1)),i.remove(e)),n&&r.push(i.set(e,{on:n})),t)},e}function f(){t.event.preventDefault()}function p(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function d(e){for(var n=new c,r=0,i=arguments.length;++r<i;)n[arguments[r]]=h(n);return n.of=function(r,i){return function(o){try{var a=o.sourceEvent=t.event;o.target=e,t.event=o,n[o.type].apply(r,i)}finally{t.event=a}}},n}function m(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>ee&&($t.scrollX||$t.scrollY)){r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();ee=!(o.f||o.e),r.remove()}return ee?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var a=e.getBoundingClientRect();return[n.clientX-a.left-e.clientLeft,n.clientY-a.top-e.clientTop]}function g(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=se.length;r>n;++n){var i=se[n]+e;if(i in t)return i}}function y(){var t=v(),e=b()-t;e>24?(isFinite(e)&&(clearTimeout(oe),oe=setTimeout(y,e)),ie=0):(ie=1,ue(y))}function v(){var t=Date.now();for(ae=ne;ae;)t>=ae.t&&(ae.f=ae.c(t-ae.t)),ae=ae.n;return t}function b(){for(var t,e=ne,n=1/0;e;)e.f?e=t?t.n=e.n:ne=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return re=t,n}function _(t){return le(t,de),t}function x(t){return"function"==typeof t?t:function(){return ce(t,this)}}function w(t){return"function"==typeof t?t:function(){return he(t,this)}}function M(e,n){function r(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function o(){this.setAttribute(e,n)}function a(){this.setAttributeNS(e.space,e.local,n)}function s(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}function u(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}return e=t.ns.qualify(e),null==n?e.local?i:r:"function"==typeof n?e.local?u:s:e.local?a:o}function C(t){return t.trim().replace(/\s+/g," ")}function P(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function E(t){return(t+"").trim().split(/^|\s+/)}function T(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=E(t).map(S);var i=t.length;return"function"==typeof e?r:n}function S(t){var e=P(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",C(i+" "+t))):n.setAttribute("class",C(i.replace(e," ")))}}function L(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n);
}return null==e?r:"function"==typeof e?o:i}function A(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function D(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function I(){var t=this.parentNode;t&&t.removeChild(this)}function k(){this._=Object.create(null)}function N(t){return{__data__:t}}function B(t){return function(){return pe(this,t)}}function O(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function R(t){return arguments.length||(t=O),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function F(){}function U(e,n,r){function i(){var t=this[s];t&&(this.removeEventListener(e,t,t.$),delete this[s])}function o(){var t=l(n,Kt(arguments));i.call(this),this.addEventListener(e,this[s]=t,t.$=r),t._=n}function a(){var n,r=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var i in this)if(n=i.match(r)){var o=this[i];this.removeEventListener(n[1],o,o.$),delete this[i]}}var s="__on"+e,u=e.indexOf("."),l=z;u>0&&(e=e.slice(0,u));var c=ye.get(e);return c&&(e=c,l=V),u?n?o:i:n?F:a}function z(e,n){return function(r){var i=t.event;t.event=r,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function V(t,e){var n=z(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function G(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],a=0,s=o.length;s>a;a++)(i=o[a])&&e(i,a,n);return t}function W(t){return le(t,ve),t}function H(t){var e,n;return function(r,i,o){var a,s=t[o].update,u=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<u;);return a}}function j(){return!0}function X(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Y(t,e,n){return le(t,Me),t.namespace=e,t.id=n,t}function q(){}function Z(t,e,n){return this instanceof Z?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Z?new Z(t.h,t.s,t.l):ht(""+t,ft,Z):new Z(t,e,n)}function K(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,new ut(i(t+120),i(t),i(t-120))}function J(t){return((t=Math.exp(t))-1/t)/2}function Q(t){return((t=Math.exp(t))+1/t)/2}function $(t){return((t=Math.exp(2*t))-1)/(t+1)}function tt(e,n,r){return this instanceof tt?(this.h=+e,this.c=+n,void(this.l=+r)):arguments.length<2?e instanceof tt?new tt(e.h,e.c,e.l):e instanceof nt?it(e.l,e.a,e.b):it((e=pt((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new tt(e,n,r)}function et(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new nt(n,Math.cos(t*=Le)*e,Math.sin(t)*e)}function nt(t,e,n){return this instanceof nt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof nt?new nt(t.l,t.a,t.b):t instanceof tt?et(t.h,t.c,t.l):pt((t=ut(t)).r,t.g,t.b):new nt(t,e,n)}function rt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=ot(i)*ke,r=ot(r)*Ne,o=ot(o)*Be,new ut(st(3.2404542*i-1.5371385*r-.4985314*o),st(-.969266*i+1.8760108*r+.041556*o),st(.0556434*i-.2040259*r+1.0572252*o))}function it(t,e,n){return t>0?new tt(Math.atan2(n,e)*Ae,Math.sqrt(e*e+n*n),t):new tt(NaN,NaN,t)}function ot(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function at(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function st(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ut(t,e,n){return this instanceof ut?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ut?new ut(t.r,t.g,t.b):ht(""+t,ut,K):new ut(t,e,n)}function lt(t){return new ut(t>>16,t>>8&255,255&t)}function ct(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ht(t,e,n){var r,i,o,a=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(mt(i[0]),mt(i[1]),mt(i[2]))}return(o=Fe.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,u=15&o,u=u<<4|u):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),e(a,s,u))}function ft(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,u=(a+o)/2;return s?(i=.5>u?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=u>0&&1>u?0:r),new Z(r,i,u)}function pt(t,e,n){t=dt(t),e=dt(e),n=dt(n);var r=at((.4124564*t+.3575761*e+.1804375*n)/ke),i=at((.2126729*t+.7151522*e+.072175*n)/Ne),o=at((.0193339*t+.119192*e+.9503041*n)/Be);return nt(116*i-16,500*(r-i),200*(i-o))}function dt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function mt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function gt(e,n){e=t.rgb(e),n=t.rgb(n);var r=e.r,i=e.g,o=e.b,a=n.r-r,s=n.g-i,u=n.b-o;return function(t){return"#"+ct(Math.round(r+a*t))+ct(Math.round(i+s*t))+ct(Math.round(o+u*t))}}function yt(t,e){var n,r={},i={};for(n in t)n in e?r[n]=xt(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function vt(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(xt(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function bt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _t(t,e){var n,r,i,o=Ue.lastIndex=ze.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Ue.exec(t))&&(r=ze.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:bt(n,r)})),o=ze.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;e>r;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function xt(e,n){for(var r,i=t.interpolators.length;--i>=0&&!(r=t.interpolators[i](e,n)););return r}function wt(t){var e=[t.a,t.b],n=[t.c,t.d],r=Ct(e),i=Mt(e,n),o=Ct(Pt(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Ae,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ae:0}function Mt(t,e){return t[0]*e[0]+t[1]*e[1]}function Ct(t){var e=Math.sqrt(Mt(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Pt(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Et(e,n){var r,i=[],o=[],a=t.transform(e),s=t.transform(n),u=a.translate,l=s.translate,c=a.rotate,h=s.rotate,f=a.skew,p=s.skew,d=a.scale,m=s.scale;return u[0]!=l[0]||u[1]!=l[1]?(i.push("translate(",null,",",null,")"),o.push({i:1,x:bt(u[0],l[0])},{i:3,x:bt(u[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),c!=h?(c-h>180?h+=360:h-c>180&&(c+=360),o.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:bt(c,h)})):h&&i.push(i.pop()+"rotate("+h+")"),f!=p?o.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:bt(f,p)}):p&&i.push(i.pop()+"skewX("+p+")"),d[0]!=m[0]||d[1]!=m[1]?(r=i.push(i.pop()+"scale(",null,",",null,")"),o.push({i:r-4,x:bt(d[0],m[0])},{i:r-2,x:bt(d[1],m[1])})):(1!=m[0]||1!=m[1])&&i.push(i.pop()+"scale("+m+")"),r=o.length,function(t){for(var e,n=-1;++n<r;)i[(e=o[n]).i]=e.x(t);return i.join("")}}function Tt(t,e,n,r){var i=t.id,o=t.namespace;return G(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function St(t){return null==t&&(t=""),function(){this.textContent=t}}function Lt(t){return t}function At(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Dt(t){return function(e){return 1-t(1-e)}}function It(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function kt(t){return t*t}function Nt(t){return t*t*t}function Bt(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Ot(t){return function(e){return Math.pow(e,t)}}function Rt(t){return 1-Math.cos(t*Se)}function Ft(t){return Math.pow(2,10*(t-1))}function Ut(t){return 1-Math.sqrt(1-t*t)}function zt(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Te*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Te/e)}}function Vt(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Gt(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Wt(t){return null==t?"__transition__":"__transition_"+t+"__"}function Ht(e,r,i,o,a){var s=e[i]||(e[i]={active:0,count:0}),u=s[o];if(!u){var l=a.time;u=s[o]={tween:new n,time:l,delay:a.delay,duration:a.duration,ease:a.ease,index:r},a=null,++s.count,t.timer(function(n){function a(n){if(s.active>o)return h();var i=s[s.active];i&&(--s.count,delete s[s.active],i.event&&i.event.interrupt.call(e,e.__data__,i.index)),s.active=o,u.event&&u.event.start.call(e,e.__data__,r),u.tween.forEach(function(t,n){(n=n.call(e,e.__data__,r))&&g.push(n)}),p=u.ease,f=u.duration,t.timer(function(){return m.c=c(n||1)?j:c,1},0,l)}function c(t){if(s.active!==o)return 1;for(var n=t/f,i=p(n),a=g.length;a>0;)g[--a].call(e,i);return n>=1?(u.event&&u.event.end.call(e,e.__data__,r),h()):void 0}function h(){return--s.count?delete s[o]:delete e[i],1}var f,p,d=u.delay,m=ae,g=[];return m.t=d+l,n>=d?a(n-d):void(m.c=a)},0,l)}}function jt(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function Xt(){var e=".dragsuppress-"+ ++Xe,n="click"+e,r=t.select($t).on("touchmove"+e,f).on("dragstart"+e,f).on("selectstart"+e,f);if(je){var i=Qt.style,o=i[je];i[je]="none"}return function(t){if(r.on(e,null),je&&(i[je]=o),t){var a=function(){r.on(n,null)};r.on(n,function(){f(),a()},!0),setTimeout(a,0)}}}t.map=function(t,e){var r=new n;if(t instanceof n)t.forEach(function(t,e){r.set(t,e)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(1===arguments.length)for(;++o<a;)r.set(o,t[o]);else for(;++o<a;)r.set(e.call(t,i=t[o],o),i)}else for(var s in t)r.set(s,t[s]);return r};var Yt="__proto__",qt="\x00";e(n,{has:o,get:function(t){return this._[r(t)]},set:function(t,e){return this._[r(t)]=e},remove:a,keys:s,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:i(e),value:this._[e]});return t},size:u,empty:l,forEach:function(t){for(var e in this._)t.call(this,i(e),this._[e])}}),t.dispatch=function(){for(var t=new c,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=h(t);return t},c.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},t.event=null;var Zt=[].slice,Kt=function(t){return Zt.call(t)},Jt=document,Qt=Jt.documentElement,$t=window;try{Kt(Qt.childNodes)[0].nodeType}catch(te){Kt=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}t.mouse=function(t){return m(t,p())};var ee=/WebKit/.test($t.navigator.userAgent)?-1:0;t.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=p().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return m(t,r)},t.touches=function(t,e){return arguments.length<2&&(e=p().touches),e?Kt(e).map(function(e){var n=m(t,e);return n.identifier=e.identifier,n}):[]};var ne,re,ie,oe,ae,se=["webkit","ms","moz","Moz","o","O"],ue=$t[g($t,"requestAnimationFrame")]||function(t){setTimeout(t,17)};t.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,f:!1,n:null};re?re.n=o:ne=o,re=o,ie||(oe=clearTimeout(oe),ie=1,ue(y))},t.timer.flush=function(){v(),b()};var le={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ce=function(t,e){return e.querySelector(t)},he=function(t,e){return e.querySelectorAll(t)},fe=Qt.matches||Qt[g(Qt,"matchesSelector")],pe=function(t,e){return fe.call(t,e)};"function"==typeof Sizzle&&(ce=function(t,e){return Sizzle(t,e)[0]||null},he=Sizzle,pe=Sizzle.matchesSelector),t.selection=function(){return be};var de=t.selection.prototype=[];de.select=function(t){var e,n,r,i,o=[];t=x(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return _(o)},de.selectAll=function(t){var e,n,r=[];t=w(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,u=a.length;++s<u;)(n=a[s])&&(r.push(e=Kt(t.call(n,n.__data__,s,i))),e.parentNode=n);return _(r)};var me={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:me,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),me.hasOwnProperty(n)?{space:me[n],local:t}:t}},de.attr=function(e,n){if(arguments.length<2){if("string"==typeof e){var r=this.node();return e=t.ns.qualify(e),e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e)this.each(M(n,e[n]));return this}return this.each(M(e,n))},t.requote=function(t){return t.replace(ge,"\\$&")};var ge=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;de.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=E(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!P(t[i]).test(e))return!1;return!0}for(e in t)this.each(T(e,t[e]));return this}return this.each(T(t,e))},de.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(L(n,t[n],e));return this}if(2>r)return $t.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(L(t,e,n))},de.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(A(e,t[e]));return this}return this.each(A(t,e))},de.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},de.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},de.append=function(t){return t=D(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},de.insert=function(t,e){return t=D(t),e=x(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},de.remove=function(){return this.each(I)},t.set=function(t){var e=new k;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},e(k,{has:o,add:function(t){return this._[r(t+="")]=!0,t},remove:a,values:s,size:u,empty:l,forEach:function(t){for(var e in this._)t.call(this,i(e))}}),de.data=function(t,e){function r(t,r){var i,o,a,s=t.length,h=r.length,f=Math.min(s,h),p=new Array(h),d=new Array(h),m=new Array(s);if(e){var g,y=new n,v=new Array(s);for(i=-1;++i<s;)y.has(g=e.call(o=t[i],o.__data__,i))?m[i]=o:y.set(g,o),v[i]=g;for(i=-1;++i<h;)(o=y.get(g=e.call(r,a=r[i],i)))?o!==!0&&(p[i]=o,o.__data__=a):d[i]=N(a),y.set(g,!0);for(i=-1;++i<s;)y.get(v[i])!==!0&&(m[i]=t[i])}else{for(i=-1;++i<f;)o=t[i],a=r[i],o?(o.__data__=a,p[i]=o):d[i]=N(a);for(;h>i;++i)d[i]=N(r[i]);for(;s>i;++i)m[i]=t[i]}d.update=p,d.parentNode=p.parentNode=m.parentNode=t.parentNode,u.push(d),l.push(p),c.push(m)}var i,o,a=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(i=this[0]).length);++a<s;)(o=i[a])&&(t[a]=o.__data__);return t}var u=W([]),l=_([]),c=_([]);if("function"==typeof t)for(;++a<s;)r(i=this[a],t.call(i,i.parentNode.__data__,a));else for(;++a<s;)r(i=this[a],t);return l.enter=function(){return u},l.exit=function(){return c},l},de.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},de.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=B(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return _(i)},de.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},t.ascending=O,de.sort=function(t){t=R.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},de.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(U(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(U(t,e,n))};var ye=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});ye.forEach(function(t){"on"+t in Jt&&ye.remove(t)}),de.each=function(t){return G(this,function(e,n,r){t.call(e,e.__data__,n,r)})},de.call=function(t){var e=Kt(arguments);return t.apply(e[0]=this,e),this},de.empty=function(){return!this.node()},de.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},de.size=function(){var t=0;return G(this,function(){++t}),t};var ve=[];t.selection.enter=W,t.selection.enter.prototype=ve,ve.append=de.append,ve.empty=de.empty,ve.node=de.node,ve.call=de.call,ve.size=de.size,ve.select=function(t){for(var e,n,r,i,o,a=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(e.push(r[l]=n=t.call(i.parentNode,o.__data__,l,s)),n.__data__=o.__data__):e.push(null)}return _(a)},ve.insert=function(t,e){return arguments.length<2&&(e=H(this)),de.insert.call(this,t,e)},t.select=function(t){var e=["string"==typeof t?ce(t,Jt):t];return e.parentNode=Qt,_([e])},t.selectAll=function(t){var e=Kt("string"==typeof t?he(t,Jt):t);return e.parentNode=Qt,_([e])};var be=t.select(Qt);de.transition=function(t){for(var e,n,r=_e||++Ce,i=Wt(t),o=[],a=xe||{time:Date.now(),ease:Bt,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(n=l[c])&&Ht(n,c,i,r,a),e.push(n)}return Y(o,i,r)},de.interrupt=function(t){return this.each(null==t?we:X(Wt(t)))};var _e,xe,we=X(Wt()),Me=[],Ce=0;Me.call=de.call,Me.empty=de.empty,Me.node=de.node,Me.size=de.size,t.transition=function(t,e){return t&&t.transition?_e?t.transition(e):t:be.transition(t)},t.transition.prototype=Me,Me.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=x(t);for(var s=-1,u=this.length;++s<u;){a.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(r=l[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Ht(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return Y(a,o,i)},Me.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,u=[];t=w(t);for(var l=-1,c=this.length;++l<c;)for(var h=this[l],f=-1,p=h.length;++f<p;)if(r=h[f]){o=r[s][a],n=t.call(r,r.__data__,f,l),u.push(e=[]);for(var d=-1,m=n.length;++d<m;)(i=n[d])&&Ht(i,d,s,a,o),e.push(i)}return Y(u,s,a)},Me.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=B(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]);for(var n=this[o],s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return Y(i,this.namespace,this.id)},t.color=q,q.prototype.toString=function(){return this.rgb()+""},t.hsl=Z;var Pe=Z.prototype=new q;Pe.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Z(this.h,this.s,this.l/t)},Pe.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Z(this.h,this.s,t*this.l)},Pe.rgb=function(){return K(this.h,this.s,this.l)};var Ee=Math.PI,Te=2*Ee,Se=Ee/2,Le=Ee/180,Ae=180/Ee;t.hcl=tt;var De=tt.prototype=new q;De.brighter=function(t){return new tt(this.h,this.c,Math.min(100,this.l+Ie*(arguments.length?t:1)))},De.darker=function(t){return new tt(this.h,this.c,Math.max(0,this.l-Ie*(arguments.length?t:1)))},De.rgb=function(){return et(this.h,this.c,this.l).rgb()},t.lab=nt;var Ie=18,ke=.95047,Ne=1,Be=1.08883,Oe=nt.prototype=new q;Oe.brighter=function(t){return new nt(Math.min(100,this.l+Ie*(arguments.length?t:1)),this.a,this.b)},Oe.darker=function(t){return new nt(Math.max(0,this.l-Ie*(arguments.length?t:1)),this.a,this.b)},Oe.rgb=function(){return rt(this.l,this.a,this.b)},t.rgb=ut;var Re=ut.prototype=new q;Re.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new ut(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ut(i,i,i)},Re.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ut(t*this.r,t*this.g,t*this.b)},Re.hsl=function(){return ft(this.r,this.g,this.b)},Re.toString=function(){return"#"+ct(this.r)+ct(this.g)+ct(this.b)};var Fe=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Fe.forEach(function(t,e){Fe.set(t,lt(e))}),t.interpolateRgb=gt,t.interpolateObject=yt,t.interpolateArray=vt,t.interpolateNumber=bt,t.interpolateString=_t;var Ue=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ze=new RegExp(Ue.source,"g");t.interpolate=xt,t.interpolators=[function(t,e){var n=typeof e;return("string"===n?Fe.has(e)||/^(#|rgb\(|hsl\()/.test(e)?gt:_t:e instanceof q?gt:Array.isArray(e)?vt:"object"===n&&isNaN(e)?yt:bt)(t,e)}],t.transform=function(e){var n=Jt.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new wt(e?e.matrix:Ve)})(e)},wt.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ve={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=Et,Me.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):G(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Me.attr=function(e,n){function r(){this.removeAttribute(u)}function i(){this.removeAttributeNS(u.space,u.local)}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttribute(u);return n!==t&&(e=s(n,t),function(t){this.setAttribute(u,e(t))})})}function a(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(u.space,u.local);return n!==t&&(e=s(n,t),function(t){this.setAttributeNS(u.space,u.local,e(t))})})}if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var s="transform"==e?Et:xt,u=t.ns.qualify(e);return Tt(this,"attr."+e,n,u.local?a:o)},Me.attrTween=function(e,n){function r(t,e){var r=n.call(this,t,e,this.getAttribute(o));return r&&function(t){this.setAttribute(o,r(t))}}function i(t,e){var r=n.call(this,t,e,this.getAttributeNS(o.space,o.local));return r&&function(t){this.setAttributeNS(o.space,o.local,r(t))}}var o=t.ns.qualify(e);return this.tween("attr."+e,o.local?i:r)},Me.style=function(t,e,n){function r(){this.style.removeProperty(t)}function i(e){return null==e?r:(e+="",function(){var r,i=$t.getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=xt(i,e),function(e){this.style.setProperty(t,r(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return Tt(this,"style."+t,e,i)},Me.styleTween=function(t,e,n){function r(r,i){var o=e.call(this,r,i,$t.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Me.text=function(t){return Tt(this,"text",t,St)},Me.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})};var Ge=function(){return Lt},We=t.map({linear:Ge,poly:Ot,quad:function(){return kt},cubic:function(){return Nt},sin:function(){return Rt},exp:function(){return Ft},circle:function(){return Ut},elastic:zt,back:Vt,bounce:function(){return Gt}}),He=t.map({"in":Lt,out:Dt,"in-out":It,"out-in":function(t){return It(Dt(t))}});t.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=We.get(n)||Ge,r=He.get(r)||Lt,At(r(n.apply(null,Zt.call(arguments,1))))},Me.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),G(this,function(t){t[r][n].ease=e}))},Me.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:G(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Me.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:G(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Me.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var o=xe,a=_e;try{_e=r,G(this,function(t,n,o){xe=t[i][r],e.call(t,t.__data__,n,o)})}finally{xe=o,_e=a}}else G(this,function(o){var a=o[i][r];(a.event||(a.event=t.dispatch("start","end","interrupt"))).on(e,n)});return this},Me.transition=function(){for(var t,e,n,r,i=this.id,o=++Ce,a=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(t=[]);for(var e=this[u],c=0,h=e.length;h>c;c++)(n=e[c])&&(r=n[a][i],Ht(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return Y(s,a,o)},t.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=jt(t,e,e[n]);return t};var je="onselectstart"in Jt?null:g(Qt.style,"userSelect"),Xe=0,Ye=Math.SQRT2,qe=2,Ze=4;t.interpolateZoom=function(t,e){function n(t){var e=t*P,n=t*E;if(M||C){var s=Q(b),u=Q(_),l=o/(qe*d)*(s*$(Ye*e+b)-J(b)),c=a/(qe*d)*(u*$(Ye*n+_)-J(_));return[r+l*h,i+c*f,o*s/Q(Ye*e+b),a*u/Q(Ye*n+_)]}return[r+t*h,i+t*f,o*Math.exp(Ye*e),a*Math.exp(Ye*n)]}var r=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],l=e[2],c=e[3],h=s-r,f=u-i,p=h*h+f*f,d=Math.sqrt(p),m=(l*l-o*o+Ze*p)/(2*o*qe*d),g=(c*c-a*a+Ze*p)/(2*a*qe*d),y=(l*l-o*o-Ze*p)/(2*l*qe*d),v=(c*c-a*a-Ze*p)/(2*c*qe*d),b=Math.log(Math.sqrt(m*m+1)-m),_=Math.log(Math.sqrt(g*g+1)-g),x=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(v*v+1)-v),M=x-b,C=w-_,P=(M||Math.log(l/o))/Ye,E=(C||Math.log(c/a))/Ye;return n.duration=(1e3*P+1e3*E)/2,n},t.behavior.zoom=function(){function e(t){t.on(D,h).on(Qe+".zoom",m).on("dblclick.zoom",g).on(N,p)}function n(t){return[(t[0]-E.x)/E.kx,(t[1]-E.y)/E.ky]}function r(t){return[t[0]*E.kx+E.x,t[1]*E.ky+E.y]}function i(t,e){e=null==e?t:e,E.kx=Math.max(S[0],Math.min(S[1],t)),E.ky=Math.max(S[0],Math.min(S[1],e))}function o(e,n){n=r(n),t.event.altKey?E.x+=e[0]-n[0]:t.event.metaKey?E.y+=e[1]-n[1]:(E.x+=e[0]-n[0],E.y+=e[1]-n[1])}function a(n,r,a,s,u){u=null==u?s:u,n.__chart__={x:E.x,y:E.y,kx:E.kx,ky:E.ky},i(Math.pow(2,s),Math.pow(2,u)),o(v=r,a),n=t.select(n),L>0&&(n=n.transition().duration(L)),n.call(e.event)}function s(){M&&M.domain(w.range().map(function(t){return(t-E.x)/E.kx}).map(w.invert)),P&&P.domain(C.range().map(function(t){return(t-E.y)/E.ky}).map(C.invert))}function u(t){A++||t({type:"zoomstart"})}function l(t){s(),t({type:"zoom",scaleX:E.kx,scaleY:E.ky,translate:[E.x,E.y]})}function c(t){--A||t({type:"zoomend"}),v=null}function h(){function e(){h=1,o(t.mouse(i),p),l(s)}function r(){f.on(I,null).on(k,null),d(h&&t.event.target===a),c(s)}var i=this,a=t.event.target,s=B.of(i,arguments),h=0,f=t.select($t).on(I,e).on(k,r),p=n(t.mouse(i)),d=Xt();we.call(i),u(s)}function p(){function e(){var e=t.touches(g);return m=E.kx,e.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),e}function r(){var n=t.event.target;t.select(n).on(w,s).on(M,d),C.push(n);for(var r=t.event.changedTouches,i=0,o=r.length;o>i;++i)v[r[i].identifier]=null;var u=e(),l=Date.now();if(1===u.length){if(500>l-x){var c=u[0];a(g,c,v[c.identifier],Math.floor(Math.log(E.kx)/Math.LN2)+1),f()}x=l}else if(u.length>1){var c=u[0],h=u[1],p=c[0]-h[0],m=c[1]-h[1];b=p*p+m*m}}function s(){var e,n,r,a,s=t.touches(g);we.call(g);for(var u=0,c=s.length;c>u;++u,a=null)if(r=s[u],a=v[r.identifier]){if(n)break;e=r,n=a}if(a){var h=(h=r[0]-e[0])*h+(h=r[1]-e[1])*h,f=b&&Math.sqrt(h/b);e=[(e[0]+r[0])/2,(e[1]+r[1])/2],n=[(n[0]+a[0])/2,(n[1]+a[1])/2],i(f)}x=null,o(e,n),l(y)}function d(){if(t.event.touches.length){for(var n=t.event.changedTouches,r=0,i=n.length;i>r;++r)delete v[n[r].identifier];for(var o in v)return void e()}t.selectAll(C).on(_,null),P.on(D,h).on(N,p),T(),c(y)}var m,g=this,y=B.of(g,arguments),v={},b=0,_=".zoom-"+t.event.changedTouches[0].identifier,w="touchmove"+_,M="touchend"+_,C=[],P=t.select(g),T=Xt();r(),u(y),P.on(D,null).on(N,r)}function m(){var e=B.of(this,arguments);_?clearTimeout(_):(y=n(v=b||t.mouse(this)),we.call(this),u(e)),_=setTimeout(function(){_=null,c(e)},50),f(),t.event.altKey?i(Math.pow(2,.002*Ke())*E.kx,E.ky):t.event.metaKey?i(E.kx,Math.pow(2,.002*Ke())*E.ky):i(Math.pow(2,.002*Ke())*E.kx,Math.pow(2,.002*Ke())*E.ky),
o(v,y),l(e)}function g(){var e=t.mouse(this),r=Math.log(E.kx)/Math.LN2,i=Math.log(E.ky)/Math.LN2;t.event.altKey?a(this,e,n(e),t.event.shiftKey?Math.ceil(r)-1:Math.floor(i)+1,i):t.event.metaKey?a(this,e,n(e),r,t.event.shiftKey?Math.ceil(i)-1:Math.floor(i)+1):a(this,e,n(e),t.event.shiftKey?Math.ceil(r)-1:Math.floor(i)+1,t.event.shiftKey?Math.ceil(i)-1:Math.floor(i)+1)}var y,v,b,_,x,w,M,C,P,E={x:0,y:0,kx:1,ky:1},T=[960,500],S=Je,L=250,A=0,D="mousedown.zoom",I="mousemove.zoom",k="mouseup.zoom",N="touchstart.zoom",B=d(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=B.of(this,arguments),n=E;_e?t.select(this).transition().each("start.zoom",function(){E=this.__chart__||{x:0,y:0,kx:1,ky:1},u(e)}).tween("zoom:zoom",function(){var r=T[0],i=T[1],o=v?v[0]:r/2,a=v?v[1]:i/2,s=t.interpolateZoom([(o-E.x)/E.kx,(a-E.y)/E.ky,r/E.kx,i/E.ky],[(o-n.x)/n.kx,(a-n.y)/n.ky,r/n.kx,i/n.ky]);return function(t){var n=s(t),u=r/n[2],c=i/n[3];this.__chart__=E={x:o-n[0]*u,y:a-n[1]*c,kx:u,ky:c},l(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=E,u(e),l(e),c(e))})},e.translate=function(t){return arguments.length?(E={x:+t[0],y:+t[1],kx:E.kx,ky:E.ky},s(),e):[E.x,E.y]},e.scale=function(t,n){return arguments.length?(n=null==n?t:n,E={x:E.x,y:E.y,kx:+t,ky:+n},s(),e):E.k},e.scaleExtent=function(t){return arguments.length?(S=null==t?Je:[+t[0],+t[1]],e):S},e.center=function(t){return arguments.length?(b=t&&[+t[0],+t[1]],e):b},e.size=function(t){return arguments.length?(T=t&&[+t[0],+t[1]],e):T},e.duration=function(t){return arguments.length?(L=+t,e):L},e.x=function(t){return arguments.length?(M=t,w=t.copy(),E={x:0,y:E.y,kx:1,ky:E.ky},e):M},e.y=function(t){return arguments.length?(P=t,C=t.copy(),E={x:E.x,y:0,kx:E.kx,ky:1},e):P},t.rebind(e,B,"on")};var Ke,Je=[0,1/0],Qe="onwheel"in Jt?(Ke=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Jt?(Ke=function(){return t.event.wheelDelta},"mousewheel"):(Ke=function(){return-t.event.detail},"MozMousePixelScroll")};e.exports=r},{}],32:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],33:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:34,colorbrewer:40,"d3-color":41,"d3-scale":42,dup:10,lodash:43,superagent:44}],34:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":36,"color-string":37,dup:11}],35:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],36:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":35,dup:13}],37:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":38,dup:14}],38:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],39:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],40:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":39,dup:8}],41:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],42:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],43:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],44:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:45,reduce:46}],45:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],46:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],47:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:48,"insert-css":49,lodash:394,qwery:50}],48:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],49:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],50:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],51:[function(t,e,n){(function(){function t(e,n,r){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;if(e._chain&&(e=e._wrapped),n._chain&&(n=n._wrapped),e.isEqual&&P.isFunction(e.isEqual))return e.isEqual(n);if(n.isEqual&&P.isFunction(n.isEqual))return n.isEqual(e);var i=h.call(e);if(i!=h.call(n))return!1;switch(i){case"[object String]":return e==String(n);case"[object Number]":return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object RegExp]":return e.source==n.source&&e.global==n.global&&e.multiline==n.multiline&&e.ignoreCase==n.ignoreCase}if("object"!=typeof e||"object"!=typeof n)return!1;for(var o=r.length;o--;)if(r[o]==e)return!0;r.push(e);var a=0,s=!0;if("[object Array]"==i){if(a=e.length,s=a==n.length)for(;a--&&(s=a in e==a in n&&t(e[a],n[a],r)););}else{if("constructor"in e!="constructor"in n||e.constructor!=n.constructor)return!1;for(var u in e)if(P.has(e,u)&&(a++,!(s=P.has(n,u)&&t(e[u],n[u],r))))break;if(s){for(u in n)if(P.has(n,u)&&!a--)break;s=!a}}return r.pop(),s}var r=this,i=r._,o={},a=Array.prototype,s=Object.prototype,u=Function.prototype,l=a.slice,c=a.unshift,h=s.toString,f=s.hasOwnProperty,p=a.forEach,d=a.map,m=a.reduce,g=a.reduceRight,y=a.filter,v=a.every,b=a.some,_=a.indexOf,x=a.lastIndexOf,w=Array.isArray,M=Object.keys,C=u.bind,P=function(t){return new O(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=P),n._=P):r._=P,P.VERSION="1.3.3";var E=P.each=P.forEach=function(t,e,n){if(null!=t)if(p&&t.forEach===p)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(r in t&&e.call(n,t[r],r,t)===o)return}else for(var a in t)if(P.has(t,a)&&e.call(n,t[a],a,t)===o)return};P.map=P.collect=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(E(t,function(t,i,o){r[r.length]=e.call(n,t,i,o)}),t.length===+t.length&&(r.length=t.length),r)},P.reduce=P.foldl=P.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return r&&(e=P.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(E(t,function(t,o,a){i?n=e.call(r,n,t,o,a):(n=t,i=!0)}),!i)throw new TypeError("Reduce of empty array with no initial value");return n},P.reduceRight=P.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return r&&(e=P.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=P.toArray(t).reverse();return r&&!i&&(e=P.bind(e,r)),i?P.reduce(o,e,n,r):P.reduce(o,e)},P.find=P.detect=function(t,e,n){var r;return T(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},P.filter=P.select=function(t,e,n){var r=[];return null==t?r:y&&t.filter===y?t.filter(e,n):(E(t,function(t,i,o){e.call(n,t,i,o)&&(r[r.length]=t)}),r)},P.reject=function(t,e,n){var r=[];return null==t?r:(E(t,function(t,i,o){e.call(n,t,i,o)||(r[r.length]=t)}),r)},P.every=P.all=function(t,e,n){var r=!0;return null==t?r:v&&t.every===v?t.every(e,n):(E(t,function(t,i,a){return(r=r&&e.call(n,t,i,a))?void 0:o}),!!r)};var T=P.some=P.any=function(t,e,n){e||(e=P.identity);var r=!1;return null==t?r:b&&t.some===b?t.some(e,n):(E(t,function(t,i,a){return r||(r=e.call(n,t,i,a))?o:void 0}),!!r)};P.include=P.contains=function(t,e){var n=!1;return null==t?n:_&&t.indexOf===_?-1!=t.indexOf(e):n=T(t,function(t){return t===e})},P.invoke=function(t,e){var n=l.call(arguments,2);return P.map(t,function(t){return(P.isFunction(e)?e||t:t[e]).apply(t,n)})},P.pluck=function(t,e){return P.map(t,function(t){return t[e]})},P.max=function(t,e,n){if(!e&&P.isArray(t)&&t[0]===+t[0])return Math.max.apply(Math,t);if(!e&&P.isEmpty(t))return-(1/0);var r={computed:-(1/0)};return E(t,function(t,i,o){var a=e?e.call(n,t,i,o):t;a>=r.computed&&(r={value:t,computed:a})}),r.value},P.min=function(t,e,n){if(!e&&P.isArray(t)&&t[0]===+t[0])return Math.min.apply(Math,t);if(!e&&P.isEmpty(t))return 1/0;var r={computed:1/0};return E(t,function(t,i,o){var a=e?e.call(n,t,i,o):t;a<r.computed&&(r={value:t,computed:a})}),r.value},P.shuffle=function(t){var e,n=[];return E(t,function(t,r,i){e=Math.floor(Math.random()*(r+1)),n[r]=n[e],n[e]=t}),n},P.sortBy=function(t,e,n){var r=P.isFunction(e)?e:function(t){return t[e]};return P.pluck(P.map(t,function(t,e,i){return{value:t,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;return void 0===n?1:void 0===r?-1:r>n?-1:n>r?1:0}),"value")},P.groupBy=function(t,e){var n={},r=P.isFunction(e)?e:function(t){return t[e]};return E(t,function(t,e){var i=r(t,e);(n[i]||(n[i]=[])).push(t)}),n},P.sortedIndex=function(t,e,n){n||(n=P.identity);for(var r=0,i=t.length;i>r;){var o=r+i>>1;n(t[o])<n(e)?r=o+1:i=o}return r},P.toArray=function(t){return t?P.isArray(t)?l.call(t):P.isArguments(t)?l.call(t):t.toArray&&P.isFunction(t.toArray)?t.toArray():P.values(t):[]},P.size=function(t){return P.isArray(t)?t.length:P.keys(t).length},P.first=P.head=P.take=function(t,e,n){return null==e||n?t[0]:l.call(t,0,e)},P.initial=function(t,e,n){return l.call(t,0,t.length-(null==e||n?1:e))},P.last=function(t,e,n){return null==e||n?t[t.length-1]:l.call(t,Math.max(t.length-e,0))},P.rest=P.tail=function(t,e,n){return l.call(t,null==e||n?1:e)},P.compact=function(t){return P.filter(t,function(t){return!!t})},P.flatten=function(t,e){return P.reduce(t,function(t,n){return P.isArray(n)?t.concat(e?n:P.flatten(n)):(t[t.length]=n,t)},[])},P.without=function(t){return P.difference(t,l.call(arguments,1))},P.uniq=P.unique=function(t,e,n){var r=n?P.map(t,n):t,i=[];return t.length<3&&(e=!0),P.reduce(r,function(n,r,o){return(e?P.last(n)===r&&n.length:P.include(n,r))||(n.push(r),i.push(t[o])),n},[]),i},P.union=function(){return P.uniq(P.flatten(arguments,!0))},P.intersection=P.intersect=function(t){var e=l.call(arguments,1);return P.filter(P.uniq(t),function(t){return P.every(e,function(e){return P.indexOf(e,t)>=0})})},P.difference=function(t){var e=P.flatten(l.call(arguments,1),!0);return P.filter(t,function(t){return!P.include(e,t)})},P.zip=function(){for(var t=l.call(arguments),e=P.max(P.pluck(t,"length")),n=new Array(e),r=0;e>r;r++)n[r]=P.pluck(t,""+r);return n},P.indexOf=function(t,e,n){if(null==t)return-1;var r,i;if(n)return r=P.sortedIndex(t,e),t[r]===e?r:-1;if(_&&t.indexOf===_)return t.indexOf(e);for(r=0,i=t.length;i>r;r++)if(r in t&&t[r]===e)return r;return-1},P.lastIndexOf=function(t,e){if(null==t)return-1;if(x&&t.lastIndexOf===x)return t.lastIndexOf(e);for(var n=t.length;n--;)if(n in t&&t[n]===e)return n;return-1},P.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o};var S=function(){};P.bind=function(t,e){var n,r;if(t.bind===C&&C)return C.apply(t,l.call(arguments,1));if(!P.isFunction(t))throw new TypeError;return r=l.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,r.concat(l.call(arguments)));S.prototype=t.prototype;var i=new S,o=t.apply(i,r.concat(l.call(arguments)));return Object(o)===o?o:i}},P.bindAll=function(t){var e=l.call(arguments,1);return 0==e.length&&(e=P.functions(t)),E(e,function(e){t[e]=P.bind(t[e],t)}),t},P.memoize=function(t,e){var n={};return e||(e=P.identity),function(){var r=e.apply(this,arguments);return P.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},P.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},P.defer=function(t){return P.delay.apply(P,[t,1].concat(l.call(arguments,1)))},P.throttle=function(t,e){var n,r,i,o,a,s,u=P.debounce(function(){a=o=!1},e);return function(){n=this,r=arguments;var l=function(){i=null,a&&t.apply(n,r),u()};return i||(i=setTimeout(l,e)),o?a=!0:s=t.apply(n,r),u(),o=!0,s}},P.debounce=function(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)};n&&!r&&t.apply(i,o),clearTimeout(r),r=setTimeout(a,e)}},P.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments))}},P.wrap=function(t,e){return function(){var n=[t].concat(l.call(arguments,0));return e.apply(this,n)}},P.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},P.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},P.keys=M||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)P.has(t,n)&&(e[e.length]=n);return e},P.values=function(t){return P.map(t,P.identity)},P.functions=P.methods=function(t){var e=[];for(var n in t)P.isFunction(t[n])&&e.push(n);return e.sort()},P.extend=function(t){return E(l.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t},P.pick=function(t){var e={};return E(P.flatten(l.call(arguments,1)),function(n){n in t&&(e[n]=t[n])}),e},P.defaults=function(t){return E(l.call(arguments,1),function(e){for(var n in e)null==t[n]&&(t[n]=e[n])}),t},P.clone=function(t){return P.isObject(t)?P.isArray(t)?t.slice():P.extend({},t):t},P.tap=function(t,e){return e(t),t},P.isEqual=function(e,n){return t(e,n,[])},P.isEmpty=function(t){if(null==t)return!0;if(P.isArray(t)||P.isString(t))return 0===t.length;for(var e in t)if(P.has(t,e))return!1;return!0},P.isElement=function(t){return!(!t||1!=t.nodeType)},P.isArray=w||function(t){return"[object Array]"==h.call(t)},P.isObject=function(t){return t===Object(t)},P.isArguments=function(t){return"[object Arguments]"==h.call(t)},P.isArguments(arguments)||(P.isArguments=function(t){return!(!t||!P.has(t,"callee"))}),P.isFunction=function(t){return"[object Function]"==h.call(t)},P.isString=function(t){return"[object String]"==h.call(t)},P.isNumber=function(t){return"[object Number]"==h.call(t)},P.isFinite=function(t){return P.isNumber(t)&&isFinite(t)},P.isNaN=function(t){return t!==t},P.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},P.isDate=function(t){return"[object Date]"==h.call(t)},P.isRegExp=function(t){return"[object RegExp]"==h.call(t)},P.isNull=function(t){return null===t},P.isUndefined=function(t){return void 0===t},P.has=function(t,e){return f.call(t,e)},P.noConflict=function(){return r._=i,this},P.identity=function(t){return t},P.times=function(t,e,n){for(var r=0;t>r;r++)e.call(n,r)},P.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},P.result=function(t,e){if(null==t)return null;var n=t[e];return P.isFunction(n)?n.call(t):n},P.mixin=function(t){E(P.functions(t),function(e){F(e,P[e]=t[e])})};var L=0;P.uniqueId=function(t){var e=L++;return t?t+e:e},P.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/.^/,D={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var I in D)D[D[I]]=I;var k=/\\|'|\r|\n|\t|\u2028|\u2029/g,N=/\\(\\|'|r|n|t|u2028|u2029)/g,B=function(t){return t.replace(N,function(t,e){return D[e]})};P.template=function(t,e,n){n=P.defaults(n||{},P.templateSettings);var r="__p+='"+t.replace(k,function(t){return"\\"+D[t]}).replace(n.escape||A,function(t,e){return"'+\n_.escape("+B(e)+")+\n'"}).replace(n.interpolate||A,function(t,e){return"'+\n("+B(e)+")+\n'"}).replace(n.evaluate||A,function(t,e){return"';\n"+B(e)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(e)return i(e,P);var o=function(t){return i.call(this,t,P)};return o.source="function("+(n.variable||"obj")+"){\n"+r+"}",o},P.chain=function(t){return P(t).chain()};var O=function(t){this._wrapped=t};P.prototype=O.prototype;var R=function(t,e){return e?P(t).chain():t},F=function(t,e){O.prototype[t]=function(){var t=l.call(arguments);return c.call(t,this._wrapped),R(e.apply(P,t),this._chain)}};P.mixin(P),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];O.prototype[t]=function(){var n=this._wrapped;e.apply(n,arguments);var r=n.length;return"shift"!=t&&"splice"!=t||0!==r||delete n[0],R(n,this._chain)}}),E(["concat","join","slice"],function(t){var e=a[t];O.prototype[t]=function(){return R(e.apply(this._wrapped,arguments),this._chain)}}),O.prototype.chain=function(){return this._chain=!0,this},O.prototype.value=function(){return this._wrapped}}).call(this)},{}],52:[function(t,e,n){!function(r){var i=r._;void 0===i&&"undefined"!=typeof t&&(i=t("underscore"));var o=r.nest={},a=function(t){return i.map(t,function(t,e){return{name:e,children:t}})};o.nest=function(t,e,n){i.isString(e)&&(e=[e]);var r=function(o,s,u){if(0===s){if(o.children=a(i.groupBy(t,e[0])),s<e.length)for(var l=0;l<o.children.length;l++)r(o.children[l],s+1,l)}else if(o.index=u,s>=e.length)"undefined"!=typeof n&&(o.value=n(o.children),delete o.children);else{o.children=a(i.groupBy(o.children,e[s]));for(var c=0;c<o.children.length;c++)r(o.children[c],s+1,c)}return o};return r({},0)},"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(e.exports=o),n.nester=o):"function"==typeof define&&define.amd?define("underscore.nest",[],function(){return o}):r._.mixin(o)}(this)},{underscore:51}],53:[function(t,e,n){(function(n){"use strict";var r=t("lightning-visualization"),i=t("lightning-client-utils"),o=t("lodash"),a=t("underscore.nest"),s=t("d3"),u=t("d3-multiaxis-zoom"),l=n("LmNpcmNsZS1wbG90IC5ub2RlIHsKICBmb250LXNpemU6IDExcHg7CiAgZmlsbDogI2JiYjsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5jaXJjbGUtcGxvdCAubGluayB7CiAgZmlsbDogbm9uZTsKICBzdHJva2Utd2lkdGg6IDJweDsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICBzaGFwZS1yZW5kZXJpbmc6IGF1dG87Cn0KCi5jaXJjbGUtcGxvdCAuYXJjLS1oaWdobGlnaHQsCi5jaXJjbGUtcGxvdCAuYXJjLS1oaWdobGlnaHQtLXN0aWNrIHsKICBmaWxsOiAjNTA1MDUwICFpbXBvcnRhbnQ7Cn0KCi5jaXJjbGUtcGxvdCAubm9kZS0taGlnaGxpZ2h0LAouY2lyY2xlLXBsb3QgLm5vZGUtLWhpZ2hsaWdodC0tc3RpY2sgewogIGZvbnQtd2VpZ2h0OiA2MDAgIWltcG9ydGFudDsKICBmaWxsOiAjNTA1MDUwICFpbXBvcnRhbnQ7Cn0KCi5jaXJjbGUtcGxvdCAubGluay0taGlnaGxpZ2h0IHsKICBvcGFjaXR5OiAwLjggIWltcG9ydGFudDsKICBzdHJva2Utd2lkdGg6IDNweCAhaW1wb3J0YW50OwogIHN0cm9rZTogIzMyMzIzMiAhaW1wb3J0YW50Owp9CgouY2lyY2xlLXBsb3QgLmxpbmstLWZhZGUtLWluIHsKICB2aXNpYmlsaXR5OiB2aXNpYmxlOwp9CgouY2lyY2xlLXBsb3QgLmxpbmstLWZhZGUtLW91dCB7CiAgZGlzcGxheTogbm9uZTsKfQoKLmNpcmNsZS1wbG90IC5saW5rLS1mYWRlLS1zdGljayB7CiAgdmlzaWJpbGl0eTogdmlzaWJpbGU7Cn0K","base64"),c=r.extend({css:l,defaultColor:"#deebfa",init:function(){u(s),this.render()},formatData:function(t){var e,n=t.nodes,r=t.level,u=t.group?t.group:[o.fill(Array(n.length),0)],l=t.labels?t.labels:[];if(t.color)e=t.color.map(function(t){return s.rgb(t[0],t[1],t[2])});else{var c=o.unique(u[0]).length;e=i.getColors(c+1)}var h=u[0].map(function(t){return e[t]});t.groupColors=e;var r=[];o.each(u,function(t,e){r[e]=o.range(o.max(t))});var f=[];return o.each(n,function(t,e){var n={};n.i=e,n.c=h[e],n.l=l[e],o.each(r,function(t,r){n[r]=t[u[r][e]]}),f.push(n)}),t.nodes=a.nest(f,o.range(0,r.length)),t},render:function(){function t(t){if(t.depth==E-1){s.select(this).classed("arc--highlight--stick",!s.select(this).classed("arc--highlight--stick"));var e=o.flatten(u(t));M.classed("link--fade--out",function(t){return o.indexOf(e,t.target)>-1|o.indexOf(e,t.source)>-1?s.select(this).classed("link--fade--stick")?!0:!1:s.select(this).classed("link--fade--stick")?!1:!0}),M.classed("link--fade--stick",function(t){return o.indexOf(e,t.target)>-1|o.indexOf(e,t.source)>-1?!s.select(this).classed("link--fade--stick"):s.select(this).classed("link--fade--stick")});var n=0;M.classed("link--fade--out",function(t){return s.select(this).classed("link--fade--out")&&(n+=1),s.select(this).classed("link--fade--out")}),n==d.length&&M.classed("link--fade--out",!1)}}function e(t){M.classed("link--highlight",function(e){return e.target===t|e.source===t?!s.select(this).classed("link--highlight"):s.select(this).classed("link--highlight")}),s.select(this).classed("node--highlight--stick",!s.select(this).classed("node--highlight--stick"))}function n(t){var e=a(t)-1;return e*Math.PI/180}function r(t){var e=i(t)+1;return e*Math.PI/180}function i(t){var e=0;return t.children?(t.children.forEach(function(t){var n=i(t);n>e&&(e=n)}),e):t.x}function a(t){var e=Number.POSITIVE_INFINITY;return t.children?(t.children.forEach(function(t){var n=a(t);e>n&&(e=n)}),e):t.x}function u(t){var e=[];return t.children?(t.children.forEach(function(t){var n=u(t);n&&e.push(n)}),e):t}function l(){37==s.event.keyCode|39==s.event.keyCode&&s.event.preventDefault(),38==s.event.keyCode|40==s.event.keyCode&&(s.event.preventDefault(),40==s.event.keyCode&&(D-=.05,0>D&&(D=0)),38==s.event.keyCode&&(D+=.05,D>1&&(D=1)),console.log(D),x.tension(D),M.attr("d",x))}var c=(this.options,this.height,this.width),h=this.selector,f=this,p=this.data.nodes,d=this.data.links,m=this.data.groupColors,g=.8*c,y=g/2,v=y-120,b=s.layout.cluster().size([360,v]).sort(null),_=(s.layout.partition().size([2*Math.PI,v]).sort(null).value(function(t){return 1}),s.layout.bundle()),x=s.svg.line.radial().interpolate("bundle").tension(.7).radius(function(t){return t.y}).angle(function(t){return t.x/180*Math.PI}),w=s.select(h).append("svg").attr("width",g).attr("height",g).attr("class","circle-plot").append("g").attr("transform","translate("+y+","+y+")"),M=w.append("g").selectAll(".link"),C=w.append("g").selectAll(".node"),P=b.nodes(p),E=s.max(P,function(t){return t.depth}),T=o.sortBy(P.filter(function(t){return!t.children}),function(t){return t.i});d=d.map(function(t){return{source:T[t[0]],target:T[t[1]]}}),M=M.data(_(d)).enter().append("path").each(function(t){t.source=t[0],t.target=t[t.length-1]}).attr("class","link").attr("d",x).style("stroke",function(t){return t.source.c?t.source.c:f.defaultColor}).style("opacity",.7),this.data.labels&&(C=C.data(P.filter(function(t){return!t.children})).enter().append("text").attr("class","node").attr("dy",".31em").attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+(t.y+10*E+10)+",0)"+(t.x<180?"":"rotate(180)")}).style("text-anchor",function(t){return t.x<180?"start":"end"}).text(function(t){return t.l}).style("fill",function(t){return t.c?t.c:f.defaultColor}).on("click",e)),M.classed("link--fade--out",!1),M.classed("link--fade--stick",!1),P.filter(function(t){return 1==t.depth}).map(function(t){return t.c=m[t.index],t});var S;for(S=1;E>S;S++)P.filter(function(t){return t.depth==S}).map(function(t){var e=t.children.length;if(e>1){var n=t.c,r=[s.rgb(n).darker(.3),s.rgb(n).brighter(.3)];t.children.map(function(t){return t.c=t.index%2==0?r[0]:r[1],t})}else t.children.map(function(e){return e.c=t.c,e});return t});var L=P.filter(function(t){return t.depth<E&&t.depth>0}),A=s.svg.arc().startAngle(function(t){return n(t)}).endAngle(function(t){return r(t)}).innerRadius(function(t){return 10*t.depth+v}).outerRadius(function(t){return 10*t.depth+v+7});w.append("g").selectAll(".path").data(L).enter().append("path").attr("d",A).attr("class","arc").style("fill",function(t){return t.c?t.c:f.defaultColor}).on("click",t);s.select(h).attr("tabindex",-1),s.select(h).on("keydown",l);var D=.7}});e.exports=c}).call(this,t("buffer").Buffer)},{buffer:1,d3:32,"d3-multiaxis-zoom":30,"lightning-client-utils":33,"lightning-visualization":47,lodash:394,"underscore.nest":52}],54:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":78,dup:6}],55:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],56:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:57,colorbrewer:63,"d3-color":64,"d3-scale":65,dup:10,lodash:66,superagent:67}],57:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":59,"color-string":60,dup:11}],58:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],59:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":58,dup:13}],60:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":61,dup:14}],61:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],62:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],63:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":62,dup:8}],64:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],65:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],66:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],67:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:68,reduce:69}],68:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],69:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],70:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":77,dup:6}],71:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{"./src":72,dup:30}],72:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],73:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:74,"insert-css":75,lodash:394,qwery:76}],74:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],75:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],76:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],77:[function(t,e,n){(function(n){var r=t("lightning-visualization"),i=t("d3"),o=t("lodash"),a=t("d3-multiaxis-zoom"),s=t("lightning-client-utils"),u=n("LmdyYXBoLXBsb3QgewoJcG9zaXRpb246IHJlbGF0aXZlOwp9CgouZ3JhcGgtcGxvdC5zdmcgewoJcG9zaXRpb246IGFic29sdXRlOwoJcG9pbnRlci1ldmVudHM6IG5vbmU7Cgl6LWluZGV4OiAwOwoJLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsMCwwKTsKfQoKLmdyYXBoLXBsb3QuYnJ1c2gtY29udGFpbmVyIHsKCXotaW5kZXg6IDE7Cglwb2ludGVyLWV2ZW50czogbm9uZTsKfQoKLmdyYXBoLXBsb3QuY2FudmFzIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7CiAgICB6LWluZGV4OiAxOwp9CgouYnJ1c2ggewoJcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KCi5icnVzaCAuZXh0ZW50IHsKCWZpbGwtb3BhY2l0eTogLjA4NTsKCXNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlczsKfQ==","base64"),l=r.extend({getDefaultStyles:function(){return{color:"#68a1e5",stroke:"white",size:6}},getDefaultOptions:function(){return{brush:!0,tooltips:!0,zoom:!0}},init:function(){a(i),this.margin={top:0,right:0,bottom:0,left:0},this.render()},css:u,render:function(){function t(){if(!i.event.defaultPrevented){var t=i.mouse(this),e=s.nearestPoint(p,t,f.x,f.y);e?(C=[],C.push(e.i),f.emit("hover",e)):(C=[],M=[],f.removeTooltip()),r()}}function e(){r()}function n(t,e){return T[t+","+e]}function r(){x.clearRect(0,0,l,c),a()}function a(){o.forEach(d,function(t){var e,n=f.getSource(t),r=f.getTarget(t);M.length>0&&(e=o.indexOf(M,n)>-1&o.indexOf(M,r)>-1?.9:.05),C.length>0&&(e=o.indexOf(C,n)>-1|o.indexOf(C,r)>-1?.9:.05),0==M.length&0==C.length&&(e=g);var i=f.getLine(t);x.strokeStyle=s.buildRGBA(m,e),x.lineWidth=1*Math.sqrt(t.value),x.lineJoin="round",x.beginPath(),x.moveTo(i[0][0],i[0][1]);var a;for(a=1;a<i.length;a++)x.lineTo(i[a][0],i[a][1]);x.stroke()}),o.forEach(p,function(t){var e,r;e=M.length>0?o.indexOf(M,t.i)>=0?.9:.1:.9,C.length>0&&(e=n(p[C[0]].i,t.i)|n(t.i,p[C[0]].i)?.9:.1),r=o.indexOf(C,t.i)>=0?"black":t.k,x.beginPath(),x.arc(f.x(t.x),f.y(t.y),t.s,0,2*Math.PI,!1),x.fillStyle=s.buildRGBA(t.c,e),x.lineWidth=y,x.strokeStyle=s.buildRGBA(r,e),x.fill(),x.stroke()}),h.tooltips&&C.length&&f.showTooltip(f.data.nodes[C[0]])}var u=this.data,l=this.width,c=this.height,h=this.options,f=this,p=u.nodes,d=u.links,m=u.group||u.color||u.values?"#999":"#A38EF3",g=Math.max(1-5e-4*d.length,.5),y=p.length>500?1:1.1;this.makeScales(),this.setScales();var v=i.behavior.zoom().x(f.x).y(f.y).on("zoom",e),b=i.select(this.el).append("div").style("position","relative").style("overflow","hidden").style("width",l+"px").style("height",c+"px"),_=b.append("canvas").attr("class","graph-plot canvas").attr("width",l).attr("height",c).call(v).on("click",t).on("dblclick.zoom",null),x=_.node().getContext("2d");f.options.zoom||(_.on("wheel.zoom",null),_.on("mousewheel.zoom",null));var w,M=[],C=[];if(h.brush){var P=i.svg.brush().x(f.x).y(f.y).on("brushstart",function(){C=[],f.removeTooltip();var t=i.mouse(this),e=s.nearestPoint(p,t,f.x,f.y);e&&(-1==o.indexOf(M,e.i)?M.push(e.i):o.remove(M,function(t){return t==e.i}),r())}).on("brush",function(){var t=i.event.target.extent();if(Math.abs(t[0][0]-t[1][0])>0&Math.abs(t[0][1]-t[1][1])>0){M=[];f.x,f.y;o.forEach(p,function(e){var n=e.x>t[0][0]&e.x<t[1][0],r=e.y>t[0][1]&e.y<t[1][1];n&r&&M.push(e.i)}),r()}}).on("brushend",function(){i.event.target.clear(),i.select(this).call(i.event.target)});b.append("svg:svg").attr("class","graph-plot brush-container").attr("width",l).attr("height",c).append("g").attr("class","brush").call(P);i.selectAll(".brush .background").style("cursor","default"),i.selectAll(".brush").style("pointer-events","none"),i.select(this.el).on("keydown",function(){w=i.event.shiftKey,w&&(i.selectAll(".brush").style("pointer-events","all"),i.selectAll(".brush .background").style("cursor","crosshair"))}),i.select(this.el).on("keyup",function(){w&&(i.selectAll(".brush").style("pointer-events","none"),i.selectAll(".brush .background").style("cursor","default")),w=!1})}var E,T={};for(E=0;E<p.length;E++)T[E+","+E]=1;d.forEach(function(t){T[f.getSource(t)+","+f.getTarget(t)]=1}),i.select(this.el).attr("tabindex",-1),a()},formatData:function(t){var e,n,r=s.getColorFromData(t),i=t.size||[],o=(t.name||[],this.styles);return t.nodes=t.nodes.map(function(a,s){return a.x=a[0],a.y=a[1],a.i=s,e=r.length>1?r[s]:r[0],n=i.length>1?i[s]:i[0],a.c=e?e:o.color,a.k=e?e.darker(.75):o.stroke,a.s=n?n:o.size,a.l=(t.labels||[]).length>s?t.labels[s]:null,a}),t.links=t.links.map(function(t){return t.source=t[0],t.target=t[1],t.value=t[2],t}),t},makeScales:function(){var t=this,e=i.extent(t.data.nodes,function(t){return t.x}),n=i.extent(t.data.nodes,function(t){return t.y}),r=i.max(t.data.nodes,function(t){return t.s});if(r);else;var o=Math.abs(e[1]-e[0]),a=Math.abs(n[1]-n[0]);e[0]-=.025*o,e[1]+=.025*o,n[0]-=.025*a,n[1]+=.025*a,this.x=i.scale.linear().domain(e),this.y=i.scale.linear().domain(n)},setScales:function(){this.x.range([0,this.width]),this.y.range([this.height,0])},getSource:function(t){return t.source},getTarget:function(t){return t.target},getLine:function(t){var e=this,n=e.data.nodes[t.source],r=e.data.nodes[t.target];return[[e.x(n.x),e.y(n.y)],[e.x(r.x),e.y(r.y)]]},getLabelForDataPoint:function(t){return o.isNull(t.l)||o.isUndefined(t.l)?"id: "+t.i:t.l},buildTooltip:function(t){var e=this.getLabelForDataPoint(t);this.removeTooltip();var n=this.x(t.x),r=this.y(t.y);if(!(0>n||n>this.width-this.margin.left-this.margin.right||0>r||r>this.height-this.margin.top-this.margin.bottom)){this.tooltipEl=document.createElement("div"),this.tooltipEl.innerHTML=e;var i={left:this.x(t.x)+this.margin.left-50+"px",bottom:this.height-this.y(t.y)+t.s+5+"px",position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.65)",textAlign:"center",color:"white",paddingTop:"5px",paddingBottom:"5px",fontSize:"12px",borderRadius:"4px",width:"100px",zIndex:"999"};o.extend(this.tooltipEl.style,i)}},renderTooltip:function(){var t=this.qwery(this.selector+" div")[0];this.tooltipEl&&t&&t.appendChild(this.tooltipEl)},showTooltip:function(t){this.buildTooltip(t),this.renderTooltip()},removeTooltip:function(){this.tooltipEl&&(this.tooltipEl.remove(),this.tooltipEl=null)}});e.exports=l}).call(this,t("buffer").Buffer)},{buffer:1,d3:55,"d3-multiaxis-zoom":71,"lightning-client-utils":56,"lightning-visualization":73,lodash:394}],78:[function(t,e,n){"use strict";var r=t("d3"),i=t("lightning-graph"),o=(t("lodash"),t("lightning-client-utils")),a=i.extend({getDefaultStyles:function(){return{color:"#68a1e5",stroke:"white",size:8}},formatData:function(t){var e,n,i=o.getColorFromData(t),a=t.size||[],s=t.name||[],u=this.styles;t.nodes=t.nodes.map(function(r,o){return r=[],r.i=o,r.n=s[o],e=a.length>1?a[o]:a[0],n=i.length>1?i[o]:i[0],r.c=n?n:u.color,r.s=e?e:u.size,r.k=n?n.darker(.75):u.stroke,r.l=(t.labels||[]).length>o?t.labels[o]:null,r}),t.links=t.links.map(function(t){return t.source=t[0],t.target=t[1],t.value=t[2],t});var l=r.layout.force().size([this.height,this.height]).charge(-120).linkDistance(30).nodes(t.nodes).links(t.links);l.start();for(var c=t.nodes.length*t.nodes.length;c>0;--c)l.tick();return l.stop(),t},getSource:function(t){return t.source.i},getTarget:function(t){return t.target.i},setScales:function(){var t=this,e=r.extent(t.data.nodes,function(t){return t.x}),n=r.extent(t.data.nodes,function(t){return t.y}),i=r.max(t.data.nodes,function(t){return t.s});if(i);else;var o=Math.abs(e[1]-e[0]),a=Math.abs(n[1]-n[0]);e[0]-=.025*o,e[1]+=.025*o,n[0]-=.025*a,
n[1]+=.025*a;var s=o*(this.height/this.width)/2;this.x.domain([e[0]-s,e[1]+s]),this.y.domain(n),this.x.range([0,this.width]),this.y.range([this.height,0])},getLine:function(t){var e=this,n=e.data.nodes[t.source.i],r=e.data.nodes[t.target.i];return[[e.x(n.x),e.y(n.y)],[e.x(r.x),e.y(r.y)]]}});e.exports=a},{d3:55,"lightning-client-utils":56,"lightning-graph":70,lodash:394}],79:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":116,dup:6}],80:[function(t,e,n){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e="length"in t&&t.length,n=$.type(t);return"function"===n||$.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t,e,n){if($.isFunction(e))return $.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return $.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(st.test(e))return $.filter(e,t,n);e=$.filter(e,t)}return $.grep(t,function(t){return X.call(e,t)>=0!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=dt[t]={};return $.each(t.match(pt)||[],function(t,n){e[n]=!0}),e}function a(){J.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),$.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=$.expando+s.uid++}function u(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(_t,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:bt.test(n)?$.parseJSON(n):n}catch(i){}vt.set(t,e,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function h(){try{return J.activeElement}catch(t){}}function f(t,e){return $.nodeName(t,"table")&&$.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function d(t){var e=Ot.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var n=0,r=t.length;r>n;n++)yt.set(t[n],"globalEval",!e||yt.get(e[n],"globalEval"))}function g(t,e){var n,r,i,o,a,s,u,l;if(1===e.nodeType){if(yt.hasData(t)&&(o=yt.access(t),a=yt.set(e,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)$.event.add(e,i,l[i][n])}vt.hasData(t)&&(s=vt.access(t),u=$.extend({},s),vt.set(e,u))}}function y(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&$.nodeName(t,e)?$.merge([t],n):n}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ct.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function b(e,n){var r,i=$(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(r=t.getDefaultComputedStyle(i[0]))?r.display:$.css(i[0],"display");return i.detach(),o}function _(t){var e=J,n=zt[t];return n||(n=b(t,e),"none"!==n&&n||(Ut=(Ut||$("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ut[0].contentDocument,e.write(),e.close(),n=b(t,e),Ut.detach()),zt[t]=n),n}function x(t,e,n){var r,i,o,a,s=t.style;return n=n||Wt(t),n&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||$.contains(t.ownerDocument,t)||(a=$.style(t,e)),Gt.test(a)&&Vt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function w(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function M(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Zt.length;i--;)if(e=Zt[i]+n,e in t)return e;return r}function C(t,e,n){var r=jt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function P(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=$.css(t,n+wt[o],!0,i)),r?("content"===n&&(a-=$.css(t,"padding"+wt[o],!0,i)),"margin"!==n&&(a-=$.css(t,"border"+wt[o]+"Width",!0,i))):(a+=$.css(t,"padding"+wt[o],!0,i),"padding"!==n&&(a+=$.css(t,"border"+wt[o]+"Width",!0,i)));return a}function E(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Wt(t),a="border-box"===$.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=x(t,e,o),(0>i||null==i)&&(i=t.style[e]),Gt.test(i))return i;r=a&&(K.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+P(t,e,n||(a?"border":"content"),r,o)+"px"}function T(t,e){for(var n,r,i,o=[],a=0,s=t.length;s>a;a++)r=t[a],r.style&&(o[a]=yt.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Mt(r)&&(o[a]=yt.access(r,"olddisplay",_(r.nodeName)))):(i=Mt(r),"none"===n&&i||yt.set(r,"olddisplay",i?n:$.css(r,"display"))));for(a=0;s>a;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function S(t,e,n,r,i){return new S.prototype.init(t,e,n,r,i)}function L(){return setTimeout(function(){Kt=void 0}),Kt=$.now()}function A(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=wt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function D(t,e,n){for(var r,i=(ne[e]||[]).concat(ne["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,e,t))return r}function I(t,e,n){var r,i,o,a,s,u,l,c,h=this,f={},p=t.style,d=t.nodeType&&Mt(t),m=yt.get(t,"fxshow");n.queue||(s=$._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,$.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=$.css(t,"display"),c="none"===l?yt.get(t,"olddisplay")||_(t.nodeName):l,"inline"===c&&"none"===$.css(t,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],Qt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;d=!0}f[r]=m&&m[r]||$.style(t,r)}else l=void 0;if($.isEmptyObject(f))"inline"===("none"===l?_(t.nodeName):l)&&(p.display=l);else{m?"hidden"in m&&(d=m.hidden):m=yt.access(t,"fxshow",{}),o&&(m.hidden=!d),d?$(t).show():h.done(function(){$(t).hide()}),h.done(function(){var e;yt.remove(t,"fxshow");for(e in f)$.style(t,e,f[e])});for(r in f)a=D(d?m[r]:0,r,h),r in m||(m[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function k(t,e){var n,r,i,o,a;for(n in t)if(r=$.camelCase(n),i=e[r],o=t[n],$.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),a=$.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function N(t,e,n){var r,i,o=0,a=ee.length,s=$.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Kt||L(),n=Math.max(0,l.startTime+l.duration-e),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(t,[l,o,n]),1>o&&u?n:(s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:$.extend({},e),opts:$.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Kt||L(),duration:n.duration,tweens:[],createTween:function(e,n){var r=$.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return e?s.resolveWith(t,[l,e]):s.rejectWith(t,[l,e]),this}}),c=l.props;for(k(c,l.opts.specialEasing);a>o;o++)if(r=ee[o].call(l,t,c,l.opts))return r;return $.map(c,D,l),$.isFunction(l.opts.start)&&l.opts.start.call(t,l),$.fx.timer($.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function B(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(pt)||[];if($.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function O(t,e,n,r){function i(s){var u;return o[s]=!0,$.each(t[s]||[],function(t,s){var l=s(e,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(e.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=t===be;return i(e.dataTypes[0])||!o["*"]&&i("*")}function R(t,e){var n,r,i=$.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&$.extend(!0,t,r),t}function F(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function U(t,e,n,r){var i,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function z(t,e,n,r){var i;if($.isArray(e))$.each(e,function(e,i){n||Ce.test(t)?r(t,i):z(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==$.type(e))r(t,e);else for(i in e)z(t+"["+i+"]",e[i],n,r)}function V(t){return $.isWindow(t)?t:9===t.nodeType&&t.defaultView}var G=[],W=G.slice,H=G.concat,j=G.push,X=G.indexOf,Y={},q=Y.toString,Z=Y.hasOwnProperty,K={},J=t.document,Q="2.1.4",$=function(t,e){return new $.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,nt=/-([\da-z])/gi,rt=function(t,e){return e.toUpperCase()};$.fn=$.prototype={jquery:Q,constructor:$,selector:"",length:0,toArray:function(){return W.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:W.call(this)},pushStack:function(t){var e=$.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return $.each(this,t,e)},map:function(t){return this.pushStack($.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(W.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:G.sort,splice:G.splice},$.extend=$.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||$.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],r=t[e],a!==r&&(l&&r&&($.isPlainObject(r)||(i=$.isArray(r)))?(i?(i=!1,o=n&&$.isArray(n)?n:[]):o=n&&$.isPlainObject(n)?n:{},a[e]=$.extend(l,o,r)):void 0!==r&&(a[e]=r));return a},$.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===$.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!$.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==$.type(t)||t.nodeType||$.isWindow(t)?!1:t.constructor&&!Z.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Y[q.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=$.trim(t),t&&(1===t.indexOf("use strict")?(e=J.createElement("script"),e.text=t,J.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(et,"ms-").replace(nt,rt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,a=t.length,s=n(t);if(r){if(s)for(;a>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(s)for(;a>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?$.merge(r,"string"==typeof t?[t]:t):j.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:X.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,a=t.length,s=!n;a>o;o++)r=!e(t[o],o),r!==s&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,a=t.length,s=n(t),u=[];if(s)for(;a>o;o++)i=e(t[o],o,r),null!=i&&u.push(i);else for(o in t)i=e(t[o],o,r),null!=i&&u.push(i);return H.apply([],u)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),$.isFunction(t)?(r=W.call(arguments,2),i=function(){return t.apply(e||this,r.concat(W.call(arguments)))},i.guid=t.guid=t.guid||$.guid++,i):void 0},now:Date.now,support:K}),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()});var it=function(t){function e(t,e,n,r){var i,o,a,s,u,l,h,p,d,m;if((e?e.ownerDocument||e:z)!==I&&D(e),e=e||I,n=n||[],s=e.nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return n;if(!r&&N){if(11!==s&&(i=vt.exec(t)))if(a=i[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&F(e,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((a=i[3])&&x.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(a)),n}if(x.qsa&&(!B||!B.test(t))){if(p=h=U,d=e,m=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(l=P(t),(h=e.getAttribute("id"))?p=h.replace(_t,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",u=l.length;u--;)l[u]=p+f(l[u]);d=bt.test(t)&&c(e.parentNode)||e,m=l.join(",")}if(m)try{return Q.apply(n,d.querySelectorAll(m)),n}catch(g){}finally{h||e.removeAttribute("id")}}}return T(t.replace(ut,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>w.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[U]=!0,t}function i(t){var e=I.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=t.length;r--;)w.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function f(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function p(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=G++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,u,l=[V,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[U]||(e[U]={}),(s=u[r])&&s[0]===V&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=t(e,n,a))return!0}}}function d(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function m(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function g(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,l=null!=e;u>s;s++)(o=t[s])&&(!n||n(o,r,i))&&(a.push(o),l&&e.push(s));return a}function y(t,e,n,i,o,a){return i&&!i[U]&&(i=y(i)),o&&!o[U]&&(o=y(o,a)),r(function(r,a,s,u){var l,c,h,f=[],p=[],d=a.length,y=r||m(e||"*",s.nodeType?[s]:s,[]),v=!t||!r&&e?y:g(y,f,t,s,u),b=n?o||(r?t:d||i)?[]:a:v;if(n&&n(v,b,s,u),i)for(l=g(b,p),i(l,[],s,u),c=l.length;c--;)(h=l[c])&&(b[p[c]]=!(v[p[c]]=h));if(r){if(o||t){if(o){for(l=[],c=b.length;c--;)(h=b[c])&&l.push(v[c]=h);o(null,b=[],l,u)}for(c=b.length;c--;)(h=b[c])&&(l=o?tt(r,h):f[c])>-1&&(r[l]=!(a[l]=h))}}else b=g(b===a?b.splice(d,b.length):b),o?o(null,a,b,u):Q.apply(a,b)})}function v(t){for(var e,n,r,i=t.length,o=w.relative[t[0].type],a=o||w.relative[" "],s=o?1:0,u=p(function(t){return t===e},a,!0),l=p(function(t){return tt(e,t)>-1},a,!0),c=[function(t,n,r){var i=!o&&(r||n!==S)||((e=n).nodeType?u(t,n,r):l(t,n,r));return e=null,i}];i>s;s++)if(n=w.relative[t[s].type])c=[p(d(c),n)];else{if(n=w.filter[t[s].type].apply(null,t[s].matches),n[U]){for(r=++s;i>r&&!w.relative[t[r].type];r++);return y(s>1&&d(c),s>1&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ut,"$1"),n,r>s&&v(t.slice(s,r)),i>r&&v(t=t.slice(r)),i>r&&f(t))}c.push(n)}return d(c)}function b(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,u,l){var c,h,f,p=0,d="0",m=r&&[],y=[],v=S,b=r||o&&w.find.TAG("*",l),_=V+=null==v?1:Math.random()||.1,x=b.length;for(l&&(S=a!==I&&a);d!==x&&null!=(c=b[d]);d++){if(o&&c){for(h=0;f=t[h++];)if(f(c,a,s)){u.push(c);break}l&&(V=_)}i&&((c=!f&&c)&&p--,r&&m.push(c))}if(p+=d,i&&d!==p){for(h=0;f=n[h++];)f(m,y,a,s);if(r){if(p>0)for(;d--;)m[d]||y[d]||(y[d]=K.call(u));y=g(y)}Q.apply(u,y),l&&!r&&y.length>0&&p+n.length>1&&e.uniqueSort(u)}return l&&(V=_,S=v),m};return i?r(a):a}var _,x,w,M,C,P,E,T,S,L,A,D,I,k,N,B,O,R,F,U="sizzle"+1*new Date,z=t.document,V=0,G=0,W=n(),H=n(),j=n(),X=function(t,e){return t===e&&(A=!0),0},Y=1<<31,q={}.hasOwnProperty,Z=[],K=Z.pop,J=Z.push,Q=Z.push,$=Z.slice,tt=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=rt.replace("w","w#"),ot="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),ut=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ft=new RegExp(at),pt=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,yt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,_t=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Mt=function(){D()};try{Q.apply(Z=$.call(z.childNodes),z.childNodes),Z[z.childNodes.length].nodeType}catch(Ct){Q={apply:Z.length?function(t,e){J.apply(t,$.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}x=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:z;return r!==I&&9===r.nodeType&&r.documentElement?(I=r,k=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Mt,!1):n.attachEvent&&n.attachEvent("onunload",Mt)),N=!C(r),x.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=i(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=yt.test(r.getElementsByClassName),x.getById=i(function(t){return k.appendChild(t).id=U,!r.getElementsByName||!r.getElementsByName(U).length}),x.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},w.filter.ID=function(t){var e=t.replace(xt,wt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(xt,wt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),w.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},w.find.CLASS=x.getElementsByClassName&&function(t,e){return N?e.getElementsByClassName(t):void 0},O=[],B=[],(x.qsa=yt.test(r.querySelectorAll))&&(i(function(t){k.appendChild(t).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&B.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||B.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+U+"-]").length||B.push("~="),t.querySelectorAll(":checked").length||B.push(":checked"),t.querySelectorAll("a#"+U+"+*").length||B.push(".#.+[+~]")}),i(function(t){var e=r.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&B.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),B.push(",.*:")})),(x.matchesSelector=yt.test(R=k.matches||k.webkitMatchesSelector||k.mozMatchesSelector||k.oMatchesSelector||k.msMatchesSelector))&&i(function(t){x.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),O.push("!=",at)}),B=B.length&&new RegExp(B.join("|")),O=O.length&&new RegExp(O.join("|")),e=yt.test(k.compareDocumentPosition),F=e||yt.test(k.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},X=e?function(t,e){if(t===e)return A=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===r||t.ownerDocument===z&&F(z,t)?-1:e===r||e.ownerDocument===z&&F(z,e)?1:L?tt(L,t)-tt(L,e):0:4&n?-1:1)}:function(t,e){if(t===e)return A=!0,0;var n,i=0,o=t.parentNode,s=e.parentNode,u=[t],l=[e];if(!o||!s)return t===r?-1:e===r?1:o?-1:s?1:L?tt(L,t)-tt(L,e):0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)u.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?a(u[i],l[i]):u[i]===z?-1:l[i]===z?1:0},r):I},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==I&&D(t),n=n.replace(ht,"='$1']"),x.matchesSelector&&N&&(!O||!O.test(n))&&(!B||!B.test(n)))try{var r=R.call(t,n);if(r||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,I,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==I&&D(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==I&&D(t);var n=w.attrHandle[e.toLowerCase()],r=n&&q.call(w.attrHandle,e.toLowerCase())?n(t,e,!N):void 0;return void 0!==r?r:x.attributes||!N?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(A=!x.detectDuplicates,L=!x.sortStable&&t.slice(0),t.sort(X),A){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return L=null,t},M=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=M(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=M(e);return n},w=e.selectors={cacheLength:50,createPseudo:r,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(xt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ft.test(n)&&(e=P(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(st," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,f,p,d,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,y=s&&e.nodeName.toLowerCase(),v=!u&&!s;if(g){if(o){for(;m;){for(h=e;h=h[m];)if(s?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;d=m="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?g.firstChild:g.lastChild],a&&v){for(c=g[U]||(g[U]={}),l=c[t]||[],p=l[0]===V&&l[1],f=l[0]===V&&l[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(f=p=0)||d.pop();)if(1===h.nodeType&&++f&&h===e){c[t]=[V,p,f];break}}else if(v&&(l=(e[U]||(e[U]={}))[t])&&l[0]===V)f=l[1];else for(;(h=++p&&h&&h[m]||(f=p=0)||d.pop())&&((s?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++f||(v&&((h[U]||(h[U]={}))[t]=[V,f]),h!==e)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(t,n){var i,o=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[U]?o(n):o.length>1?(i=[t,t,"",n],w.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),a=i.length;a--;)r=tt(t,i[a]),t[r]=!(e[r]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=E(t.replace(ut,"$1"));return i[U]?r(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(xt,wt),function(e){return(e.textContent||e.innerText||M(e)).indexOf(t)>-1}}),lang:r(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,wt).toLowerCase(),function(e){var n;do if(n=N?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===k},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:l(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},w.pseudos.nth=w.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})w.pseudos[_]=u(_);return h.prototype=w.filters=w.pseudos,w.setFilters=new h,P=e.tokenize=function(t,n){var r,i,o,a,s,u,l,c=H[t+" "];if(c)return n?0:c.slice(0);for(s=t,u=[],l=w.preFilter;s;){(!r||(i=lt.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=ct.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ut," ")}),s=s.slice(r.length));for(a in w.filter)!(i=dt[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):H(t,u).slice(0)},E=e.compile=function(t,e){var n,r=[],i=[],o=j[t+" "];if(!o){for(e||(e=P(t)),n=e.length;n--;)o=v(e[n]),o[U]?r.push(o):i.push(o);o=j(t,b(i,r)),o.selector=t}return o},T=e.select=function(t,e,n,r){var i,o,a,s,u,l="function"==typeof t&&t,h=!r&&P(t=l.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&x.getById&&9===e.nodeType&&N&&w.relative[o[1].type]){if(e=(w.find.ID(a.matches[0].replace(xt,wt),e)||[])[0],!e)return n;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=dt.needsContext.test(t)?0:o.length;i--&&(a=o[i],!w.relative[s=a.type]);)if((u=w.find[s])&&(r=u(a.matches[0].replace(xt,wt),bt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&f(o),!t)return Q.apply(n,r),n;break}}return(l||E(t,h))(r,e,!N,n,bt.test(t)&&c(e.parentNode)||e),n},x.sortStable=U.split("").sort(X).join("")===U,x.detectDuplicates=!!A,D(),x.sortDetached=i(function(t){return 1&t.compareDocumentPosition(I.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);$.find=it,$.expr=it.selectors,
$.expr[":"]=$.expr.pseudos,$.unique=it.uniqueSort,$.text=it.getText,$.isXMLDoc=it.isXML,$.contains=it.contains;var ot=$.expr.match.needsContext,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^.[^:#\[\.,]*$/;$.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?$.find.matchesSelector(r,t)?[r]:[]:$.find.matches(t,$.grep(e,function(t){return 1===t.nodeType}))},$.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack($(t).filter(function(){for(e=0;n>e;e++)if($.contains(i[e],this))return!0}));for(e=0;n>e;e++)$.find(t,i[e],r);return r=this.pushStack(n>1?$.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&ot.test(t)?$(t):t||[],!1).length}});var ut,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=$.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:lt.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ut).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof $?e[0]:e,$.merge(this,$.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),at.test(n[1])&&$.isPlainObject(e))for(n in e)$.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):$.isFunction(t)?"undefined"!=typeof ut.ready?ut.ready(t):t($):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),$.makeArray(t,this))};ct.prototype=$.fn,ut=$(J);var ht=/^(?:parents|prev(?:Until|All))/,ft={children:!0,contents:!0,next:!0,prev:!0};$.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&$(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),$.fn.extend({has:function(t){var e=$(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if($.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=ot.test(t)||"string"!=typeof t?$(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&$.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?$.unique(o):o)},index:function(t){return t?"string"==typeof t?X.call($(t),this[0]):X.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack($.unique($.merge(this.get(),$(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),$.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return $.dir(t,"parentNode")},parentsUntil:function(t,e,n){return $.dir(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return $.dir(t,"nextSibling")},prevAll:function(t){return $.dir(t,"previousSibling")},nextUntil:function(t,e,n){return $.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return $.dir(t,"previousSibling",n)},siblings:function(t){return $.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return $.sibling(t.firstChild)},contents:function(t){return t.contentDocument||$.merge([],t.childNodes)}},function(t,e){$.fn[t]=function(n,r){var i=$.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=$.filter(r,i)),this.length>1&&(ft[t]||$.unique(i),ht.test(t)&&i.reverse()),this.pushStack(i)}});var pt=/\S+/g,dt={};$.Callbacks=function(t){t="string"==typeof t?dt[t]||o(t):$.extend({},t);var e,n,r,i,a,s,u=[],l=!t.once&&[],c=function(o){for(e=t.memory&&o,n=!0,s=i||0,i=0,a=u.length,r=!0;u&&a>s;s++)if(u[s].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):e?u=[]:h.disable())},h={add:function(){if(u){var n=u.length;!function o(e){$.each(e,function(e,n){var r=$.type(n);"function"===r?t.unique&&h.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?a=u.length:e&&(i=n,c(e))}return this},remove:function(){return u&&$.each(arguments,function(t,e){for(var n;(n=$.inArray(e,u,n))>-1;)u.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(t){return t?$.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=l=e=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,e||h.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!u||n&&!l||(e=e||[],e=[t,e.slice?e.slice():e],r?l.push(e):c(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},$.extend({Deferred:function(t){var e=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return $.Deferred(function(n){$.each(e,function(e,o){var a=$.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&$.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?$.extend(t,r):r}},i={};return r.pipe=r.then,$.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=W.call(arguments),a=o.length,s=1!==a||t&&$.isFunction(t.promise)?a:0,u=1===s?t:$.Deferred(),l=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?W.call(arguments):i,r===e?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&$.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,e)):--s;return s||u.resolveWith(r,o),u.promise()}});var mt;$.fn.ready=function(t){return $.ready.promise().done(t),this},$.extend({isReady:!1,readyWait:1,holdReady:function(t){t?$.readyWait++:$.ready(!0)},ready:function(t){(t===!0?--$.readyWait:$.isReady)||($.isReady=!0,t!==!0&&--$.readyWait>0||(mt.resolveWith(J,[$]),$.fn.triggerHandler&&($(J).triggerHandler("ready"),$(J).off("ready"))))}}),$.ready.promise=function(e){return mt||(mt=$.Deferred(),"complete"===J.readyState?setTimeout($.ready):(J.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),mt.promise(e)},$.ready.promise();var gt=$.access=function(t,e,n,r,i,o,a){var s=0,u=t.length,l=null==n;if("object"===$.type(n)){i=!0;for(s in n)$.access(t,e,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,$.isFunction(r)||(a=!0),l&&(a?(e.call(t,r),e=null):(l=e,e=function(t,e,n){return l.call($(t),n)})),e))for(;u>s;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:l?e.call(t):u?e(t[0],n):o};$.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=$.acceptData,s.prototype={key:function(t){if(!s.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=s.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,$.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if($.isEmptyObject(o))$.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,$.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{$.isArray(e)?r=e.concat(e.map($.camelCase)):(i=$.camelCase(e),e in a?r=[e,i]:(r=i,r=r in a?[r]:r.match(pt)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(t){return!$.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var yt=new s,vt=new s,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_t=/([A-Z])/g;$.extend({hasData:function(t){return vt.hasData(t)||yt.hasData(t)},data:function(t,e,n){return vt.access(t,e,n)},removeData:function(t,e){vt.remove(t,e)},_data:function(t,e,n){return yt.access(t,e,n)},_removeData:function(t,e){yt.remove(t,e)}}),$.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=vt.get(o),1===o.nodeType&&!yt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=$.camelCase(r.slice(5)),u(o,r,i[r])));yt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){vt.set(this,t)}):gt(this,function(e){var n,r=$.camelCase(t);if(o&&void 0===e){if(n=vt.get(o,t),void 0!==n)return n;if(n=vt.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=vt.get(this,r);vt.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&vt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){vt.remove(this,t)})}}),$.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=yt.get(t,e),n&&(!r||$.isArray(n)?r=yt.access(t,e,$.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=$.queue(t,e),r=n.length,i=n.shift(),o=$._queueHooks(t,e),a=function(){$.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return yt.get(t,n)||yt.access(t,n,{empty:$.Callbacks("once memory").add(function(){yt.remove(t,[e+"queue",n])})})}}),$.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?$.queue(this[0],t):void 0===e?this:this.each(function(){var n=$.queue(this,t,e);$._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&$.dequeue(this,t)})},dequeue:function(t){return this.each(function(){$.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=$.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=yt.get(o[a],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=["Top","Right","Bottom","Left"],Mt=function(t,e){return t=e||t,"none"===$.css(t,"display")||!$.contains(t.ownerDocument,t)},Ct=/^(?:checkbox|radio)$/i;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),K.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Pt="undefined";K.focusinBubbles="onfocusin"in t;var Et=/^key/,Tt=/^(?:mouse|pointer|contextmenu)|click/,St=/^(?:focusinfocus|focusoutblur)$/,Lt=/^([^.]*)(?:\.(.+)|)$/;$.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,h,f,p,d,m,g=yt.get(t);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=$.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(e){return typeof $!==Pt&&$.event.triggered!==e.type?$.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pt)||[""],l=e.length;l--;)s=Lt.exec(e[l])||[],p=m=s[1],d=(s[2]||"").split(".").sort(),p&&(h=$.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=$.event.special[p]||{},c=$.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&$.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=u[p])||(f=u[p]=[],f.delegateCount=0,h.setup&&h.setup.call(t,r,d,a)!==!1||t.addEventListener&&t.addEventListener(p,a,!1)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),$.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,l,c,h,f,p,d,m,g=yt.hasData(t)&&yt.get(t);if(g&&(u=g.events)){for(e=(e||"").match(pt)||[""],l=e.length;l--;)if(s=Lt.exec(e[l])||[],p=m=s[1],d=(s[2]||"").split(".").sort(),p){for(h=$.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,f=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));a&&!f.length&&(h.teardown&&h.teardown.call(t,d,g.handle)!==!1||$.removeEvent(t,p,g.handle),delete u[p])}else for(p in u)$.event.remove(t,p+e[l],n,r,!0);$.isEmptyObject(u)&&(delete g.handle,yt.remove(t,"events"))}},trigger:function(e,n,r,i){var o,a,s,u,l,c,h,f=[r||J],p=Z.call(e,"type")?e.type:e,d=Z.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!St.test(p+$.event.triggered)&&(p.indexOf(".")>=0&&(d=p.split("."),p=d.shift(),d.sort()),l=p.indexOf(":")<0&&"on"+p,e=e[$.expando]?e:new $.Event(p,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=d.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:$.makeArray(n,[e]),h=$.event.special[p]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!$.isWindow(r)){for(u=h.delegateType||p,St.test(u+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(r.ownerDocument||J)&&f.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)e.type=o>1?u:h.bindType||p,c=(yt.get(a,"events")||{})[e.type]&&yt.get(a,"handle"),c&&c.apply(a,n),c=l&&a[l],c&&c.apply&&$.acceptData(a)&&(e.result=c.apply(a,n),e.result===!1&&e.preventDefault());return e.type=p,i||e.isDefaultPrevented()||h._default&&h._default.apply(f.pop(),n)!==!1||!$.acceptData(r)||l&&$.isFunction(r[p])&&!$.isWindow(r)&&(s=r[l],s&&(r[l]=null),$.event.triggered=p,r[p](),$.event.triggered=void 0,s&&(r[l]=s)),e.result}},dispatch:function(t){t=$.event.fix(t);var e,n,r,i,o,a=[],s=W.call(arguments),u=(yt.get(this,"events")||{})[t.type]||[],l=$.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(a=$.event.handlers.call(this,t,u),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=(($.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,u=t.target;if(s&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(r=[],n=0;s>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?$(i,this).index(u)>=0:$.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||J,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[$.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Tt.test(i)?this.mouseHooks:Et.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new $.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=J),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&$.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return $.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=$.extend(new $.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?$.event.trigger(i,null,e):$.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},$.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},$.Event=function(t,e){return this instanceof $.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?l:c):this.type=t,e&&$.extend(this,e),this.timeStamp=t&&t.timeStamp||$.now(),void(this[$.expando]=!0)):new $.Event(t,e)},$.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=l,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},$.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){$.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!$.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),K.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){$.event.simulate(e,t.target,$.event.fix(t),!0)};$.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=yt.access(r,e);i||r.addEventListener(t,n,!0),yt.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=yt.access(r,e)-1;i?yt.access(r,e,i):(r.removeEventListener(t,n,!0),yt.remove(r,e))}}}),$.fn.extend({on:function(t,e,n,r,i){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(t){return $().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=$.guid++)),this.each(function(){$.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,$(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=c),this.each(function(){$.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){$.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?$.event.trigger(t,e,n,!0):void 0}});var At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Dt=/<([\w:]+)/,It=/<|&#?\w+;/,kt=/<(?:script|style|link)/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^$|\/(?:java|ecma)script/i,Ot=/^true\/(.*)/,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ft.optgroup=Ft.option,Ft.tbody=Ft.tfoot=Ft.colgroup=Ft.caption=Ft.thead,Ft.th=Ft.td,$.extend({clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=$.contains(t.ownerDocument,t);if(!(K.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||$.isXMLDoc(t)))for(a=y(s),o=y(t),r=0,i=o.length;i>r;r++)v(o[r],a[r]);if(e)if(n)for(o=o||y(t),a=a||y(s),r=0,i=o.length;i>r;r++)g(o[r],a[r]);else g(t,s);return a=y(s,"script"),a.length>0&&m(a,!u&&y(t,"script")),s},buildFragment:function(t,e,n,r){for(var i,o,a,s,u,l,c=e.createDocumentFragment(),h=[],f=0,p=t.length;p>f;f++)if(i=t[f],i||0===i)if("object"===$.type(i))$.merge(h,i.nodeType?[i]:i);else if(It.test(i)){for(o=o||c.appendChild(e.createElement("div")),a=(Dt.exec(i)||["",""])[1].toLowerCase(),s=Ft[a]||Ft._default,o.innerHTML=s[1]+i.replace(At,"<$1></$2>")+s[2],l=s[0];l--;)o=o.lastChild;$.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(e.createTextNode(i));for(c.textContent="",f=0;i=h[f++];)if((!r||-1===$.inArray(i,r))&&(u=$.contains(i.ownerDocument,i),o=y(c.appendChild(i),"script"),u&&m(o),n))for(l=0;i=o[l++];)Bt.test(i.type||"")&&n.push(i);return c},cleanData:function(t){for(var e,n,r,i,o=$.event.special,a=0;void 0!==(n=t[a]);a++){if($.acceptData(n)&&(i=n[yt.expando],i&&(e=yt.cache[i]))){if(e.events)for(r in e.events)o[r]?$.event.remove(n,r):$.removeEvent(n,r,e.handle);yt.cache[i]&&delete yt.cache[i]}delete vt.cache[n[vt.expando]]}}}),$.fn.extend({text:function(t){return gt(this,function(t){return void 0===t?$.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?$.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||$.cleanData(y(n)),n.parentNode&&(e&&$.contains(n.ownerDocument,n)&&m(y(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&($.cleanData(y(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return $.clone(this,t,e)})},html:function(t){return gt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!kt.test(t)&&!Ft[(Dt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(At,"<$1></$2>");try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&($.cleanData(y(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,$.cleanData(y(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=H.apply([],t);var n,r,i,o,a,s,u=0,l=this.length,c=this,h=l-1,f=t[0],m=$.isFunction(f);if(m||l>1&&"string"==typeof f&&!K.checkClone&&Nt.test(f))return this.each(function(n){var r=c.eq(n);m&&(t[0]=f.call(this,n,r.html())),r.domManip(t,e)});if(l&&(n=$.buildFragment(t,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=$.map(y(n,"script"),p),o=i.length;l>u;u++)a=n,u!==h&&(a=$.clone(a,!0,!0),o&&$.merge(i,y(a,"script"))),e.call(this[u],a,u);if(o)for(s=i[i.length-1].ownerDocument,$.map(i,d),u=0;o>u;u++)a=i[u],Bt.test(a.type||"")&&!yt.access(a,"globalEval")&&$.contains(s,a)&&(a.src?$._evalUrl&&$._evalUrl(a.src):$.globalEval(a.textContent.replace(Rt,"")))}return this}}),$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){$.fn[t]=function(t){for(var n,r=[],i=$(t),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),$(i[a])[e](n),j.apply(r,n.get());return this.pushStack(r)}});var Ut,zt={},Vt=/^margin/,Gt=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),Wt=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var e=t.getComputedStyle(a,null);n="1%"!==e.top,r="4px"===e.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),a=J.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),t.getComputedStyle&&$.extend(K,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,n=a.appendChild(J.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),i.removeChild(o),a.removeChild(n),e}}))}(),$.swap=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return i};var Ht=/^(none|table(?!-c[ea]).+)/,jt=new RegExp("^("+xt+")(.*)$","i"),Xt=new RegExp("^([+-])=("+xt+")","i"),Yt={position:"absolute",visibility:"hidden",display:"block"},qt={letterSpacing:"0",fontWeight:"400"},Zt=["Webkit","O","Moz","ms"];$.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=x(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=$.camelCase(e),u=t.style;return e=$.cssProps[s]||($.cssProps[s]=M(u,s)),a=$.cssHooks[e]||$.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:u[e]:(o=typeof n,"string"===o&&(i=Xt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat($.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||$.cssNumber[s]||(n+="px"),K.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u[e]=n)),void 0)}},css:function(t,e,n,r){var i,o,a,s=$.camelCase(e);return e=$.cssProps[s]||($.cssProps[s]=M(t.style,s)),a=$.cssHooks[e]||$.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=x(t,e,r)),"normal"===i&&e in qt&&(i=qt[e]),""===n||n?(o=parseFloat(i),n===!0||$.isNumeric(o)?o||0:i):i}}),$.each(["height","width"],function(t,e){$.cssHooks[e]={get:function(t,n,r){return n?Ht.test($.css(t,"display"))&&0===t.offsetWidth?$.swap(t,Yt,function(){return E(t,e,r)}):E(t,e,r):void 0},set:function(t,n,r){var i=r&&Wt(t);return C(t,n,r?P(t,e,r,"border-box"===$.css(t,"boxSizing",!1,i),i):0)}}}),$.cssHooks.marginRight=w(K.reliableMarginRight,function(t,e){return e?$.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),$.each({margin:"",padding:"",border:"Width"},function(t,e){$.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+wt[r]+e]=o[r]||o[r-2]||o[0];return i}},Vt.test(t)||($.cssHooks[t+e].set=C)}),$.fn.extend({css:function(t,e){return gt(this,function(t,e,n){var r,i,o={},a=0;if($.isArray(e)){for(r=Wt(t),i=e.length;i>a;a++)o[e[a]]=$.css(t,e[a],!1,r);return o}return void 0!==n?$.style(t,e,n):$.css(t,e)},t,e,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Mt(this)?$(this).show():$(this).hide()})}}),$.Tween=S,S.prototype={constructor:S,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||($.cssNumber[n]?"":"px")},cur:function(){var t=S.propHooks[this.prop];return t&&t.get?t.get(this):S.propHooks._default.get(this)},run:function(t){var e,n=S.propHooks[this.prop];return this.options.duration?this.pos=e=$.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):S.propHooks._default.set(this),this}},S.prototype.init.prototype=S.prototype,S.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=$.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){$.fx.step[t.prop]?$.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[$.cssProps[t.prop]]||$.cssHooks[t.prop])?$.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},S.propHooks.scrollTop=S.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},$.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},$.fx=S.prototype.init,$.fx.step={};var Kt,Jt,Qt=/^(?:toggle|show|hide)$/,$t=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[I],ne={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=$t.exec(e),o=i&&i[3]||($.cssNumber[t]?"":"px"),a=($.cssNumber[t]||"px"!==o&&+r)&&$t.exec($.css(n.elem,t)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,$.style(n.elem,t,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};$.Animation=$.extend(N,{tweener:function(t,e){$.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],ne[n]=ne[n]||[],ne[n].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),$.speed=function(t,e,n){var r=t&&"object"==typeof t?$.extend({},t):{complete:n||!n&&e||$.isFunction(t)&&t,duration:t,easing:n&&e||e&&!$.isFunction(e)&&e};return r.duration=$.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in $.fx.speeds?$.fx.speeds[r.duration]:$.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){$.isFunction(r.old)&&r.old.call(this),r.queue&&$.dequeue(this,r.queue)},r},$.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Mt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=$.isEmptyObject(t),o=$.speed(e,n,r),a=function(){var e=N(this,$.extend({},t),o);(i||yt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=$.timers,a=yt.get(this);
if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&te.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&$.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=yt.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=$.timers,a=r?r.length:0;for(n.finish=!0,$.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),$.each(["toggle","show","hide"],function(t,e){var n=$.fn[e];$.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(A(e,!0),t,r,i)}}),$.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){$.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),$.timers=[],$.fx.tick=function(){var t,e=0,n=$.timers;for(Kt=$.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||$.fx.stop(),Kt=void 0},$.fx.timer=function(t){$.timers.push(t),t()?$.fx.start():$.timers.pop()},$.fx.interval=13,$.fx.start=function(){Jt||(Jt=setInterval($.fx.tick,$.fx.interval))},$.fx.stop=function(){clearInterval(Jt),Jt=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fn.delay=function(t,e){return t=$.fx?$.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),n=e.appendChild(J.createElement("option"));t.type="checkbox",K.checkOn=""!==t.value,K.optSelected=n.selected,e.disabled=!0,K.optDisabled=!n.disabled,t=J.createElement("input"),t.value="t",t.type="radio",K.radioValue="t"===t.value}();var re,ie,oe=$.expr.attrHandle;$.fn.extend({attr:function(t,e){return gt(this,$.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){$.removeAttr(this,t)})}}),$.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===Pt?$.prop(t,e,n):(1===o&&$.isXMLDoc(t)||(e=e.toLowerCase(),r=$.attrHooks[e]||($.expr.match.bool.test(e)?ie:re)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=$.find.attr(t,e),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void $.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(pt);if(o&&1===t.nodeType)for(;n=o[i++];)r=$.propFix[n]||n,$.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!K.radioValue&&"radio"===e&&$.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),ie={set:function(t,e,n){return e===!1?$.removeAttr(t,n):t.setAttribute(n,n),n}},$.each($.expr.match.bool.source.match(/\w+/g),function(t,e){var n=oe[e]||$.find.attr;oe[e]=function(t,e,r){var i,o;return r||(o=oe[e],oe[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,oe[e]=o),i}});var ae=/^(?:input|select|textarea|button)$/i;$.fn.extend({prop:function(t,e){return gt(this,$.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[$.propFix[t]||t]})}}),$.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var r,i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!$.isXMLDoc(t),o&&(e=$.propFix[e]||e,i=$.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ae.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),K.optSelected||($.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),$.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){$.propFix[this.toLowerCase()]=this});var se=/[\t\r\n\f]/g;$.fn.extend({addClass:function(t){var e,n,r,i,o,a,s="string"==typeof t&&t,u=0,l=this.length;if($.isFunction(t))return this.each(function(e){$(this).addClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(pt)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=$.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,r,i,o,a,s=0===arguments.length||"string"==typeof t&&t,u=0,l=this.length;if($.isFunction(t))return this.each(function(e){$(this).removeClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(pt)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=t?$.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):$.isFunction(t)?this.each(function(n){$(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,r=0,i=$(this),o=t.match(pt)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===Pt||"boolean"===n)&&(this.className&&yt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":yt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(se," ").indexOf(e)>=0)return!0;return!1}});var ue=/\r/g;$.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=$.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,$(this).val()):t,null==i?i="":"number"==typeof i?i+="":$.isArray(i)&&(i=$.map(i,function(t){return null==t?"":t+""})),e=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=$.valHooks[i.type]||$.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ue,""):null==n?"":n)}}}),$.extend({valHooks:{option:{get:function(t){var e=$.find.attr(t,"value");return null!=e?e:$.trim($.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],(n.selected||u===i)&&(K.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!$.nodeName(n.parentNode,"optgroup"))){if(e=$(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=$.makeArray(e),a=i.length;a--;)r=i[a],(r.selected=$.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]={set:function(t,e){return $.isArray(e)?t.checked=$.inArray($(t).val(),e)>=0:void 0}},K.checkOn||($.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){$.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),$.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var le=$.now(),ce=/\?/;$.parseJSON=function(t){return JSON.parse(t+"")},$.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&$.error("Invalid XML: "+t),e};var he=/#.*$/,fe=/([?&])_=[^&]*/,pe=/^(.*?):[ \t]*([^\r\n]*)$/gm,de=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,me=/^(?:GET|HEAD)$/,ge=/^\/\//,ye=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ve={},be={},_e="*/".concat("*"),xe=t.location.href,we=ye.exec(xe.toLowerCase())||[];$.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe,type:"GET",isLocal:de.test(we[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?R(R(t,$.ajaxSettings),e):R($.ajaxSettings,t)},ajaxPrefilter:B(ve),ajaxTransport:B(be),ajax:function(t,e){function n(t,e,n,a){var u,c,y,v,_,w=e;2!==b&&(b=2,s&&clearTimeout(s),r=void 0,o=a||"",x.readyState=t>0?4:0,u=t>=200&&300>t||304===t,n&&(v=F(h,x,n)),v=U(h,v,x,u),u?(h.ifModified&&(_=x.getResponseHeader("Last-Modified"),_&&($.lastModified[i]=_),_=x.getResponseHeader("etag"),_&&($.etag[i]=_)),204===t||"HEAD"===h.type?w="nocontent":304===t?w="notmodified":(w=v.state,c=v.data,y=v.error,u=!y)):(y=w,(t||!w)&&(w="error",0>t&&(t=0))),x.status=t,x.statusText=(e||w)+"",u?d.resolveWith(f,[c,w,x]):d.rejectWith(f,[x,w,y]),x.statusCode(g),g=void 0,l&&p.trigger(u?"ajaxSuccess":"ajaxError",[x,h,u?c:y]),m.fireWith(f,[x,w]),l&&(p.trigger("ajaxComplete",[x,h]),--$.active||$.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,a,s,u,l,c,h=$.ajaxSetup({},e),f=h.context||h,p=h.context&&(f.nodeType||f.jquery)?$(f):$.event,d=$.Deferred(),m=$.Callbacks("once memory"),g=h.statusCode||{},y={},v={},b=0,_="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!a)for(a={};e=pe.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=v[n]=v[n]||t,y[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)g[e]=[g[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||_;return r&&r.abort(e),n(0,e),this}};if(d.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||xe)+"").replace(he,"").replace(ge,we[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=$.trim(h.dataType||"*").toLowerCase().match(pt)||[""],null==h.crossDomain&&(u=ye.exec(h.url.toLowerCase()),h.crossDomain=!(!u||u[1]===we[1]&&u[2]===we[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(we[3]||("http:"===we[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=$.param(h.data,h.traditional)),O(ve,h,e,x),2===b)return x;l=$.event&&h.global,l&&0===$.active++&&$.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!me.test(h.type),i=h.url,h.hasContent||(h.data&&(i=h.url+=(ce.test(i)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=fe.test(i)?i.replace(fe,"$1_="+le++):i+(ce.test(i)?"&":"?")+"_="+le++)),h.ifModified&&($.lastModified[i]&&x.setRequestHeader("If-Modified-Since",$.lastModified[i]),$.etag[i]&&x.setRequestHeader("If-None-Match",$.etag[i])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+_e+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)x.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(h.beforeSend.call(f,x,h)===!1||2===b))return x.abort();_="abort";for(c in{success:1,error:1,complete:1})x[c](h[c]);if(r=O(be,h,e,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,r.send(y,n)}catch(w){if(!(2>b))throw w;n(-1,w)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return $.get(t,e,n,"json")},getScript:function(t,e){return $.get(t,void 0,e,"script")}}),$.each(["get","post"],function(t,e){$[e]=function(t,n,r,i){return $.isFunction(n)&&(i=i||r,r=n,n=void 0),$.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),$._evalUrl=function(t){return $.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},$.fn.extend({wrapAll:function(t){var e;return $.isFunction(t)?this.each(function(e){$(this).wrapAll(t.call(this,e))}):(this[0]&&(e=$(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return $.isFunction(t)?this.each(function(e){$(this).wrapInner(t.call(this,e))}):this.each(function(){var e=$(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=$.isFunction(t);return this.each(function(n){$(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()}}),$.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},$.expr.filters.visible=function(t){return!$.expr.filters.hidden(t)};var Me=/%20/g,Ce=/\[\]$/,Pe=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;$.param=function(t,e){var n,r=[],i=function(t,e){e=$.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(t)||t.jquery&&!$.isPlainObject(t))$.each(t,function(){i(this.name,this.value)});else for(n in t)z(n,t[n],e,i);return r.join("&").replace(Me,"+")},$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=$.prop(this,"elements");return t?$.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!$(this).is(":disabled")&&Te.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!Ct.test(t))}).map(function(t,e){var n=$(this).val();return null==n?null:$.isArray(n)?$.map(n,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:n.replace(Pe,"\r\n")}}).get()}}),$.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Se=0,Le={},Ae={0:200,1223:204},De=$.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Le)Le[t]()}),K.cors=!!De&&"withCredentials"in De,K.ajax=De=!!De,$.ajaxTransport(function(t){var e;return K.cors||De&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),a=++Se;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete Le[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(Ae[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Le[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(s){if(e)throw s}},abort:function(){e&&e()}}:void 0}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return $.globalEval(t),t}}}),$.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),$.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=$("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ie=[],ke=/(=)\?(?=&|$)|\?\?/;$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ie.pop()||$.expando+"_"+le++;return this[t]=!0,t}}),$.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=e.jsonp!==!1&&(ke.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ke.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=$.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ke,"$1"+i):e.jsonp!==!1&&(e.url+=(ce.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||$.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Ie.push(i)),a&&$.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),$.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||J;var r=at.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=$.buildFragment([t],e,i),i&&i.length&&$(i).remove(),$.merge([],r.childNodes))};var Ne=$.fn.load;$.fn.load=function(t,e,n){if("string"!=typeof t&&Ne)return Ne.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>=0&&(r=$.trim(t.slice(s)),t=t.slice(0,s)),$.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&$.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?$("<div>").append($.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},$.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){$.fn[e]=function(t){return this.on(e,t)}}),$.expr.filters.animated=function(t){return $.grep($.timers,function(e){return t===e.elem}).length};var Be=t.document.documentElement;$.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,l,c=$.css(t,"position"),h=$(t),f={};"static"===c&&(t.style.position="relative"),s=h.offset(),o=$.css(t,"top"),u=$.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=h.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),$.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+i),"using"in e?e.using.call(t,f):h.css(f)}},$.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){$.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return e=o.documentElement,$.contains(e,r)?(typeof r.getBoundingClientRect!==Pt&&(i=r.getBoundingClientRect()),n=V(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===$.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),$.nodeName(t[0],"html")||(r=t.offset()),r.top+=$.css(t[0],"borderTopWidth",!0),r.left+=$.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-$.css(n,"marginTop",!0),left:e.left-r.left-$.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Be;t&&!$.nodeName(t,"html")&&"static"===$.css(t,"position");)t=t.offsetParent;return t||Be})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r="pageYOffset"===n;$.fn[e]=function(i){return gt(this,function(e,i,o){var a=V(e);return void 0===o?a?a[n]:e[i]:void(a?a.scrollTo(r?t.pageXOffset:o,r?o:t.pageYOffset):e[i]=o)},e,i,arguments.length,null)}}),$.each(["top","left"],function(t,e){$.cssHooks[e]=w(K.pixelPosition,function(t,n){return n?(n=x(t,e),Gt.test(n)?$(t).position()[e]+"px":n):void 0})}),$.each({Height:"height",Width:"width"},function(t,e){$.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){$.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return gt(this,function(e,n,r){var i;return $.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?$.css(e,n,a):$.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),$.fn.size=function(){return this.length},$.fn.andSelf=$.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return $});var Oe=t.jQuery,Re=t.$;return $.noConflict=function(e){return t.$===$&&(t.$=Re),e&&t.jQuery===$&&(t.jQuery=Oe),$},typeof e===Pt&&(t.jQuery=t.$=$),$})},{}],81:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:82,colorbrewer:88,"d3-color":89,"d3-scale":90,dup:10,lodash:91,superagent:92}],82:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":84,"color-string":85,dup:11}],83:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],84:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":83,dup:13}],85:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":86,dup:14}],86:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],87:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],88:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":87,dup:8}],89:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],90:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],91:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],92:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:93,reduce:94}],93:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],94:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],95:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":111,dup:6}],96:[function(t,e,n){!function(t,n,r){var i=t.L,o={};o.version="0.7.5","object"==typeof e&&"object"==typeof e.exports?e.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=i,this},t.L=o,o.Util={extend:function(t){var e,n,r,i,o=Array.prototype.slice.call(arguments,1);for(n=0,r=o.length;r>n;n++){i=o[n]||{};for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e])}return t},bind:function(t,e){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(n){return n[e]=n[e]||++t,n[e]}}(),invokeEach:function(t,e,n){var r,i;if("object"==typeof t){i=Array.prototype.slice.call(arguments,3);for(r in t)e.apply(n,[r,t[r]].concat(i));return!0}return!1},limitExecByInterval:function(t,e,n){var r,i;return function o(){var a=arguments;return r?void(i=!0):(r=!0,setTimeout(function(){r=!1,i&&(o.apply(n,a),i=!1)},e),void t.apply(n,a))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=o.extend({},t.options,e),t.options},getParamString:function(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var i=e[n];if(i===r)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var n,r,i=["webkit","moz","o","ms"];for(n=0;n<i.length&&!r;n++)r=t[i[n]+e];return r}function n(e){var n=+new Date,i=Math.max(0,16-(n-r));return r=n+i,t.setTimeout(e,i)}var r=0,i=t.requestAnimationFrame||e("RequestAnimationFrame")||n,a=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,r,a,s){return e=o.bind(e,r),a&&i===n?void e():i.call(t,e,s)},o.Util.cancelAnimFrame=function(e){e&&a.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var r=new n;r.constructor=e,e.prototype=r;for(var i in this)this.hasOwnProperty(i)&&"prototype"!==i&&(e[i]=this[i]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[r].concat(t.includes)),delete t.includes),t.options&&r.options&&(t.options=o.extend({},r.options,t.options)),o.extend(r,t),r._initHooks=[];var a=this;return e.__super__=a.prototype,r.callInitHooks=function(){if(!this._initHooksCalled){a.prototype.callInitHooks&&a.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;e>t;t++)r._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var a="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(t,e,n){if(o.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var r,i,s,u,l,c,h,f=this[a]=this[a]||{},p=n&&n!==this&&o.stamp(n);for(t=o.Util.splitWords(t),r=0,i=t.length;i>r;r++)s={action:e,context:n||this},u=t[r],p?(l=u+"_idx",c=l+"_len",h=f[l]=f[l]||{},h[p]||(h[p]=[],f[c]=(f[c]||0)+1),h[p].push(s)):(f[u]=f[u]||[],f[u].push(s));return this},hasEventListeners:function(t){var e=this[a];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,n){if(!this[a])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var r,i,s,u,l,c,h,f,p,d=this[a],m=n&&n!==this&&o.stamp(n);for(t=o.Util.splitWords(t),r=0,i=t.length;i>r;r++)if(s=t[r],c=s+"_idx",h=c+"_len",f=d[c],e){if(u=m&&f?f[m]:d[s]){for(l=u.length-1;l>=0;l--)u[l].action!==e||n&&u[l].context!==n||(p=u.splice(l,1),p[0].action=o.Util.falseFn);n&&f&&0===u.length&&(delete f[m],d[h]--)}}else delete d[s],delete d[c],delete d[h];return this},clearAllEventListeners:function(){return delete this[a],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,r,i,s,u,l=o.Util.extend({},e,{type:t,target:this}),c=this[a];if(c[t])for(n=c[t].slice(),r=0,i=n.length;i>r;r++)n[r].action.call(n[r].context,l);s=c[t+"_idx"];for(u in s)if(n=s[u].slice())for(r=0,i=n.length;i>r;r++)n[r].action.call(n[r].context,l);return this},addOneTimeEventListener:function(t,e,n){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var r=o.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,r,n)},this);return this.addEventListener(t,e,n).addEventListener(t,r,n)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var e="ActiveXObject"in t,i=e&&!n.addEventListener,a=navigator.userAgent.toLowerCase(),s=-1!==a.indexOf("webkit"),u=-1!==a.indexOf("chrome"),l=-1!==a.indexOf("phantom"),c=-1!==a.indexOf("android"),h=-1!==a.search("android [23]"),f=-1!==a.indexOf("gecko"),p=typeof orientation!=r+"",d=!t.PointerEvent&&t.MSPointerEvent,m=t.PointerEvent&&t.navigator.pointerEnabled&&t.navigator.maxTouchPoints||d,g="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,y=n.documentElement,v=e&&"transition"in y.style,b="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!h,_="MozPerspective"in y.style,x="OTransition"in y.style,w=!t.L_DISABLE_3D&&(v||b||_||x)&&!l,M=!t.L_NO_TOUCH&&!l&&(m||"ontouchstart"in t||t.DocumentTouch&&n instanceof t.DocumentTouch);o.Browser={ie:e,ielt9:i,webkit:s,gecko:f&&!s&&!t.opera&&!e,android:c,android23:h,chrome:u,ie3d:v,webkit3d:b,gecko3d:_,opera3d:x,any3d:w,mobile:p,mobileWebkit:p&&s,mobileWebkit3d:p&&b,mobileOpera:p&&t.opera,touch:M,msPointer:d,pointer:m,retina:g}}(),o.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,n){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===r||null===t?t:new o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;i>r;r++)this.extend(n[r])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,n=this.max,r=t.min,i=t.max,a=i.x>=e.x&&r.x<=n.x,s=i.y>=e.y&&r.y<=n.y;return a&&s},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,n,r){this._a=t,this._b=e,this._c=n,this._d=r},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?n.getElementById(t):t},getStyle:function(t,e){var r=t.style[e];if(!r&&t.currentStyle&&(r=t.currentStyle[e]),(!r||"auto"===r)&&n.defaultView){var i=n.defaultView.getComputedStyle(t,null);r=i?i[e]:null}return"auto"===r?null:r},getViewportOffset:function(t){var e,r=0,i=0,a=t,s=n.body,u=n.documentElement;do{if(r+=a.offsetTop||0,i+=a.offsetLeft||0,r+=parseInt(o.DomUtil.getStyle(a,"borderTopWidth"),10)||0,i+=parseInt(o.DomUtil.getStyle(a,"borderLeftWidth"),10)||0,e=o.DomUtil.getStyle(a,"position"),a.offsetParent===s&&"absolute"===e)break;if("fixed"===e){
r+=s.scrollTop||u.scrollTop||0,i+=s.scrollLeft||u.scrollLeft||0;break}if("relative"===e&&!a.offsetLeft){var l=o.DomUtil.getStyle(a,"width"),c=o.DomUtil.getStyle(a,"max-width"),h=a.getBoundingClientRect();("none"!==l||"none"!==c)&&(i+=h.left+a.clientLeft),r+=h.top+(s.scrollTop||u.scrollTop||0);break}a=a.offsetParent}while(a);a=t;do{if(a===s)break;r-=a.scrollTop||0,i-=a.scrollLeft||0,a=a.parentNode}while(a);return new o.Point(i,r)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(n.body,"direction")),o.DomUtil._docIsLtr},create:function(t,e,r){var i=n.createElement(t);return i.className=e,r&&r.appendChild(i),i},hasClass:function(t,e){if(t.classList!==r)return t.classList.contains(e);var n=o.DomUtil._getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==r)for(var n=o.Util.splitWords(e),i=0,a=n.length;a>i;i++)t.classList.add(n[i]);else if(!o.DomUtil.hasClass(t,e)){var s=o.DomUtil._getClass(t);o.DomUtil._setClass(t,(s?s+" ":"")+e)}},removeClass:function(t,e){t.classList!==r?t.classList.remove(e):o.DomUtil._setClass(t,o.Util.trim((" "+o.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===r?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===r?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}},testProp:function(t){for(var e=n.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1},getTranslateString:function(t){var e=o.Browser.webkit3d,n="translate"+(e?"3d":"")+"(",r=(e?",0":"")+")";return n+t.x+"px,"+t.y+"px"+r},getScaleString:function(t,e){var n=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),r=" scale("+t+") ";return n+r},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&o.Browser.any3d?t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in n)o.extend(o.DomUtil,{disableTextSelection:function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},enableTextSelection:function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)}});else{var e=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(e){var t=n.documentElement.style;this._userSelect=t[e],t[e]="none"}},enableTextSelection:function(){e&&(n.documentElement.style[e]=this._userSelect,delete this._userSelect)}})}o.extend(o.DomUtil,{disableImageDrag:function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)}})}(),o.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==r&&(this.alt=parseFloat(n))},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=o.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,n=o.LatLng.DEG_TO_RAD,r=(t.lat-this.lat)*n,i=(t.lng-this.lng)*n,a=this.lat*n,s=t.lat*n,u=Math.sin(r/2),l=Math.sin(i/2),c=u*u+l*l*Math.cos(a)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(t,e){var n=this.lng;return t=t||-180,e=e||180,n=(n+e)%(e-t)+(t>n||n===e?e:t),new o.LatLng(this.lat,n)}},o.latLng=function(t,e){return t instanceof o.LatLng?t:o.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new o.LatLng(t[0],t[1],t[2]):null:t===r||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===r?null:new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;i>r;r++)this.extend(n[r])},o.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=o.latLng(t);return t=null!==e?e:o.latLngBounds(t),t instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng)):t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-r,e.lng-i),new o.LatLng(n.lat+r,n.lng+i))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),a=i.lat>=e.lat&&r.lat<=n.lat,s=i.lng>=e.lng&&r.lng<=n.lng;return a&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return!t||t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=t.lng*e,a=r*e;return a=Math.log(Math.tan(Math.PI/4+a/2)),new o.Point(i,a)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,n=t.x*e,r=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(r,n)}},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return o.point(e,e)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),n=6378137;return e.multiplyBy(n)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==r&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===r?this.getZoom():e,this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),a=t instanceof o.Point?t:this.latLngToContainerPoint(t),s=a.subtract(i).multiplyBy(1-1/r),u=this.containerPointToLatLng(i.add(s));return this.setView(u,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var n=o.point(e.paddingTopLeft||e.padding||[0,0]),r=o.point(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));i=e.maxZoom?Math.min(e.maxZoom,i):i;var a=r.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),i),u=this.project(t.getNorthEast(),i),l=this.unproject(s.add(u).divideBy(2).add(a),i);return this.setView(l,i,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=o.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),r=this._limitCenter(n,this._zoom,t);return n.equals(r)?this:this.panTo(r,e)},addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return t?o.stamp(t)in this._layers:!1},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),r=e.divideBy(2).round(),i=n.divideBy(2).round(),a=r.subtract(i);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=r}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new o.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===r?this._layersMinZoom===r?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===r?this._layersMaxZoom===r?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=o.latLngBounds(t);var r,i=this.getMinZoom()-(e?1:0),a=this.getMaxZoom(),s=this.getSize(),u=t.getNorthWest(),l=t.getSouthEast(),c=!0;n=o.point(n||[0,0]);do i++,r=this.project(l,i).subtract(this.project(u,i)).add(n),c=e?r.x<s.x||r.y<s.y:s.contains(r);while(c&&a>=i);return c&&e?null:e?i:i-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===r?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===r?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;n>e;e++)this.addLayer(t[e])},_resetView:function(t,e,n,r){var i=this._zoom!==e;r||(this.fire("movestart"),i&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var a=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),a&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(i||r)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-(1/0),i=this._getZoomSpan();for(t in this._zoomBoundLayers){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(e=Math.min(e,o.options.minZoom)),isNaN(o.options.maxZoom)||(n=Math.max(n,o.options.maxZoom))}t===r?this._layersMaxZoom=this._layersMinZoom=r:(this._layersMaxZoom=n,this._layersMinZoom=e),i!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){e=e||"on",o.DomEvent[e](this._container,"click",this._onMouseClick,this);var n,r,i=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,r=i.length;r>n;n++)o.DomEvent[e](this._container,i[n],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||o.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&o.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),r=this.containerPointToLayerPoint(n),i=this.layerPointToLatLng(r);this.fire(e,{latlng:i,layerPoint:r,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(r)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),a=new o.Bounds(r.subtract(i),r.add(i)),s=this._getBoundsOffset(a,n,e);return this.unproject(r.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new o.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=this.project(e.getNorthWest(),n).subtract(t.min),i=this.project(e.getSouthEast(),n).subtract(t.max),a=this._rebound(r.x,-i.x),s=this._rebound(r.y,-i.y);return new o.Point(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=this.R_MAJOR,a=this.R_MINOR,s=t.lng*e*i,u=r*e,l=a/i,c=Math.sqrt(1-l*l),h=c*Math.sin(u);h=Math.pow((1-h)/(1+h),.5*c);var f=Math.tan(.5*(.5*Math.PI-u))/h;return u=-i*Math.log(f),new o.Point(s,u)},unproject:function(t){for(var e,n=o.LatLng.RAD_TO_DEG,r=this.R_MAJOR,i=this.R_MINOR,a=t.x*n/r,s=i/r,u=Math.sqrt(1-s*s),l=Math.exp(-t.y/r),c=Math.PI/2-2*Math.atan(l),h=15,f=1e-7,p=h,d=.1;Math.abs(d)>f&&--p>0;)e=u*Math.sin(c),d=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*u))-c,c+=d;return new o.LatLng(c*n,a)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,n=.5/(Math.PI*e);return new o.Transformation(n,.5,-n,.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==r&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,r,i,o=t.children,a=-e(1/0,-(1/0));for(r=0,i=o.length;i>r;r++)o[r]!==this._container&&(n=parseInt(o[r].style.zIndex,10),isNaN(n)||(a=e(a,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=o.DomUtil.create("div",e,this._container),this._tileContainer=o.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,r=this.options.tileSize;return n&&e>n&&(r=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*r)),r},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),r=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var i=o.bounds(e.min.divideBy(r)._floor(),e.max.divideBy(r)._floor());this._addTilesFromCenterOut(i),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(i)}}},_addTilesFromCenterOut:function(t){var e,r,i,a=[],s=t.getCenter();for(e=t.min.y;e<=t.max.y;e++)for(r=t.min.x;r<=t.max.x;r++)i=new o.Point(r,e),this._tileShouldBeLoaded(i)&&a.push(i);var u=a.length;if(0!==u){a.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)});var l=n.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=u,r=0;u>r;r++)this._addTile(a[r],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var r=this._getTileSize(),i=t.multiplyBy(r),o=i.add([r,r]),a=this._map.unproject(i),s=this._map.unproject(o);if(e.continuousWorld||e.noWrap||(a=a.wrap(),s=s.wrap()),!e.bounds.intersects([a,s]))return!1}return!0},_removeOtherTiles:function(t){var e,n,r,i;for(i in this._tiles)e=i.split(":"),n=parseInt(e[0],10),r=parseInt(e[1],10),(n<t.min.x||n>t.max.x||r<t.min.y||r>t.max.y)&&this._removeTile(i)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(o.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android||(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),r=this._getTile();o.DomUtil.setPosition(r,n,o.Browser.chrome),this._tiles[t.x+":"+t.y]=r,this._loadTile(r,t),r.parentNode!==this._tileContainer&&e.appendChild(r)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=o.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==r&&o.DomUtil.setOpacity(t,this.options.opacity),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&o.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=o.extend({},this.defaultWmsParams),r=e.tileSize||this.options.tileSize;e.detectRetina&&o.Browser.retina?n.width=n.height=2*r:n.width=n.height=r;for(var i in e)this.options.hasOwnProperty(i)||"crs"===i||(n[i]=e[i]);this.wmsParams=n,o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,r=t.multiplyBy(n),i=r.add([n,n]),a=this._crs.project(e.unproject(r,t.z)),s=this._crs.project(e.unproject(i,t.z)),u=this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[s.y,a.x,a.y,s.x].join(","):[a.x,s.y,s.x,a.y].join(","),l=o.Util.template(this._url,{s:this._getSubdomain(t)});return l+o.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+u},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(t){o.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=o.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),
t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,r=e.getZoomScale(t.zoom),i=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),s=e._latLngToNewLayerPoint(i,t.zoom,t.center),u=e._latLngToNewLayerPoint(a,t.zoom,t.center)._subtract(s),l=s._add(u._multiplyBy(.5*(1-1/r)));n.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(l)+" scale("+r+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,n){return new o.ImageOverlay(t,e,n)},o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r;return r=e&&"IMG"===e.tagName?this._createImg(n,e):this._createImg(n),this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n,r=this.options,i=o.point(r[e+"Size"]);n="shadow"===e?o.point(r.shadowAnchor||r.iconAnchor):o.point(r.iconAnchor),!n&&i&&(n=i.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+r.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return e=e||n.createElement("img"),e.src=t,e},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];o.Browser.retina&&"icon"===t&&(t+="-2x");var n=o.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),o.Icon.Default.imagePath=function(){var t,e,r,i,o,a=n.getElementsByTagName("script"),s=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=a.length;e>t;t++)if(r=a[t].src,i=r.match(s))return o=r.split(s)[0],(o?o+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation,r=n?"leaflet-zoom-animated":"leaflet-zoom-hide",i=t.icon.createIcon(this._icon),a=!1;i!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),o.DomUtil.addClass(i,r),t.keyboard&&(i.tabIndex="0"),this._icon=i,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(i,"mouseover",this._bringToFront,this).on(i,"mouseout",this._resetZIndex,this);var s=t.icon.createShadow(this._shadow),u=!1;s!==this._shadow&&(this._removeShadow(),u=!0),s&&o.DomUtil.addClass(s,r),this._shadow=s,t.opacity<1&&this._updateOpacity();var l=this._map._panes;a&&l.markerPane.appendChild(this._icon),s&&u&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable"),o.DomEvent.on(t,"click",this._onMouseClick,this),o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)o.DomEvent.on(t,e[n],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&o.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),"mousedown"!==t.type?o.DomEvent.stopPropagation(t):o.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:n.createElement("div"),r=this.options;return r.html!==!1?e.innerHTML=r.html:e.innerHTML="",r.bgPos&&(e.style.backgroundPosition=-r.bgPos.x+"px "+-r.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),r=this._container=o.DomUtil.create("div",n);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create("a",e+"-close-button",r),t.href="#close",t.innerHTML="&#215;",o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,"click",this._onCloseButtonClick,this));var i=this._wrapper=o.DomUtil.create("div",e+"-content-wrapper",r);o.DomEvent.disableClickPropagation(i),this._contentNode=o.DomUtil.create("div",e+"-content",i),o.DomEvent.disableScrollPropagation(this._contentNode),o.DomEvent.on(i,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",e+"-tip-container",r),this._tip=o.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight,a="leaflet-popup-scrolled";i&&r>i?(e.height=i+"px",o.DomUtil.addClass(t,a)):o.DomUtil.removeClass(t,a),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,r=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&r._add(o.DomUtil.getPosition(this._container));var i=t.layerPointToContainerPoint(r),a=o.point(this.options.autoPanPadding),s=o.point(this.options.autoPanPaddingTopLeft||a),u=o.point(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),c=0,h=0;i.x+n+u.x>l.x&&(c=i.x+n-l.x+u.x),i.x-c-s.x<0&&(c=i.x-s.x),i.y+e+u.y>l.y&&(h=i.y+e-l.y+u.y),i.y-h-s.y<0&&(h=i.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof o.Popup)){var r=t;t=new o.Popup(n).setLatLng(e).setContent(r)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=o.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(o.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=o.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof o.Popup?(o.setOptions(t,e),this._popup=t,t._source=this):this._popup=new o.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;n>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return t?t in this._layers||this.getLayerId(t)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,r);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=o.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var e=o.Browser.mobile?1280:2e3,n=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,n))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),n=o.DomUtil.getPosition(this._mapPane),r=n.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),i=r.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new o.Bounds(r,i)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!n.createElementNS||!n.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return n.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&o.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&o.DomUtil.addClass(this._path,"leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),r=e.containerPointToLayerPoint(n),i=e.layerPointToLatLng(r);this.fire(t.type,{latlng:i,layerPoint:r,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&o.DomEvent.preventDefault(t),"mousemove"!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,r=n.x-e.x,i=n.y-e.y,a=this._pathRoot,s=this._panes.overlayPane;o.Browser.mobileWebkit&&s.removeChild(a),o.DomUtil.setPosition(a,e),a.setAttribute("width",r),a.setAttribute("height",i),a.setAttribute("viewBox",[e.x,e.y,r,i].join(" ")),o.Browser.mobileWebkit&&s.appendChild(a)}}}),o.Path.include({bindPopup:function(t,e){return t instanceof o.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=n.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(r){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return n.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return n.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return n.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&o.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,r=this._container;r.stroked=n.stroke,r.filled=n.fill,n.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",r.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=o.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(r.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),r.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(r.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=n.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!n.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,e,n,r,i,a;for(this._ctx.beginPath(),t=0,n=this._parts.length;n>t;t++){for(e=0,r=this._parts[t].length;r>e;e++)i=this._parts[t][e],a=(0===e?"move":"line")+"To",this._ctx[a](i.x,i.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill(e.fillRule||"evenodd")),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||(e=this._pathRoot=n.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),r=this._pathRoot;o.DomUtil.setPosition(r,e),r.width=n.x,r.height=n.y,r.getContext("2d").translate(-e.x,-e.y)}}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,i=typeof Uint8Array!=r+""?Uint8Array:Array,o=new i(n);o[0]=o[n-1]=1,this._simplifyDPStep(t,o,e,0,n-1);var a,s=[];for(a=0;n>a;a++)o[a]&&s.push(t[a]);return s},_simplifyDPStep:function(t,e,n,r,i){var o,a,s,u=0;for(a=r+1;i-1>=a;a++)s=this._sqClosestPointOnSegment(t[a],t[r],t[i],!0),s>u&&(o=a,u=s);u>n&&(e[o]=1,this._simplifyDPStep(t,e,n,r,o),this._simplifyDPStep(t,e,n,o,i))},_reducePoints:function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;o>r;r++)this._sqDist(t[r],t[i])>e&&(n.push(t[r]),i=r);return o-1>i&&n.push(t[o-1]),n},clipSegment:function(t,e,n,r){var i,o,a,s=r?this._lastCode:this._getBitCode(t,n),u=this._getBitCode(e,n);for(this._lastCode=u;;){if(!(s|u))return[t,e];if(s&u)return!1;i=s||u,o=this._getEdgeIntersection(t,e,i,n),a=this._getBitCode(o,n),i===s?(t=o,s=a):(e=o,u=a)}},_getEdgeIntersection:function(t,e,n,r){var i=e.x-t.x,a=e.y-t.y,s=r.min,u=r.max;return 8&n?new o.Point(t.x+i*(u.y-t.y)/a,u.y):4&n?new o.Point(t.x+i*(s.y-t.y)/a,s.y):2&n?new o.Point(u.x,t.y+a*(u.x-t.x)/i):1&n?new o.Point(s.x,t.y+a*(s.x-t.x)/i):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},_sqClosestPointOnSegment:function(t,e,n,r){var i,a=e.x,s=e.y,u=n.x-a,l=n.y-s,c=u*u+l*l;return c>0&&(i=((t.x-a)*u+(t.y-s)*l)/c,i>1?(a=n.x,s=n.y):i>0&&(a+=u*i,s+=l*i)),u=t.x-a,l=t.y-s,r?u*u+l*l:new o.Point(a,s)}},o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";e>t;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,r=1/0,i=this._parts,a=null,s=0,u=i.length;u>s;s++)for(var l=i[s],c=1,h=l.length;h>c;c++){e=l[c-1],n=l[c];var f=o.LineUtil._sqClosestPointOnSegment(t,e,n,!0);r>f&&(r=f,a=o.LineUtil._sqClosestPointOnSegment(t,e,n))}return a&&(a.distance=Math.sqrt(r)),a},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,r,i=e?t:[];for(n=0,r=t.length;r>n;n++){if(o.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;i[n]=o.latLng(t[n])}return i},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=o.Path.VML,r=0,i=t.length,a="";i>r;r++)e=t[r],
n&&e._round(),a+=(r?"L":"M")+e.x+" "+e.y;return a},_clipPoints:function(){var t,e,n,r=this._originalPoints,i=r.length;if(this.options.noClip)return void(this._parts=[r]);this._parts=[];var a=this._parts,s=this._map._pathViewport,u=o.LineUtil;for(t=0,e=0;i-1>t;t++)n=u.clipSegment(r[t],r[t+1],s,t),n&&(a[e]=a[e]||[],a[e].push(n[0]),(n[1]!==r[t+1]||t===i-2)&&(a[e].push(n[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=o.LineUtil,n=0,r=t.length;r>n;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var n,r,i,a,s,u,l,c,h,f=[1,4,2,8],p=o.LineUtil;for(r=0,l=t.length;l>r;r++)t[r]._code=p._getBitCode(t[r],e);for(a=0;4>a;a++){for(c=f[a],n=[],r=0,l=t.length,i=l-1;l>r;i=r++)s=t[r],u=t[i],s._code&c?u._code&c||(h=p._getEdgeIntersection(u,s,c,e),h._code=p._getBitCode(h,e),n.push(h)):(u._code&c&&(h=p._getEdgeIntersection(u,s,c,e),h._code=p._getBitCode(h,e),n.push(h)),n.push(s));t=n}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(t,e){o.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,r;if(t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;n>e;e++)r=this._holes[e]=this._convertLatLngs(this._holes[e]),r[0].equals(r[r.length-1])&&r.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,n,r;for(t=0,n=this._holes.length;n>t;t++)for(this._holePoints[t]=[],e=0,r=this._holes[t].length;r>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):o.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,r=this._parts.length;r>n;n++){var i=o.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);i.length&&e.push(i)}this._parts=e}},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,r=e.length;for(this.eachLayer(function(t){r>n?t.setLatLngs(e[n++]):this.removeLayer(t)},this);r>n;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initialize:function(t,e,n){o.Path.prototype.initialize.call(this,n),this._latlng=o.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new o.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),o.circle=function(t,e,n){return new o.Circle(t,e,n)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return o.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(t,e){var n,r,i,a,s,u,l,c=this.options.weight/2;for(o.Browser.touch&&(c+=10),n=0,a=this._parts.length;a>n;n++)for(l=this._parts[n],r=0,s=l.length,i=s-1;s>r;i=r++)if((e||0!==r)&&(u=o.LineUtil.pointToSegmentDistance(t,l[i],l[r]),c>=u))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(t){var e,n,r,i,a,s,u,l,c=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(i=0,u=this._parts.length;u>i;i++)for(e=this._parts[i],a=0,l=e.length,s=l-1;l>a;s=a++)n=e[a],r=e[s],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=o.Util.isArray(t)?t:t.features;if(i){for(e=0,n=i.length;n>e;e++)r=i[e],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(i[e]);return this}var a=this.options;if(!a.filter||a.filter(t)){var s=o.GeoJSON.geometryToLayer(t,a.pointToLayer,a.coordsToLatLng,a);return s.feature=o.GeoJSON.asFeature(t),s.defaultOptions=s.options,this.resetStyle(s),a.onEachFeature&&a.onEachFeature(t,s),this.addLayer(s)}},resetStyle:function(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e,n,r){var i,a,s,u,l="Feature"===t.type?t.geometry:t,c=l.coordinates,h=[];switch(n=n||this.coordsToLatLng,l.type){case"Point":return i=n(c),e?e(t,i):new o.Marker(i);case"MultiPoint":for(s=0,u=c.length;u>s;s++)i=n(c[s]),h.push(e?e(t,i):new o.Marker(i));return new o.FeatureGroup(h);case"LineString":return a=this.coordsToLatLngs(c,0,n),new o.Polyline(a,r);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return a=this.coordsToLatLngs(c,1,n),new o.Polygon(a,r);case"MultiLineString":return a=this.coordsToLatLngs(c,1,n),new o.MultiPolyline(a,r);case"MultiPolygon":return a=this.coordsToLatLngs(c,2,n),new o.MultiPolygon(a,r);case"GeometryCollection":for(s=0,u=l.geometries.length;u>s;s++)h.push(this.geometryToLayer({geometry:l.geometries[s],type:"Feature",properties:t.properties},e,n,r));return new o.FeatureGroup(h);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var r,i,o,a=[];for(i=0,o=t.length;o>i;i++)r=e?this.coordsToLatLngs(t[i],e-1,n):(n||this.coordsToLatLng)(t[i]),a.push(r);return a},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==r&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(o.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var s={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(s),o.Circle.include(s),o.CircleMarker.include(s),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var t,e,n,r=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(r[0].push(r[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)n=o.GeoJSON.latLngsToCoords(this._holes[t]),n.push(n[0]),r.push(n);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:r})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:t,coordinates:e})}}o.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),o.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),o.LayerGroup.include({toGeoJSON:function(){var e,n=this.feature&&this.feature.geometry,r=[];if(n&&"MultiPoint"===n.type)return t("MultiPoint").call(this);var i=n&&"GeometryCollection"===n.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),r.push(i?e.geometry:o.GeoJSON.asFeature(e)))}),i?o.GeoJSON.getFeature(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}})}(),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListener:function(t,e,n,r){var i,a,s,u=o.stamp(n),l="_leaflet_"+e+u;return t[l]?this:(i=function(e){return n.call(r||t,e||o.DomEvent._getEvent())},o.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,i,u):(o.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,i,u),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",i,!1),t.addEventListener(e,i,!1)):"mouseenter"===e||"mouseleave"===e?(a=i,s="mouseenter"===e?"mouseover":"mouseout",i=function(e){return o.DomEvent._checkMouse(t,e)?a(e):void 0},t.addEventListener(s,i,!1)):"click"===e&&o.Browser.android?(a=i,i=function(t){return o.DomEvent._filterClick(t,a)},t.addEventListener(e,i,!1)):t.addEventListener(e,i,!1):"attachEvent"in t&&t.attachEvent("on"+e,i),t[l]=i,this))},removeListener:function(t,e,n){var r=o.stamp(n),i="_leaflet_"+e+r,a=t[i];return a?(o.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,r):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,r):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[i]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,o.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=o.DomEvent.stopPropagation,n=o.Draggable.START.length-1;n>=0;n--)o.DomEvent.on(t,o.Draggable.START[n],e);return o.DomEvent.on(t,"click",o.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new o.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new o.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(r){return!1}return n!==t},_getEvent:function(){var e=t.event;if(!e)for(var n=arguments.callee.caller;n&&(e=n.arguments[0],!e||t.Event!==e.constructor);)n=n.caller;return e},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,r=o.DomEvent._lastClick&&n-o.DomEvent._lastClick;return r&&r>100&&500>r||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=n,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(o.DomEvent.stopPropagation(t),!o.Draggable._disabled&&(o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),!this._moving))){var e=t.touches?t.touches[0]:t;this._startPoint=new o.Point(e.clientX,e.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(n,o.Draggable.MOVE[t.type],this._onMove,this).on(n,o.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,r=new o.Point(e.clientX,e.clientY),i=r.subtract(this._startPoint);(i.x||i.y)&&(o.Browser.touch&&Math.abs(i.x)+Math.abs(i.y)<3||(o.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(i),o.DomUtil.addClass(n.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){o.DomUtil.removeClass(n.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in o.Draggable.MOVE)o.DomEvent.off(n,o.Draggable.MOVE[t],this._onMove).off(n,o.Draggable.END[t],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=+new Date-this._lastTime,i=!n.inertia||r>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),i)e.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),s=(this._lastTime+r-this._times[0])/1e3,u=n.easeLinearity,l=a.multiplyBy(u/s),c=l.distanceTo([0,0]),h=Math.min(n.inertiaMaxSpeed,c),f=l.multiplyBy(h/c),p=h/(n.inertiaDeceleration*u),d=f.multiplyBy(-p/2).round();d.x&&d.y?(d=e._limitOffset(d,e.options.maxBounds),o.Util.requestAnimFrame(function(){e.panBy(d,{duration:p,easeLinearity:u,noMoveStart:!0})})):e.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),n),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,r){function i(t){var e;if(o.Browser.pointer?(d.push(t.pointerId),e=d.length):e=t.touches.length,!(e>1)){var n=Date.now(),r=n-(s||n);u=t.touches?t.touches[0]:t,l=r>0&&c>=r,s=n}}function a(t){if(o.Browser.pointer){var n=d.indexOf(t.pointerId);if(-1===n)return;d.splice(n,1)}if(l){if(o.Browser.pointer){var r,i={};for(var a in u)r=u[a],"function"==typeof r?i[a]=r.bind(u):i[a]=r;u=i}u.type="dblclick",e(u),s=null}}var s,u,l=!1,c=250,h="_leaflet_",f=this._touchstart,p=this._touchend,d=[];t[h+f+r]=i,t[h+p+r]=a;var m=o.Browser.pointer?n.documentElement:t;return t.addEventListener(f,i,!1),m.addEventListener(p,a,!1),o.Browser.pointer&&m.addEventListener(o.DomEvent.POINTER_CANCEL,a,!1),this},removeDoubleTapListener:function(t,e){var r="_leaflet_";return t.removeEventListener(this._touchstart,t[r+this._touchstart+e],!1),(o.Browser.pointer?n.documentElement:t).removeEventListener(this._touchend,t[r+this._touchend+e],!1),o.Browser.pointer&&n.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL,t[r+this._touchend+e],!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,r){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,r);case"touchend":return this.addPointerListenerEnd(t,e,n,r);case"touchmove":return this.addPointerListenerMove(t,e,n,r);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,r,i){var a="_leaflet_",s=this._pointers,u=function(t){o.DomEvent.preventDefault(t);for(var e=!1,n=0;n<s.length;n++)if(s[n].pointerId===t.pointerId){e=!0;break}e||s.push(t),t.touches=s.slice(),t.changedTouches=[t],r(t)};if(t[a+"touchstart"+i]=u,t.addEventListener(this.POINTER_DOWN,u,!1),!this._pointerDocumentListener){var l=function(t){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}};n.documentElement.addEventListener(this.POINTER_UP,l,!1),n.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,r){function i(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a[e]=t;break}t.touches=a.slice(),t.changedTouches=[t],n(t)}}var o="_leaflet_",a=this._pointers;return t[o+"touchmove"+r]=i,t.addEventListener(this.POINTER_MOVE,i,!1),this},addPointerListenerEnd:function(t,e,n,r){var i="_leaflet_",o=this._pointers,a=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}t.touches=o.slice(),t.changedTouches=[t],n(t)};return t[i+"touchend"+r]=a,t.addEventListener(this.POINTER_UP,a,!1),t.addEventListener(this.POINTER_CANCEL,a,!1),this},removePointerListener:function(t,e,n){var r="_leaflet_",i=t[r+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,i,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,i,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,i,!1),t.removeEventListener(this.POINTER_CANCEL,i,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var r=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]),a=e._getCenterLayerPoint();this._startCenter=r.add(i)._divideBy(2),this._startDist=r.distanceTo(i),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),o.DomEvent.on(n,"touchmove",this._onTouchMove,this).on(n,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),r=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(r)/this._startDist,this._delta=n._add(r)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(e.options.bounceAtZoomLimits||!(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1))&&(this._moved||(o.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),r=t.getScaleZoom(this._scale);t._animateZoom(n,r,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(n,"touchmove",this._onTouchMove).off(n,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),r=t.layerPointToLatLng(e),i=t.getZoom(),a=t.getScaleZoom(this._scale)-i,s=a>0?Math.ceil(a):Math.floor(a),u=t._limitZoom(i+s),l=t.getZoomScale(u)/this._scale;t._animateZoom(r,u,e,l)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],r=e.target;this._startPos=this._newPos=new o.Point(e.clientX,e.clientY),r.tagName&&"a"===r.tagName.toLowerCase()&&o.DomUtil.addClass(r,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),o.DomEvent.on(n,"touchmove",this._onMove,this).on(n,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(n,"touchmove",this._onMove,this).off(n,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],r=e.target;r&&r.tagName&&"a"===r.tagName.toLowerCase()&&o.DomUtil.removeClass(r,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(e,r){var i=n.createEvent("MouseEvents");i._simulated=!0,r.target._simulatedClick=!0,i.initMouseEvent(e,!0,!0,t,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(i)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button?!1:(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void o.DomEvent.on(n,"mousemove",this._onMouseMove,this).on(n,"mouseup",this._onMouseUp,this).on(n,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,r=this._map.mouseEventToLayerPoint(t),i=r.subtract(e),a=new o.Point(Math.min(r.x,e.x),Math.min(r.y,e.y));o.DomUtil.setPosition(n,a),this._moved=!0,n.style.width=Math.max(0,Math.abs(i.x)-4)+"px",n.style.height=Math.max(0,Math.abs(i.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(n,"mousemove",this._onMouseMove).off(n,"mouseup",this._onMouseUp).off(n,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var r=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(r),e.fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var e=n.body,r=n.documentElement,i=e.scrollTop||r.scrollTop,o=e.scrollLeft||r.scrollLeft;this._map._container.focus(),t.scrollTo(o,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;n>e;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;n>e;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;n>e;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;n>e;e++)r[i.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;n>e;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;n>e;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(n,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(n,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){
this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),o.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=o.DomUtil.getPosition(t._icon),r=t._map.layerPointToLatLng(n);e&&o.DomUtil.setPosition(e,n),t._latlng=r,t.fire("move",{latlng:r}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return o.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),n=t._controlCorners[e];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,i){var a=n+t+" "+n+i;e[t+i]=o.DomUtil.create("div",a,r)}var e=this._controlCorners={},n="leaflet-",r=this._controlContainer=o.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=o.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,r,i,a){var s=o.DomUtil.create("a",n,r);s.innerHTML=t,s.href="#",s.title=e;var u=o.DomEvent.stopPropagation;return o.DomEvent.on(s,"click",u).on(s,"mousedown",u).on(s,"dblclick",u).on(s,"click",o.DomEvent.preventDefault).on(s,"click",i,a).on(s,"click",this._refocusOnMap,a),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=o.DomUtil.create("div",e),r=this.options;return this._addScales(r,e,n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=o.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=o.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180),r=n*(t.getNorthEast().lng-t.getSouthWest().lng)/180,i=this._map.getSize(),o=this.options,a=0;i.x>0&&(a=r*(o.maxWidth/i.x)),this._updateScales(o,a)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,r,i=3.2808399*t,o=this._iScale;i>5280?(e=i/5280,n=this._getRoundNum(e),o.style.width=this._getScaleWidth(n/e)+"px",o.innerHTML=n+" mi"):(r=this._getRoundNum(i),o.style.width=this._getScaleWidth(r/i)+"px",o.innerHTML=r+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){o.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var r in t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(e,"click",o.DomEvent.stopPropagation):o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var r=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);r.href="#",r.title="Layers",o.Browser.touch?o.DomEvent.on(r,"click",o.DomEvent.stop).on(r,"click",this._expand,this):o.DomEvent.on(r,"focus",this._expand,this),o.DomEvent.on(n,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",n),this._separator=o.DomUtil.create("div",t+"-separator",n),this._overlaysList=o.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var r=o.stamp(t);this._layers[r]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,r=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),r=r||e.overlay,n=n||!e.overlay;this._separator.style.display=r&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,e){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(r+=' checked="checked"'),r+="/>";var i=n.createElement("div");return i.innerHTML=r,i.firstChild},_addItem:function(t){var e,r=n.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?(e=n.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),e.layerId=o.stamp(t.layer),o.DomEvent.on(e,"click",this._onInputClick,this);var a=n.createElement("span");a.innerHTML=" "+t.name,r.appendChild(e),r.appendChild(a);var s=t.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(r),r},_onInputClick:function(){var t,e,n,r=this._form.getElementsByTagName("input"),i=r.length;for(this._handlingClick=!0,t=0;i>t;t++)e=r[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(t,e,n){return new o.Control.Layers(t,e,n)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[o.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(r||.5)+",1)",o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,n,r,i=this._el,a=t.getComputedStyle(i);if(o.Browser.any3d){if(r=a[o.DomUtil.TRANSFORM].match(this._transformRe),!r)return;e=parseFloat(r[1]),n=parseFloat(r[2])}else e=parseFloat(a.left),n=parseFloat(a.top);return new o.Point(e,n,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(t,e,n){if(e=e===r?this._zoom:this._limitZoom(e),t=this._limitCenter(o.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==r&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate},n.pan));var i=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(n)?(this.panBy(n,e),!0):!1}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r),o=this._getCenterLayerPoint()._add(i);return n.animate===!0||this.getSize().contains(i)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,o,r,null,!0),!0):!1},_animateZoom:function(t,e,n,r,i,a,s){s||(this._animatingZoom=!0),o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),o.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:r,delta:i,backwards:a}),setTimeout(o.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1))}}:{}),o.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=o.DomUtil.TRANSFORM,r=t.delta?o.DomUtil.getTranslateString(t.delta):e.style[n],i=o.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?i+" "+r:r+" "+i},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),o.Util.falseFn(e.offsetWidth);var n=this._map.getZoom();(n>this.options.maxZoom||n<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),r=this._getLoadedTilesPercentage(t);return e&&n>.5&&.5>r?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[o.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,n,r=t.getElementsByTagName("img"),i=0;for(e=0,n=r.length;n>e;e++)r[e].complete&&i++;return i/n},_stopLoadingImages:function(t){var e,n,r,i=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=i.length;n>e;e++)r=i[e],r.complete||(r.onload=o.Util.falseFn,r.onerror=o.Util.falseFn,r.src=o.Util.emptyImageUrl,r.parentNode.removeChild(r))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),n=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,r=new o.LatLng(e,n),i=180*t.coords.accuracy/40075017,a=i/Math.cos(o.LatLng.DEG_TO_RAD*e),s=o.latLngBounds([e-i,n-a],[e+i,n+a]),u=this._locateOptions;if(u.setView){var l=Math.min(this.getBoundsZoom(s),u.maxZoom);this.setView(r,l)}var c={latlng:r,bounds:s,timestamp:t.timestamp};for(var h in t.coords)"number"==typeof t.coords[h]&&(c[h]=t.coords[h]);this.fire("locationfound",c)}})}(window,document)},{}],97:[function(t,e,n){var r,i=t("lodash"),o=t("superagent"),a=t("d3-color"),s=t("d3-scale"),u=t("colorbrewer"),l=t("color"),c={preloadImages:function(t){i.each(t,function(t){c.preloadImage(t)})},preloadImage:function(t){var e=new Image;e.src=t},randomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},linspace:function(t,e,n){var r=(e-t)/(n-1),o=i.range(t,e,r);return o.length==n?o:o.concat(e)},getThumbnail:function(t){return t+"_small"},cleanImageURL:function(t){return t.indexOf("http")>-1?t:window.lightning&&window.lightning.host?window.lightning.host+t:t},mapRange:function(t,e,n,r,i){return r+(i-r)*((t-e)/(n-e))},getColors:function(t){for(var e=["#A38EF3","#7ABFEA","#5BC69F","#E96B88","#F0E86B","#C2B08C","#F9B070","#F19A9A","#AADA90","#DBB1F2"],n=[],r=0;t>r;r++)n.push(e[r%e.length]);return n},getColorFromData:function(t){if(t.hasOwnProperty("label")){label=t.label;var e=Math.min.apply(null,label),n=Math.max.apply(null,label),r=n-e+1,i=this.getColors(r);retColor=label.map(function(t){return a.rgb(i[t-e])})}else if(t.hasOwnProperty("color"))c=t.color,retColor=c.map(function(t){return a.rgb(t[0],t[1],t[2])});else if(t.hasOwnProperty("value")){value=t.value;var o=t.colormap?t.colormap:"Purples",l=9;if("Lightning"==o)var c=["#A38EF3","#DBB1F2","#7ABFEA","#5BC69F","#AADA90","#F0E86B","#F9B070","#F19A9A","#E96B88"];else var c=u[o][l];var h=Math.min.apply(null,value),f=Math.max.apply(null,value),p=this.linspace(h,f,l),d=s.linear().domain(p).range(c);retColor=value.map(function(t){return a.rgb(d(t))})}else retColor=[];return retColor},buildRGBA:function(t,e){var n=l(t);return n.alpha(e),n.rgbString()},trackTransforms:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=e.createSVGMatrix();t.getTransform=function(){return n};var r=[],i=t.save;t.save=function(){return r.push(n.translate(0,0)),i.call(t)};var o=t.restore;t.restore=function(){return n=r.pop(),o.call(t)};var a=t.scale;t.scale=function(e,r){var i=n;return n=n.scaleNonUniform(e,r),n.d<1?void(n=i):a.call(t,e,r)};var s=t.rotate;t.rotate=function(e){return n=n.rotate(180*e/Math.PI),s.call(t,e)};var u=t.translate;t.translate=function(e,r){return n=n.translate(e,r),u.call(t,e,r)};var l=t.transform;t.transform=function(r,i,o,a,s,u){var c=e.createSVGMatrix();return c.a=r,c.b=i,c.c=o,c.d=a,c.e=s,c.f=u,n=n.multiply(c),l.call(t,r,i,o,a,s,u)};var c=t.setTransform;t.setTransform=function(e,r,i,o,a,s){return n.a=e,n.b=r,n.c=i,n.d=o,n.e=a,n.f=s,c.call(t,e,r,i,o,a,s)};var h=e.createSVGPoint();t.transformedPoint=function(t,e){return h.x=t,h.y=e,h.matrixTransform(n.inverse())}},addCanvasZoomPanListeners:function(t,e,n){var r,i,o=t.width/2,a=t.height/2;t.addEventListener("mousedown",function(n){o=n.offsetX||n.pageX-t.offsetLeft,a=n.offsetY||n.pageY-t.offsetTop,r=e.transformedPoint(o,a),i=!1},!1),t.addEventListener("mousemove",function(s){if(o=s.offsetX||s.pageX-t.offsetLeft,a=s.offsetY||s.pageY-t.offsetTop,i=!0,r){var u=e.transformedPoint(o,a);e.translate(u.x-r.x,u.y-r.y),n()}},!1),t.addEventListener("mouseup",function(t){r=null,i||u(t.shiftKey?-1:1)},!1);var s=1.025,u=function(t){var r=e.transformedPoint(o,a);e.translate(r.x,r.y);var i=Math.pow(s,t);e.scale(i,i),e.translate(-r.x,-r.y),n()},l=function(t){var e=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail:0;return e&&u(e),t.preventDefault()&&!1};t.addEventListener("DOMMouseScroll",l,!1),t.addEventListener("mousewheel",l,!1)},isEditorOrPreview:function(){var t=document.URL;return/https?:\/\/[^\/]+\/visualization-types\/*/.test(t)},getId:function(t){var e=t.$el;return t.$el||(e=$(t.selection)),e.closest("[data-model=visualization]").data("model-id")},getUrl:function(t){var e=this.getId(t),n="/";return window.lightning&&window.lightning.host&&(n=window.lightning.host),n+"visualizations/"+e},fetchData:function(t,e,n){if(t.$el||console.warn("Must set .$el property on your visualization"),this.isEditorOrPreview())setTimeout(function(){var t=$("#data-editor").next(".CodeMirror").find(".CodeMirror-code span")[0].innerHTML,r=JSON.parse(t);i.each(e,function(t){r=r[t]}),n(null,r)},0);else{var a=this.getUrl(t);r&&r.abort(),r=o.get(a+"/data/"+e.join("/")+"/",function(t,e){return t?n(t):void n(null,(e.body||{}).data)})}},getSettings:function(t,e){if(this.isEditorOrPreview())return void setTimeout(function(){e(null,{})},0);var n=this.getUrl(t);r=o.get(n+"/settings/",function(t,n){return t?e(t):void e(null,(n.body||{}).settings)})},getUniqueId:function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},updateSettings:function(t,e,n){if(this.isEditorOrPreview())return void setTimeout(function(){n(null,e)},0);var i=this.getUrl(t);r=o.post(i+"/settings/",e,function(t,e){return t?n(t):void n(null,(e.body||{}).settings)})},getCommForViz:function(t){var e=(window.lightning||{}).comm_map;return e?e[this.getId(t)]:void 0},sendCommMessage:function(t,e,n){var r=this.getCommForViz(t);r&&r.send(JSON.stringify({type:e,data:n}))},nearestPoint:function(t,e,n,r){for(var i,o,a,s=0,u=0;0==u&s<t.length;)a=t[s],o=Math.sqrt(Math.pow(n(a.x)-e[0],2)+Math.pow(r(a.y)-e[1],2)),o<=a.s&&(i=a,u=1),s++;return i}};e.exports=c},{color:98,colorbrewer:104,"d3-color":105,"d3-scale":106,lodash:107,superagent:108}],98:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":100,"color-string":101,dup:11}],99:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],100:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":99,dup:13}],101:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":102,dup:14}],102:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],103:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],104:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":103,dup:8}],105:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],106:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],107:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],108:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:109,reduce:110}],109:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],110:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],111:[function(t,e,n){(function(n){"use strict";var r,i=t("lightning-visualization"),o=t("lightning-client-utils"),a=t("lodash"),s=t("jquery"),u=n("LmxlYWZsZXQtY29udGFpbmVyIGltZy5sZWFmbGV0LWltYWdlLWxheWVyIHsKICAgIG1heC13aWR0aDogbm9uZSAhaW1wb3J0YW50OwogICAgaW1hZ2UtcmVuZGVyaW5nOiBwaXhlbGF0ZWQ7Cn0=","base64"),l=a.template(n("PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuY3NzIi8+CjxkaXYgaWQ9ImltYWdlLW1hcC08JT0gaWRlbnRpZmllciAlPiIgY2xhc3M9ImltYWdlLW1hcCI+CjwvZGl2Pg==","base64")),c=i.extend({css:u,init:function(){r=t("leaflet"),this.identifier=o.getUniqueId();var e=l({identifier:this.identifier});this.$el=s(this.selector).first(),this.$el.append(e),this.render()},render:function(){this.img=new Image,this.img.onload=this.onImageLoad.bind(this),this.img.src=o.cleanImageURL(this.images[0])},onImageLoad:function(){var t=this.width,e=this.img.width,n=this.img.height,i=t,o=t*(n/e);this.$el.find("#image-map-"+this.identifier).width(i).height(o),this.map&&this.map.remove(),this.map=r.map("image-map-"+this.identifier,{minZoom:1,maxZoom:8,center:[i/2,o/2],zoom:1,attributionControl:!1,zoomControl:!1,crs:r.CRS.Simple});var a=this.map,s=a.unproject([0,o],1),u=a.unproject([i,0],1),l=new r.LatLngBounds(s,u);r.imageOverlay(this.img.src,l).addTo(a),a.setMaxBounds(l)},formatData:function(t){return t},setImage:function(t){this.img.src=t},updateData:function(t){this.setImage(t)}});e.exports=c}).call(this,t("buffer").Buffer)},{buffer:1,jquery:80,leaflet:96,"lightning-client-utils":97,"lightning-visualization":112,lodash:394}],112:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:113,"insert-css":114,lodash:394,qwery:115}],113:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],114:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],115:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],116:[function(t,e,n){(function(n){"use strict";var r=t("lightning-visualization"),i=t("lightning-image"),o=t("lodash"),a=t("jquery"),s=n("LmdhbGxlcnktdml6IGltZyB7CiAgd2lkdGg6IDEwMCU7CiAgZGlzcGxheTogYmxvY2s7Cn0KCi5nYWxsZXJ5LXZpeiAuZ2FsbGVyeS10aHVtYm5haWwgewogIGN1cnNvcjogcG9pbnRlcjsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWF4LXdpZHRoOiAxMCU7Cn0KCi5nYWxsZXJ5LXZpeiAuZ2FsbGVyeS10aHVtYm5haWw6bm90KDpmaXJzdC1jaGlsZCkgewogIG1hcmdpbi1sZWZ0OiAxMHB4Owp9CgouZ2FsbGVyeS12aXogLmxlYWZsZXQtY29udGFpbmVyIGltZy5sZWFmbGV0LWltYWdlLWxheWVyIHsKICBtYXgtd2lkdGg6IG5vbmUgIWltcG9ydGFudDsKfQoKLmdhbGxlcnktdml6IC5pbWFnZS1tYXAgLm92ZXJsYXkgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICBib3gtc2hhZG93OiBpbnNldCAtMTAwcHggMCAxMDBweCAtMTAwcHggcmdiYSgwLCAwLCAwLCAwLjI1KTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgei1pbmRleDogMjAwMTsKfQoKLmdhbGxlcnktdml6IC5pbWFnZS1tYXAgZyBwYXRoIHsKICB0cmFuc2l0aW9uOiBhbGwgMC4yNXM7CiAgc3Ryb2tlLXdpZHRoOiA0cHg7CiAgc3Ryb2tlLW9wYWNpdHk6IDE7CiAgc3Ryb2tlOiB3aGl0ZTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgei1pbmRleDogMTAwMTsKICBmaWxsOiB3aGl0ZTsKICBmaWxsLW9wYWNpdHk6IC42OwogIC13ZWJraXQtZmlsdGVyOiBub25lOwp9CgouZ2FsbGVyeS12aXogLmltYWdlLW1hcC5tb2RlLWRlbGV0ZSBwYXRoIHsKICBjdXJzb3I6IG5vLWRyb3A7Cn0KCi5nYWxsZXJ5LXZpeiAuaW1hZ2UtbWFwLm1vZGUtZGVsZXRlIHBhdGg6aG92ZXIgewogIGZpbGw6ICM0ZDRkNGQgIWltcG9ydGFudDsKfQoKLmdhbGxlcnktdml6IC5pbWFnZS1tYXAgZGl2LnBvbHlnb24tZWxib3cgewogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjI1czsKICBib3gtc2hhZG93OiAwIDAgMCAycHggd2hpdGUsIDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4zNSk7CiAgYm9yZGVyOiA1cHggc29saWQgI2I0YjRiNDsKICBib3JkZXItcmFkaXVzOiAxMHB4OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4yNXM7CiAgY3Vyc29yOiBtb3ZlOwogIG9wYWNpdHk6IDA7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICB3aWR0aDogMCAhaW1wb3J0YW50OwogIGhlaWdodDogMCAhaW1wb3J0YW50Owp9CgouZ2FsbGVyeS12aXogLmltYWdlLW1hcCBkaXYucG9seWdvbi1lbGJvdy5ub24tcG9seWdvbiB7CiAgb3BhY2l0eTogMCAhaW1wb3J0YW50OwogIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7CiAgYm9yZGVyOiA1cHggc29saWQgZGFya2dyYXk7Cn0KCi5nYWxsZXJ5LXZpeiAuaW1hZ2UtbWFwLm1vZGUtZWRpdCBkaXYucG9seWdvbi1lbGJvdyB7CiAgb3BhY2l0eTogMTsKICBwb2ludGVyLWV2ZW50czogYWxsOwp9CgouZ2FsbGVyeS12aXogLmltYWdlLW1hcCBzdmcudHJhY2VyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHotaW5kZXg6IDIwMDE7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KCi5nYWxsZXJ5LXZpeiAubW91c2UtbGluZSB7CiAgc3Ryb2tlOiB3aGl0ZTsKICBzdHJva2Utd2lkdGg6IDI7CiAgb3BhY2l0eTogMS4wOwp9CgouZ2FsbGVyeS12aXogLmltYWdlLW1hcC5tb2RlLWNyZWF0ZSB7CiAgY3Vyc29yOiBjcm9zc2hhaXI7Cn0K","base64"),u=o.template(n("PGRpdiBjbGFzcz0iZ2FsbGVyeS12aXoiPgogICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJnYWxsZXJ5LWNvbnRhaW5lciI+CiAgICAgICAgICAgIDwlIF8uZWFjaChpbWFnZXMsIGZ1bmN0aW9uKGkpIHsgJT4gIDxkaXYgY2xhc3M9ImdhbGxlcnktdGh1bWJuYWlsIj48aW1nIHNyYz0iPCU9IHV0aWxzLmdldFRodW1ibmFpbChpKSAlPiI+PC9kaXY+IDwlIH0pOyAlPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJpbWFnZS1jb250YWluZXIiPgoKICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4K","base64")),l=t("lightning-client-utils"),c=r.extend({currentImage:0,init:function(){this.images=this.images.map(l.cleanImageURL),this.$el=a(this.el),this.render()},css:s,render:function(){var t=u({images:this.images,utils:l,currentImage:this.currentImage});this.$el.html(t);var e=this;this.$el.find(".gallery-thumbnail").unbind().click(function(){e.setImage(e.$el.find(".gallery-thumbnail").index(this))}),this.imageViz=new i(this.selector+" .image-container",[],[this.images[0]],{width:this.width||400}),this.imageViz.on("image:loaded",function(){e.emit("image:loaded")})},formatData:function(t){return t},addImage:function(t){this.images.push(t),this.$el.find(".gallery-container").append('<div class="gallery-thumbnail"><img src="'+imageData+'_small" /></div>')},setImage:function(t){this.imageViz.setImage(this.images[t])},updateData:function(t){this.images=t,this.render()},appendData:function(t){o.isArray(t)?o.each(t,function(t){this.addImage(t)}):this.addImage(t)}});e.exports=c}).call(this,t("buffer").Buffer)},{buffer:1,jquery:80,"lightning-client-utils":81,"lightning-image":95,"lightning-visualization":112,lodash:394}],117:[function(t,n,r){var i=function(){function t(t,e){return t.x*e.x+t.y*e.y}function n(t){return{x:C[t.target].x-C[t.source].x,y:C[t.target].y-C[t.source].y}}function r(t){return Math.sqrt(Math.pow(C[t.source].x-C[t.target].x,2)+Math.pow(C[t.source].y-C[t.target].y,2))}function i(t){return Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2));
}function o(t){var e=(C[t.source].x+C[t.target].x)/2,n=(C[t.source].y+C[t.target].y)/2;return{x:e,y:n}}function a(t){for(var e=0,n=1;n<S[t].length;n++){var r=s(S[t][n],S[t][n-1]);e+=r}return e}function s(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function u(t,e){var n=Math.sqrt((e.target.x-e.source.x)*(e.target.x-e.source.x)+(e.target.y-e.source.y)*(e.target.y-e.source.y)),r=((e.source.y-t.y)*(e.source.y-e.target.y)-(e.source.x-t.x)*(e.target.x-e.source.x))/(n*n);return{x:e.source.x+r*(e.target.x-e.source.x),y:e.source.y+r*(e.target.y-e.source.y)}}function l(){for(var t=0;t<E.length;t++)1==D?S[t]=[]:(S[t]=[],S[t].push(C[E[t].source]),S[t].push(C[E[t].target]))}function c(){for(var t=0;t<E.length;t++)T[t]=[]}function h(t){for(var e=[],n=0;n<t.length;n++)C[t[n].source].x!=C[t[n].target].x&&C[t[n].source].y!=C[t[n].target].y&&e.push(t[n]);return e}function f(t,e,n){var r=S[t][e-1],i=S[t][e+1],o=S[t][e],a=r.x-o.x+i.x-o.x,s=r.y-o.y+i.y-o.y;return a*=n,s*=n,{x:a,y:s}}function p(t,e,n){var r={x:0,y:0},o=T[t];window.sbd=S;for(var a=0;a<o.length;a++){var s={x:S[o[a]][e].x-S[t][e].x,y:S[o[a]][e].y-S[t][e].y};if(Math.abs(s.x)>R||Math.abs(s.y)>R){var u=1/Math.pow(i({source:S[o[a]][e],target:S[t][e]}),1);r.x+=s.x*u,r.y+=s.y*u}}return r}function d(t,e,n){for(var i=L/(r(E[t])*(e+1)),o=[{x:0,y:0}],a=1;e+1>a;a++){var s={x:0,y:0};spring_force=f(t,a,i),electrostatic_force=p(t,a,n),s.x=n*(spring_force.x+electrostatic_force.x),s.y=n*(spring_force.y+electrostatic_force.y),o.push(s)}return o.push({x:0,y:0}),o}function m(t){for(var e=0;e<E.length;e++)if(1==t)S[e].push(C[E[e].source]),S[e].push(o(E[e])),S[e].push(C[E[e].target]);else{var n=a(e),r=n/(t+1),i=r,u=[];u.push(C[E[e].source]);for(var l=1;l<S[e].length;l++){for(var c=s(S[e][l],S[e][l-1]);c>i;){var h=i/c,f=S[e][l-1].x,p=S[e][l-1].y;f+=h*(S[e][l].x-S[e][l-1].x),p+=h*(S[e][l].y-S[e][l-1].y),u.push({x:f,y:p}),c-=i,i=r}i-=c}u.push(C[E[e].target]),S[e]=u}}function g(e,i){var o=Math.abs(t(n(e),n(i))/(r(e)*r(i)));return o}function y(t,e){var n=(r(t)+r(e))/2,i=2/(n/Math.min(r(t),r(e))+Math.max(r(t),r(e))/n);return i}function v(t,e){var n=(r(t)+r(e))/2,i={x:(C[t.source].x+C[t.target].x)/2,y:(C[t.source].y+C[t.target].y)/2},o={x:(C[e.source].x+C[e.target].x)/2,y:(C[e.source].y+C[e.target].y)/2},a=n/(n+s(i,o));return a}function b(t,e){var n=u(C[e.source],{source:C[t.source],target:C[t.target]}),r=u(C[e.target],{source:C[t.source],target:C[t.target]}),i={x:(n.x+r.x)/2,y:(n.y+r.y)/2},o={x:(C[t.source].x+C[t.target].x)/2,y:(C[t.source].y+C[t.target].y)/2},a=Math.max(0,1-2*s(o,i)/s(n,r));return a}function _(t,e){return Math.min(b(t,e),b(e,t))}function x(t,e){var n=g(t,e)*y(t,e)*v(t,e)*_(t,e);return n}function w(t,e){return x(t,e)>=O}function M(){for(e=0;e<E.length-1;e++)for(oe=e+1;oe<E.length;oe++)e!=oe&&w(E[e],E[oe])&&(T[e].push(oe),T[oe].push(e))}var C={},E=[],T=[],S=[],L=.1,A=.1,D=1,I=2,k=4,N=90,B=.333333,O=.6,R=1e-6,F=function(){var t=A,e=N,n=D;l(),c(),m(n),M();for(var r=0;k>r;r++){for(var i=0;e>i;i++){for(var o=[],a=0;a<E.length;a++)o[a]=d(a,n,t);for(var s=0;s<E.length;s++)for(var u=0;n+1>u;u++)S[s][u].x+=o[s][u].x,S[s][u].y+=o[s][u].y}t/=2,n=2*n,e=B*e,m(n)}return S};return F.nodes=function(t){return 0==arguments.length?C:(C=t,F)},F.edges=function(t){return 0==arguments.length?E:(E=h(t),F)},F.bundling_stiffness=function(t){return 0==arguments.length?L:(L=t,F)},F.step_size=function(t){return 0==arguments.length?A:(A=t,F)},F.cycles=function(t){return 0==arguments.length?k:(k=t,F)},F.iterations=function(t){return 0==arguments.length?N:(N=t,F)},F.iterations_rate=function(t){return 0==arguments.length?B:(B=t,F)},F.subdivision_points_seed=function(t){return 0==arguments.length?P:(P=t,F)},F.subdivision_rate=function(t){return 0==arguments.length?I:(I=t,F)},F.compatibility_threshold=function(t){return 0==arguments.length?O:(O=t,F)},F};n.exports=i},{}],118:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":142,dup:6}],119:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],120:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:121,colorbrewer:127,"d3-color":128,"d3-scale":129,dup:10,lodash:130,superagent:131}],121:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":123,"color-string":124,dup:11}],122:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],123:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":122,dup:13}],124:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":125,dup:14}],125:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],126:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],127:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":126,dup:8}],128:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],129:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],130:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],131:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:132,reduce:133}],132:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],133:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],134:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":141,dup:6}],135:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{"./src":136,dup:30}],136:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],137:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:138,"insert-css":139,lodash:394,qwery:140}],138:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],139:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],140:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],141:[function(t,e,n){arguments[4][77][0].apply(n,arguments)},{buffer:1,d3:119,"d3-multiaxis-zoom":135,dup:77,"lightning-client-utils":120,"lightning-visualization":137,lodash:394}],142:[function(t,e,n){"use strict";var r=t("lightning-graph"),i=t("d3"),o=t("lightning-client-utils"),a=t("lodash"),s=t("../deps/force-edge-bundling"),u=r.extend({formatData:function(t){var e,n,r=o.getColorFromData(t),a=t.size||[],u=t.name||[],l=this.styles;t.nodes=t.nodes.map(function(i,o){return i.x=i[0],i.y=i[1],i.i=o,i.n=u[o],e=r.length>1?r[o]:r[0],n=a.length>1?a[o]:a[0],i.c=e?e:l.color,i.k=e?e.darker(.75):l.stroke,i.s=n?n:l.size,i.l=(t.labels||[]).length>o?t.labels[o]:null,i}),t.links=t.links.map(function(t){return t.source=t[0],t.target=t[1],t.value=t[2],t});var c=i.mean(t.nodes,function(t){return Math.abs(t.x)}),h=i.mean(t.nodes,function(t){return Math.abs(t.y)}),f=(c+h)/2,p=s().nodes(t.nodes).edges(t.links).step_size(f/1e3);return t.links=p(),t},getSource:function(t){return t[0].i},getTarget:function(t){return t[t.length-1].i},getLine:function(t){var e=this;return t=a.map(t,function(t){return[e.x(t.x),e.y(t.y)]})}});e.exports=u},{"../deps/force-edge-bundling":117,d3:119,"lightning-client-utils":120,"lightning-graph":134,lodash:394}],143:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":165,dup:6}],144:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{"./src":145,dup:30}],145:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],146:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],147:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:148,colorbrewer:154,"d3-color":155,"d3-scale":156,dup:10,lodash:157,superagent:158}],148:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":150,"color-string":151,dup:11}],149:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],150:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":149,dup:13}],151:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":152,dup:14}],152:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],153:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],154:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":153,dup:8}],155:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],156:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],157:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],158:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:159,reduce:160}],159:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],160:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],161:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:162,"insert-css":163,lodash:394,qwery:164}],162:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],163:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],164:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],165:[function(t,e,n){arguments[4][77][0].apply(n,arguments)},{buffer:1,d3:146,"d3-multiaxis-zoom":144,dup:77,"lightning-client-utils":147,"lightning-visualization":161,lodash:394}],166:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":200,dup:6}],167:[function(t,e,n){!function(t){function e(t){return"function"==typeof t}function n(t){return t===Object(t)}function r(t,n){var r=!1;return"string"==typeof n?n=[n]:"[object Array]"===Object.prototype.toString.call(n)?0===n.length&&(r=!0):r=!0,e(t)&&(r?t(r,[]):t(r,n)),r}function i(t,n){var r;if(e(a[t])){try{r=a[t](n)}catch(i){r=["Problem with custom definition for '"+t+": "+i]}if("string"==typeof result&&(r=[r]),"[object Array]"===Object.prototype.toString.call(r))return r}return[]}function o(e,n){var i=[];return Array.isArray(e)?(e.forEach(function(e,n){t.isPosition(e,function(t,e){t||(e[0]="at "+n+": ".concat(e[0]),i=i.concat(e))})}),e[0].toString()!==e[e.length-1].toString()&&i.push("The first and last positions must be equivalent"),e.length<4&&i.push("coordinates must have at least four positions")):i.push("coordinates must be an array"),r(n,i)}var a={};t.define=function(t,n){return t in l&&e(n)?(a[t]=n,!0):!1},t.isPosition=function(t,e){var n=[];return Array.isArray(t)?t.length<=1&&n.push("Position must be at least two elements"):n.push("Position must be an array"),n=n.concat(i("Position",t)),r(e,n)},t.isGeoJSONObject=t.valid=function(t,e){if(!n(t))return r(e,["must be a JSON Object"]);var o=[];if("type"in t){if(s[t.type])return s[t.type](t,e);if(u[t.type])return u[t.type](t,e);o.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else o.push("must have a member with the name 'type'");return o=o.concat(i("GeoJSONObject",t)),r(e,o)},t.isGeometryObject=function(t,e){if(!n(t))return r(e,["must be a JSON Object"]);var o=[];if("type"in t){if(u[t.type])return u[t.type](t,e);o.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else o.push("must have a member with the name 'type'");return o=o.concat(i("GeometryObject",t)),r(e,o)},t.isPoint=function(e,o){if(!n(e))return r(o,["must be a JSON Object"]);var a=[];return"bbox"in e&&t.isBbox(e.bbox,function(t,e){t||(a=a.concat(e))}),"type"in e?"Point"!==e.type&&a.push("type must be 'Point'"):a.push("must have a member with the name 'type'"),"coordinates"in e?t.isPosition(e.coordinates,function(t,e){t||a.push("Coordinates must be a single position")}):a.push("must have a member with the name 'coordinates'"),a=a.concat(i("Point",e)),r(o,a)},t.isMultiPointCoor=function(e,n){var i=[];return Array.isArray(e)?e.forEach(function(e,n){t.isPosition(e,function(t,e){t||(e[0]="at "+n+": ".concat(e[0]),i=i.concat(e))})}):i.push("coordinates must be an array"),r(n,i)},t.isMultiPoint=function(e,o){if(!n(e))return r(o,["must be a JSON Object"]);var a=[];return"bbox"in e&&t.isBbox(e.bbox,function(t,e){t||(a=a.concat(e))}),"type"in e?"MultiPoint"!==e.type&&a.push("type must be 'MultiPoint'"):a.push("must have a member with the name 'type'"),"coordinates"in e?t.isMultiPointCoor(e.coordinates,function(t,e){t||(a=a.concat(e))}):a.push("must have a member with the name 'coordinates'"),a=a.concat(i("MultiPoint",e)),r(o,a)},t.isLineStringCoor=function(e,n){var i=[];return Array.isArray(e)?e.length>1?e.forEach(function(e,n){t.isPosition(e,function(t,e){t||(e[0]="at "+n+": ".concat(e[0]),i=i.concat(e))})}):i.push("coordinates must have at least two elements"):i.push("coordinates must be an array"),r(n,i)},t.isLineString=function(e,o){if(!n(e))return r(o,["must be a JSON Object"]);var a=[];return"bbox"in e&&t.isBbox(e.bbox,function(t,e){t||(a=a.concat(e))}),"type"in e?"LineString"!==e.type&&a.push("type must be 'LineString'"):a.push("must have a member with the name 'type'"),"coordinates"in e?t.isLineStringCoor(e.coordinates,function(t,e){t||(a=a.concat(e))}):a.push("must have a member with the name 'coordinates'"),a=a.concat(i("LineString",e)),r(o,a)},t.isMultiLineStringCoor=function(e,n){var i=[];Array.isArray(e)?e.forEach(function(e,n){t.isLineStringCoor(e,function(t,e){t||(e[0]="at "+n+": ".concat(e[0]),i=i.concat(e))})}):i.push("coordinates must be an array"),r(n,i)},t.isMultiLineString=function(e,o){if(!n(e))return r(o,["must be a JSON Object"]);var a=[];return"bbox"in e&&t.isBbox(e.bbox,function(t,e){t||(a=a.concat(e))}),"type"in e?"MultiLineString"!==e.type&&a.push("type must be 'MultiLineString'"):a.push("must have a member with the name 'type'"),"coordinates"in e?t.isMultiLineStringCoor(e.coordinates,function(t,e){t||(a=a.concat(e))}):a.push("must have a member with the name 'coordinates'"),a=a.concat(i("MultiPoint",e)),r(o,a)},t.isPolygonCoor=function(t,e){var n=[];return Array.isArray(t)?t.forEach(function(t,e){o(t,function(t,r){t||(r[0]="at "+e+": ".concat(r[0]),n=n.concat(r))})}):n.push("coordinates must be an array"),r(e,n)},t.isPolygon=function(e,o){if(!n(e))return r(o,["must be a JSON Object"]);var a=[];return"bbox"in e&&t.isBbox(e.bbox,function(t,e){t||(a=a.concat(e))}),"type"in e?"Polygon"!==e.type&&a.push("type must be 'Polygon'"):a.push("must have a member with the name 'type'"),"coordinates"in e?t.isPolygonCoor(e.coordinates,function(t,e){t||(a=a.concat(e))}):a.push("must have a member with the name 'coordinates'"),a=a.concat(i("Polygon",e)),r(o,a)},t.isMultiPolygonCoor=function(e,n){var i=[];Array.isArray(e)?e.forEach(function(e,n){t.isPolygonCoor(e,function(t,e){t||(e[0]="at "+n+": ".concat(e[0]),i=i.concat(e))})}):i.push("coordinates must be an array"),r(n,i)},t.isMultiPolygon=function(e,o){if(!n(e))return r(o,["must be a JSON Object"]);var a=[];return"bbox"in e&&t.isBbox(e.bbox,function(t,e){t||(a=a.concat(e))}),"type"in e?"MultiPolygon"!==e.type&&a.push("type must be 'MultiPolygon'"):a.push("must have a member with the name 'type'"),"coordinates"in e?t.isMultiPolygonCoor(e.coordinates,function(t,e){t||(a=a.concat(e))}):a.push("must have a member with the name 'coordinates'"),a=a.concat(i("MultiPolygon",e)),r(o,a)},t.isGeometryCollection=function(e,o){if(!n(e))return r(o,["must be a JSON Object"]);var a=[];return"bbox"in e&&t.isBbox(e.bbox,function(t,e){t||(a=a.concat(e))}),"type"in e?"GeometryCollection"!==e.type&&a.push("type must be 'GeometryCollection'"):a.push("must have a member with the name 'type'"),"geometries"in e?Array.isArray(e.geometries)?e.geometries.forEach(function(e,n){t.isGeometryObject(e,function(t,e){t||(e[0]="at "+n+": ".concat(e[0]),a=a.concat(e))})}):a.push("'geometries' must be an array"):a.push("must have a member with the name 'geometries'"),a=a.concat(i("GeometryCollection",e)),r(o,a)},t.isFeature=function(e,o){if(!n(e))return r(o,["must be a JSON Object"]);var a=[];return"bbox"in e&&t.isBbox(e.bbox,function(t,e){t||(a=a.concat(e))}),"type"in e?"Feature"!==e.type&&a.push("type must be 'feature'"):a.push("must have a member with the name 'type'"),"properties"in e||a.push("must have a member with the name 'properties'"),"geometry"in e?null!==e.geometry&&t.isGeometryObject(e.geometry,function(t,e){t||(a=a.concat(e))}):a.push("must have a member with the name 'geometry'"),a=a.concat(i("Feature",e)),r(o,a)},t.isFeatureCollection=function(e,o){if(!n(e))return r(o,["must be a JSON Object"]);var a=[];return"bbox"in e&&t.isBbox(e.bbox,function(t,e){t||(a=a.concat(e))}),"type"in e?"FeatureCollection"!==e.type&&a.push("type must be 'FeatureCollection'"):a.push("must have a member with the name 'type'"),"features"in e?Array.isArray(e.features)?e.features.forEach(function(e,n){t.isFeature(e,function(t,e){t||(e[0]="at "+n+": ".concat(e[0]),a=a.concat(e))})}):a.push("'features' must be an array"):a.push("must have a member with the name 'features'"),a=a.concat(i("FeatureCollection",e)),r(o,a)},t.isBbox=function(t,e){var n=[];Array.isArray(t)?t.length%2!==0&&n.push("bbox, must be a 2*n array"):n.push("bbox must be an array"),n=n.concat(i("Bbox",t)),r(e,n)};var s={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection},u={Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection},l={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection,Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection,Bbox:t.isBox,Position:t.isPosition,GeoJSON:t.isGeoJSONObject,GeometryObject:t.isGeometryObject};t.all_types=l}("undefined"==typeof n?this.GJV={}:n)},{}],168:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],169:[function(t,e,n){"use strict";var r=Math,i=function(t,e){var n=this.convertLatLngs(t);this.points=n.points,this.maxDistance=isFinite(e)?e:n.maxDistance+1};i.prototype={points:[],maxDistance:0,convertLatLngs:function(t){var e=0,n=t.map(function(n,r){if(n.x=n.lng,n.y=this.lat2y(n),t[r-1]){var i=n.distanceTo(t[r-1]);i>e&&(e=i)}return n}.bind(this));return{points:n,maxDistance:e}},getLatLngs:function(){if(this.length<=3)return this.points;var t=this.points.slice().sort(function(t,e){return t.y-e.y}),e=[],n=t[0],r=n,i={x:r.x,y:r.y-1};e.push(n);for(var o,a=0,s=function(t,e){return this.getAngle(r,i,e)-this.getAngle(r,i,t)}.bind(this);;){a++;for(var u=this.points.slice().sort(s),l=0,c=u.length;c>l;l++)if(r.distanceTo(u[l])<this.maxDistance&&!this.isIntersecting(e,u[l])){o=u[l];break}if(!o)return this.points;if(o===r)return this.points;if(e.push(o),o===n)return e;if(i=r,r=o,o=void 0,a>1e3)return this.points}},isIntersecting:function(t,e){for(var n=1,r=t.length-1;r>n;n++)if(this.intersect(t[n-1],t[n],t[r],e))return!0;return!1},intersect:function(t,e,n,r){return t.x===n.x&&t.y===n.y||e.x===r.x&&e.y===r.y||t.x===r.x&&t.y===r.y||e.x===n.x&&e.y===n.y?!1:this.ccw(t,e,n)*this.ccw(t,e,r)<=0&&this.ccw(n,r,t)*this.ccw(n,r,e)<=0},lat2y:function(t){return 180/r.PI*r.log(r.tan(r.PI/4+t.lat*(r.PI/180)/2))},ccw:function(t,e,n){var r=1e-13,i=e.x-t.x,o=e.y-t.y,a=n.x-t.x,s=n.y-t.y,u=i*s-o*a;return u>r?1:-r>u?-1:-r>i*a||-r>o*s?-1:a*a+s*s+r>i*i+o*o?1:0},getAngle:function(t,e,n){if(n.x===t.x&&n.y===t.y)return-9e3;if(n.x===e.x&&n.y===e.y)return-360;var i,o={x:t.x-e.x,y:t.y-e.y},a={x:n.x-t.x,y:n.y-t.y},s=o.x*a.y-a.x*o.y,u=o.x*a.x+o.y*a.y;return 0===u?(s>0&&(i=90),0>s&&(i=-90)):(i=180*r.atan(s/u)/r.PI,0>u&&(s>=0&&(i+=180),0>s&&(i-=180))),360===i&&(i=0),180-i}},e.exports=i},{}],170:[function(t,e,n){"use strict";var r=t("d3"),i=t("js-clipper"),o=t("./Hull"),a=t("./Options"),s=t("./Memory"),u=t("./Utilities");e.exports=function(t){t.freeDraw=function(e){return new t.FreeDraw(e)},t.FreeDraw=t.FeatureGroup.extend({map:null,state:[],svg:{},element:{},creating:!1,lineFunction:function(){},latLngs:[],options:{},lastNotification:"",markerLayer:t.layerGroup(),hull:{},memory:{},polygons:[],edges:[],mode:1,polygonCount:0,fromPoint:{x:0,y:0},movingEdge:null,boundaryUpdateRequired:!1,silenced:!1,RECOUNT_TIMEOUT:1,initialize:function(e){"undefined"==typeof r&&t.FreeDraw.Throw("D3 is a required library","http://d3js.org/"),"undefined"==typeof i&&t.FreeDraw.Throw("JSClipper is a required library","http://sourceforge.net/p/jsclipper/wiki/Home%206/"),this.fromPoint={x:0,y:0},this.polygons=[],this.edges=[],this.hull={},this.latLngs=[],e=e||{},this.memory=new s(t),this.options=new a(t),this.hull=new o(t),this.utilities=this.Utilities=u,this.element=e.element||null,this.setMode(e.mode||this.mode),this.options.setPathClipperPadding(100),t.FreeDraw.Polygon=t.Polygon.extend({options:{className:"leaflet-freedraw-polygon"}})},recreateEdges:function(t){return this.edges=this.edges.filter(function(e){return e._freedraw.polygon!==t?!0:void this.map.removeLayer(e)}.bind(this)),this.createEdges(t)},resurrectOrphans:function(){var t=function(t){setTimeout(function(){this.silently(function(){this.recreateEdges(t)}.bind(this))}.bind(this))},e=this.getPolygons(!0);e.forEach(function(e){e&&e._parts[0]&&t.call(this,e)}.bind(this)),setTimeout(function(){this.notifyBoundaries()}.bind(this))},onAdd:function(e){e.on("zoomend",function(){setTimeout(this.resurrectOrphans.bind(this))}.bind(this)),this.map=e,this.mode=this.mode||t.FreeDraw.MODES.VIEW,this.element||(this.element=e._container),this.lineFunction=r.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear"),this.createD3(),this._attachMouseDown(),this._attachMouseMove(),this._attachMouseUpLeave(),console.log("ON ADD"),console.log(this.mode),this.setMode(this.mode)},onRemove:function(){this._clearPolygons()},silently:function(t){this.silenced=!0,t.apply(this),this.silenced=!1},cancelAction:function(){this.creating=!1,this.movingEdge=null,this.destroyD3().createD3()},setMapPermissions:function(t){this.map.dragging[t](),this.map.touchZoom[t](),this.map.doubleClickZoom[t](),this.map.scrollWheelZoom[t]()},setMode:function(e){if(console.log("setting mode"),console.log(e),e=0===e?t.FreeDraw.MODES.VIEW:e,this.mode=e,this.fire("mode",{mode:e}),this.map){var n=!!(e&t.FreeDraw.MODES.CREATE),r=n?"disable":"enable";this.map.dragging[r](),!this.boundaryUpdateRequired||this.mode&t.FreeDraw.MODES.EDIT||(this.notifyBoundaries(),this.boundaryUpdateRequired=!1,this.options.memoriseEachEdge||this.memory.save(this.getPolygons(!0))),function(t,n,r,i){i(n,"mode-create"),i(n,"mode-edit"),i(n,"mode-delete"),i(n,"mode-view"),i(n,"mode-append"),e&t.CREATE&&r(n,"mode-create"),e&t.EDIT&&r(n,"mode-edit"),e&t.DELETE&&r(n,"mode-delete"),e&t.VIEW&&r(n,"mode-view"),e&t.APPEND&&r(n,"mode-append")}(t.FreeDraw.MODES,this.map._container,t.DomUtil.addClass,t.DomUtil.removeClass)}},unsetMode:function(t){this.setMode(this.mode^t)},createD3:function(){this.svg=r.select(this.options.element||this.element).append("svg").attr("class",this.options.svgClassName).attr("width",200).attr("height",200)},destroyD3:function(){return this.svg.remove(),this.svg={},this},latLngsToClipperPoints:function(t){return t.map(function(t){var e=this.map.latLngToLayerPoint(t);return{X:e.x,Y:e.y}}.bind(this))},clipperPolygonsToLatLngs:function(e){var n=[];return e.forEach(function(e){e.forEach(function(e){e=t.point(e.X,e.Y);var r=this.map.layerPointToLatLng(e);n.push(r)}.bind(this))}.bind(this)),n},uniqueLatLngs:function(t){var e=[],n=[];return t.forEach(function(t){var r=JSON.stringify(t);-1===e.indexOf(r)&&(e.push(r),n.push(t))}),n},handlePolygonClick:function(e,n){var r=[],i=this.map.mouseEventToContainerPoint(n.originalEvent),o=1/0,a=new t.Point,s=new t.Point,u=[];e._latlngs.forEach(function(t){u.push(this.map.latLngToContainerPoint(t))}.bind(this)),u.forEach(function(e,n){var r=e,l=u[n+1]||u[0],c=t.LineUtil.pointToSegmentDistance(i,r,l);o>c&&(o=c,a=r,s=l)}.bind(this)),u.forEach(function(t,e){var n=u[e+1]||u[0];return t===a&&n===s?(r.push(this.map.containerPointToLatLng(t)),void r.push(this.map.containerPointToLatLng(i))):void r.push(this.map.containerPointToLatLng(t))}.bind(this));var l=this.options.elbowDistance,c=function(){this.mode&t.FreeDraw.MODES.APPEND&&(e.setLatLngs(r),this.destroyEdges(e),this.createEdges(e))}.bind(this);if(this.mode&t.FreeDraw.MODES.APPEND&&!(this.mode&t.FreeDraw.MODES.DELETE)){if(this.options.onlyInDistance&&o>l)return;return void c()}return this.mode&t.FreeDraw.MODES.DELETE&&!(this.mode&t.FreeDraw.MODES.APPEND)?void this.destroyPolygon(e):o>l&&this.mode&t.FreeDraw.MODES.DELETE?void this.destroyPolygon(e):void c()},createPolygon:function(e,n){if(!this.options.multiplePolygons&&this.getPolygons(!0).length>=1){if(!this.options.destroyPrevious)return this.destroyD3().createD3(),!1;this.silently(this.clearPolygons)}if(this.destroyD3().createD3(),this.options.simplifyPolygon&&(e=function(){console.log(i),console.log(this.latLngsToClipperPoints);var t=i.Clipper.CleanPolygon(this.latLngsToClipperPoints(e),1.1),n=i.Clipper.SimplifyPolygon(t,i.PolyFillType.pftNonZero);return this.clipperPolygonsToLatLngs(n)}.apply(this)),e.length<=3&&!n)return!1;var r=new t.FreeDraw.Polygon(e,{smoothFactor:this.options.smoothFactor});return r.on("click",function(t){this.handlePolygonClick(r,t)}.bind(this)),r.addTo(this.map),this.polygons.push(r),this.createEdges(r),function(){!this.silenced&&r._parts[0]&&(r._latlngs=[],r._parts[0].forEach(function(t){r._latlngs.push(this.map.layerPointToLatLng(t))}.bind(this)))}.bind(this)(),this.options.attemptMerge&&!this.silenced&&this.mergePolygons(),this.silenced||(this.notifyBoundaries(),this.memory.save(this.getPolygons(!0))),r},predefinedPolygon:function(t){return this.createPolygon(t,!0)},undo:function(){this._modifyState("undo")},redo:function(){this._modifyState("redo")},_modifyState:function(t){this.silently(this._clearPolygons.bind(this));var e=this.memory[t]();e.forEach(function(t){this.silently(function(){this.createPolygon(t)}.bind(this))}.bind(this)),this.notifyBoundaries()},getPolygons:function(e){var n=[];if(e){if(!this.map)return[];var r="G";for(var i in this.map._layers)if(this.map._layers.hasOwnProperty(i)){var o=this.map._layers[i];o._container&&o._container.tagName.toUpperCase()===r&&o instanceof t.FreeDraw.Polygon&&n.push(o)}}else this.edges.forEach(function(e){-1===n.indexOf(e._freedraw.polygon)&&e._freedraw.polygon instanceof t.FreeDraw.Polygon&&n.push(e._freedraw.polygon)}.bind(this));return n},mergePolygons:function(){var e=function(){var e=this.getPolygons(),n=[];e.forEach(function(t){n.push(this.latLngsToClipperPoints(t._latlngs))}.bind(this));var r=i.Clipper.SimplifyPolygons(n,i.PolyFillType.pftNonZero);this.silently(function(){this._clearPolygons(),r.forEach(function(e){var n=[];e.forEach(function(e){e=t.point(e.X,e.Y),n.push(this.map.layerPointToLatLng(e))}.bind(this)),this.createPolygon(n,!0)}.bind(this))})}.bind(this);e(),e(),this.getPolygons(!0).forEach(this.trimPolygonEdges.bind(this))},destroyPolygon:function(e){this.map.removeLayer(e);var n=this.polygons.indexOf(e);this.polygons.splice(n,1),this.destroyEdges(e),this.silenced||(this.notifyBoundaries(),this.memory.save(this.getPolygons(!0))),this.options.deleteExitMode&&!this.silenced&&this.setMode(this.mode^t.FreeDraw.MODES.DELETE),this.fire("destroy",{index:n})},destroyEdges:function(t){this.edges=this.edges.filter(function(e){return e._freedraw.polygon!==t?!0:void this.map.removeLayer(e)}.bind(this))},clearPolygons:function(){this.silently(this._clearPolygons),this.silenced||(this.notifyBoundaries(),this.memory.save(this.getPolygons(!0)))},_clearPolygons:function(){this.getPolygons().forEach(function(t){this.destroyPolygon(t)}.bind(this)),this.silenced||this.notifyBoundaries()},notifyBoundaries:function(){var t=[];this.getPolygons(!0).forEach(function(e){t.push(e._latlngs)}.bind(this)),function(){t.forEach(function(t){var e=t.length-1;if(e&&t[0]&&t[e]){var n=t[0].lat!==t[e].lat,r=t[0].lng!==t[e].lng;n&&r&&t.push(t[0])}})}.bind(this)(),this.polygonCount=t.length;var e=JSON.stringify(t);this.lastNotification!==e&&(this.lastNotification=e,this.fire("markers",{latLngs:t}),setTimeout(this.emitPolygonCount.bind(this),this.RECOUNT_TIMEOUT))},emitPolygonCount:function(){var t="M0 0",e=this.getPolygons(!0),n=e.every(function(e){var n=e._container.lastChild.getAttribute("d").trim();return n===t});n&&(this.silently(function(){this._clearPolygons(),this.fire("markers",{latLngs:[]}),this.fire("count",{count:this.polygonCount})}.bind(this)),this.polygonCount=0,e.length=0),e.length!==this.polygonCount&&(this.polygonCount=e.length,this.fire("count",{count:this.polygonCount}))},createEdges:function(e){var n=function(t){return t._parts[0]?t._latlngs.map(function(t){return this.map.latLngToLayerPoint(t)}.bind(this)):[]}.bind(this),r=this.uniqueLatLngs(n(e)),i=0;return r?(r.forEach(function(n){var r=t.divIcon({className:this.options.iconClassName}),o=this.map.layerPointToLatLng(n);r=t.marker(o,{icon:r}).addTo(this.map),r._freedraw={polygon:e,polygonId:e._leaflet_id,latLng:r._latlng},this.edges.push(r),i++,r.on("mousedown touchstart",function(t){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),this.movingEdge=t.target}.bind(this))}.bind(this)),i):!1},updatePolygonEdge:function(e,n,r){var i=this.map.containerPointToLatLng(new t.Point(n,r));e.setLatLng(i),e._freedraw.latLng=i;var o=[],a=this.edges.filter(function(t){return o.push(t),t._freedraw.polygon===e._freedraw.polygon});this.edges=o;var s=[];a.forEach(function(t){s.push(t.getLatLng())}),e._freedraw.polygon.setLatLngs(s),e._freedraw.polygon.redraw()},_attachMouseDown:function(){this.map.on("mousedown touchstart",function(e){var n=2;if(e.originalEvent.button!==n){var r=e.originalEvent;this.options.disablePropagation||r.stopPropagation(),r.preventDefault(),this.latLngs=[],this.fromPoint=this.map.latLngToContainerPoint(e.latlng),this.mode&t.FreeDraw.MODES.CREATE&&(this.creating=!0,this.setMapPermissions("disable"))}}.bind(this))},_attachMouseMove:function(){this.map.on("mousemove touchmove",function(t){var e=t.originalEvent;return this.movingEdge?void this._editMouseMove(t):void(this.creating&&this._createMouseMove(e))}.bind(this))},_editMouseMove:function(e){var n=this.map.latLngToContainerPoint(e.latlng),r=this.movingEdge._icon.style;r[t.DomUtil.TRANSFORM]=n,this.updatePolygonEdge(this.movingEdge,n.x,n.y)},_attachMouseUpLeave:function(){var t=function(){return this.movingEdge?(this.options.boundariesAfterEdit?this.boundaryUpdateRequired=!0:this.notifyBoundaries(),this.trimPolygonEdges(this.movingEdge._freedraw.polygon),this.mergePolygons(),this.movingEdge=null,this.options.memoriseEachEdge&&this.memory.save(this.getPolygons(!0)),void setTimeout(this.emitPolygonCount.bind(this),this.RECOUNT_TIMEOUT)):void this._createMouseUp()}.bind(this);this.map.on("mouseup touchend",t);var e=document.getElementsByTagName("body")[0];e.onmouseleave=t},trimPolygonEdges:function(t){var e=[];t&&0!==t._parts.length&&t._parts[0]&&(t._parts[0].forEach(function(t){e.push(this.map.layerPointToLatLng(t))}.bind(this)),t.setLatLngs(e),t.redraw(),this.destroyEdges(t),this.createEdges(t))},_createMouseMove:function(t){var e=this.map.mouseEventToContainerPoint(t),n=this.map.containerPointToLatLng(e),r=[this.fromPoint,{x:e.x,y:e.y}];this.svg.append("path").attr("d",this.lineFunction(r)).attr("class","mouse-line"),this.fromPoint.x=e.x,this.fromPoint.y=e.y,this.latLngs.push(n)},_createMouseUp:function(){if(this.creating&&(this.creating=!1,this.setMapPermissions("enable"),!(this.latLngs.length<=2))){if(this.options.hullAlgorithm){this.hull.setMap(this.map);var e=this.hull[this.options.hullAlgorithm](this.latLngs)}this.latLngs.push(this.latLngs[0]);var n=this.createPolygon(e||this.latLngs);n&&(this.latLngs=[],this.options.createExitMode&&this.setMode(this.mode^t.FreeDraw.MODES.CREATE))}}}),t.FreeDraw.MODES={VIEW:1,CREATE:2,EDIT:4,DELETE:8,APPEND:16,EDIT_APPEND:20,ALL:31},t.FreeDraw.Throw=function(t,e){throw e&&("http://"===e.substr(0,7)||"https://"===e.substr(0,8)?console.error(e):console.error("See: https://github.com/Wildhoney/Leaflet.FreeDraw/blob/master/EXCEPTIONS.md#"+e)),"Leaflet.FreeDraw: "+t+"."}}},{"./Hull":171,"./Memory":172,"./Options":173,"./Utilities":174,d3:176,"js-clipper":178}],171:[function(t,e,n){
"use strict";var r=t("./ConcaveHull"),i=t("graham_scan"),o=function(t){this.L=t};o.prototype={map:null,setMap:function(t){this.map=t},brian3kbGrahamScan:function(t){var e=new i,n=[],r=[],o=[];t.forEach(function(t){r.push(this.map.latLngToLayerPoint(t))}.bind(this)),r.forEach(function(t){e.addPoint(t.x,t.y)}.bind(this));var a=e.getHull();return a.forEach(function(t){n.push(L.point(t.x,t.y))}.bind(this)),n.push(n[0]),n.forEach(function(t){o.push(this.map.layerPointToLatLng([t.x,t.y]))}.bind(this)),o},wildhoneyConcaveHull:function(t){return t.push(t[0]),new r(t).getLatLngs()}},e.exports=o},{"./ConcaveHull":169,graham_scan:177}],172:[function(t,e,n){"use strict";var r=function(t){this.L=t};r.prototype={states:[[]],current:0,save:function(t){this.current++,this.states[this.current]&&this.clearFrom(this.current),this.states[this.current]||(this.states[this.current]=[]),t.forEach(function(t){this.states[this.current].push(t._latlngs)}.bind(this))},undo:function(){return this.current--,this.states[this.current]||this.current++,this.states[this.current]},canUndo:function(){return!!this.states[this.current-1]},redo:function(){return this.current++,this.states[this.current]||this.current--,this.states[this.current]},canRedo:function(){return!!this.states[this.current+1]},clearFrom:function(t){this.states.splice(t)}},e.exports=r},{}],173:[function(t,e,n){"use strict";var r=function(t){this.L=t};r.prototype={multiplePolygons:!0,simplifyPolygon:!0,hullAlgorithm:"wildhoneyConcaveHull",boundariesAfterEdit:!1,createExitMode:!1,attemptMerge:!0,svgClassName:"tracer",smoothFactor:5,iconClassName:"polygon-elbow",deleteExitMode:!1,memoriseEachEdge:!0,destroyPrevious:!1,disablePropagation:!1,elbowDistance:10,onlyInDistance:!1,hullAlgorithms:{"brian3kb/graham_scan_js":{method:"brian3kbGrahamScan",name:"Graham Scan JS",global:"ConvexHullGrahamScan",link:"https://github.com/brian3kb/graham_scan_js"},"Wildhoney/ConcaveHull":{method:"wildhoneyConcaveHull",name:"Concave Hull",global:"ConcaveHull",link:"https://github.com/Wildhoney/ConcaveHull"}},setMemoriseEachEdge:function(t){this.memoriseEachEdge=!!t},addElbowOnlyWithinDistance:function(t){this.onlyInDistance=!!t},setPathClipperPadding:function(t){this.L.Path.CLIP_PADDING=t},disableStopPropagation:function(){this.disablePropagation=!0},setMaximumDistanceForElbow:function(t){this.elbowDistance=+t},exitModeAfterCreate:function(t){this.createExitMode=!!t},exitModeAfterDelete:function(t){this.deleteExitMode=!!t},destroyPreviousPolygon:function(t){this.destroyPrevious=!!t},allowMultiplePolygons:function(t){this.multiplePolygons=!!t},setSVGClassName:function(t){this.svgClassName=t},setBoundariesAfterEdit:function(t){this.boundariesAfterEdit=!!t},setSmoothFactor:function(t){this.smoothFactor=+t},setIconClassName:function(t){this.iconClassName=t},setHullAlgorithm:function(t){(!t||this.hullAlgorithms.hasOwnProperty(t))&&(t=this.hullAlgorithms[t],this.hullAlgorithm=t.method)}},e.exports=r},{}],174:[function(t,e,n){"use strict";e.exports={getMySQLMultiPolygon:function(t){var e=[];return t.forEach(function(t){var n=[];t.forEach(function(t){n.push(t.lat+" "+t.lng)}),e.push("(("+n.join(",")+"))")}),"MULTIPOLYGON("+e.join(",")+")"},getMySQLPolygons:function(t){var e=[];return t.forEach(function(t){var n=[];t.forEach(function(t){n.push(t.lat+" "+t.lng)}),e.push("POLYGON(("+n.join(",")+"))")}),e}}},{}],175:[function(t,e,n){e.exports=function(e){t("./components/FreeDraw")(e)}},{"./components/FreeDraw":170}],176:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],177:[function(t,e,n){function r(){this.anchorPoint=void 0,this.reverse=!1,this.points=[]}r.prototype={constructor:r,Point:function(t,e){this.x=t,this.y=e},_findPolarAngle:function(t,e){var n=57.295779513082,r=e.x-t.x,i=e.y-t.y;if(0==r&&0==i)return 0;var o=Math.atan2(i,r)*n;return this.reverse?0>=o&&(o+=360):o>=0&&(o+=360),o},addPoint:function(t,e){if(void 0===this.anchorPoint)this.anchorPoint=new this.Point(t,e);else if(this.anchorPoint.y>e||this.anchorPoint.y==e&&this.anchorPoint.x>t)return this.anchorPoint.y=e,this.anchorPoint.x=t,void this.points.unshift(new this.Point(t,e));this.points.push(new this.Point(t,e))},_sortPoints:function(){var t=this;return this.points.sort(function(e,n){var r=t._findPolarAngle(t.anchorPoint,e),i=t._findPolarAngle(t.anchorPoint,n);return i>r?-1:r>i?1:0})},_checkPoints:function(t,e,n){var r,i=this._findPolarAngle(t,e),o=this._findPolarAngle(t,n);return i>o?(r=i-o,!(r>180)):o>i?(r=o-i,r>180):!1},getHull:function(){var t,e,n=[];if(this.reverse=this.points.every(function(t){return t.x<0&&t.y<0}),t=this._sortPoints(),e=t.length,4>e)return t;for(n.push(t.shift(),t.shift());;){var r,i,o;if(n.push(t.shift()),r=n[n.length-3],i=n[n.length-2],o=n[n.length-1],this._checkPoints(r,i,o)&&n.splice(n.length-2,1),0==t.length){if(e==n.length)return n;t=n,e=t.length,n=[],n.push(t.shift(),t.shift())}}}},"function"==typeof define&&define.amd&&define(function(){return r}),"undefined"!=typeof e&&(e.exports=r)},{}],178:[function(t,e,n){"use strict";function r(t,e,n){oe.biginteger_used=1,null!=t&&("number"==typeof t&&"undefined"==typeof e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function i(){return new r(null)}function o(t,e,n,r,i,o){for(;--o>=0;){var a=e*this[t++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i}function a(t,e,n,r,i,o){for(var a=32767&e,s=e>>15;--o>=0;){var u=32767&this[t],l=this[t++]>>15,c=s*u+l*a;u=a*u+((32767&c)<<15)+n[r]+(1073741823&i),i=(u>>>30)+(c>>>15)+s*l+(i>>>30),n[r++]=1073741823&u}return i}function s(t,e,n,r,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var u=16383&this[t],l=this[t++]>>14,c=s*u+l*a;u=a*u+((16383&c)<<14)+n[r]+i,i=(u>>28)+(c>>14)+s*l,n[r++]=268435455&u}return i}function u(t){return ge.charAt(t)}function l(t,e){var n=ye[t.charCodeAt(e)];return null==n?-1:n}function c(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function h(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function f(t){var e=i();return e.fromInt(t),e}function p(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var i=t.length,o=!1,a=0;--i>=0;){var s=8==n?255&t[i]:l(t,i);0>s?"-"==t.charAt(i)&&(o=!0):(o=!1,0==a?this[this.t++]=s:a+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,a+=n,a>=this.DB&&(a-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&r.ZERO.subTo(this,this)}function d(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function m(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-->0)for(s<this.DB&&(n=this[a]>>s)>0&&(i=!0,o=u(n));a>=0;)e>s?(n=(this[a]&(1<<s)-1)<<e-s,n|=this[--a]>>(s+=this.DB-e)):(n=this[a]>>(s-=e)&r,0>=s&&(s+=this.DB,--a)),n>0&&(i=!0),i&&(o+=u(n));return i?o:"0"}function g(){var t=i();return r.ZERO.subTo(this,t),t}function y(){return this.s<0?this.negate():this}function v(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(e=n-t.t,0!=e)return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function b(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function _(){return this.t<=0?0:this.DB*(this.t-1)+b(this[this.t-1]^this.s&this.DM)}function x(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function w(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function M(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;n>=0;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function C(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&o)<<i,e[a-n]=this[a]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}function P(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);i>n;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=0>r?-1:0,-1>r?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()}function E(t,e){var n=this.abs(),i=t.abs(),o=n.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+n.t]=n.am(0,i[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&r.ZERO.subTo(e,e)}function T(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function S(t,e,n){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=i());var s=i(),u=this.s,l=t.s,c=this.DB-b(o[o.t-1]);c>0?(o.lShiftTo(c,s),a.lShiftTo(c,n)):(o.copyTo(s),a.copyTo(n));var h=s.t,f=s[h-1];if(0!=f){var p=f*(1<<this.F1)+(h>1?s[h-2]>>this.F2:0),d=this.FV/p,m=(1<<this.F1)/p,g=1<<this.F2,y=n.t,v=y-h,_=null==e?i():e;for(s.dlShiftTo(v,_),n.compareTo(_)>=0&&(n[n.t++]=1,n.subTo(_,n)),r.ONE.dlShiftTo(h,_),_.subTo(s,s);s.t<h;)s[s.t++]=0;for(;--v>=0;){var x=n[--y]==f?this.DM:Math.floor(n[y]*d+(n[y-1]+g)*m);if((n[y]+=s.am(0,x,n,v,0,h))<x)for(s.dlShiftTo(v,_),n.subTo(_,n);n[y]<--x;)n.subTo(_,n)}null!=e&&(n.drShiftTo(h,e),u!=l&&r.ZERO.subTo(e,e)),n.t=h,n.clamp(),c>0&&n.rShiftTo(c,n),0>u&&r.ZERO.subTo(n,n)}}}function L(t){var e=i();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(r.ZERO)>0&&t.subTo(e,e),e}function A(t){this.m=t}function D(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function I(t){return t}function k(t){t.divRemTo(this.m,null,t)}function N(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function B(t,e){t.squareTo(e),this.reduce(e)}function O(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function R(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function F(t){var e=i();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(r.ZERO)>0&&this.m.subTo(e,e),e}function U(t){var e=i();return t.copyTo(e),this.reduce(e),e}function z(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function V(t,e){t.squareTo(e),this.reduce(e)}function G(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function W(){return 0==(this.t>0?1&this[0]:this.s)}function H(t,e){if(t>4294967295||1>t)return r.ONE;var n=i(),o=i(),a=e.convert(this),s=b(t)-1;for(a.copyTo(n);--s>=0;)if(e.sqrTo(n,o),(t&1<<s)>0)e.mulTo(o,a,n);else{var u=n;n=o,o=u}return e.revert(n)}function j(t,e){var n;return n=256>t||e.isEven()?new A(e):new R(e),this.exp(t,n)}function X(){var t=i();return this.copyTo(t),t}function Y(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function q(){return 0==this.t?this.s:this[0]<<24>>24}function Z(){return 0==this.t?this.s:this[0]<<16>>16}function K(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function J(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=f(n),o=i(),a=i(),s="";for(this.divRemTo(r,o,a);o.signum()>0;)s=(n+a.intValue()).toString(t).substr(1)+s,o.divRemTo(r,o,a);return a.intValue().toString(t)+s}function $(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),i=Math.pow(e,n),o=!1,a=0,s=0,u=0;u<t.length;++u){var c=l(t,u);0>c?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(s=e*s+c,++a>=n&&(this.dMultiply(i),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),o&&r.ZERO.subTo(this,this)}function tt(t,e,n){if("number"==typeof e)if(2>t)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(r.ONE.shiftLeft(t-1),ut,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(r.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=(t>>3)+1,e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function et(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-->0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)8>r?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,0>=r&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function nt(t){return 0==this.compareTo(t)}function rt(t){return this.compareTo(t)<0?this:t}function it(t){return this.compareTo(t)>0?this:t}function ot(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;o>r;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function at(t,e){return t&e}function st(t){var e=i();return this.bitwiseTo(t,at,e),e}function ut(t,e){return t|e}function lt(t){var e=i();return this.bitwiseTo(t,ut,e),e}function ct(t,e){return t^e}function ht(t){var e=i();return this.bitwiseTo(t,ct,e),e}function ft(t,e){return t&~e}function pt(t){var e=i();return this.bitwiseTo(t,ft,e),e}function dt(){for(var t=i(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function mt(t){var e=i();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function gt(t){var e=i();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function yt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function vt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+yt(this[t]);return this.s<0?this.t*this.DB:-1}function bt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function _t(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=bt(this[n]^e);return t}function xt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function wt(t,e){var n=r.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function Mt(t){return this.changeBit(t,ut)}function Ct(t){return this.changeBit(t,ft)}function Pt(t){return this.changeBit(t,ct)}function Et(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);i>n;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=0>r?-1:0,r>0?e[n++]=r:-1>r&&(e[n++]=this.DV+r),e.t=n,e.clamp()}function Tt(t){var e=i();return this.addTo(t,e),e}function St(t){var e=i();return this.subTo(t,e),e}function Lt(t){var e=i();return this.multiplyTo(t,e),e}function At(){var t=i();return this.squareTo(t),t}function Dt(t){var e=i();return this.divRemTo(t,e,null),e}function It(t){var e=i();return this.divRemTo(t,null,e),e}function kt(t){var e=i(),n=i();return this.divRemTo(t,e,n),new Array(e,n)}function Nt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Bt(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Ot(){}function Rt(t){return t}function Ft(t,e,n){t.multiplyTo(e,n)}function Ut(t,e){t.squareTo(e)}function zt(t){return this.exp(t,new Ot)}function Vt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;i>r;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(i=Math.min(t.t,e);i>r;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()}function Gt(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function Wt(t){this.r2=i(),this.q3=i(),r.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Ht(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=i();return t.copyTo(e),this.reduce(e),e}function jt(t){return t}function Xt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Yt(t,e){t.squareTo(e),this.reduce(e)}function qt(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Zt(t,e){var n,r,o=t.bitLength(),a=f(1);if(0>=o)return a;n=18>o?1:48>o?3:144>o?4:768>o?5:6,r=8>o?new A(e):e.isEven()?new Wt(e):new R(e);var s=new Array,u=3,l=n-1,c=(1<<n)-1;if(s[1]=r.convert(this),n>1){var h=i();for(r.sqrTo(s[1],h);c>=u;)s[u]=i(),r.mulTo(h,s[u-2],s[u]),u+=2}var p,d,m=t.t-1,g=!0,y=i();for(o=b(t[m])-1;m>=0;){for(o>=l?p=t[m]>>o-l&c:(p=(t[m]&(1<<o+1)-1)<<l-o,m>0&&(p|=t[m-1]>>this.DB+o-l)),u=n;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--m),g)s[p].copyTo(a),g=!1;else{for(;u>1;)r.sqrTo(a,y),r.sqrTo(y,a),u-=2;u>0?r.sqrTo(a,y):(d=a,a=y,y=d),r.mulTo(y,s[p],a)}for(;m>=0&&0==(t[m]&1<<o);)r.sqrTo(a,y),d=a,a=y,y=d,--o<0&&(o=this.DB-1,--m)}return r.revert(a)}function Kt(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(0>o)return e;for(o>i&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function Jt(t){if(0>=t)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function Qt(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return r.ZERO;for(var n=t.clone(),i=this.clone(),o=f(1),a=f(0),s=f(0),u=f(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(i)>=0?(n.subTo(i,n),e&&o.subTo(s,o),a.subTo(u,a)):(i.subTo(n,i),e&&s.subTo(o,s),u.subTo(a,u))}return 0!=i.compareTo(r.ONE)?r.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function $t(t){var e,n=this.abs();if(1==n.t&&n[0]<=ve[ve.length-1]){for(e=0;e<ve.length;++e)if(n[0]==ve[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<ve.length;){for(var r=ve[e],i=e+1;i<ve.length&&be>r;)r*=ve[i++];for(r=n.modInt(r);i>e;)if(r%ve[e++]==0)return!1}return n.millerRabin(t)}function te(t){var e=this.subtract(r.ONE),n=e.getLowestSetBit();if(0>=n)return!1;var o=e.shiftRight(n);t=t+1>>1,t>ve.length&&(t=ve.length);for(var a=i(),s=0;t>s;++s){a.fromInt(ve[Math.floor(Math.random()*ve.length)]);var u=a.modPow(o,this);if(0!=u.compareTo(r.ONE)&&0!=u.compareTo(e)){for(var l=1;l++<n&&0!=u.compareTo(e);)if(u=u.modPowInt(2,this),0==u.compareTo(r.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0}var ee=!1,ne=!1,re=!0,ie=!1,oe={},ae=!1;"undefined"!=typeof e&&e.exports?(e.exports=oe,ae=!0):"undefined"!=typeof document?window.ClipperLib=oe:self.ClipperLib=oe;var se;if(ae){var ue="chrome";se="Netscape"}else{var ue=navigator.userAgent.toString().toLowerCase();se=navigator.appName}var le={};-1!=ue.indexOf("chrome")&&-1==ue.indexOf("chromium")?le.chrome=1:le.chrome=0,-1!=ue.indexOf("chromium")?le.chromium=1:le.chromium=0,-1!=ue.indexOf("safari")&&-1==ue.indexOf("chrome")&&-1==ue.indexOf("chromium")?le.safari=1:le.safari=0,-1!=ue.indexOf("firefox")?le.firefox=1:le.firefox=0,-1!=ue.indexOf("firefox/17")?le.firefox17=1:le.firefox17=0,-1!=ue.indexOf("firefox/15")?le.firefox15=1:le.firefox15=0,-1!=ue.indexOf("firefox/3")?le.firefox3=1:le.firefox3=0,-1!=ue.indexOf("opera")?le.opera=1:le.opera=0,-1!=ue.indexOf("msie 10")?le.msie10=1:le.msie10=0,-1!=ue.indexOf("msie 9")?le.msie9=1:le.msie9=0,-1!=ue.indexOf("msie 8")?le.msie8=1:le.msie8=0,-1!=ue.indexOf("msie 7")?le.msie7=1:le.msie7=0,-1!=ue.indexOf("msie ")?le.msie=1:le.msie=0,oe.biginteger_used=null;var ce,he=0xdeadbeefcafe,fe=15715070==(16777215&he);fe&&"Microsoft Internet Explorer"==se?(r.prototype.am=a,ce=30):fe&&"Netscape"!=se?(r.prototype.am=o,ce=26):(r.prototype.am=s,ce=28),r.prototype.DB=ce,r.prototype.DM=(1<<ce)-1,r.prototype.DV=1<<ce;var pe=52;r.prototype.FV=Math.pow(2,pe),r.prototype.F1=pe-ce,r.prototype.F2=2*ce-pe;var de,me,ge="0123456789abcdefghijklmnopqrstuvwxyz",ye=new Array;for(de="0".charCodeAt(0),me=0;9>=me;++me)ye[de++]=me;for(de="a".charCodeAt(0),me=10;36>me;++me)ye[de++]=me;for(de="A".charCodeAt(0),me=10;36>me;++me)ye[de++]=me;A.prototype.convert=D,A.prototype.revert=I,A.prototype.reduce=k,A.prototype.mulTo=N,A.prototype.sqrTo=B,R.prototype.convert=F,R.prototype.revert=U,R.prototype.reduce=z,R.prototype.mulTo=G,R.prototype.sqrTo=V,r.prototype.copyTo=c,r.prototype.fromInt=h,r.prototype.fromString=p,r.prototype.clamp=d,r.prototype.dlShiftTo=x,r.prototype.drShiftTo=w,r.prototype.lShiftTo=M,r.prototype.rShiftTo=C,r.prototype.subTo=P,r.prototype.multiplyTo=E,r.prototype.squareTo=T,r.prototype.divRemTo=S,r.prototype.invDigit=O,r.prototype.isEven=W,r.prototype.exp=H,r.prototype.toString=m,r.prototype.negate=g,r.prototype.abs=y,r.prototype.compareTo=v,r.prototype.bitLength=_,r.prototype.mod=L,r.prototype.modPowInt=j,r.ZERO=f(0),r.ONE=f(1),Ot.prototype.convert=Rt,Ot.prototype.revert=Rt,Ot.prototype.mulTo=Ft,Ot.prototype.sqrTo=Ut,Wt.prototype.convert=Ht,Wt.prototype.revert=jt,Wt.prototype.reduce=Xt,Wt.prototype.mulTo=qt,Wt.prototype.sqrTo=Yt;var ve=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],be=(1<<26)/ve[ve.length-1];r.prototype.chunkSize=K,r.prototype.toRadix=Q,r.prototype.fromRadix=$,r.prototype.fromNumber=tt,r.prototype.bitwiseTo=ot,r.prototype.changeBit=wt,r.prototype.addTo=Et,r.prototype.dMultiply=Nt,r.prototype.dAddOffset=Bt,r.prototype.multiplyLowerTo=Vt,r.prototype.multiplyUpperTo=Gt,r.prototype.modInt=Jt,r.prototype.millerRabin=te,r.prototype.clone=X,r.prototype.intValue=Y,r.prototype.byteValue=q,r.prototype.shortValue=Z,r.prototype.signum=J,r.prototype.toByteArray=et,r.prototype.equals=nt,r.prototype.min=rt,r.prototype.max=it,r.prototype.and=st,r.prototype.or=lt,r.prototype.xor=ht,r.prototype.andNot=pt,r.prototype.not=dt,r.prototype.shiftLeft=mt,r.prototype.shiftRight=gt,r.prototype.getLowestSetBit=vt,r.prototype.bitCount=_t,r.prototype.testBit=xt,r.prototype.setBit=Mt,r.prototype.clearBit=Ct,r.prototype.flipBit=Pt,r.prototype.add=Tt,r.prototype.subtract=St,r.prototype.multiply=Lt,r.prototype.divide=Dt,r.prototype.remainder=It,r.prototype.divideAndRemainder=kt,r.prototype.modPow=Zt,r.prototype.modInverse=Qt,r.prototype.pow=zt,r.prototype.gcd=Kt,r.prototype.isProbablePrime=$t,r.prototype.square=At;var _e=r;if(_e.prototype.IsNegative=function(){return-1==this.compareTo(_e.ZERO)?!0:!1},_e.op_Equality=function(t,e){return 0==t.compareTo(e)?!0:!1},_e.op_Inequality=function(t,e){return 0!=t.compareTo(e)?!0:!1},_e.op_GreaterThan=function(t,e){return t.compareTo(e)>0?!0:!1},_e.op_LessThan=function(t,e){return t.compareTo(e)<0?!0:!1},_e.op_Addition=function(t,e){return new _e(t).add(new _e(e))},_e.op_Subtraction=function(t,e){return new _e(t).subtract(new _e(e))},_e.Int128Mul=function(t,e){return new _e(t).multiply(new _e(e))},_e.op_Division=function(t,e){return t.divide(e)},_e.prototype.ToDouble=function(){return parseFloat(this.toString())},"undefined"==typeof xe)var xe=function(t,e){var n;if("undefined"==typeof Object.getOwnPropertyNames){for(n in e.prototype)("undefined"==typeof t.prototype[n]||t.prototype[n]==Object.prototype[n])&&(t.prototype[n]=e.prototype[n]);for(n in e)"undefined"==typeof t[n]&&(t[n]=e[n]);t.$baseCtor=e}else{for(var r=Object.getOwnPropertyNames(e.prototype),i=0;i<r.length;i++)"undefined"==typeof Object.getOwnPropertyDescriptor(t.prototype,r[i])&&Object.defineProperty(t.prototype,r[i],Object.getOwnPropertyDescriptor(e.prototype,r[i]));for(n in e)"undefined"==typeof t[n]&&(t[n]=e[n]);t.$baseCtor=e}};oe.Path=function(){return[]},oe.Paths=function(){return[]},oe.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},oe.DoublePoint0=function(){this.X=0,this.Y=0},oe.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},oe.DoublePoint2=function(t,e){this.X=t,this.Y=e},oe.PolyNode=function(){this.m_Parent=null,this.m_polygon=new oe.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},oe.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},oe.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},oe.PolyNode.prototype.Contour=function(){return this.m_polygon},oe.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},oe.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},oe.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},oe.PolyNode.prototype.Childs=function(){return this.m_Childs},oe.PolyNode.prototype.Parent=function(){return this.m_Parent},oe.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},oe.PolyTree=function(){this.m_AllPolys=[],oe.PolyNode.call(this)},oe.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;e>t;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},oe.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},oe.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},xe(oe.PolyTree,oe.PolyNode),oe.Math_Abs_Int64=oe.Math_Abs_Int32=oe.Math_Abs_Double=function(t){return Math.abs(t)},oe.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},le.msie||le.opera||le.safari?oe.Cast_Int32=function(t){return 0|t}:oe.Cast_Int32=function(t){return~~t},le.chrome?oe.Cast_Int64=function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):~~t}:le.firefox&&"function"==typeof Number.toInteger?oe.Cast_Int64=function(t){return Number.toInteger(t)}:le.msie7||le.msie8?oe.Cast_Int64=function(t){return parseInt(t,10)}:le.msie?oe.Cast_Int64=function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):0|t}:oe.Cast_Int64=function(t){return 0>t?Math.ceil(t):Math.floor(t)},oe.Clear=function(t){t.length=0},oe.PI=3.141592653589793,oe.PI2=6.283185307179586,oe.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,ne)if(this.Z=0,3==e)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2==e)this.X=t[0],this.Y=t[1],this.Z=0;else if(1==e)if(t[0]instanceof oe.DoublePoint){var n=t[0];this.X=oe.Clipper.Round(n.X),this.Y=oe.Clipper.Round(n.Y),this.Z=0}else{var r=t[0];"undefined"==typeof r.Z&&(r.Z=0),this.X=r.X,this.Y=r.Y,this.Z=r.Z}else this.X=0,this.Y=0,this.Z=0;else if(2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof oe.DoublePoint){var n=t[0];this.X=oe.Clipper.Round(n.X),this.Y=oe.Clipper.Round(n.Y)}else{var r=t[0];this.X=r.X,this.Y=r.Y}else this.X=0,this.Y=0},oe.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},oe.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},ne?(oe.IntPoint0=function(){this.X=0,this.Y=0,this.Z=0},oe.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,this.Z=t.Z},oe.IntPoint1dp=function(t){this.X=oe.Clipper.Round(t.X),this.Y=oe.Clipper.Round(t.Y),this.Z=0},oe.IntPoint2=function(t,e){this.X=t,this.Y=e,this.Z=0},oe.IntPoint3=function(t,e,n){this.X=t,this.Y=e,this.Z=n}):(oe.IntPoint0=function(){this.X=0,this.Y=0},oe.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},oe.IntPoint1dp=function(t){this.X=oe.Clipper.Round(t.X),this.Y=oe.Clipper.Round(t.Y)},oe.IntPoint2=function(t,e){this.X=t,this.Y=e}),oe.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},oe.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},oe.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},oe.IntRect4=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},oe.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},oe.PolyType={ptSubject:0,ptClip:1},oe.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},oe.JoinType={jtSquare:0,jtRound:1,jtMiter:2},oe.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},ie&&(oe.EndType_={etSquare:0,etRound:1,etButt:2,etClosed:3}),oe.EdgeSide={esLeft:0,esRight:1},oe.Direction={dRightToLeft:0,dLeftToRight:1},oe.TEdge=function(){this.Bot=new oe.IntPoint,this.Curr=new oe.IntPoint,this.Top=new oe.IntPoint,this.Delta=new oe.IntPoint,this.Dx=0,this.PolyTyp=oe.PolyType.ptSubject,this.Side=oe.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},oe.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new oe.IntPoint},oe.MyIntersectNodeSort=function(){},oe.MyIntersectNodeSort.Compare=function(t,e){return e.Pt.Y-t.Pt.Y},oe.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},oe.Scanbeam=function(){this.Y=0,this.Next=null},oe.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},oe.OutPt=function(){this.Idx=0,this.Pt=new oe.IntPoint,this.Next=null,this.Prev=null},oe.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new oe.IntPoint},oe.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},oe.ClipperBase.horizontal=-9007199254740992,oe.ClipperBase.Skip=-2,oe.ClipperBase.Unassigned=-1,oe.ClipperBase.tolerance=1e-20,ee?(oe.ClipperBase.loRange=46340,oe.ClipperBase.hiRange=46340):(oe.ClipperBase.loRange=47453132,oe.ClipperBase.hiRange=0xfffffffffffff),oe.ClipperBase.near_zero=function(t){return t>-oe.ClipperBase.tolerance&&t<oe.ClipperBase.tolerance;
},oe.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},oe.ClipperBase.prototype.PointIsVertex=function(t,e){var n=e;do{if(oe.IntPoint.op_Equality(n.Pt,t))return!0;n=n.Next}while(n!=e);return!1},oe.ClipperBase.prototype.PointOnLineSegment=function(t,e,n,r){return r?t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&_e.op_Equality(_e.Int128Mul(t.X-e.X,n.Y-e.Y),_e.Int128Mul(n.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&(t.X-e.X)*(n.Y-e.Y)==(n.X-e.X)*(t.Y-e.Y)},oe.ClipperBase.prototype.PointOnPolygon=function(t,e,n){for(var r=e;;){if(this.PointOnLineSegment(t,r.Pt,r.Next.Pt,n))return!0;if(r=r.Next,r==e)break}return!1},oe.ClipperBase.prototype.SlopesEqual=oe.ClipperBase.SlopesEqual=function(){var t,e,n,r,i,o,a,s=arguments,u=s.length;return 3==u?(t=s[0],e=s[1],a=s[2],a?_e.op_Equality(_e.Int128Mul(t.Delta.Y,e.Delta.X),_e.Int128Mul(t.Delta.X,e.Delta.Y)):oe.Cast_Int64(t.Delta.Y*e.Delta.X)==oe.Cast_Int64(t.Delta.X*e.Delta.Y)):4==u?(n=s[0],r=s[1],i=s[2],a=s[3],a?_e.op_Equality(_e.Int128Mul(n.Y-r.Y,r.X-i.X),_e.Int128Mul(n.X-r.X,r.Y-i.Y)):oe.Cast_Int64((n.Y-r.Y)*(r.X-i.X))-oe.Cast_Int64((n.X-r.X)*(r.Y-i.Y))===0):(n=s[0],r=s[1],i=s[2],o=s[3],a=s[4],a?_e.op_Equality(_e.Int128Mul(n.Y-r.Y,i.X-o.X),_e.Int128Mul(n.X-r.X,i.Y-o.Y)):oe.Cast_Int64((n.Y-r.Y)*(i.X-o.X))-oe.Cast_Int64((n.X-r.X)*(i.Y-o.Y))===0)},oe.ClipperBase.SlopesEqual3=function(t,e,n){return n?_e.op_Equality(_e.Int128Mul(t.Delta.Y,e.Delta.X),_e.Int128Mul(t.Delta.X,e.Delta.Y)):oe.Cast_Int64(t.Delta.Y*e.Delta.X)==oe.Cast_Int64(t.Delta.X*e.Delta.Y)},oe.ClipperBase.SlopesEqual4=function(t,e,n,r){return r?_e.op_Equality(_e.Int128Mul(t.Y-e.Y,e.X-n.X),_e.Int128Mul(t.X-e.X,e.Y-n.Y)):oe.Cast_Int64((t.Y-e.Y)*(e.X-n.X))-oe.Cast_Int64((t.X-e.X)*(e.Y-n.Y))===0},oe.ClipperBase.SlopesEqual5=function(t,e,n,r,i){return i?_e.op_Equality(_e.Int128Mul(t.Y-e.Y,n.X-r.X),_e.Int128Mul(t.X-e.X,n.Y-r.Y)):oe.Cast_Int64((t.Y-e.Y)*(n.X-r.X))-oe.Cast_Int64((t.X-e.X)*(n.Y-r.Y))===0},oe.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;e>t;++t){for(var n=0,r=this.m_edges[t].length;r>n;++n)this.m_edges[t][n]=null;oe.Clear(this.m_edges[t])}oe.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},oe.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},oe.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>oe.ClipperBase.hiRange||t.Y>oe.ClipperBase.hiRange||-t.X>oe.ClipperBase.hiRange||-t.Y>oe.ClipperBase.hiRange)&&oe.Error("Coordinate outside allowed range in RangeTest()."):(t.X>oe.ClipperBase.loRange||t.Y>oe.ClipperBase.loRange||-t.X>oe.ClipperBase.loRange||-t.Y>oe.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},oe.ClipperBase.prototype.InitEdge=function(t,e,n,r){t.Next=e,t.Prev=n,t.Curr.X=r.X,t.Curr.Y=r.Y,t.OutIdx=-1},oe.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},oe.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;oe.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||oe.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=oe.ClipperBase.horizontal&&t.Prev.Dx!=oe.ClipperBase.horizontal)break;for(;t.Prev.Dx==oe.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==oe.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},oe.ClipperBase.prototype.ProcessBound=function(t,e){var n,r,i=t,o=t;if(t.Dx==oe.ClipperBase.horizontal&&(r=e?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=r&&this.ReverseHorizontal(t)),o.OutIdx!=oe.ClipperBase.Skip)if(e){for(;o.Top.Y==o.Next.Bot.Y&&o.Next.OutIdx!=oe.ClipperBase.Skip;)o=o.Next;if(o.Dx==oe.ClipperBase.horizontal&&o.Next.OutIdx!=oe.ClipperBase.Skip){for(n=o;n.Prev.Dx==oe.ClipperBase.horizontal;)n=n.Prev;n.Prev.Top.X==o.Next.Top.X?e||(o=n.Prev):n.Prev.Top.X>o.Next.Top.X&&(o=n.Prev)}for(;t!=o;)t.NextInLML=t.Next,t.Dx==oe.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==oe.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),o=o.Next}else{for(;o.Top.Y==o.Prev.Bot.Y&&o.Prev.OutIdx!=oe.ClipperBase.Skip;)o=o.Prev;if(o.Dx==oe.ClipperBase.horizontal&&o.Prev.OutIdx!=oe.ClipperBase.Skip){for(n=o;n.Next.Dx==oe.ClipperBase.horizontal;)n=n.Next;n.Next.Top.X==o.Prev.Top.X?e||(o=n.Next):n.Next.Top.X>o.Prev.Top.X&&(o=n.Next)}for(;t!=o;)t.NextInLML=t.Prev,t.Dx==oe.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==oe.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),o=o.Prev}if(o.OutIdx==oe.ClipperBase.Skip){if(t=o,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=o&&t.Dx==oe.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=o&&t.Dx==oe.ClipperBase.horizontal;)t=t.Next}if(t==o)o=e?t.Next:t.Prev;else{t=e?o.Next:o.Prev;var a=new oe.LocalMinima;a.Next=null,a.Y=t.Bot.Y,a.LeftBound=null,a.RightBound=t,a.RightBound.WindDelta=0,o=this.ProcessBound(a.RightBound,e),this.InsertLocalMinima(a)}}return o},oe.ClipperBase.prototype.AddPath=function(t,e,n){re?n||e!=oe.PolyType.ptClip||oe.Error("AddPath: Open paths must be subject."):n||oe.Error("AddPath: Open paths have been disabled.");var r=t.length-1;if(n)for(;r>0&&oe.IntPoint.op_Equality(t[r],t[0]);)--r;for(;r>0&&oe.IntPoint.op_Equality(t[r],t[r-1]);)--r;if(n&&2>r||!n&&1>r)return!1;for(var i=new Array,o=0;r>=o;o++)i.push(new oe.TEdge);var a=!0;i[1].Curr.X=t[1].X,i[1].Curr.Y=t[1].Y;var s={Value:this.m_UseFullRange};this.RangeTest(t[0],s),this.m_UseFullRange=s.Value,s.Value=this.m_UseFullRange,this.RangeTest(t[r],s),this.m_UseFullRange=s.Value,this.InitEdge(i[0],i[1],i[r],t[0]),this.InitEdge(i[r],i[0],i[r-1],t[r]);for(var o=r-1;o>=1;--o)s.Value=this.m_UseFullRange,this.RangeTest(t[o],s),this.m_UseFullRange=s.Value,this.InitEdge(i[o],i[o+1],i[o-1],t[o]);for(var u=i[0],l=u,c=u;;)if(oe.IntPoint.op_Equality(l.Curr,l.Next.Curr)){if(l==l.Next)break;l==u&&(u=l.Next),l=this.RemoveEdge(l),c=l}else{if(l.Prev==l.Next)break;if(!n||!oe.ClipperBase.SlopesEqual(l.Prev.Curr,l.Curr,l.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(l.Prev.Curr,l.Curr,l.Next.Curr)){if(l=l.Next,l==c)break}else l==u&&(u=l.Next),l=this.RemoveEdge(l),l=l.Prev,c=l}if(!n&&l==l.Next||n&&l.Prev==l.Next)return!1;n||(this.m_HasOpenPaths=!0,u.Prev.OutIdx=oe.ClipperBase.Skip);l=u;do this.InitEdge2(l,e),l=l.Next,a&&l.Curr.Y!=u.Curr.Y&&(a=!1);while(l!=u);if(a){if(n)return!1;l.Prev.OutIdx=oe.ClipperBase.Skip,l.Prev.Bot.X<l.Prev.Top.X&&this.ReverseHorizontal(l.Prev);var h=new oe.LocalMinima;for(h.Next=null,h.Y=l.Bot.Y,h.LeftBound=null,h.RightBound=l,h.RightBound.Side=oe.EdgeSide.esRight,h.RightBound.WindDelta=0;l.Next.OutIdx!=oe.ClipperBase.Skip;)l.NextInLML=l.Next,l.Bot.X!=l.Prev.Top.X&&this.ReverseHorizontal(l),l=l.Next;return this.InsertLocalMinima(h),this.m_edges.push(i),!0}this.m_edges.push(i);for(var f,p=null;l=this.FindNextLocMin(l),l!=p;){null==p&&(p=l);var h=new oe.LocalMinima;h.Next=null,h.Y=l.Bot.Y,l.Dx<l.Prev.Dx?(h.LeftBound=l.Prev,h.RightBound=l,f=!1):(h.LeftBound=l,h.RightBound=l.Prev,f=!0),h.LeftBound.Side=oe.EdgeSide.esLeft,h.RightBound.Side=oe.EdgeSide.esRight,n?h.LeftBound.Next==h.RightBound?h.LeftBound.WindDelta=-1:h.LeftBound.WindDelta=1:h.LeftBound.WindDelta=0,h.RightBound.WindDelta=-h.LeftBound.WindDelta,l=this.ProcessBound(h.LeftBound,f);var d=this.ProcessBound(h.RightBound,!f);h.LeftBound.OutIdx==oe.ClipperBase.Skip?h.LeftBound=null:h.RightBound.OutIdx==oe.ClipperBase.Skip&&(h.RightBound=null),this.InsertLocalMinima(h),f||(l=d)}return!0},oe.ClipperBase.prototype.AddPaths=function(t,e,n){for(var r=!1,i=0,o=t.length;o>i;++i)this.AddPath(t[i],e,n)&&(r=!0);return r},oe.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,n){return oe.IntPoint.op_Equality(t,n)||oe.IntPoint.op_Equality(t,e)||oe.IntPoint.op_Equality(n,e)?!1:t.X!=n.X?e.X>t.X==e.X<n.X:e.Y>t.Y==e.Y<n.Y},oe.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},oe.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=oe.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},oe.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},oe.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},oe.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,ne&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},oe.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=oe.EdgeSide.esLeft,e.OutIdx=oe.ClipperBase.Unassigned),e=t.RightBound,null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=oe.EdgeSide.esRight,e.OutIdx=oe.ClipperBase.Unassigned),t=t.Next}},oe.Clipper=function(t){"undefined"==typeof t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=oe.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=oe.PolyFillType.pftEvenOdd,this.m_SubjFillType=oe.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,oe.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=oe.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!==(1&t),this.StrictlySimple=0!==(2&t),this.PreserveCollinear=0!==(4&t),ne&&(this.ZFillFunction=null)},oe.Clipper.ioReverseSolution=1,oe.Clipper.ioStrictlySimple=2,oe.Clipper.ioPreserveCollinear=4,oe.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),oe.ClipperBase.prototype.Clear.call(this))},oe.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},oe.Clipper.prototype.Reset=function(){oe.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},oe.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new oe.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new oe.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var n=this.m_Scanbeam;null!==n.Next&&t<=n.Next.Y;)n=n.Next;if(t==n.Y)return;var e=new oe.Scanbeam;e.Y=t,e.Next=n.Next,n.Next=e}},oe.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,n=t[1]instanceof oe.PolyTree;if(4==e&&!n){var r=t[0],i=t[1],o=t[2],a=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&oe.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,oe.Clear(i),this.m_SubjFillType=o,this.m_ClipFillType=a,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{var s=this.ExecuteInternal();s&&this.BuildResult(i)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return s}if(4==e&&n){var r=t[0],u=t[1],o=t[2],a=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=a,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var s=this.ExecuteInternal();s&&this.BuildResult2(u)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return s}if(2==e&&!n){var r=t[0],i=t[1];return this.Execute(r,i,oe.PolyFillType.pftEvenOdd,oe.PolyFillType.pftEvenOdd)}if(2==e&&n){var r=t[0],u=t[1];return this.Execute(r,u,oe.PolyFillType.pftEvenOdd,oe.PolyFillType.pftEvenOdd)}},oe.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},oe.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),oe.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(t,e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var n=0,r=this.m_PolyOuts.length;r>n;n++){var i=this.m_PolyOuts[n];null===i.Pts||i.IsOpen||(i.IsHole^this.ReverseSolution)==this.Area(i)>0&&this.ReversePolyPtLinks(i.Pts)}this.JoinCommonEdges();for(var n=0,r=this.m_PolyOuts.length;r>n;n++){var i=this.m_PolyOuts[n];null===i.Pts||i.IsOpen||this.FixupOutPolygon(i)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{oe.Clear(this.m_Joins),oe.Clear(this.m_GhostJoins)}},oe.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y,e=this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.Next,e=null,t},oe.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;e>t;++t)this.DisposeOutRec(t);oe.Clear(this.m_PolyOuts)},oe.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!==e.Pts&&this.DisposeOutPts(e.Pts),e=null,this.m_PolyOuts[t]=null},oe.Clipper.prototype.DisposeOutPts=function(t){if(null!==t){var e=null;for(t.Prev.Next=null;null!==t;)e=t,t=t.Next,e=null}},oe.Clipper.prototype.AddJoin=function(t,e,n){var r=new oe.Join;r.OutPt1=t,r.OutPt2=e,r.OffPt.X=n.X,r.OffPt.Y=n.Y,this.m_Joins.push(r)},oe.Clipper.prototype.AddGhostJoin=function(t,e){var n=new oe.Join;n.OutPt1=t,n.OffPt.X=e.X,n.OffPt.Y=e.Y,this.m_GhostJoins.push(n)},ne&&(oe.Clipper.prototype.SetZ=function(t,e){t.Z=0,null!==this.ZFillFunction&&(e.OutIdx<0?this.ZFillFunction(e.Bot,e.Top,t):this.ZFillFunction(e.Top,e.Bot,t))}),oe.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,n=this.m_CurrentLM.RightBound;this.PopLocalMinima();var r=null;if(null===e?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(r=this.AddOutPt(n,n.Bot))):null==n?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(r=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(n,e),this.SetWindingCount(e),n.WindCnt=e.WindCnt,n.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(r=this.AddLocalMinPoly(e,n,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!=n&&(oe.ClipperBase.IsHorizontal(n)?this.AddEdgeToSEL(n):this.InsertScanbeam(n.Top.Y)),null!=e&&null!=n){if(null!==r&&oe.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&0!==n.WindDelta)for(var i=0,o=this.m_GhostJoins.length;o>i;i++){var a=this.m_GhostJoins[i];this.HorzSegmentsOverlap(a.OutPt1.Pt,a.OffPt,n.Bot,n.Top)&&this.AddJoin(a.OutPt1,r,a.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&oe.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var s=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(r,s,e.Top)}if(e.NextInAEL!=n){if(n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&oe.ClipperBase.SlopesEqual(n.PrevInAEL,n,this.m_UseFullRange)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta){var s=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(r,s,n.Top)}var u=e.NextInAEL;if(null!==u)for(;u!=n;)this.IntersectEdges(n,u,e.Curr,!1),u=u.NextInAEL}}}},oe.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},oe.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<oe.Clipper.TopX(t,e.Top.Y):t.Top.X>oe.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},oe.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==oe.PolyType.ptSubject?this.m_SubjFillType==oe.PolyFillType.pftEvenOdd:this.m_ClipFillType==oe.PolyFillType.pftEvenOdd},oe.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==oe.PolyType.ptSubject?this.m_ClipFillType==oe.PolyFillType.pftEvenOdd:this.m_SubjFillType==oe.PolyFillType.pftEvenOdd},oe.Clipper.prototype.IsContributing=function(t){var e,n;switch(t.PolyTyp==oe.PolyType.ptSubject?(e=this.m_SubjFillType,n=this.m_ClipFillType):(e=this.m_ClipFillType,n=this.m_SubjFillType),e){case oe.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case oe.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case oe.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case oe.ClipType.ctIntersection:switch(n){case oe.PolyFillType.pftEvenOdd:case oe.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case oe.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case oe.ClipType.ctUnion:switch(n){case oe.PolyFillType.pftEvenOdd:case oe.PolyFillType.pftNonZero:return 0===t.WindCnt2;case oe.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case oe.ClipType.ctDifference:if(t.PolyTyp==oe.PolyType.ptSubject)switch(n){case oe.PolyFillType.pftEvenOdd:case oe.PolyFillType.pftNonZero:return 0===t.WindCnt2;case oe.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(n){case oe.PolyFillType.pftEvenOdd:case oe.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case oe.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case oe.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(n){case oe.PolyFillType.pftEvenOdd:case oe.PolyFillType.pftNonZero:return 0===t.WindCnt2;case oe.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},oe.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=oe.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var n=!0,r=e.PrevInAEL;null!==r;)r.PolyTyp==e.PolyTyp&&0!==r.WindDelta&&(n=!n),r=r.PrevInAEL;t.WindCnt=n?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},oe.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},oe.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},oe.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e){var n=e.NextInAEL;null!==n&&(n.PrevInAEL=t);var r=t.PrevInAEL;null!==r&&(r.NextInAEL=e),e.PrevInAEL=r,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=n}else if(e.NextInAEL==t){var n=t.NextInAEL;null!==n&&(n.PrevInAEL=e);var r=e.PrevInAEL;null!==r&&(r.NextInAEL=t),t.PrevInAEL=r,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=n}else{var n=t.NextInAEL,r=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=n,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=r,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},oe.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e){var n=e.NextInSEL;null!==n&&(n.PrevInSEL=t);var r=t.PrevInSEL;null!==r&&(r.NextInSEL=e),e.PrevInSEL=r,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=n}else if(e.NextInSEL==t){var n=t.NextInSEL;null!==n&&(n.PrevInSEL=e);var r=e.PrevInSEL;null!==r&&(r.NextInSEL=t),t.PrevInSEL=r,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=n}else{var n=t.NextInSEL,r=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=n,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=r,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},oe.Clipper.prototype.AddLocalMaxPoly=function(t,e,n){this.AddOutPt(t,n),0==e.WindDelta&&this.AddOutPt(e,n),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},oe.Clipper.prototype.AddLocalMinPoly=function(t,e,n){var r,i,o;if(oe.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(r=this.AddOutPt(t,n),e.OutIdx=t.OutIdx,t.Side=oe.EdgeSide.esLeft,e.Side=oe.EdgeSide.esRight,i=t,o=i.PrevInAEL==e?e.PrevInAEL:i.PrevInAEL):(r=this.AddOutPt(e,n),t.OutIdx=e.OutIdx,t.Side=oe.EdgeSide.esRight,e.Side=oe.EdgeSide.esLeft,i=e,o=i.PrevInAEL==t?t.PrevInAEL:i.PrevInAEL),null!==o&&o.OutIdx>=0&&oe.Clipper.TopX(o,n.Y)==oe.Clipper.TopX(i,n.Y)&&oe.ClipperBase.SlopesEqual(i,o,this.m_UseFullRange)&&0!==i.WindDelta&&0!==o.WindDelta){var a=this.AddOutPt(o,n);this.AddJoin(r,a,i.Top)}return r},oe.Clipper.prototype.CreateOutRec=function(){var t=new oe.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},oe.Clipper.prototype.AddOutPt=function(t,e){var n=t.Side==oe.EdgeSide.esLeft;if(t.OutIdx<0){var r=this.CreateOutRec();r.IsOpen=0===t.WindDelta;var i=new oe.OutPt;return r.Pts=i,i.Idx=r.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,i.Next=i,i.Prev=i,r.IsOpen||this.SetHoleState(t,r),ne&&(oe.IntPoint.op_Equality(e,t.Bot)?(i.Pt.X=t.Bot.X,i.Pt.Y=t.Bot.Y,i.Pt.Z=t.Bot.Z):oe.IntPoint.op_Equality(e,t.Top)?(i.Pt.X=t.Top.X,i.Pt.Y=t.Top.Y,i.Pt.Z=t.Top.Z):this.SetZ(i.Pt,t)),t.OutIdx=r.Idx,i}var r=this.m_PolyOuts[t.OutIdx],o=r.Pts;if(n&&oe.IntPoint.op_Equality(e,o.Pt))return o;if(!n&&oe.IntPoint.op_Equality(e,o.Prev.Pt))return o.Prev;var i=new oe.OutPt;return i.Idx=r.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,i.Next=o,i.Prev=o.Prev,i.Prev.Next=i,o.Prev=i,n&&(r.Pts=i),ne&&(oe.IntPoint.op_Equality(e,t.Bot)?(i.Pt.X=t.Bot.X,i.Pt.Y=t.Bot.Y,i.Pt.Z=t.Bot.Z):oe.IntPoint.op_Equality(e,t.Top)?(i.Pt.X=t.Top.X,i.Pt.Y=t.Top.Y,i.Pt.Z=t.Top.Z):this.SetZ(i.Pt,t)),i},oe.Clipper.prototype.SwapPoints=function(t,e){var n=new oe.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=n.X,e.Value.Y=n.Y},oe.Clipper.prototype.HorzSegmentsOverlap=function(t,e,n,r){return t.X>n.X==t.X<r.X?!0:e.X>n.X==e.X<r.X?!0:n.X>t.X==n.X<e.X?!0:r.X>t.X==r.X<e.X?!0:t.X==n.X&&e.X==r.X?!0:t.X==r.X&&e.X==n.X?!0:!1},oe.Clipper.prototype.InsertPolyPtBetween=function(t,e,n){var r=new oe.OutPt;return r.Pt.X=n.X,r.Pt.Y=n.Y,e==t.Next?(t.Next=r,e.Prev=r,r.Next=e,r.Prev=t):(e.Next=r,t.Prev=r,r.Next=t,r.Prev=e),r},oe.Clipper.prototype.SetHoleState=function(t,e){for(var n=!1,r=t.PrevInAEL;null!==r;)r.OutIdx>=0&&0!=r.WindDelta&&(n=!n,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[r.OutIdx])),r=r.PrevInAEL;n&&(e.IsHole=!0)},oe.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?oe.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},oe.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var n=t.Prev;oe.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Prev;var r=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;oe.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Next;var i=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=e.Prev;oe.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Prev;var o=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=e.Next;oe.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Next;var a=Math.abs(this.GetDx(e.Pt,n.Pt));return r>=o&&r>=a||i>=o&&i>=a},oe.Clipper.prototype.GetBottomPt=function(t){for(var e=null,n=t.Next;n!=t;)n.Pt.Y>t.Pt.Y?(t=n,e=null):n.Pt.Y==t.Pt.Y&&n.Pt.X<=t.Pt.X&&(n.Pt.X<t.Pt.X?(e=null,t=n):n.Next!=t&&n.Prev!=t&&(e=n)),n=n.Next;if(null!==e)for(;e!=n;)for(this.FirstIsBottomPt(n,e)||(t=e),e=e.Next;oe.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},oe.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var n=t.BottomPt,r=e.BottomPt;return n.Pt.Y>r.Pt.Y?t:n.Pt.Y<r.Pt.Y?e:n.Pt.X<r.Pt.X?t:n.Pt.X>r.Pt.X?e:n.Next==n?e:r.Next==r?t:this.FirstIsBottomPt(n,r)?t:e},oe.Clipper.prototype.Param1RightOfParam2=function(t,e){do if(t=t.FirstLeft,t==e)return!0;while(null!==t);return!1},oe.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},oe.Clipper.prototype.AppendPolygon=function(t,e){var n,r=this.m_PolyOuts[t.OutIdx],i=this.m_PolyOuts[e.OutIdx];n=this.Param1RightOfParam2(r,i)?i:this.Param1RightOfParam2(i,r)?r:this.GetLowermostRec(r,i);var o,a=r.Pts,s=a.Prev,u=i.Pts,l=u.Prev;t.Side==oe.EdgeSide.esLeft?(e.Side==oe.EdgeSide.esLeft?(this.ReversePolyPtLinks(u),u.Next=a,a.Prev=u,s.Next=l,l.Prev=s,r.Pts=l):(l.Next=a,a.Prev=l,u.Prev=s,s.Next=u,r.Pts=u),o=oe.EdgeSide.esLeft):(e.Side==oe.EdgeSide.esRight?(this.ReversePolyPtLinks(u),s.Next=l,l.Prev=s,u.Next=a,a.Prev=u):(s.Next=u,u.Prev=s,a.Prev=l,l.Next=a),o=oe.EdgeSide.esRight),r.BottomPt=null,n==i&&(i.FirstLeft!=r&&(r.FirstLeft=i.FirstLeft),r.IsHole=i.IsHole),i.Pts=null,i.BottomPt=null,i.FirstLeft=r;var c=t.OutIdx,h=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var f=this.m_ActiveEdges;null!==f;){if(f.OutIdx==h){f.OutIdx=c,f.Side=o;break}f=f.NextInAEL}i.Idx=r.Idx},oe.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,n;e=t;do n=e.Next,e.Next=e.Prev,e.Prev=n,e=n;while(e!=t)}},oe.Clipper.SwapSides=function(t,e){var n=t.Side;t.Side=e.Side,e.Side=n},oe.Clipper.SwapPolyIndexes=function(t,e){var n=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=n},oe.Clipper.prototype.IntersectEdges=function(t,e,n,r){var i=!r&&null===t.NextInLML&&t.Top.X==n.X&&t.Top.Y==n.Y,o=!r&&null===e.NextInLML&&e.Top.X==n.X&&e.Top.Y==n.Y,a=t.OutIdx>=0,s=e.OutIdx>=0;if(re&&(0===t.WindDelta||0===e.WindDelta))return 0===t.WindDelta&&0===e.WindDelta?(i||o)&&a&&s&&this.AddLocalMaxPoly(t,e,n):t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==oe.ClipType.ctUnion?0===t.WindDelta?s&&(this.AddOutPt(t,n),a&&(t.OutIdx=-1)):a&&(this.AddOutPt(e,n),s&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==oe.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==oe.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,n),s&&(e.OutIdx=-1)):(this.AddOutPt(t,n),a&&(t.OutIdx=-1))),i&&(t.OutIdx<0?this.DeleteFromAEL(t):oe.Error("Error intersecting polylines")),void(o&&(e.OutIdx<0?this.DeleteFromAEL(e):oe.Error("Error intersecting polylines")));if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var u=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=u}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;var l,c,h,f;t.PolyTyp==oe.PolyType.ptSubject?(l=this.m_SubjFillType,h=this.m_ClipFillType):(l=this.m_ClipFillType,h=this.m_SubjFillType),e.PolyTyp==oe.PolyType.ptSubject?(c=this.m_SubjFillType,f=this.m_ClipFillType):(c=this.m_ClipFillType,f=this.m_SubjFillType);var p,d;switch(l){case oe.PolyFillType.pftPositive:p=t.WindCnt;break;case oe.PolyFillType.pftNegative:p=-t.WindCnt;break;default:p=Math.abs(t.WindCnt)}switch(c){case oe.PolyFillType.pftPositive:d=e.WindCnt;break;case oe.PolyFillType.pftNegative:d=-e.WindCnt;break;default:d=Math.abs(e.WindCnt)}if(a&&s)i||o||0!==p&&1!=p||0!==d&&1!=d||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=oe.ClipType.ctXor?this.AddLocalMaxPoly(t,e,n):(this.AddOutPt(t,n),this.AddOutPt(e,n),oe.Clipper.SwapSides(t,e),oe.Clipper.SwapPolyIndexes(t,e));else if(a)(0===d||1==d)&&(this.AddOutPt(t,n),oe.Clipper.SwapSides(t,e),oe.Clipper.SwapPolyIndexes(t,e));else if(s)(0===p||1==p)&&(this.AddOutPt(e,n),oe.Clipper.SwapSides(t,e),oe.Clipper.SwapPolyIndexes(t,e));else if(!(0!==p&&1!=p||0!==d&&1!=d||i||o)){var m,g;switch(h){case oe.PolyFillType.pftPositive:m=t.WindCnt2;break;case oe.PolyFillType.pftNegative:m=-t.WindCnt2;break;default:m=Math.abs(t.WindCnt2)}switch(f){case oe.PolyFillType.pftPositive:g=e.WindCnt2;break;case oe.PolyFillType.pftNegative:g=-e.WindCnt2;break;default:g=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,n);else if(1==p&&1==d)switch(this.m_ClipType){case oe.ClipType.ctIntersection:m>0&&g>0&&this.AddLocalMinPoly(t,e,n);break;case oe.ClipType.ctUnion:0>=m&&0>=g&&this.AddLocalMinPoly(t,e,n);break;case oe.ClipType.ctDifference:(t.PolyTyp==oe.PolyType.ptClip&&m>0&&g>0||t.PolyTyp==oe.PolyType.ptSubject&&0>=m&&0>=g)&&this.AddLocalMinPoly(t,e,n);break;case oe.ClipType.ctXor:this.AddLocalMinPoly(t,e,n)}else oe.Clipper.SwapSides(t,e)}i!=o&&(i&&t.OutIdx>=0||o&&e.OutIdx>=0)&&(oe.Clipper.SwapSides(t,e),oe.Clipper.SwapPolyIndexes(t,e)),i&&this.DeleteFromAEL(t),o&&this.DeleteFromAEL(e)},oe.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,n=t.NextInAEL;(null!==e||null!==n||t==this.m_ActiveEdges)&&(null!==e?e.NextInAEL=n:this.m_ActiveEdges=n,null!==n&&(n.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},oe.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,n=t.NextInSEL;(null!==e||null!==n||t==this.m_SortedEdges)&&(null!==e?e.NextInSEL=n:this.m_SortedEdges=n,null!==n&&(n.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},oe.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&oe.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,n=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==n&&(n.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,t=t.NextInLML,t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=n,oe.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},oe.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},oe.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=oe.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=oe.Direction.dRightToLeft)},oe.Clipper.prototype.PrepareHorzJoins=function(t,e){var n=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=oe.EdgeSide.esLeft&&(n=n.Prev),e&&(oe.IntPoint.op_Equality(n.Pt,t.Top)?this.AddGhostJoin(n,t.Bot):this.AddGhostJoin(n,t.Top));
},oe.Clipper.prototype.ProcessHorizontal=function(t,e){var n={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,n);for(var r=n.Dir,i=n.Left,o=n.Right,a=t,s=null;null!==a.NextInLML&&oe.ClipperBase.IsHorizontal(a.NextInLML);)a=a.NextInLML;for(null===a.NextInLML&&(s=this.GetMaximaPair(a));;){for(var u=t==a,l=this.GetNextInAEL(t,r);null!==l&&!(l.Curr.X==t.Top.X&&null!==t.NextInLML&&l.Dx<t.NextInLML.Dx);){var c=this.GetNextInAEL(l,r);if(r==oe.Direction.dLeftToRight&&l.Curr.X<=o||r==oe.Direction.dRightToLeft&&l.Curr.X>=i){if(t.OutIdx>=0&&0!=t.WindDelta&&this.PrepareHorzJoins(t,e),l==s&&u)return r==oe.Direction.dLeftToRight?this.IntersectEdges(t,l,l.Top,!1):this.IntersectEdges(l,t,l.Top,!1),void(s.OutIdx>=0&&oe.Error("ProcessHorizontal error"));if(r==oe.Direction.dLeftToRight){var h=new oe.IntPoint(l.Curr.X,t.Curr.Y);this.IntersectEdges(t,l,h,!0)}else{var h=new oe.IntPoint(l.Curr.X,t.Curr.Y);this.IntersectEdges(l,t,h,!0)}this.SwapPositionsInAEL(t,l)}else if(r==oe.Direction.dLeftToRight&&l.Curr.X>=o||r==oe.Direction.dRightToLeft&&l.Curr.X<=i)break;l=c}if(t.OutIdx>=0&&0!==t.WindDelta&&this.PrepareHorzJoins(t,e),null===t.NextInLML||!oe.ClipperBase.IsHorizontal(t.NextInLML))break;t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot);var n={Dir:r,Left:i,Right:o};this.GetHorzDirection(t,n),r=n.Dir,i=n.Left,o=n.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var f=this.AddOutPt(t,t.Top);if(t=this.UpdateEdgeIntoAEL(t),0===t.WindDelta)return;var p=t.PrevInAEL,c=t.NextInAEL;if(null!==p&&p.Curr.X==t.Bot.X&&p.Curr.Y==t.Bot.Y&&0!==p.WindDelta&&p.OutIdx>=0&&p.Curr.Y>p.Top.Y&&oe.ClipperBase.SlopesEqual(t,p,this.m_UseFullRange)){var d=this.AddOutPt(p,t.Bot);this.AddJoin(f,d,t.Top)}else if(null!==c&&c.Curr.X==t.Bot.X&&c.Curr.Y==t.Bot.Y&&0!==c.WindDelta&&c.OutIdx>=0&&c.Curr.Y>c.Top.Y&&oe.ClipperBase.SlopesEqual(t,c,this.m_UseFullRange)){var d=this.AddOutPt(c,t.Bot);this.AddJoin(f,d,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else null!==s?s.OutIdx>=0?(r==oe.Direction.dLeftToRight?this.IntersectEdges(t,s,t.Top,!1):this.IntersectEdges(s,t,t.Top,!1),s.OutIdx>=0&&oe.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(s)):(t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},oe.Clipper.prototype.GetNextInAEL=function(t,e){return e==oe.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},oe.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},oe.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},oe.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},oe.Clipper.prototype.GetMaximaPair=function(t){var e=null;return oe.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:oe.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||oe.ClipperBase.IsHorizontal(e))?e:null},oe.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(n){this.m_SortedEdges=null,this.m_IntersectList.length=0,oe.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},oe.Clipper.prototype.BuildIntersectList=function(t,e){if(null!==this.m_ActiveEdges){var n=this.m_ActiveEdges;for(this.m_SortedEdges=n;null!==n;)n.PrevInSEL=n.PrevInAEL,n.NextInSEL=n.NextInAEL,n.Curr.X=oe.Clipper.TopX(n,e),n=n.NextInAEL;for(var r=!0;r&&null!==this.m_SortedEdges;){for(r=!1,n=this.m_SortedEdges;null!==n.NextInSEL;){var i=n.NextInSEL,o=new oe.IntPoint;if(n.Curr.X>i.Curr.X){!this.IntersectPoint(n,i,o)&&n.Curr.X>i.Curr.X+1&&oe.Error("Intersection error"),o.Y>t&&(o.Y=t,Math.abs(n.Dx)>Math.abs(i.Dx)?o.X=oe.Clipper.TopX(i,t):o.X=oe.Clipper.TopX(n,t));var a=new oe.IntersectNode;a.Edge1=n,a.Edge2=i,a.Pt.X=o.X,a.Pt.Y=o.Y,this.m_IntersectList.push(a),this.SwapPositionsInSEL(n,i),r=!0}else n=i}if(null===n.PrevInSEL)break;n.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},oe.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},oe.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},oe.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;t>e;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var n=e+1;t>n&&!this.EdgesAdjacent(this.m_IntersectList[n]);)n++;if(n==t)return!1;var r=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[n],this.m_IntersectList[n]=r}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},oe.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;e>t;t++){var n=this.m_IntersectList[t];this.IntersectEdges(n.Edge1,n.Edge2,n.Pt,!0),this.SwapPositionsInAEL(n.Edge1,n.Edge2)}this.m_IntersectList.length=0};var we=function(t){return 0>t?Math.ceil(t-.5):Math.round(t)},Me=function(t){return 0>t?Math.ceil(t-.5):Math.floor(t+.5)},Ce=function(t){return 0>t?-Math.round(Math.abs(t)):Math.round(t)},Pe=function(t){return 0>t?(t-=.5,-2147483648>t?Math.ceil(t):0|t):(t+=.5,t>2147483647?Math.floor(t):0|t)};le.msie?oe.Clipper.Round=we:le.chromium?oe.Clipper.Round=Ce:le.safari?oe.Clipper.Round=Pe:oe.Clipper.Round=Me,oe.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+oe.Clipper.Round(t.Dx*(e-t.Bot.Y))},oe.Clipper.prototype.IntersectPoint=function(t,e,n){n.X=0,n.Y=0;var r,i;if(oe.ClipperBase.SlopesEqual(t,e,this.m_UseFullRange)||t.Dx==e.Dx)return e.Bot.Y>t.Bot.Y?(n.X=e.Bot.X,n.Y=e.Bot.Y):(n.X=t.Bot.X,n.Y=t.Bot.Y),!1;if(0===t.Delta.X)n.X=t.Bot.X,oe.ClipperBase.IsHorizontal(e)?n.Y=e.Bot.Y:(i=e.Bot.Y-e.Bot.X/e.Dx,n.Y=oe.Clipper.Round(n.X/e.Dx+i));else if(0===e.Delta.X)n.X=e.Bot.X,oe.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,n.Y=oe.Clipper.Round(n.X/t.Dx+r));else{r=t.Bot.X-t.Bot.Y*t.Dx,i=e.Bot.X-e.Bot.Y*e.Dx;var o=(i-r)/(t.Dx-e.Dx);n.Y=oe.Clipper.Round(o),Math.abs(t.Dx)<Math.abs(e.Dx)?n.X=oe.Clipper.Round(t.Dx*o+r):n.X=oe.Clipper.Round(e.Dx*o+i)}if(n.Y<t.Top.Y||n.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return n.Y=t.Top.Y,n.X=oe.Clipper.TopX(e,t.Top.Y),n.X<t.Top.X;n.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?n.X=oe.Clipper.TopX(t,n.Y):n.X=oe.Clipper.TopX(e,n.Y)}return!0},oe.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var n=this.IsMaxima(e,t);if(n){var r=this.GetMaximaPair(e);n=null===r||!oe.ClipperBase.IsHorizontal(r)}if(n){var i=e.PrevInAEL;this.DoMaxima(e),e=null===i?this.m_ActiveEdges:i.NextInAEL}else{if(this.IsIntermediate(e,t)&&oe.ClipperBase.IsHorizontal(e.NextInLML)?(e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=oe.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple){var i=e.PrevInAEL;if(e.OutIdx>=0&&0!==e.WindDelta&&null!==i&&i.OutIdx>=0&&i.Curr.X==e.Curr.X&&0!==i.WindDelta){var o=this.AddOutPt(i,e.Curr),a=this.AddOutPt(e,e.Curr);this.AddJoin(o,a,e.Curr)}}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){var o=null;e.OutIdx>=0&&(o=this.AddOutPt(e,e.Top)),e=this.UpdateEdgeIntoAEL(e);var i=e.PrevInAEL,s=e.NextInAEL;if(null!==i&&i.Curr.X==e.Bot.X&&i.Curr.Y==e.Bot.Y&&null!==o&&i.OutIdx>=0&&i.Curr.Y>i.Top.Y&&oe.ClipperBase.SlopesEqual(e,i,this.m_UseFullRange)&&0!==e.WindDelta&&0!==i.WindDelta){var a=this.AddOutPt(i,e.Bot);this.AddJoin(o,a,e.Top)}else if(null!==s&&s.Curr.X==e.Bot.X&&s.Curr.Y==e.Bot.Y&&null!==o&&s.OutIdx>=0&&s.Curr.Y>s.Top.Y&&oe.ClipperBase.SlopesEqual(e,s,this.m_UseFullRange)&&0!==e.WindDelta&&0!==s.WindDelta){var a=this.AddOutPt(s,e.Bot);this.AddJoin(o,a,e.Top)}}e=e.NextInAEL}},oe.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var n=t.NextInAEL,r=!0;null!==n&&n!=e;)this.IntersectEdges(t,n,t.Top,!0),this.SwapPositionsInAEL(t,n),n=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?this.IntersectEdges(t,e,t.Top,!1):r&&0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):oe.Error("DoMaxima error")},oe.Clipper.ReversePaths=function(t){for(var e=0,n=t.length;n>e;e++)t[e].reverse()},oe.Clipper.Orientation=function(t){return oe.Clipper.Area(t)>=0},oe.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,n=t;do e++,n=n.Next;while(n!=t);return e},oe.Clipper.prototype.BuildResult=function(t){oe.Clear(t);for(var e=0,n=this.m_PolyOuts.length;n>e;e++){var r=this.m_PolyOuts[e];if(null!==r.Pts){var i=r.Pts.Prev,o=this.PointCount(i);if(!(2>o)){for(var a=new Array(o),s=0;o>s;s++)a[s]=i.Pt,i=i.Prev;t.push(a)}}}},oe.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,n=this.m_PolyOuts.length;n>e;e++){var r=this.m_PolyOuts[e],i=this.PointCount(r.Pts);if(!(r.IsOpen&&2>i||!r.IsOpen&&3>i)){this.FixHoleLinkage(r);var o=new oe.PolyNode;t.m_AllPolys.push(o),r.PolyNode=o,o.m_polygon.length=i;for(var a=r.Pts.Prev,s=0;i>s;s++)o.m_polygon[s]=a.Pt,a=a.Prev}}for(var e=0,n=this.m_PolyOuts.length;n>e;e++){var r=this.m_PolyOuts[e];null!==r.PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,t.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!=r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):t.AddChild(r.PolyNode))}},oe.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var n=t.Pts;;){if(n.Prev==n||n.Prev==n.Next)return this.DisposeOutPts(n),void(t.Pts=null);if(oe.IntPoint.op_Equality(n.Pt,n.Next.Pt)||oe.IntPoint.op_Equality(n.Pt,n.Prev.Pt)||oe.ClipperBase.SlopesEqual(n.Prev.Pt,n.Pt,n.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt))){e=null;var r=n;n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev,r=null}else{if(n==e)break;null===e&&(e=n),n=n.Next}}t.Pts=n},oe.Clipper.prototype.DupOutPt=function(t,e){var n=new oe.OutPt;return n.Pt.X=t.Pt.X,n.Pt.Y=t.Pt.Y,n.Idx=t.Idx,e?(n.Next=t.Next,n.Prev=t,t.Next.Prev=n,t.Next=n):(n.Prev=t.Prev,n.Next=t,t.Prev.Next=n,t.Prev=n),n},oe.Clipper.prototype.GetOverlap=function(t,e,n,r,i){return e>t?r>n?(i.Left=Math.max(t,n),i.Right=Math.min(e,r)):(i.Left=Math.max(t,r),i.Right=Math.min(e,n)):r>n?(i.Left=Math.max(e,n),i.Right=Math.min(t,r)):(i.Left=Math.max(e,r),i.Right=Math.min(t,n)),i.Left<i.Right},oe.Clipper.prototype.JoinHorz=function(t,e,n,r,i,o){var a=t.Pt.X>e.Pt.X?oe.Direction.dRightToLeft:oe.Direction.dLeftToRight,s=n.Pt.X>r.Pt.X?oe.Direction.dRightToLeft:oe.Direction.dLeftToRight;if(a==s)return!1;if(a==oe.Direction.dLeftToRight){for(;t.Next.Pt.X<=i.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==i.Y;)t=t.Next;o&&t.Pt.X!=i.X&&(t=t.Next),e=this.DupOutPt(t,!o),oe.IntPoint.op_Inequality(e.Pt,i)&&(t=e,t.Pt.X=i.X,t.Pt.Y=i.Y,e=this.DupOutPt(t,!o))}else{for(;t.Next.Pt.X>=i.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==i.Y;)t=t.Next;o||t.Pt.X==i.X||(t=t.Next),e=this.DupOutPt(t,o),oe.IntPoint.op_Inequality(e.Pt,i)&&(t=e,t.Pt.X=i.X,t.Pt.Y=i.Y,e=this.DupOutPt(t,o))}if(s==oe.Direction.dLeftToRight){for(;n.Next.Pt.X<=i.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y==i.Y;)n=n.Next;o&&n.Pt.X!=i.X&&(n=n.Next),r=this.DupOutPt(n,!o),oe.IntPoint.op_Inequality(r.Pt,i)&&(n=r,n.Pt.X=i.X,n.Pt.Y=i.Y,r=this.DupOutPt(n,!o))}else{for(;n.Next.Pt.X>=i.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y==i.Y;)n=n.Next;o||n.Pt.X==i.X||(n=n.Next),r=this.DupOutPt(n,o),oe.IntPoint.op_Inequality(r.Pt,i)&&(n=r,n.Pt.X=i.X,n.Pt.Y=i.Y,r=this.DupOutPt(n,o))}return a==oe.Direction.dLeftToRight==o?(t.Prev=n,n.Next=t,e.Next=r,r.Prev=e):(t.Next=n,n.Prev=t,e.Prev=r,r.Next=e),!0},oe.Clipper.prototype.JoinPoints=function(t,e,n){var r=t.OutPt1,i=new oe.OutPt,o=t.OutPt2,a=new oe.OutPt,s=t.OutPt1.Pt.Y==t.OffPt.Y;if(s&&oe.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&oe.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(i=t.OutPt1.Next;i!=r&&oe.IntPoint.op_Equality(i.Pt,t.OffPt);)i=i.Next;var u=i.Pt.Y>t.OffPt.Y;for(a=t.OutPt2.Next;a!=o&&oe.IntPoint.op_Equality(a.Pt,t.OffPt);)a=a.Next;var l=a.Pt.Y>t.OffPt.Y;return u==l?!1:u?(i=this.DupOutPt(r,!1),a=this.DupOutPt(o,!0),r.Prev=o,o.Next=r,i.Next=a,a.Prev=i,t.OutPt1=r,t.OutPt2=i,!0):(i=this.DupOutPt(r,!0),a=this.DupOutPt(o,!1),r.Next=o,o.Prev=r,i.Prev=a,a.Next=i,t.OutPt1=r,t.OutPt2=i,!0)}if(s){for(i=r;r.Prev.Pt.Y==r.Pt.Y&&r.Prev!=i&&r.Prev!=o;)r=r.Prev;for(;i.Next.Pt.Y==i.Pt.Y&&i.Next!=r&&i.Next!=o;)i=i.Next;if(i.Next==r||i.Next==o)return!1;for(a=o;o.Prev.Pt.Y==o.Pt.Y&&o.Prev!=a&&o.Prev!=i;)o=o.Prev;for(;a.Next.Pt.Y==a.Pt.Y&&a.Next!=o&&a.Next!=r;)a=a.Next;if(a.Next==o||a.Next==r)return!1;var c={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,i.Pt.X,o.Pt.X,a.Pt.X,c))return!1;var h,f=c.Left,p=c.Right,d=new oe.IntPoint;return r.Pt.X>=f&&r.Pt.X<=p?(d.X=r.Pt.X,d.Y=r.Pt.Y,h=r.Pt.X>i.Pt.X):o.Pt.X>=f&&o.Pt.X<=p?(d.X=o.Pt.X,d.Y=o.Pt.Y,h=o.Pt.X>a.Pt.X):i.Pt.X>=f&&i.Pt.X<=p?(d.X=i.Pt.X,d.Y=i.Pt.Y,h=i.Pt.X>r.Pt.X):(d.X=a.Pt.X,d.Y=a.Pt.Y,h=a.Pt.X>o.Pt.X),t.OutPt1=r,t.OutPt2=o,this.JoinHorz(r,i,o,a,d,h)}for(i=r.Next;oe.IntPoint.op_Equality(i.Pt,r.Pt)&&i!=r;)i=i.Next;var m=i.Pt.Y>r.Pt.Y||!oe.ClipperBase.SlopesEqual(r.Pt,i.Pt,t.OffPt,this.m_UseFullRange);if(m){for(i=r.Prev;oe.IntPoint.op_Equality(i.Pt,r.Pt)&&i!=r;)i=i.Prev;if(i.Pt.Y>r.Pt.Y||!oe.ClipperBase.SlopesEqual(r.Pt,i.Pt,t.OffPt,this.m_UseFullRange))return!1}for(a=o.Next;oe.IntPoint.op_Equality(a.Pt,o.Pt)&&a!=o;)a=a.Next;var g=a.Pt.Y>o.Pt.Y||!oe.ClipperBase.SlopesEqual(o.Pt,a.Pt,t.OffPt,this.m_UseFullRange);if(g){for(a=o.Prev;oe.IntPoint.op_Equality(a.Pt,o.Pt)&&a!=o;)a=a.Prev;if(a.Pt.Y>o.Pt.Y||!oe.ClipperBase.SlopesEqual(o.Pt,a.Pt,t.OffPt,this.m_UseFullRange))return!1}return i==r||a==o||i==a||e==n&&m==g?!1:m?(i=this.DupOutPt(r,!1),a=this.DupOutPt(o,!0),r.Prev=o,o.Next=r,i.Next=a,a.Prev=i,t.OutPt1=r,t.OutPt2=i,!0):(i=this.DupOutPt(r,!0),a=this.DupOutPt(o,!1),r.Next=o,o.Prev=r,i.Prev=a,a.Next=i,t.OutPt1=r,t.OutPt2=i,!0)},oe.Clipper.GetBounds=function(t){for(var e=0,n=t.length;n>e&&0==t[e].length;)e++;if(e==n)return new oe.IntRect(0,0,0,0);var r=new oe.IntRect;for(r.left=t[e][0].X,r.right=r.left,r.top=t[e][0].Y,r.bottom=r.top;n>e;e++)for(var i=0,o=t[e].length;o>i;i++)t[e][i].X<r.left?r.left=t[e][i].X:t[e][i].X>r.right&&(r.right=t[e][i].X),t[e][i].Y<r.top?r.top=t[e][i].Y:t[e][i].Y>r.bottom&&(r.bottom=t[e][i].Y);return r},oe.Clipper.prototype.GetBounds2=function(t){var e=t,n=new oe.IntRect;for(n.left=t.Pt.X,n.right=t.Pt.X,n.top=t.Pt.Y,n.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<n.left&&(n.left=t.Pt.X),t.Pt.X>n.right&&(n.right=t.Pt.X),t.Pt.Y<n.top&&(n.top=t.Pt.Y),t.Pt.Y>n.bottom&&(n.bottom=t.Pt.Y),t=t.Next;return n},oe.Clipper.PointInPolygon=function(t,e){var n=0,r=e.length;if(3>r)return 0;for(var i=e[0],o=1;r>=o;++o){var a=o==r?e[0]:e[o];if(a.Y==t.Y&&(a.X==t.X||i.Y==t.Y&&a.X>t.X==i.X<t.X))return-1;if(i.Y<t.Y!=a.Y<t.Y)if(i.X>=t.X)if(a.X>t.X)n=1-n;else{var s=(i.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(i.Y-t.Y);if(0==s)return-1;s>0==a.Y>i.Y&&(n=1-n)}else if(a.X>t.X){var s=(i.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(i.Y-t.Y);if(0==s)return-1;s>0==a.Y>i.Y&&(n=1-n)}i=a}return n},oe.Clipper.prototype.PointInPolygon=function(t,e){for(var n=0,r=e;;){var i=e.Pt.X,o=e.Pt.Y,a=e.Next.Pt.X,s=e.Next.Pt.Y;if(s==t.Y&&(a==t.X||o==t.Y&&a>t.X==i<t.X))return-1;if(o<t.Y!=s<t.Y)if(i>=t.X)if(a>t.X)n=1-n;else{var u=(i-t.X)*(s-t.Y)-(a-t.X)*(o-t.Y);if(0==u)return-1;u>0==s>o&&(n=1-n)}else if(a>t.X){var u=(i-t.X)*(s-t.Y)-(a-t.X)*(o-t.Y);if(0==u)return-1;u>0==s>o&&(n=1-n)}if(e=e.Next,r==e)break}return n},oe.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var n=t;do{var r=this.PointInPolygon(n.Pt,e);if(r>=0)return 0!=r;n=n.Next}while(n!=t);return!0},oe.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var n=0,r=this.m_PolyOuts.length;r>n;n++){var i=this.m_PolyOuts[n];null!==i.Pts&&i.FirstLeft==t&&this.Poly2ContainsPoly1(i.Pts,e.Pts)&&(i.FirstLeft=e)}},oe.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var n=0,r=this.m_PolyOuts,i=r.length,o=r[n];i>n;n++,o=r[n])o.FirstLeft==t&&(o.FirstLeft=e)},oe.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},oe.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;e>t;t++){var n=this.m_Joins[t],r=this.GetOutRec(n.OutPt1.Idx),i=this.GetOutRec(n.OutPt2.Idx);if(null!=r.Pts&&null!=i.Pts){var o;if(o=r==i?r:this.Param1RightOfParam2(r,i)?i:this.Param1RightOfParam2(i,r)?r:this.GetLowermostRec(r,i),this.JoinPoints(n,r,i))if(r==i){if(r.Pts=n.OutPt1,r.BottomPt=null,i=this.CreateOutRec(),i.Pts=n.OutPt2,this.UpdateOutPtIdxs(i),this.m_UsingPolyTree)for(var a=0,s=this.m_PolyOuts.length;s-1>a;a++){var u=this.m_PolyOuts[a];null!=u.Pts&&oe.Clipper.ParseFirstLeft(u.FirstLeft)==r&&u.IsHole!=r.IsHole&&this.Poly2ContainsPoly1(u.Pts,n.OutPt2)&&(u.FirstLeft=i)}this.Poly2ContainsPoly1(i.Pts,r.Pts)?(i.IsHole=!r.IsHole,i.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,r),(i.IsHole^this.ReverseSolution)==this.Area(i)>0&&this.ReversePolyPtLinks(i.Pts)):this.Poly2ContainsPoly1(r.Pts,i.Pts)?(i.IsHole=r.IsHole,r.IsHole=!i.IsHole,i.FirstLeft=r.FirstLeft,r.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,i),(r.IsHole^this.ReverseSolution)==this.Area(r)>0&&this.ReversePolyPtLinks(r.Pts)):(i.IsHole=r.IsHole,i.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,i))}else i.Pts=null,i.BottomPt=null,i.Idx=r.Idx,r.IsHole=o.IsHole,o==i&&(r.FirstLeft=i.FirstLeft),i.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,r)}}},oe.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do e.Idx=t.Idx,e=e.Prev;while(e!=t.Pts)},oe.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],n=e.Pts;if(null!==n)do{for(var r=n.Next;r!=e.Pts;){if(oe.IntPoint.op_Equality(n.Pt,r.Pt)&&r.Next!=n&&r.Prev!=n){var i=n.Prev,o=r.Prev;n.Prev=o,o.Next=n,r.Prev=i,i.Next=r,e.Pts=n;var a=this.CreateOutRec();a.Pts=r,this.UpdateOutPtIdxs(a),this.Poly2ContainsPoly1(a.Pts,e.Pts)?(a.IsHole=!e.IsHole,a.FirstLeft=e):this.Poly2ContainsPoly1(e.Pts,a.Pts)?(a.IsHole=e.IsHole,e.IsHole=!a.IsHole,a.FirstLeft=e.FirstLeft,e.FirstLeft=a):(a.IsHole=e.IsHole,a.FirstLeft=e.FirstLeft),r=n}r=r.Next}n=n.Next}while(n!=e.Pts)}},oe.Clipper.Area=function(t){var e=t.length;if(3>e)return 0;for(var n=0,r=0,i=e-1;e>r;++r)n+=(t[i].X+t[r].X)*(t[i].Y-t[r].Y),i=r;return.5*-n},oe.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var n=0;do n+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!=t.Pts);return.5*n},ie&&(oe.Clipper.OffsetPaths=function(t,e,n,r,i){var o=new oe.Paths,a=new oe.ClipperOffset(i,i);return a.AddPaths(t,n,r),a.Execute(o,e),o}),oe.Clipper.SimplifyPolygon=function(t,e){var n=new Array,r=new oe.Clipper(0);return r.StrictlySimple=!0,r.AddPath(t,oe.PolyType.ptSubject,!0),r.Execute(oe.ClipType.ctUnion,n,e,e),n},oe.Clipper.SimplifyPolygons=function(t,e){"undefined"==typeof e&&(e=oe.PolyFillType.pftEvenOdd);var n=new Array,r=new oe.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(t,oe.PolyType.ptSubject,!0),r.Execute(oe.ClipType.ctUnion,n,e,e),n},oe.Clipper.DistanceSqrd=function(t,e){var n=t.X-e.X,r=t.Y-e.Y;return n*n+r*r},oe.Clipper.DistanceFromLineSqrd=function(t,e,n){var r=e.Y-n.Y,i=n.X-e.X,o=r*e.X+i*e.Y;return o=r*t.X+i*t.Y-o,o*o/(r*r+i*i)},oe.Clipper.SlopesNearCollinear=function(t,e,n,r){return oe.Clipper.DistanceFromLineSqrd(e,t,n)<r},oe.Clipper.PointsAreClose=function(t,e,n){var r=t.X-e.X,i=t.Y-e.Y;return n>=r*r+i*i},oe.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},oe.Clipper.CleanPolygon=function(t,e){"undefined"==typeof e&&(e=1.415);var n=t.length;if(0==n)return new Array;for(var r=new Array(n),i=0;n>i;++i)r[i]=new oe.OutPt;for(var i=0;n>i;++i)r[i].Pt=t[i],r[i].Next=r[(i+1)%n],r[i].Next.Prev=r[i],r[i].Idx=0;for(var o=e*e,a=r[0];0==a.Idx&&a.Next!=a.Prev;)oe.Clipper.PointsAreClose(a.Pt,a.Prev.Pt,o)?(a=oe.Clipper.ExcludeOp(a),n--):oe.Clipper.PointsAreClose(a.Prev.Pt,a.Next.Pt,o)?(oe.Clipper.ExcludeOp(a.Next),a=oe.Clipper.ExcludeOp(a),n-=2):oe.Clipper.SlopesNearCollinear(a.Prev.Pt,a.Pt,a.Next.Pt,o)?(a=oe.Clipper.ExcludeOp(a),n--):(a.Idx=1,a=a.Next);3>n&&(n=0);for(var s=new Array(n),i=0;n>i;++i)s[i]=new oe.IntPoint(a.Pt),a=a.Next;return r=null,s},oe.Clipper.CleanPolygons=function(t,e){for(var n=new Array(t.length),r=0,i=t.length;i>r;r++)n[r]=oe.Clipper.CleanPolygon(t[r],e);return n},oe.Clipper.Minkowski=function(t,e,n,r){var i=r?1:0,o=t.length,a=e.length,s=new Array;if(n)for(var u=0;a>u;u++){for(var l=new Array(o),c=0,h=t.length,f=t[c];h>c;c++,f=t[c])l[c]=new oe.IntPoint(e[u].X+f.X,e[u].Y+f.Y);s.push(l)}else for(var u=0;a>u;u++){for(var l=new Array(o),c=0,h=t.length,f=t[c];h>c;c++,f=t[c])l[c]=new oe.IntPoint(e[u].X-f.X,e[u].Y-f.Y);s.push(l)}for(var p=new Array,u=0;a-1+i>u;u++)for(var c=0;o>c;c++){var d=new Array;d.push(s[u%a][c%o]),d.push(s[(u+1)%a][c%o]),d.push(s[(u+1)%a][(c+1)%o]),d.push(s[u%a][(c+1)%o]),oe.Clipper.Orientation(d)||d.reverse(),p.push(d)}var m=new oe.Clipper(0);return m.AddPaths(p,oe.PolyType.ptSubject,!0),m.Execute(oe.ClipType.ctUnion,s,oe.PolyFillType.pftNonZero,oe.PolyFillType.pftNonZero),s},oe.Clipper.MinkowskiSum=function(){var t=arguments,e=t.length;if(3==e){var n=t[0],r=t[1],i=t[2];return oe.Clipper.Minkowski(n,r,!0,i)}if(4==e){for(var o,n=t[0],a=t[1],s=t[2],i=t[3],u=new oe.Clipper,l=0,c=a.length;c>l;++l){var o=oe.Clipper.Minkowski(n,a[l],!0,i);u.AddPaths(o,oe.PolyType.ptSubject,!0)}i&&u.AddPaths(a,oe.PolyType.ptClip,!0);var h=new oe.Paths;return u.Execute(oe.ClipType.ctUnion,h,s,s),h}},oe.Clipper.MinkowskiDiff=function(t,e,n){return oe.Clipper.Minkowski(t,e,!1,n)},oe.Clipper.PolyTreeToPaths=function(t){var e=new Array;return oe.Clipper.AddPolyNodeToPaths(t,oe.Clipper.NodeType.ntAny,e),e},oe.Clipper.AddPolyNodeToPaths=function(t,e,n){var r=!0;switch(e){case oe.Clipper.NodeType.ntOpen:return;case oe.Clipper.NodeType.ntClosed:r=!t.IsOpen}t.m_polygon.length>0&&r&&n.push(t.m_polygon);for(var i=0,o=t.Childs(),a=o.length,s=o[i];a>i;i++,s=o[i])oe.Clipper.AddPolyNodeToPaths(s,e,n)},oe.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new oe.Paths,n=0,r=t.ChildCount();r>n;n++)t.Childs()[n].IsOpen&&e.push(t.Childs()[n].m_polygon);return e},oe.Clipper.ClosedPathsFromPolyTree=function(t){var e=new oe.Paths;return oe.Clipper.AddPolyNodeToPaths(t,oe.Clipper.NodeType.ntClosed,e),e},xe(oe.Clipper,oe.ClipperBase),oe.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},oe.ClipperOffset=function(t,e){"undefined"==typeof t&&(t=2),"undefined"==typeof e&&(e=oe.ClipperOffset.def_arc_tolerance),this.m_destPolys=new oe.Paths,this.m_srcPoly=new oe.Path,this.m_destPoly=new oe.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new oe.IntPoint,this.m_polyNodes=new oe.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},oe.ClipperOffset.two_pi=6.28318530717959,oe.ClipperOffset.def_arc_tolerance=.25,oe.ClipperOffset.prototype.Clear=function(){oe.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},oe.ClipperOffset.Round=oe.Clipper.Round,oe.ClipperOffset.prototype.AddPath=function(t,e,n){var r=t.length-1;if(!(0>r)){var i=new oe.PolyNode;if(i.m_jointype=e,i.m_endtype=n,n==oe.EndType.etClosedLine||n==oe.EndType.etClosedPolygon)for(;r>0&&oe.IntPoint.op_Equality(t[0],t[r]);)r--;i.m_polygon.push(t[0]);for(var o=0,a=0,s=1;r>=s;s++)oe.IntPoint.op_Inequality(i.m_polygon[o],t[s])&&(o++,i.m_polygon.push(t[s]),(t[s].Y>i.m_polygon[a].Y||t[s].Y==i.m_polygon[a].Y&&t[s].X<i.m_polygon[a].X)&&(a=o));if(!(n==oe.EndType.etClosedPolygon&&2>o||n!=oe.EndType.etClosedPolygon&&0>o)&&(this.m_polyNodes.AddChild(i),n==oe.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new oe.IntPoint(0,a);else{var u=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(i.m_polygon[a].Y>u.Y||i.m_polygon[a].Y==u.Y&&i.m_polygon[a].X<u.X)&&(this.m_lowest=new oe.IntPoint(this.m_polyNodes.ChildCount()-1,a))}}},oe.ClipperOffset.prototype.AddPaths=function(t,e,n){for(var r=0,i=t.length;i>r;r++)this.AddPath(t[r],e,n)},oe.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!oe.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];(e.m_endtype==oe.EndType.etClosedPolygon||e.m_endtype==oe.EndType.etClosedLine&&oe.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];e.m_endtype!=oe.EndType.etClosedLine||oe.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},oe.ClipperOffset.GetUnitNormal=function(t,e){var n=e.X-t.X,r=e.Y-t.Y;if(0==n&&0==r)return new oe.DoublePoint(0,0);var i=1/Math.sqrt(n*n+r*r);return n*=i,r*=i,new oe.DoublePoint(r,-n)},oe.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,oe.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var n=this.m_polyNodes.Childs()[e];n.m_endtype==oe.EndType.etClosedPolygon&&this.m_destPolys.push(n.m_polygon)}else{this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var r;r=this.ArcTolerance<=0?oe.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*oe.ClipperOffset.def_arc_tolerance?Math.abs(t)*oe.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var i=3.14159265358979/Math.acos(1-r/Math.abs(t));this.m_sin=Math.sin(oe.ClipperOffset.two_pi/i),this.m_cos=Math.cos(oe.ClipperOffset.two_pi/i),this.m_StepsPerRad=i/oe.ClipperOffset.two_pi,0>t&&(this.m_sin=-this.m_sin);for(var e=0;e<this.m_polyNodes.ChildCount();e++){var n=this.m_polyNodes.Childs()[e];this.m_srcPoly=n.m_polygon;var o=this.m_srcPoly.length;if(!(0==o||0>=t&&(3>o||n.m_endtype!=oe.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=o){this.m_normals.length=0;for(var a=0;o-1>a;a++)this.m_normals.push(oe.ClipperOffset.GetUnitNormal(this.m_srcPoly[a],this.m_srcPoly[a+1]));if(n.m_endtype==oe.EndType.etClosedLine||n.m_endtype==oe.EndType.etClosedPolygon?this.m_normals.push(oe.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new oe.DoublePoint(this.m_normals[o-2])),n.m_endtype==oe.EndType.etClosedPolygon){for(var s=o-1,a=0;o>a;a++)s=this.OffsetPoint(a,s,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(n.m_endtype==oe.EndType.etClosedLine){for(var s=o-1,a=0;o>a;a++)s=this.OffsetPoint(a,s,n.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var u=this.m_normals[o-1],a=o-1;a>0;a--)this.m_normals[a]=new oe.DoublePoint(-this.m_normals[a-1].X,-this.m_normals[a-1].Y);this.m_normals[0]=new oe.DoublePoint(-u.X,-u.Y),s=0;for(var a=o-1;a>=0;a--)s=this.OffsetPoint(a,s,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var s=0,a=1;o-1>a;++a)s=this.OffsetPoint(a,s,n.m_jointype);var l;if(n.m_endtype==oe.EndType.etOpenButt){var a=o-1;l=new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[a].X*t),oe.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[a].Y*t)),this.m_destPoly.push(l),l=new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[a].X-this.m_normals[a].X*t),oe.ClipperOffset.Round(this.m_srcPoly[a].Y-this.m_normals[a].Y*t)),this.m_destPoly.push(l)}else{var a=o-1;s=o-2,this.m_sinA=0,this.m_normals[a]=new oe.DoublePoint(-this.m_normals[a].X,-this.m_normals[a].Y),n.m_endtype==oe.EndType.etOpenSquare?this.DoSquare(a,s):this.DoRound(a,s)}for(var a=o-1;a>0;a--)this.m_normals[a]=new oe.DoublePoint(-this.m_normals[a-1].X,-this.m_normals[a-1].Y);this.m_normals[0]=new oe.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),s=o-1;for(var a=s-1;a>0;--a)s=this.OffsetPoint(a,s,n.m_jointype);n.m_endtype==oe.EndType.etOpenButt?(l=new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),oe.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(l),l=new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),oe.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(l)):(s=1,this.m_sinA=0,n.m_endtype==oe.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(n.m_jointype==oe.JoinType.jtRound)for(var c=1,h=0,a=1;i>=a;a++){this.m_destPoly.push(new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[0].X+c*t),oe.ClipperOffset.Round(this.m_srcPoly[0].Y+h*t)));var f=c;c=c*this.m_cos-this.m_sin*h,h=f*this.m_sin+h*this.m_cos}else for(var c=-1,h=-1,a=0;4>a;++a)this.m_destPoly.push(new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[0].X+c*t),oe.ClipperOffset.Round(this.m_srcPoly[0].Y+h*t))),0>c?c=1:0>h?h=1:c=-1;this.m_destPolys.push(this.m_destPoly)}}}},oe.ClipperOffset.prototype.Execute=function(){var t=arguments,e=t[0]instanceof oe.PolyTree;if(e){var n=t[0],r=t[1];n.Clear(),this.FixOrientations(),this.DoOffset(r);var i=new oe.Clipper(0);if(i.AddPaths(this.m_destPolys,oe.PolyType.ptSubject,!0),r>0)i.Execute(oe.ClipType.ctUnion,n,oe.PolyFillType.pftPositive,oe.PolyFillType.pftPositive);else{var o=oe.Clipper.GetBounds(this.m_destPolys),a=new oe.Path;if(a.push(new oe.IntPoint(o.left-10,o.bottom+10)),a.push(new oe.IntPoint(o.right+10,o.bottom+10)),a.push(new oe.IntPoint(o.right+10,o.top-10)),a.push(new oe.IntPoint(o.left-10,o.top-10)),i.AddPath(a,oe.PolyType.ptSubject,!0),i.ReverseSolution=!0,i.Execute(oe.ClipType.ctUnion,n,oe.PolyFillType.pftNegative,oe.PolyFillType.pftNegative),1==n.ChildCount()&&n.Childs()[0].ChildCount()>0){var s=n.Childs()[0];n.Childs()[0]=s.Childs()[0];for(var u=1;u<s.ChildCount();u++)n.AddChild(s.Childs()[u])}else n.Clear()}}else{var n=t[0],r=t[1];oe.Clear(n),this.FixOrientations(),this.DoOffset(r);var i=new oe.Clipper(0);if(i.AddPaths(this.m_destPolys,oe.PolyType.ptSubject,!0),r>0)i.Execute(oe.ClipType.ctUnion,n,oe.PolyFillType.pftPositive,oe.PolyFillType.pftPositive);else{var o=oe.Clipper.GetBounds(this.m_destPolys),a=new oe.Path;a.push(new oe.IntPoint(o.left-10,o.bottom+10)),a.push(new oe.IntPoint(o.right+10,o.bottom+10)),a.push(new oe.IntPoint(o.right+10,o.top-10)),a.push(new oe.IntPoint(o.left-10,o.top-10)),i.AddPath(a,oe.PolyType.ptSubject,!0),i.ReverseSolution=!0,i.Execute(oe.ClipType.ctUnion,n,oe.PolyFillType.pftNegative,oe.PolyFillType.pftNegative),n.length>0&&n.splice(0,1)}}},oe.ClipperOffset.prototype.OffsetPoint=function(t,e,n){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),oe.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new oe.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),oe.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(n){case oe.JoinType.jtMiter:var r=1+(this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y);r>=this.m_miterLim?this.DoMiter(t,e,r):this.DoSquare(t,e);break;case oe.JoinType.jtSquare:this.DoSquare(t,e);break;case oe.JoinType.jtRound:this.DoRound(t,e)}return e=t},oe.ClipperOffset.prototype.DoSquare=function(t,e){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*n)),oe.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*n)))),this.m_destPoly.push(new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*n)),oe.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*n))));
},oe.ClipperOffset.prototype.DoMiter=function(t,e,n){var r=this.m_delta/n;this.m_destPoly.push(new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*r),oe.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*r)))},oe.ClipperOffset.prototype.DoRound=function(t,e){for(var n,r=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),i=oe.Cast_Int32(oe.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(r))),o=this.m_normals[e].X,a=this.m_normals[e].Y,s=0;i>s;++s)this.m_destPoly.push(new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[t].X+o*this.m_delta),oe.ClipperOffset.Round(this.m_srcPoly[t].Y+a*this.m_delta))),n=o,o=o*this.m_cos-this.m_sin*a,a=n*this.m_sin+a*this.m_cos;this.m_destPoly.push(new oe.IntPoint(oe.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),oe.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},oe.Error=function(t){try{throw new Error(t)}catch(e){alert(e.message)}},oe.JS={},oe.JS.AreaOfPolygon=function(t,e){return e||(e=1),oe.Clipper.Area(t)/(e*e)},oe.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var n=0,r=0;r<t.length;r++)n+=oe.Clipper.Area(t[r]);return n/(e*e)},oe.JS.BoundsOfPath=function(t,e){return oe.JS.BoundsOfPaths([t],e)},oe.JS.BoundsOfPaths=function(t,e){e||(e=1);var n=oe.Clipper.GetBounds(t);return n.left/=e,n.bottom/=e,n.right/=e,n.top/=e,n},oe.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var n=t[0]instanceof Array,t=oe.JS.Clone(t);if("number"!=typeof e||null===e)return oe.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||0>e)return t;n||(t=[t]);for(var r,i,o,a,s,u,l,c=t.length,h=[],f=0;c>f;f++)if(i=t[f],r=i.length,0!==r)if(3>r)o=i,h.push(o);else{for(o=i,a=e*e,s=i[0],u=1,l=1;r>l;l++)(i[l].X-s.X)*(i[l].X-s.X)+(i[l].Y-s.Y)*(i[l].Y-s.Y)<=a||(o[u]=i[l],s=i[l],u++);s=i[u-1],(i[0].X-s.X)*(i[0].X-s.X)+(i[0].Y-s.Y)*(i[0].Y-s.Y)<=a&&u--,r>u&&o.splice(u,r-u),o.length&&h.push(o)}return!n&&h.length?h=h[0]:n||0!==h.length?n&&0===h.length&&(h=[[]]):h=[],h},oe.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var n,r,i,o,a=t.length,s=new Array(a);for(r=0;a>r;r++){for(n=t[r].length,o=new Array(n),i=0;n>i;i++)o[i]={X:t[r][i].X,Y:t[r][i].Y};s[r]=o}return e||(s=s[0]),s},oe.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return oe.Error("Tolerance is not a number in Lighten()."),oe.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||0>e)return oe.JS.Clone(t);t[0]instanceof Array||(t=[t]);var n,r,i,o,a,s,u,l,c,h,f,p,d,m,g,y,v,b=t.length,_=e*e,x=[];for(n=0;b>n;n++)if(i=t[n],s=i.length,0!=s){for(o=0;1e6>o;o++){for(a=[],s=i.length,i[s-1].X!=i[0].X||i[s-1].Y!=i[0].Y?(p=1,i.push({X:i[0].X,Y:i[0].Y}),s=i.length):p=0,f=[],r=0;s-2>r;r++)u=i[r],c=i[r+1],l=i[r+2],y=u.X,v=u.Y,d=l.X-y,m=l.Y-v,(0!==d||0!==m)&&(g=((c.X-y)*d+(c.Y-v)*m)/(d*d+m*m),g>1?(y=l.X,v=l.Y):g>0&&(y+=d*g,v+=m*g)),d=c.X-y,m=c.Y-v,h=d*d+m*m,_>=h&&(f[r+1]=1,r++);for(a.push({X:i[0].X,Y:i[0].Y}),r=1;s-1>r;r++)f[r]||a.push({X:i[r].X,Y:i[r].Y});if(a.push({X:i[s-1].X,Y:i[s-1].Y}),p&&i.pop(),!f.length)break;i=a}s=a.length,a[s-1].X==a[0].X&&a[s-1].Y==a[0].Y&&a.pop(),a.length>2&&x.push(a)}return!t[0]instanceof Array&&(x=x[0]),"undefined"==typeof x&&(x=[[]]),x},oe.JS.PerimeterOfPath=function(t,e,n){if("undefined"==typeof t)return 0;var r,i,o=Math.sqrt,a=0,s=0,u=0,l=0,c=0,h=t.length;if(2>h)return 0;for(e&&(t[h]=t[0],h++);--h;)r=t[h],s=r.X,u=r.Y,i=t[h-1],l=i.X,c=i.Y,a+=o((s-l)*(s-l)+(u-c)*(u-c));return e&&t.pop(),a/n},oe.JS.PerimeterOfPaths=function(t,e,n){n||(n=1);for(var r=0,i=0;i<t.length;i++)r+=oe.JS.PerimeterOfPath(t[i],e,n);return r},oe.JS.ScaleDownPath=function(t,e){var n,r;for(e||(e=1),n=t.length;n--;)r=t[n],r.X=r.X/e,r.Y=r.Y/e},oe.JS.ScaleDownPaths=function(t,e){var n,r,i;Math.round;for(e||(e=1),n=t.length;n--;)for(r=t[n].length;r--;)i=t[n][r],i.X=i.X/e,i.Y=i.Y/e},oe.JS.ScaleUpPath=function(t,e){var n,r,i=Math.round;for(e||(e=1),n=t.length;n--;)r=t[n],r.X=i(r.X*e),r.Y=i(r.Y*e)},oe.JS.ScaleUpPaths=function(t,e){var n,r,i,o=Math.round;for(e||(e=1),n=t.length;n--;)for(r=t[n].length;r--;)i=t[n][r],i.X=o(i.X*e),i.Y=o(i.Y*e)},oe.ExPolygons=function(){return[]},oe.ExPolygon=function(){this.outer=null,this.holes=null},oe.JS.AddOuterPolyNodeToExPolygons=function(t,e){var n=new oe.ExPolygon;n.outer=t.Contour();var r=t.Childs(),i=r.length;n.holes=new Array(i);var o,a,s,u,l,c;for(s=0;i>s;s++)for(o=r[s],n.holes[s]=o.Contour(),u=0,l=o.Childs(),c=l.length;c>u;u++)a=l[u],oe.JS.AddOuterPolyNodeToExPolygons(a,e);e.push(n)},oe.JS.ExPolygonsToPaths=function(t){var e,n,r,i,o=new oe.Paths;for(e=0,r=t.length;r>e;e++)for(o.push(t[e].outer),n=0,i=t[e].holes.length;i>n;n++)o.push(t[e].holes[n]);return o},oe.JS.PolyTreeToExPolygons=function(t){var e,n,r,i,o=new oe.ExPolygons;for(n=0,r=t.Childs(),i=r.length;i>n;n++)e=r[n],oe.JS.AddOuterPolyNodeToExPolygons(e,o);return o},e.exports=oe},{}],179:[function(t,e,n){arguments[4][96][0].apply(n,arguments)},{dup:96}],180:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{color:181,colorbrewer:187,"d3-color":188,"d3-scale":189,dup:97,lodash:190,superagent:191}],181:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":183,"color-string":184,dup:11}],182:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],183:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":182,dup:13}],184:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":185,dup:14}],185:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],186:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],187:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":186,dup:8}],188:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],189:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],190:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],191:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:192,reduce:193}],192:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],193:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],194:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":195,dup:6}],195:[function(t,e,n){arguments[4][111][0].apply(n,arguments)},{buffer:1,dup:111,jquery:168,leaflet:179,"lightning-client-utils":180,"lightning-visualization":196,lodash:394}],196:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:197,"insert-css":198,lodash:394,qwery:199}],197:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],198:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],199:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],200:[function(t,e,n){(function(n){"use strict";var r,i,o=t("lightning-image"),a=t("lightning-client-utils"),s=t("geojson-validation"),u=t("lodash"),l=n("LmxlYWZsZXQtY29udGFpbmVyIGltZy5sZWFmbGV0LWltYWdlLWxheWVyIHsKICAgIG1heC13aWR0aDogbm9uZSAhaW1wb3J0YW50OwogICAgaW1hZ2UtcmVuZGVyaW5nOiBwaXhlbGF0ZWQ7Cn0KCi5pbWFnZS1tYXAgc3ZnLmxlYWZsZXQtem9vbS1hbmltYXRlZCB7CiAgICBtYXgtd2lkdGg6IDIwMDAwMHB4Owp9CgouaW1hZ2UtbWFwIC5vdmVybGF5IHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIGxlZnQ6IDA7CiAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgIGJveC1zaGFkb3c6IGluc2V0IC0xMDBweCAwIDEwMHB4IC0xMDBweCByZ2JhKDAsIDAsIDAsIC4yNSk7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIHotaW5kZXg6IDIwMDE7Cn0KCgouaW1hZ2UtbWFwIGcgcGF0aCB7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4yNXM7CiAgICBzdHJva2Utd2lkdGg6IDRweDsKICAgIHN0cm9rZS1vcGFjaXR5OiAxOwogICAgc3Ryb2tlOiByZ2IoMjU1LDI1NSwyNTUpOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgei1pbmRleDogMTAwMTsKICAgIGZpbGw6IGxpZ2h0ZW4ocmdiKDIzMCwyMzAsMjMwKSwgMjAlKTsKICAgIGZpbGwtb3BhY2l0eTogLjY7CiAgICAtd2Via2l0LWZpbHRlcjogbm9uZTsKfQoKLmltYWdlLW1hcC5tb2RlLWRlbGV0ZSBwYXRoIHsKICAgIGN1cnNvcjogbm8tZHJvcDsKfQoKLmltYWdlLW1hcC5tb2RlLWRlbGV0ZSBwYXRoOmhvdmVyIHsKICAgIGZpbGw6ICM0ZDRkNGQgIWltcG9ydGFudDsKfQoKLmltYWdlLW1hcCBkaXYucG9seWdvbi1lbGJvdyB7CiAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgLjI1czsKICAgIGJveC1zaGFkb3c6IDAgMCAwIDJweCB3aGl0ZSwgMCAwIDEwcHggcmdiYSgwLCAwLCAwLCAuMzUpOwogICAgYm9yZGVyOiA1cHggc29saWQgcmdiKDE4MCwxODAsMTgwKTsKICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMjVzOwogICAgY3Vyc29yOiBtb3ZlOwogICAgb3BhY2l0eTogMDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIHdpZHRoOiAwICFpbXBvcnRhbnQ7CiAgICBoZWlnaHQ6IDAgIWltcG9ydGFudDsKfQoKLmltYWdlLW1hcCBkaXYucG9seWdvbi1lbGJvdy5ub24tcG9seWdvbiB7CiAgICBvcGFjaXR5OiAwICFpbXBvcnRhbnQ7CiAgICBwb2ludGVyLWV2ZW50czogbm9uZSAhaW1wb3J0YW50OwogICAgYm9yZGVyOiA1cHggc29saWQgZGFya2dyYXk7Cn0KCi5pbWFnZS1tYXAubW9kZS1lZGl0IGRpdi5wb2x5Z29uLWVsYm93IHsKICAgIG9wYWNpdHk6IDE7CiAgICBwb2ludGVyLWV2ZW50czogYWxsOwp9CgouaW1hZ2UtbWFwIHN2Zy50cmFjZXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgbGVmdDogMDsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgei1pbmRleDogMjAwMTsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwp9CgoubW91c2UtbGluZSB7CiAgICBzdHJva2U6IHJnYigyNTUsMjU1LDI1NSk7CiAgICBzdHJva2Utd2lkdGg6IDI7CiAgICBvcGFjaXR5OiAxLjA7Cn0KCgouaW1hZ2UtbWFwLm1vZGUtY3JlYXRlIHsKICAgIGN1cnNvcjogY3Jvc3NoYWlyOwp9","base64"),c=u.template(n("PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuY3NzIi8+CjxkaXYgaWQ9ImltYWdlLW1hcC08JT0gaWRlbnRpZmllciAlPiIgY2xhc3M9ImltYWdlLW1hcCI+CjwvZGl2Pg==","base64")),h=o.extend({init:function(){r=t("leaflet"),i=t("leaflet.freedraw-browserify"),i(r),this.identifier=a.getUniqueId();var e=c({identifier:this.identifier});this.$el=$(this.selector).first(),this.$el.append(e),this.render()},render:function(){this.img=new Image,this.img.onload=this.onImageLoad.bind(this),this.img.src=a.cleanImageURL(this.images[0])},css:l,onImageLoad:function(){function t(){var t;x[w].indexOf("white")>-1?t=d3.hsl("rgb(255,255,255)"):x[w].indexOf("bright")>-1&&(t=d3.hsl("rgb(240,30,110)"));var e=s.color&&x[w].indexOf("data")>-1;d3.select(c.$el[0]).selectAll(".image-map g path.leaflet-freedraw-polygon").style("stroke",function(n,r){return e&&r<s.color.length?s.color[r]:t}).style("fill",function(n,r){var i;return i=e&&r<s.color.length?d3.hsl(s.color[r]):t,i.brighter(1.2).toString()})}function e(){d3.event.altKey&&_.setMode(r.FreeDraw.MODES.EDIT),d3.event.metaKey|d3.event.shiftKey&&_.setMode(r.FreeDraw.MODES.VIEW),d3.event.shiftKey&(37==d3.event.keyCode|39==d3.event.keyCode)&&(d3.event.preventDefault(),37==d3.event.keyCode&&(w=C(w-1,x.length)),39==d3.event.keyCode&&(w=C(w+1,x.length)),t())}function n(){_.setMode(r.FreeDraw.MODES.CREATE|r.FreeDraw.MODES.DELETE)}function i(){var t=_.memory.states.length,e=_.memory.states[t-1].map(function(t){var e=[];return t.forEach(function(t){var n=m.project(t,1);n.x*=h/p,n.y*=f/d,e.push([n.x,n.y])}),e});a.sendCommMessage(c,"selection",e),a.updateSettings(c,{coords:e},function(t){t&&(console.log("err saving user data"),console.log(t))})}var o=this.img,s=this.data,l=this.width,c=this,h=o.width,f=o.height,p=l,d=l*(f/h);this.$el.find("#image-map-"+this.identifier).width(p).height(d),this.map&&this.map.remove(),this.map=r.map("image-map-"+this.identifier,{minZoom:1,maxZoom:8,center:[p/2,d/2],zoom:1,attributionControl:!1,zoomControl:!1,crs:r.CRS.Simple});var m=this.map,g=m.unproject([0,d],1),y=m.unproject([p,0],1),v=new r.LatLngBounds(g,y),b=r.imageOverlay(o.src,v);m.addLayer(b),m.setMaxBounds(v);var _=new r.FreeDraw({mode:r.FreeDraw.MODES.CREATE|r.FreeDraw.MODES.DELETE|r.FreeDraw.MODES.DELETE});_.options.attemptMerge=!1,_.options.setHullAlgorithm("brian3kb/graham_scan_js"),_.options.setSmoothFactor(0),m.addLayer(_);var x;if(u.isEmpty(s)){x=["white","bright"];var w=0}else{var M=s.polygons;M=M.map(function(t){var e=[];return t.map(function(t){var n=new r.point(t[0]/(h/p),t[1]/(f/d),!1),i=m.unproject(n,1);e.push(i)}),e}),_.options.simplifyPolygon=!1,M.forEach(function(t){_.createPolygon(t,!0)}),_.options.simplifyPolygon=!0,x=["white","bright","data-white"];var w=2;i()}d3.select(this.$el[0]).on("keydown",e).on("keyup",n),t();var C=function(t,e){return(t%e+e)%e};this.emit("image:loaded"),this.$el.unbind().click(function(){i()});var P;a.getSettings(this,function(t,e){t||(P=e.coords)}),_.on("markers",t),_.on("destroy",function(e){var n=e.index;s.color&&u.isArray(s.color)&&(s.color.splice(n,1),0===s.color.length&&(w=0,x=["white","bright"])),i(),t()}),this.map=m,this.bounds=v,this.overlay=b},formatData:function(t){if(!u.isEmpty(t)){var e=[];if(s.isFeatureCollection(t))t.features.forEach(function(t){s.isFeature(t)&&s.isPolygon(t.geometry)&&e.push(t.geometry.coordinates[0])});else{if(!t.coordinates)throw"Input data not understood";e=t.coordinates}var n=a.getColorFromData(t);0==n.length?n=a.getColors(e.length):1==n.length&&(n=u.range(e.length).map(function(){return n})),t.color=n,t.polygons=e}return t},updateData:function(t){this.data=t},appendData:function(t){}});e.exports=h}).call(this,t("buffer").Buffer)},{buffer:1,"geojson-validation":167,leaflet:179,"leaflet.freedraw-browserify":175,"lightning-client-utils":180,"lightning-image":194,lodash:394}],201:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":222,dup:6}],202:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],203:[function(t,e,n){arguments[4][96][0].apply(n,arguments)},{dup:96}],204:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{color:205,colorbrewer:211,"d3-color":212,"d3-scale":213,dup:97,lodash:214,superagent:215}],205:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":207,"color-string":208,dup:11}],206:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],207:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":206,dup:13}],208:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":209,dup:14}],209:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],210:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],211:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":210,dup:8}],212:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],213:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],214:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],215:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:216,reduce:217}],216:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],217:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],218:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:219,"insert-css":220,lodash:394,qwery:221}],219:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],220:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],221:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],222:[function(t,e,n){arguments[4][111][0].apply(n,arguments)},{buffer:1,dup:111,jquery:202,leaflet:203,"lightning-client-utils":204,"lightning-visualization":218,lodash:394}],223:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":247,dup:6}],224:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":246,dup:6}],225:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{"./src":226,dup:30}],226:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],227:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],228:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:229,colorbrewer:235,"d3-color":236,"d3-scale":237,dup:10,lodash:238,superagent:239}],229:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":231,"color-string":232,dup:11}],230:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],231:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":230,dup:13}],232:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":233,dup:14}],233:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],234:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],235:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":234,dup:8}],236:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],237:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],238:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],239:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:240,reduce:241}],240:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],241:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],242:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:243,"insert-css":244,lodash:394,qwery:245}],243:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],244:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],245:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],246:[function(t,e,n){(function(n){"use strict";var r=t("d3"),i=t("d3-multiaxis-zoom"),o=t("lodash"),a=t("lightning-client-utils"),s=t("lightning-visualization"),u=n("QGltcG9ydCB1cmwoaHR0cDovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zKTsKCi5saW5lLXBsb3QgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgoubGluZS1wbG90LmNhbnZhcyB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBwb2ludGVyLWV2ZW50czogYWxsOwogICAgei1pbmRleDogMTsKfQoKLmxpbmUtcGxvdC5zdmcgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgei1pbmRleDogMDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsMCwwKTsKfQoKLmxpbmUtcGxvdC5yZWN0IHsKICAgIGZpbGw6ICNmZmZmZmY7CiAgICB6LWluZGV4OiAxMDA7Cn0KCi5saW5lLXBsb3QgLnBsb3QgewogICAgZmlsbDogI2ZmZmZmZjsKfQoKLmxpbmUtcGxvdCAuZ3JpZCAudGljayB7CiAgICBzdHJva2U6ICNCRUM5Q0U7CiAgICBvcGFjaXR5OiAwLjY7Cn0KCi5saW5lLXBsb3QgLmdyaWQgcGF0aCB7CiAgICBzdHJva2Utd2lkdGg6IDA7Cn0KCi5saW5lLXBsb3QgLmF4aXMgcGF0aCwgLmF4aXMgbGluZSB7CiAgICBmaWxsOiBub25lOwogICAgc3Ryb2tlOiBub25lOwogICAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzOwp9CgoubGluZS1wbG90IC5heGlzIHBhdGggewogICAgZGlzcGxheTogbm9uZTsKfQoKLmxpbmUtcGxvdCAubGluZSB7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBmaWxsOiBub25lOwp9CgoubGluZS1wbG90IHRleHQgewogICAgZmlsbDogI0E3QTlBQzsKICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBmb250LXdlaWdodDogbm9ybWFsOwp9CgoubGluZS1wbG90IC5sYWJlbCB7CiAgICBmb250LWZhbWlseTogJ09wZW4gU2FucycsIHNhbnMtc2VyaWY7CiAgICBmb250LXNpemU6IDE2cHg7Cn0K","base64"),l=s.extend({getDefaultOptions:function(){return{zoom:!0}},init:function(){i(r),this.margin={top:0,right:0,bottom:20,left:60},o.has(this.data,"xaxis")&&(this.margin.bottom=57),o.has(this.data,"yaxis")&&(this.margin.left=85),this.render()},css:u,render:function(){function t(){function t(t){return parseFloat(r.format(".3f")(t))}var e=f(h.data.series.map(function(t){return t.d}),function(t){return t.y}),i=f(h.data.series.map(function(t){return t.d}),function(t){return t.x}),o=Math.abs(e[1]-e[0])||1,a=Math.abs(i[1]-i[0])||1;h.x=r.scale.linear().domain([i[0]-.05*a,i[1]+.05*a]).range([0,u-l.left-l.right]),h.y=r.scale.linear().domain([e[0]-.1*o,e[1]+.1*o]).range([s-l.top-l.bottom,0]),h.xAxis=r.svg.axis().scale(h.x).orient("bottom").ticks(5).tickFormat(t),h.yAxis=r.svg.axis().scale(h.y).orient("left").ticks(5).tickFormat(t),h.zoom=r.behavior.zoom().x(h.x).y(h.y).on("zoom",n)}function e(){g.select(".x.axis").call(h.xAxis),g.select(".y.axis").call(h.yAxis),g.select(".x.grid").call(y().tickSize(-(s-l.top-l.bottom),0,0).tickFormat("")),g.select(".y.grid").call(v().tickSize(-(u-l.left-l.right),0,0).tickFormat(""))}function n(){i(),e()}function i(){m.clearRect(0,0,u-l.left-l.right,s-l.top-l.bottom),a()}function a(){m.globalAlpha=.9,o.forEach(h.data.series,function(t){var e=t.d.length,n=0;for(m.strokeStyle=t.c,m.lineWidth=t.s,m.lineJoin="round",m.beginPath(),m.moveTo(h.x(t.d[0].x),h.y(t.d[0].y));++n<e;)m.lineTo(h.x(t.d[n].x),h.y(t.d[n].y));m.stroke()})}var s=this.height,u=this.width,l=this.margin,c=this.selector,h=this,f=function(t,e){var n=r.max(t,function(t){return r.max(o.map(t,e))}),i=r.min(t,function(t){return r.min(o.map(t,e))});return[i,n]};t(),this.line=r.svg.line().x(function(t){return h.x(t.x)}).y(function(t){return h.y(t.y)});var p=r.select(c).append("div").style("width",u+"px").style("height",s+"px"),d=p.append("canvas").attr("class","line-plot canvas").attr("width",u-l.left-l.right).attr("height",s-l.top-l.bottom).style("margin-left",l.left+"px").style("margin-right",l.right+"px").style("margin-top",l.top+"px").style("margin-bottom",l.bottom+"px").call(h.zoom),m=d.node().getContext("2d"),g=p.append("svg:svg").attr("class","line-plot svg").attr("width",u).attr("height",s).attr("fill","white").append("svg:g").attr("transform","translate("+l.left+","+l.top+")").call(h.zoom);h.options.zoom||(g.on("wheel.zoom",null),g.on("mousewheel.zoom",null),d.on("wheel.zoom",null),d.on("mousewheel.zoom",null)),g.append("rect").attr("width",u-l.left-l.right).attr("height",s-l.top-l.bottom).attr("class","line-plot rect");var y=function(){return r.svg.axis().scale(h.x).orient("bottom").ticks(5)},v=function(){return r.svg.axis().scale(h.y).orient("left").ticks(5)};g.append("svg:g").attr("class","x axis").attr("transform","translate(0, "+(s-l.top-l.bottom)+")").call(this.xAxis),g.append("g").attr("class","y axis").call(this.yAxis),g.append("g").attr("class","x grid").attr("transform","translate(0,"+(s-l.top-l.bottom)+")").call(y().tickSize(-(s-l.top-l.bottom),0,0).tickFormat("")),g.append("g").attr("class","y grid").call(v().tickSize(-(u-l.left-l.right),0,0).tickFormat(""));var b;o.has(this.data,"xaxis")&&(b=this.data.xaxis,o.isArray(b)&&(b=b[0]),g.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",(u-l.left-l.right)/2).attr("y",s-l.top-5).text(b)),o.has(this.data,"yaxis")&&(b=this.data.yaxis,o.isArray(b)&&(b=b[0]),g.append("text").attr("class","y label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-(s-l.top-l.bottom)/2).attr("y",-l.left+20).text(b)),a(),this.svg=g,this.ctx=m,this.canvas=d,this.zoomed=n,this.setAxis=t,this.updateAxis=e,this.redraw=i},formatData:function(t){o.isArray(t.series[0])?t.series=o.map(t.series,function(e){return o.map(e,function(e,n){return{x:t.index?t.index[n]:n,y:e}})}):t.series=[o.map(t.series,function(e,n){return{x:t.index?t.index[n]:n,y:e}})];var e=a.getColorFromData(t);0==e.length&&(e=a.getColors(t.series.length));var n,r=t.thickness||[];return t.series=t.series.map(function(t,i){var o={d:t,i:i};return n=r.length>1?r[i]:r[0],o.c=e.length>1?e[i]:e[0],o.s=n?n:Math.max(Math.exp(2-.003*t.length),1),o}),t},updateData:function(t){this.data=t,this.redraw()},appendData:function(t){this.data.series=this.data.series.concat(t.series),this.redraw()}});e.exports=l}).call(this,t("buffer").Buffer)},{buffer:1,d3:227,"d3-multiaxis-zoom":225,"lightning-client-utils":228,"lightning-visualization":242,lodash:394}],247:[function(t,e,n){"use strict";var r=t("lightning-line"),i=t("lodash"),o=r.extend({getDefaultOptions:function(){return{zoom:!1,maxLength:50}},appendData:function(t){var e=this,n=this.options,r=e.data.series[0].d[e.data.series[0].d.length-1].x;i.map(t.series,function(t){i.map(t.d,function(t){t.x=t.x+r+1})}),i.map(e.data.series,function(e,n){e.d=e.d.concat(t.series[n].d)}),n.maxLength&&e.data.series[0].d.length>n.maxLength&&i.map(e.data.series,function(t){t.d=t.d.slice(t.d.length-n.maxLength,t.d.length)}),e.setAxis(),e.updateAxis(),e.redraw()}});e.exports=o},{"lightning-line":224,lodash:394}],248:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":270,dup:6}],249:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{"./src":250,dup:30}],250:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],251:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],252:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:253,colorbrewer:259,"d3-color":260,"d3-scale":261,dup:10,lodash:262,superagent:263}],253:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":255,"color-string":256,dup:11}],254:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],255:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":254,dup:13}],256:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":257,dup:14}],257:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],258:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],259:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":258,dup:8}],260:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],261:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],262:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],263:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:264,reduce:265}],264:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],265:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],266:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:267,"insert-css":268,lodash:394,qwery:269}],267:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],268:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],269:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],270:[function(t,e,n){arguments[4][246][0].apply(n,arguments)},{buffer:1,d3:251,"d3-multiaxis-zoom":249,dup:246,"lightning-client-utils":252,"lightning-visualization":266,lodash:394}],271:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":294,dup:6}],272:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],273:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":272,dup:8}],274:[function(t,e,n){function r(t,e,n){return this.svg=m.select(t).append("svg").attr("width",n||t.offsetWidth).attr("class","datamap").attr("height",e||t.offsetHeight).style("overflow","hidden"),this.svg}function i(t,e){var n,r,i=e.width||t.offsetWidth,o=e.height||t.offsetHeight,a=this.svg;return e&&"undefined"==typeof e.scope&&(e.scope="world"),"usa"===e.scope?n=m.geo.albersUsa().scale(i).translate([i/2,o/2]):"world"===e.scope&&(n=m.geo[e.projection]().scale((i+1)/2/Math.PI).translate([i/2,o/("mercator"===e.projection?1.45:1.8)])),"orthographic"===e.projection&&(a.append("defs").append("path").datum({type:"Sphere"}).attr("id","sphere").attr("d",r),a.append("use").attr("class","stroke").attr("xlink:href","#sphere"),a.append("use").attr("class","fill").attr("xlink:href","#sphere"),n.scale(250).clipAngle(90).rotate(e.projectionConfig.rotation)),r=m.geo.path().projection(n),{path:r,projection:n}}function o(){m.select(".datamaps-style-block").empty()&&m.select("head").append("style").attr("class","datamaps-style-block").html('.datamap path.datamaps-graticule { fill: none; stroke: #777; stroke-width: 0.5px; stroke-opacity: .5; pointer-events: none; } .datamap .labels {pointer-events: none;} .datamap path {stroke: #FFFFFF; stroke-width: 1px;} .datamaps-legend dt, .datamaps-legend dd { float: left; margin: 0 3px 0 0;} .datamaps-legend dd {width: 20px; margin-right: 6px; border-radius: 3px;} .datamaps-legend {padding-bottom: 20px; z-index: 1001; position: absolute; left: 4px; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;} .datamaps-hoverover {display: none; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; } .hoverinfo {padding: 4px; border-radius: 1px; background-color: #FFF; box-shadow: 1px 1px 5px #CCC; font-size: 12px; border: 1px solid #CCC; } .hoverinfo hr {border:1px dotted #CCC; }')}function a(t){var e=this.options.fills,n=this.options.data||{},r=this.options.geographyConfig,i=this.svg.select("g.datamaps-subunits");i.empty()&&(i=this.addLayer("datamaps-subunits",null,!0));var o=g.feature(t,t.objects[this.options.scope]).features;r.hideAntarctica&&(o=o.filter(function(t){return"ATA"!==t.id}));var a=i.selectAll("path.datamaps-subunit").data(o);a.enter().append("path").attr("d",this.path).attr("class",function(t){return"datamaps-subunit "+t.id}).attr("data-info",function(t){return JSON.stringify(n[t.id])}).style("fill",function(t){var r;return n[t.id]&&(r=e[n[t.id].fillKey]),r||e.defaultFill}).style("stroke-width",r.borderWidth).style("stroke",r.borderColor)}function s(){function t(){this.parentNode.appendChild(this)}var e=this.svg,n=this,r=this.options.geographyConfig;(r.highlightOnHover||r.popupOnHover)&&e.selectAll(".datamaps-subunit").on("mouseover",function(i){var o=m.select(this);if(r.highlightOnHover){var a={fill:o.style("fill"),stroke:o.style("stroke"),"stroke-width":o.style("stroke-width"),"fill-opacity":o.style("fill-opacity")};o.style("fill",r.highlightFillColor).style("stroke",r.highlightBorderColor).style("stroke-width",r.highlightBorderWidth).style("fill-opacity",r.highlightFillOpacity).attr("data-previousAttributes",JSON.stringify(a)),/((MSIE)|(Trident))/.test||t.call(this)}r.popupOnHover&&n.updatePopup(o,i,r,e)}).on("mouseout",function(){var t=m.select(this);if(r.highlightOnHover){var e=JSON.parse(t.attr("data-previousAttributes"));for(var n in e)t.style(n,e[n])}t.on("mousemove",null),m.selectAll(".datamaps-hoverover").style("display","none")})}function u(t,e,n){if(e=e||{},this.options.fills){var r="<dl>",i="";e.legendTitle&&(r="<h2>"+e.legendTitle+"</h2>"+r);for(var o in this.options.fills){if("defaultFill"===o){if(!e.defaultFillName)continue;i=e.defaultFillName}else i=e.labels&&e.labels[o]?e.labels[o]:o+": ";r+="<dt>"+i+"</dt>",r+='<dd style="background-color:'+this.options.fills[o]+'">&nbsp;</dd>'}r+="</dl>";m.select(this.options.element).append("div").attr("class","datamaps-legend").html(r)}}function l(t,e){var n=m.geo.graticule();this.svg.insert("path",".datamaps-subunits").datum(n).attr("class","datamaps-graticule").attr("d",this.path)}function c(t,e,n){var r=this;this.svg;if(!e||e&&!e.slice)throw"Datamaps Error - arcs must be an array";"undefined"==typeof n&&(n=y.arcConfig);var i=t.selectAll("path.datamaps-arc").data(e,JSON.stringify);i.enter().append("svg:path").attr("class","datamaps-arc").style("stroke-linecap","round").style("stroke",function(t){return t.options&&t.options.strokeColor?t.options.strokeColor:n.strokeColor}).style("fill","none").style("stroke-width",function(t){return t.options&&t.options.strokeWidth?t.options.strokeWidth:n.strokeWidth}).attr("d",function(t){var e=r.latLngToXY(t.origin.latitude,t.origin.longitude),i=r.latLngToXY(t.destination.latitude,t.destination.longitude),o=[(e[0]+i[0])/2,(e[1]+i[1])/2];return"M"+e[0]+","+e[1]+"S"+(o[0]+50*n.arcSharpness)+","+(o[1]-75*n.arcSharpness)+","+i[0]+","+i[1]}).transition().delay(100).style("fill",function(){var t=this.getTotalLength();return this.style.transition=this.style.WebkitTransition="none",this.style.strokeDasharray=t+" "+t,this.style.strokeDashoffset=t,this.getBoundingClientRect(),this.style.transition=this.style.WebkitTransition="stroke-dashoffset "+n.animationSpeed+"ms ease-out",this.style.strokeDashoffset="0","none"}),i.exit().transition().style("opacity",0).remove()}function h(t,e){var n=this;e=e||{};var r=this.projection([-67.707617,42.722131]);this.svg.selectAll(".datamaps-subunit").attr("data-foo",function(i){var o=n.path.centroid(i),a=7.5,s=5;["FL","KY","MI"].indexOf(i.id)>-1&&(a=-2.5),"NY"===i.id&&(a=-1),"MI"===i.id&&(s=18),"LA"===i.id&&(a=13);var u,l;u=o[0]-a,l=o[1]+s;var c=["VT","NH","MA","RI","CT","NJ","DE","MD","DC"].indexOf(i.id);if(c>-1){var h=r[1];u=r[0],l=h+c*(2+(e.fontSize||12)),t.append("line").attr("x1",u-3).attr("y1",l-5).attr("x2",o[0]).attr("y2",o[1]).style("stroke",e.labelColor||"#000").style("stroke-width",e.lineWidth||1)}return t.append("text").attr("x",u).attr("y",l).style("font-size",(e.fontSize||10)+"px").style("font-family",e.fontFamily||"Verdana").style("fill",e.labelColor||"#000").text(i.id),"bar"})}function f(t,e,n){function r(t){return"undefined"!=typeof t&&"undefined"!=typeof t.latitude&&"undefined"!=typeof t.longitude;
}var i=this,o=this.options.fills,a=this.svg;if(!e||e&&!e.slice)throw"Datamaps Error - bubbles must be an array";var s=t.selectAll("circle.datamaps-bubble").data(e,JSON.stringify);s.enter().append("svg:circle").attr("class","datamaps-bubble").attr("cx",function(t){var e;return r(t)?e=i.latLngToXY(t.latitude,t.longitude):t.centered&&(e=i.path.centroid(a.select("path."+t.centered).data()[0])),e?e[0]:void 0}).attr("cy",function(t){var e;return r(t)?e=i.latLngToXY(t.latitude,t.longitude):t.centered&&(e=i.path.centroid(a.select("path."+t.centered).data()[0])),e?e[1]:void 0}).attr("r",0).attr("data-info",function(t){return JSON.stringify(t)}).style("stroke",function(t){return"undefined"!=typeof t.borderColor?t.borderColor:n.borderColor}).style("stroke-width",function(t){return"undefined"!=typeof t.borderWidth?t.borderWidth:n.borderWidth}).style("fill-opacity",function(t){return"undefined"!=typeof t.fillOpacity?t.fillOpacity:n.fillOpacity}).style("fill",function(t){var e=o[t.fillKey];return e||o.defaultFill}).on("mouseover",function(t){var e=m.select(this);if(n.highlightOnHover){var r={fill:e.style("fill"),stroke:e.style("stroke"),"stroke-width":e.style("stroke-width"),"fill-opacity":e.style("fill-opacity")};e.style("fill",n.highlightFillColor).style("stroke",n.highlightBorderColor).style("stroke-width",n.highlightBorderWidth).style("fill-opacity",n.highlightFillOpacity).attr("data-previousAttributes",JSON.stringify(r))}n.popupOnHover&&i.updatePopup(e,t,n,a)}).on("mouseout",function(t){var e=m.select(this);if(n.highlightOnHover){var r=JSON.parse(e.attr("data-previousAttributes"));for(var i in r)e.style(i,r[i])}m.selectAll(".datamaps-hoverover").style("display","none")}).transition().duration(400).attr("r",function(t){return t.radius}),s.exit().transition().delay(n.exitDelay).attr("r",0).remove()}function p(t){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t}function d(t){if("undefined"==typeof m||"undefined"==typeof g)throw new Error("Include d3.js (v3.0.3 or greater) and topojson on this page before creating a new map");return this.options=p(t,y),this.options.geographyConfig=p(t.geographyConfig,y.geographyConfig),this.options.projectionConfig=p(t.projectionConfig,y.projectionConfig),this.options.bubblesConfig=p(t.bubblesConfig,y.bubblesConfig),this.options.arcConfig=p(t.arcConfig,y.arcConfig),m.select(this.options.element).select("svg").length>0&&r.call(this,this.options.element,this.options.height,this.options.width),this.addPlugin("bubbles",f),this.addPlugin("legend",u),this.addPlugin("arc",c),this.addPlugin("labels",h),this.addPlugin("graticule",l),this.options.disableDefaultStyles||o(),this.draw()}var m=t("d3"),g=t("topojson"),y={scope:"world",setProjection:i,projection:"equirectangular",dataType:"json",done:function(){},fills:{defaultFill:"#ABDDA4"},geographyConfig:{dataUrl:null,hideAntarctica:!0,borderWidth:1,borderColor:"#FDFDFD",popupTemplate:function(t,e){return'<div class="hoverinfo"><strong>'+t.properties.name+"</strong></div>"},popupOnHover:!0,highlightOnHover:!0,highlightFillColor:"#FC8D59",highlightBorderColor:"rgba(250, 15, 160, 0.2)",highlightBorderWidth:2},projectionConfig:{rotation:[97,0]},bubblesConfig:{borderWidth:2,borderColor:"#FFFFFF",popupOnHover:!0,popupTemplate:function(t,e){return'<div class="hoverinfo"><strong>'+e.name+"</strong></div>"},fillOpacity:.75,animate:!0,highlightOnHover:!0,highlightFillColor:"#FC8D59",highlightBorderColor:"rgba(250, 15, 160, 0.2)",highlightBorderWidth:2,highlightFillOpacity:.85,exitDelay:100},arcConfig:{strokeColor:"#DD1C77",strokeWidth:1,arcSharpness:1,animationSpeed:600}};d.prototype.draw=function(){function t(t){e.options.dataUrl&&m[e.options.dataType](e.options.dataUrl,function(t){if("csv"===e.options.dataType&&t&&t.slice){for(var n={},r=0;r<t.length;r++)n[t[r].id]=t[r];t=n}Datamaps.prototype.updateChoropleth.call(e,t)}),a.call(e,t),s.call(e),(e.options.geographyConfig.popupOnHover||e.options.bubblesConfig.popupOnHover)&&(hoverover=m.select(e.options.element).append("div").attr("class","datamaps-hoverover").style("z-index",10001).style("position","absolute")),e.options.done(e)}var e=this,n=e.options,r=n.setProjection.apply(e,[n.element,n]);return this.path=r.path,this.projection=r.projection,n.geographyConfig.dataUrl?m.json(n.geographyConfig.dataUrl,function(n,r){if(n)throw new Error(n);e.customTopo=r,t(r)}):t(this[n.scope+"Topo"]||n.geographyConfig.dataJson),this},d.prototype.worldTopo={type:"Topology",objects:{world:{type:"GeometryCollection",geometries:[{type:"Polygon",properties:{name:"Afghanistan"},id:"AFG",arcs:[[0,1,2,3,4,5]]},{type:"MultiPolygon",properties:{name:"Angola"},id:"AGO",arcs:[[[6,7,8,9]],[[10,11,12]]]},{type:"Polygon",properties:{name:"Albania"},id:"ALB",arcs:[[13,14,15,16,17]]},{type:"Polygon",properties:{name:"United Arab Emirates"},id:"ARE",arcs:[[18,19,20,21,22]]},{type:"MultiPolygon",properties:{name:"Argentina"},id:"ARG",arcs:[[[23,24]],[[25,26,27,28,29,30]]]},{type:"Polygon",properties:{name:"Armenia"},id:"ARM",arcs:[[31,32,33,34,35]]},{type:"MultiPolygon",properties:{name:"Antarctica"},id:"ATA",arcs:[[[36]],[[37]],[[38]],[[39]],[[40]],[[41]],[[42]],[[43]]]},{type:"Polygon",properties:{name:"French Southern and Antarctic Lands"},id:"ATF",arcs:[[44]]},{type:"MultiPolygon",properties:{name:"Australia"},id:"AUS",arcs:[[[45]],[[46]]]},{type:"Polygon",properties:{name:"Austria"},id:"AUT",arcs:[[47,48,49,50,51,52,53]]},{type:"MultiPolygon",properties:{name:"Azerbaijan"},id:"AZE",arcs:[[[54,-35]],[[55,56,-33,57,58]]]},{type:"Polygon",properties:{name:"Burundi"},id:"BDI",arcs:[[59,60,61]]},{type:"Polygon",properties:{name:"Belgium"},id:"BEL",arcs:[[62,63,64,65,66]]},{type:"Polygon",properties:{name:"Benin"},id:"BEN",arcs:[[67,68,69,70,71]]},{type:"Polygon",properties:{name:"Burkina Faso"},id:"BFA",arcs:[[72,73,74,-70,75,76]]},{type:"Polygon",properties:{name:"Bangladesh"},id:"BGD",arcs:[[77,78,79]]},{type:"Polygon",properties:{name:"Bulgaria"},id:"BGR",arcs:[[80,81,82,83,84,85]]},{type:"MultiPolygon",properties:{name:"The Bahamas"},id:"BHS",arcs:[[[86]],[[87]],[[88]]]},{type:"Polygon",properties:{name:"Bosnia and Herzegovina"},id:"BIH",arcs:[[89,90,91]]},{type:"Polygon",properties:{name:"Belarus"},id:"BLR",arcs:[[92,93,94,95,96]]},{type:"Polygon",properties:{name:"Belize"},id:"BLZ",arcs:[[97,98,99]]},{type:"Polygon",properties:{name:"Bolivia"},id:"BOL",arcs:[[100,101,102,103,-31]]},{type:"Polygon",properties:{name:"Brazil"},id:"BRA",arcs:[[-27,104,-103,105,106,107,108,109,110,111,112]]},{type:"Polygon",properties:{name:"Brunei"},id:"BRN",arcs:[[113,114]]},{type:"Polygon",properties:{name:"Bhutan"},id:"BTN",arcs:[[115,116]]},{type:"Polygon",properties:{name:"Botswana"},id:"BWA",arcs:[[117,118,119,120]]},{type:"Polygon",properties:{name:"Central African Republic"},id:"CAF",arcs:[[121,122,123,124,125,126,127]]},{type:"MultiPolygon",properties:{name:"Canada"},id:"CAN",arcs:[[[128]],[[129]],[[130]],[[131]],[[132]],[[133]],[[134]],[[135]],[[136]],[[137]],[[138,139,140,141]],[[142]],[[143]],[[144]],[[145]],[[146]],[[147]],[[148]],[[149]],[[150]],[[151]],[[152]],[[153]],[[154]],[[155]],[[156]],[[157]],[[158]],[[159]],[[160]]]},{type:"Polygon",properties:{name:"Switzerland"},id:"CHE",arcs:[[-51,161,162,163]]},{type:"MultiPolygon",properties:{name:"Chile"},id:"CHL",arcs:[[[-24,164]],[[-30,165,166,-101]]]},{type:"MultiPolygon",properties:{name:"China"},id:"CHN",arcs:[[[167]],[[168,169,170,171,172,173,-117,174,175,176,177,-4,178,179,180,181,182,183]]]},{type:"Polygon",properties:{name:"Ivory Coast"},id:"CIV",arcs:[[184,185,186,187,-73,188]]},{type:"Polygon",properties:{name:"Cameroon"},id:"CMR",arcs:[[189,190,191,192,193,194,-128,195]]},{type:"Polygon",properties:{name:"Democratic Republic of the Congo"},id:"COD",arcs:[[196,197,-60,198,199,-10,200,-13,201,-126,202]]},{type:"Polygon",properties:{name:"Republic of the Congo"},id:"COG",arcs:[[-12,203,204,-196,-127,-202]]},{type:"Polygon",properties:{name:"Colombia"},id:"COL",arcs:[[205,206,207,208,209,-107,210]]},{type:"Polygon",properties:{name:"Costa Rica"},id:"CRI",arcs:[[211,212,213,214]]},{type:"Polygon",properties:{name:"Cuba"},id:"CUB",arcs:[[215]]},{type:"Polygon",properties:{name:"Northern Cyprus"},id:"-99",arcs:[[216,217]]},{type:"Polygon",properties:{name:"Cyprus"},id:"CYP",arcs:[[218,-218]]},{type:"Polygon",properties:{name:"Czech Republic"},id:"CZE",arcs:[[-53,219,220,221]]},{type:"Polygon",properties:{name:"Germany"},id:"DEU",arcs:[[222,223,-220,-52,-164,224,225,-64,226,227,228]]},{type:"Polygon",properties:{name:"Djibouti"},id:"DJI",arcs:[[229,230,231,232]]},{type:"MultiPolygon",properties:{name:"Denmark"},id:"DNK",arcs:[[[233]],[[-229,234]]]},{type:"Polygon",properties:{name:"Dominican Republic"},id:"DOM",arcs:[[235,236]]},{type:"Polygon",properties:{name:"Algeria"},id:"DZA",arcs:[[237,238,239,240,241,242,243,244]]},{type:"Polygon",properties:{name:"Ecuador"},id:"ECU",arcs:[[245,-206,246]]},{type:"Polygon",properties:{name:"Egypt"},id:"EGY",arcs:[[247,248,249,250,251]]},{type:"Polygon",properties:{name:"Eritrea"},id:"ERI",arcs:[[252,253,254,-233]]},{type:"Polygon",properties:{name:"Spain"},id:"ESP",arcs:[[255,256,257,258]]},{type:"Polygon",properties:{name:"Estonia"},id:"EST",arcs:[[259,260,261]]},{type:"Polygon",properties:{name:"Ethiopia"},id:"ETH",arcs:[[-232,262,263,264,265,266,267,-253]]},{type:"Polygon",properties:{name:"Finland"},id:"FIN",arcs:[[268,269,270,271]]},{type:"MultiPolygon",properties:{name:"Fiji"},id:"FJI",arcs:[[[272]],[[273,274]],[[275,-275]]]},{type:"Polygon",properties:{name:"Falkland Islands"},id:"FLK",arcs:[[276]]},{type:"MultiPolygon",properties:{name:"France"},id:"FRA",arcs:[[[277]],[[278,-225,-163,279,280,-257,281,-66]]]},{type:"Polygon",properties:{name:"French Guiana"},id:"GUF",arcs:[[282,283,284,285,-111]]},{type:"Polygon",properties:{name:"Gabon"},id:"GAB",arcs:[[286,287,-190,-205]]},{type:"MultiPolygon",properties:{name:"United Kingdom"},id:"GBR",arcs:[[[288,289]],[[290]]]},{type:"Polygon",properties:{name:"Georgia"},id:"GEO",arcs:[[291,292,-58,-32,293]]},{type:"Polygon",properties:{name:"Ghana"},id:"GHA",arcs:[[294,-189,-77,295]]},{type:"Polygon",properties:{name:"Guinea"},id:"GIN",arcs:[[296,297,298,299,300,301,-187]]},{type:"Polygon",properties:{name:"Gambia"},id:"GMB",arcs:[[302,303]]},{type:"Polygon",properties:{name:"Guinea Bissau"},id:"GNB",arcs:[[304,305,-300]]},{type:"Polygon",properties:{name:"Equatorial Guinea"},id:"GNQ",arcs:[[306,-191,-288]]},{type:"MultiPolygon",properties:{name:"Greece"},id:"GRC",arcs:[[[307]],[[308,-15,309,-84,310]]]},{type:"Polygon",properties:{name:"Greenland"},id:"GRL",arcs:[[311]]},{type:"Polygon",properties:{name:"Guatemala"},id:"GTM",arcs:[[312,313,-100,314,315,316]]},{type:"Polygon",properties:{name:"Guyana"},id:"GUY",arcs:[[317,318,-109,319]]},{type:"Polygon",properties:{name:"Honduras"},id:"HND",arcs:[[320,321,-316,322,323]]},{type:"Polygon",properties:{name:"Croatia"},id:"HRV",arcs:[[324,-92,325,326,327,328]]},{type:"Polygon",properties:{name:"Haiti"},id:"HTI",arcs:[[-237,329]]},{type:"Polygon",properties:{name:"Hungary"},id:"HUN",arcs:[[-48,330,331,332,333,-329,334]]},{type:"MultiPolygon",properties:{name:"Indonesia"},id:"IDN",arcs:[[[335]],[[336,337]],[[338]],[[339]],[[340]],[[341]],[[342]],[[343]],[[344,345]],[[346]],[[347]],[[348,349]],[[350]]]},{type:"Polygon",properties:{name:"India"},id:"IND",arcs:[[-177,351,-175,-116,-174,352,-80,353,354]]},{type:"Polygon",properties:{name:"Ireland"},id:"IRL",arcs:[[355,-289]]},{type:"Polygon",properties:{name:"Iran"},id:"IRN",arcs:[[356,-6,357,358,359,360,-55,-34,-57,361]]},{type:"Polygon",properties:{name:"Iraq"},id:"IRQ",arcs:[[362,363,364,365,366,367,-360]]},{type:"Polygon",properties:{name:"Iceland"},id:"ISL",arcs:[[368]]},{type:"Polygon",properties:{name:"Israel"},id:"ISR",arcs:[[369,370,371,-252,372,373,374]]},{type:"MultiPolygon",properties:{name:"Italy"},id:"ITA",arcs:[[[375]],[[376]],[[377,378,-280,-162,-50]]]},{type:"Polygon",properties:{name:"Jamaica"},id:"JAM",arcs:[[379]]},{type:"Polygon",properties:{name:"Jordan"},id:"JOR",arcs:[[-370,380,-366,381,382,-372,383]]},{type:"MultiPolygon",properties:{name:"Japan"},id:"JPN",arcs:[[[384]],[[385]],[[386]]]},{type:"Polygon",properties:{name:"Kazakhstan"},id:"KAZ",arcs:[[387,388,389,390,-181,391]]},{type:"Polygon",properties:{name:"Kenya"},id:"KEN",arcs:[[392,393,394,395,-265,396]]},{type:"Polygon",properties:{name:"Kyrgyzstan"},id:"KGZ",arcs:[[-392,-180,397,398]]},{type:"Polygon",properties:{name:"Cambodia"},id:"KHM",arcs:[[399,400,401,402]]},{type:"Polygon",properties:{name:"South Korea"},id:"KOR",arcs:[[403,404]]},{type:"Polygon",properties:{name:"Kosovo"},id:"-99",arcs:[[-18,405,406,407]]},{type:"Polygon",properties:{name:"Kuwait"},id:"KWT",arcs:[[408,409,-364]]},{type:"Polygon",properties:{name:"Laos"},id:"LAO",arcs:[[410,411,-172,412,-401]]},{type:"Polygon",properties:{name:"Lebanon"},id:"LBN",arcs:[[-374,413,414]]},{type:"Polygon",properties:{name:"Liberia"},id:"LBR",arcs:[[415,416,-297,-186]]},{type:"Polygon",properties:{name:"Libya"},id:"LBY",arcs:[[417,-245,418,419,-250,420,421]]},{type:"Polygon",properties:{name:"Sri Lanka"},id:"LKA",arcs:[[422]]},{type:"Polygon",properties:{name:"Lesotho"},id:"LSO",arcs:[[423]]},{type:"Polygon",properties:{name:"Lithuania"},id:"LTU",arcs:[[424,425,426,-93,427]]},{type:"Polygon",properties:{name:"Luxembourg"},id:"LUX",arcs:[[-226,-279,-65]]},{type:"Polygon",properties:{name:"Latvia"},id:"LVA",arcs:[[428,-262,429,-94,-427]]},{type:"Polygon",properties:{name:"Morocco"},id:"MAR",arcs:[[-242,430,431]]},{type:"Polygon",properties:{name:"Moldova"},id:"MDA",arcs:[[432,433]]},{type:"Polygon",properties:{name:"Madagascar"},id:"MDG",arcs:[[434]]},{type:"Polygon",properties:{name:"Mexico"},id:"MEX",arcs:[[435,-98,-314,436,437]]},{type:"Polygon",properties:{name:"Macedonia"},id:"MKD",arcs:[[-408,438,-85,-310,-14]]},{type:"Polygon",properties:{name:"Mali"},id:"MLI",arcs:[[439,-239,440,-74,-188,-302,441]]},{type:"Polygon",properties:{name:"Myanmar"},id:"MMR",arcs:[[442,-78,-353,-173,-412,443]]},{type:"Polygon",properties:{name:"Montenegro"},id:"MNE",arcs:[[444,-326,-91,445,-406,-17]]},{type:"Polygon",properties:{name:"Mongolia"},id:"MNG",arcs:[[446,-183]]},{type:"Polygon",properties:{name:"Mozambique"},id:"MOZ",arcs:[[447,448,449,450,451,452,453,454]]},{type:"Polygon",properties:{name:"Mauritania"},id:"MRT",arcs:[[455,456,457,-240,-440]]},{type:"Polygon",properties:{name:"Malawi"},id:"MWI",arcs:[[-455,458,459]]},{type:"MultiPolygon",properties:{name:"Malaysia"},id:"MYS",arcs:[[[460,461]],[[-349,462,-115,463]]]},{type:"Polygon",properties:{name:"Namibia"},id:"NAM",arcs:[[464,-8,465,-119,466]]},{type:"Polygon",properties:{name:"New Caledonia"},id:"NCL",arcs:[[467]]},{type:"Polygon",properties:{name:"Niger"},id:"NER",arcs:[[-75,-441,-238,-418,468,-194,469,-71]]},{type:"Polygon",properties:{name:"Nigeria"},id:"NGA",arcs:[[470,-72,-470,-193]]},{type:"Polygon",properties:{name:"Nicaragua"},id:"NIC",arcs:[[471,-324,472,-213]]},{type:"Polygon",properties:{name:"Netherlands"},id:"NLD",arcs:[[-227,-63,473]]},{type:"MultiPolygon",properties:{name:"Norway"},id:"NOR",arcs:[[[474,-272,475,476]],[[477]],[[478]],[[479]]]},{type:"Polygon",properties:{name:"Nepal"},id:"NPL",arcs:[[-352,-176]]},{type:"MultiPolygon",properties:{name:"New Zealand"},id:"NZL",arcs:[[[480]],[[481]]]},{type:"MultiPolygon",properties:{name:"Oman"},id:"OMN",arcs:[[[482,483,-22,484]],[[-20,485]]]},{type:"Polygon",properties:{name:"Pakistan"},id:"PAK",arcs:[[-178,-355,486,-358,-5]]},{type:"Polygon",properties:{name:"Panama"},id:"PAN",arcs:[[487,-215,488,-208]]},{type:"Polygon",properties:{name:"Peru"},id:"PER",arcs:[[-167,489,-247,-211,-106,-102]]},{type:"MultiPolygon",properties:{name:"Philippines"},id:"PHL",arcs:[[[490]],[[491]],[[492]],[[493]],[[494]],[[495]],[[496]]]},{type:"MultiPolygon",properties:{name:"Papua New Guinea"},id:"PNG",arcs:[[[497]],[[498]],[[-345,499]],[[500]]]},{type:"Polygon",properties:{name:"Poland"},id:"POL",arcs:[[-224,501,502,-428,-97,503,504,-221]]},{type:"Polygon",properties:{name:"Puerto Rico"},id:"PRI",arcs:[[505]]},{type:"Polygon",properties:{name:"North Korea"},id:"PRK",arcs:[[506,507,-405,508,-169]]},{type:"Polygon",properties:{name:"Portugal"},id:"PRT",arcs:[[-259,509]]},{type:"Polygon",properties:{name:"Paraguay"},id:"PRY",arcs:[[-104,-105,-26]]},{type:"Polygon",properties:{name:"Qatar"},id:"QAT",arcs:[[510,511]]},{type:"Polygon",properties:{name:"Romania"},id:"ROU",arcs:[[512,-434,513,514,-81,515,-333]]},{type:"MultiPolygon",properties:{name:"Russia"},id:"RUS",arcs:[[[516]],[[-503,517,-425]],[[518,519]],[[520]],[[521]],[[522]],[[523]],[[524]],[[525]],[[526,-507,-184,-447,-182,-391,527,-59,-293,528,529,-95,-430,-261,530,-269,-475,531,-520]],[[532]],[[533]],[[534]]]},{type:"Polygon",properties:{name:"Rwanda"},id:"RWA",arcs:[[535,-61,-198,536]]},{type:"Polygon",properties:{name:"Western Sahara"},id:"ESH",arcs:[[-241,-458,537,-431]]},{type:"Polygon",properties:{name:"Saudi Arabia"},id:"SAU",arcs:[[538,-382,-365,-410,539,-512,540,-23,-484,541]]},{type:"Polygon",properties:{name:"Sudan"},id:"SDN",arcs:[[542,543,-123,544,-421,-249,545,-254,-268,546]]},{type:"Polygon",properties:{name:"South Sudan"},id:"SSD",arcs:[[547,-266,-396,548,-203,-125,549,-543]]},{type:"Polygon",properties:{name:"Senegal"},id:"SEN",arcs:[[550,-456,-442,-301,-306,551,-304]]},{type:"MultiPolygon",properties:{name:"Solomon Islands"},id:"SLB",arcs:[[[552]],[[553]],[[554]],[[555]],[[556]]]},{type:"Polygon",properties:{name:"Sierra Leone"},id:"SLE",arcs:[[557,-298,-417]]},{type:"Polygon",properties:{name:"El Salvador"},id:"SLV",arcs:[[558,-317,-322]]},{type:"Polygon",properties:{name:"Somaliland"},id:"-99",arcs:[[-263,-231,559,560]]},{type:"Polygon",properties:{name:"Somalia"},id:"SOM",arcs:[[-397,-264,-561,561]]},{type:"Polygon",properties:{name:"Republic of Serbia"},id:"SRB",arcs:[[-86,-439,-407,-446,-90,-325,-334,-516]]},{type:"Polygon",properties:{name:"Suriname"},id:"SUR",arcs:[[562,-285,563,-283,-110,-319]]},{type:"Polygon",properties:{name:"Slovakia"},id:"SVK",arcs:[[-505,564,-331,-54,-222]]},{type:"Polygon",properties:{name:"Slovenia"},id:"SVN",arcs:[[-49,-335,-328,565,-378]]},{type:"Polygon",properties:{name:"Sweden"},id:"SWE",arcs:[[-476,-271,566]]},{type:"Polygon",properties:{name:"Swaziland"},id:"SWZ",arcs:[[567,-451]]},{type:"Polygon",properties:{name:"Syria"},id:"SYR",arcs:[[-381,-375,-415,568,569,-367]]},{type:"Polygon",properties:{name:"Chad"},id:"TCD",arcs:[[-469,-422,-545,-122,-195]]},{type:"Polygon",properties:{name:"Togo"},id:"TGO",arcs:[[570,-296,-76,-69]]},{type:"Polygon",properties:{name:"Thailand"},id:"THA",arcs:[[571,-462,572,-444,-411,-400]]},{type:"Polygon",properties:{name:"Tajikistan"},id:"TJK",arcs:[[-398,-179,-3,573]]},{type:"Polygon",properties:{name:"Turkmenistan"},id:"TKM",arcs:[[-357,574,-389,575,-1]]},{type:"Polygon",properties:{name:"East Timor"},id:"TLS",arcs:[[576,-337]]},{type:"Polygon",properties:{name:"Trinidad and Tobago"},id:"TTO",arcs:[[577]]},{type:"Polygon",properties:{name:"Tunisia"},id:"TUN",arcs:[[-244,578,-419]]},{type:"MultiPolygon",properties:{name:"Turkey"},id:"TUR",arcs:[[[-294,-36,-361,-368,-570,579]],[[-311,-83,580]]]},{type:"Polygon",properties:{name:"Taiwan"},id:"TWN",arcs:[[581]]},{type:"Polygon",properties:{name:"United Republic of Tanzania"},id:"TZA",arcs:[[-394,582,-448,-460,583,-199,-62,-536,584]]},{type:"Polygon",properties:{name:"Uganda"},id:"UGA",arcs:[[-537,-197,-549,-395,-585]]},{type:"Polygon",properties:{name:"Ukraine"},id:"UKR",arcs:[[-530,585,-514,-433,-513,-332,-565,-504,-96]]},{type:"Polygon",properties:{name:"Uruguay"},id:"URY",arcs:[[-113,586,-28]]},{type:"MultiPolygon",properties:{name:"United States of America"},id:"USA",arcs:[[[587]],[[588]],[[589]],[[590]],[[591]],[[592,-438,593,-139]],[[594]],[[595]],[[596]],[[-141,597]]]},{type:"Polygon",properties:{name:"Uzbekistan"},id:"UZB",arcs:[[-576,-388,-399,-574,-2]]},{type:"Polygon",properties:{name:"Venezuela"},id:"VEN",arcs:[[598,-320,-108,-210]]},{type:"Polygon",properties:{name:"Vietnam"},id:"VNM",arcs:[[599,-402,-413,-171]]},{type:"MultiPolygon",properties:{name:"Vanuatu"},id:"VUT",arcs:[[[600]],[[601]]]},{type:"Polygon",properties:{name:"West Bank"},id:"PSE",arcs:[[-384,-371]]},{type:"Polygon",properties:{name:"Yemen"},id:"YEM",arcs:[[602,-542,-483]]},{type:"Polygon",properties:{name:"South Africa"},id:"ZAF",arcs:[[-467,-118,603,-452,-568,-450,604],[-424]]},{type:"Polygon",properties:{name:"Zambia"},id:"ZMB",arcs:[[-459,-454,605,-120,-466,-7,-200,-584]]},{type:"Polygon",properties:{name:"Zimbabwe"},id:"ZWE",arcs:[[-604,-121,-606,-453]]}]}},arcs:[[[6700,7164],[28,-23],[21,8],[6,27],[22,9],[15,18],[6,47],[23,11],[5,21],[13,-15],[8,-2]],[[6847,7265],[16,-1],[20,-12]],[[6883,7252],[9,-7],[20,19],[9,-12],[9,27],[17,-1],[4,9],[3,24],[12,20],[15,-13],[-3,-18],[9,-3],[-3,-50],[11,-19],[10,12],[12,6],[17,27],[19,-5],[29,0]],[[7082,7268],[5,-17]],[[7087,7251],[-16,-6],[-14,-11],[-32,-7],[-30,-13],[-16,-25],[6,-25],[4,-30],[-14,-25],[1,-22],[-8,-22],[-26,2],[11,-39],[-18,-15],[-12,-35],[2,-36],[-11,-16],[-10,5],[-22,-8],[-3,-16],[-20,0],[-16,-34],[-1,-50],[-36,-24],[-19,5],[-6,-13],[-16,7],[-28,-8],[-47,30]],[[6690,6820],[25,53],[-2,38],[-21,10],[-2,38],[-9,47],[12,32],[-12,9],[7,43],[12,74]],[[5664,4412],[3,-18],[-4,-29],[5,-28],[-4,-22],[3,-20],[-58,1],[-2,-188],[19,-49],[18,-37]],[[5644,4022],[-51,-24],[-67,9],[-19,28],[-113,-3],[-4,-4],[-17,27],[-18,2],[-16,-10],[-14,-12]],[[5325,4035],[-2,38],[4,51],[9,55],[2,25],[9,53],[6,24],[16,39],[9,26],[3,44],[-1,34],[-9,21],[-7,36],[-7,35],[2,12],[8,24],[-8,57],[-6,39],[-14,38],[3,11]],[[5342,4697],[11,8],[8,-1],[10,7],[82,-1],[7,-44],[8,-35],[6,-19],[11,-31],[18,5],[9,8],[16,-8],[4,14],[7,35],[17,2],[2,10],[14,1],[-3,-22],[34,1],[1,-37],[5,-23],[-4,-36],[2,-36],[9,-22],[-1,-70],[7,5],[12,-1],[17,8],[13,-3]],[[5338,4715],[-8,45]],[[5330,4760],[12,25],[8,10],[10,-20]],[[5360,4775],[-10,-12],[-4,-16],[-1,-25],[-7,-7]],[[5571,7530],[-3,-20],[4,-25],[11,-15]],[[5583,7470],[0,-15],[-9,-9],[-2,-19],[-13,-29]],[[5559,7398],[-5,5],[0,13],[-15,19],[-3,29],[2,40],[4,18],[-4,10]],[[5538,7532],[-2,18],[12,29],[1,-11],[8,6]],[[5557,7574],[6,-16],[7,-6],[1,-22]],[[6432,6490],[5,3],[1,-16],[22,9],[23,-2],[17,-1],[19,39],[20,38],[18,37]],[[6557,6597],[5,-20]],[[6562,6577],[4,-47]],[[6566,6530],[-14,0],[-3,-39],[5,-8],[-12,-12],[0,-24],[-8,-24],[-1,-24]],[[6533,6399],[-6,-12],[-83,29],[-11,60],[-1,14]],[[3140,1814],[-17,2],[-30,0],[0,132]],[[3093,1948],[11,-27],[14,-45],[36,-35],[39,-15],[-13,-30],[-26,-2],[-14,20]],[[3258,3743],[51,-96],[23,-9],[34,-44],[29,-23],[4,-26],[-28,-90],[28,-16],[32,-9],[22,10],[25,45],[4,52]],[[3482,3537],[14,11],[14,-34],[-1,-47],[-23,-33],[-19,-24],[-31,-57],[-37,-81]],[[3399,3272],[-7,-47],[-7,-61],[0,-58],[-6,-14],[-2,-38]],[[3377,3054],[-2,-31],[35,-50],[-4,-41],[18,-26],[-2,-29],[-26,-75],[-42,-32],[-55,-12],[-31,6],[6,-36],[-6,-44],[5,-30],[-16,-20],[-29,-8],[-26,21],[-11,-15],[4,-59],[18,-18],[16,19],[8,-31],[-26,-18],[-22,-37],[-4,-59],[-7,-32],[-26,0],[-22,-31],[-8,-44],[28,-43],[26,-12],[-9,-53],[-33,-33],[-18,-70],[-25,-23],[-12,-28],[9,-61],[19,-34],[-12,3]],[[3095,1968],[-26,9],[-67,8],[-11,34],[0,45],[-18,-4],[-10,21],[-3,63],[22,26],[9,37],[-4,30],[15,51],[10,78],[-3,35],[12,11],[-3,22],[-13,12],[10,25],[-13,22],[-6,68],[11,12],[-5,72],[7,61],[7,52],[17,22],[-9,58],[0,54],[21,38],[-1,50],[16,57],[0,55],[-7,11],[-13,102],[17,60],[-2,58],[10,53],[18,56],[20,36],[-9,24],[6,19],[-1,98],[30,29],[10,62],[-3,14]],[[3136,3714],[23,54],[36,-15],[16,-42],[11,47],[32,-2],[4,-13]],[[6210,7485],[39,9]],[[6249,7494],[5,-15],[11,-10],[-6,-15],[15,-21],[-8,-18],[12,-16],[13,-10],[0,-41]],[[6291,7348],[-10,-2]],[[6281,7346],[-11,34],[0,10],[-12,-1],[-9,16],[-5,-1]],[[6244,7404],[-11,17],[-21,15],[3,28],[-5,21]],[[3345,329],[-8,-30],[-8,-27],[-59,8],[-62,-3],[-34,20],[0,2],[-16,17],[63,-2],[60,-6],[20,24],[15,21],[29,-24]],[[577,361],[-53,-8],[-36,21],[-17,21],[-1,3],[-18,16],[17,22],[52,-9],[28,-18],[21,-21],[7,-27]],[[3745,447],[35,-26],[12,-36],[3,-25],[1,-30],[-43,-19],[-45,-15],[-52,-14],[-59,-11],[-65,3],[-37,20],[5,24],[59,16],[24,20],[18,26],[12,22],[17,20],[18,25],[14,0],[41,12],[42,-12]],[[1633,715],[36,-9],[33,10],[-16,-20],[-26,-15],[-39,4],[-27,21],[6,20],[33,-11]],[[1512,716],[43,-23],[-17,3],[-36,5],[-38,17],[20,12],[28,-14]],[[2250,808],[31,-8],[30,7],[17,-34],[-22,5],[-34,-2],[-34,2],[-38,-4],[-28,12],[-15,24],[18,11],[35,-8],[40,-5]],[[3098,866],[4,-27],[-5,-23],[-8,-22],[-33,-8],[-31,-12],[-36,1],[14,24],[-33,-9],[-31,-8],[-21,18],[-2,24],[30,23],[20,7],[32,-2],[8,30],[1,22],[0,47],[16,28],[25,9],[15,-22],[6,-22],[12,-26],[10,-26],[7,-26]],[[3371,1268],[-11,-13],[-21,9],[-23,-6],[-19,-14],[-20,-15],[-14,-17],[-4,-23],[2,-22],[13,-20],[-19,-14],[-26,-4],[-15,-20],[-17,-19],[-17,-25],[-4,-22],[9,-24],[15,-19],[23,-14],[21,-18],[12,-23],[6,-22],[8,-24],[13,-19],[8,-22],[4,-55],[8,-22],[2,-23],[9,-23],[-4,-31],[-15,-24],[-17,-20],[-37,-8],[-12,-21],[-17,-20],[-42,-22],[-37,-9],[-35,-13],[-37,-13],[-22,-24],[-45,-2],[-49,2],[-44,-4],[-47,0],[9,-24],[42,-10],[31,-16],[18,-21],[-31,-19],[-48,6],[-40,-15],[-2,-24],[-1,-23],[33,-20],[6,-22],[35,-22],[59,-9],[50,-16],[40,-19],[50,-18],[70,-10],[68,-16],[47,-17],[52,-20],[27,-28],[13,-22],[34,21],[46,17],[48,19],[58,15],[49,16],[69,1],[68,-8],[56,-14],[18,26],[39,17],[70,1],[55,13],[52,13],[58,8],[62,10],[43,15],[-20,21],[-12,21],[0,22],[-54,-2],[-57,-10],[-54,0],[-8,22],[4,44],[12,13],[40,14],[47,14],[34,17],[33,18],[25,23],[38,10],[38,8],[19,5],[43,2],[41,8],[34,12],[34,14],[30,14],[39,18],[24,20],[26,17],[9,24],[-30,13],[10,25],[18,18],[29,12],[31,14],[28,18],[22,23],[13,28],[21,16],[33,-3],[13,-20],[34,-2],[1,22],[14,23],[30,-6],[7,-22],[33,-3],[36,10],[35,7],[31,-3],[12,-25],[31,20],[28,10],[31,9],[31,8],[29,14],[31,9],[24,13],[17,20],[20,-15],[29,8],[20,-27],[16,-21],[32,11],[12,24],[28,16],[37,-4],[11,-22],[22,22],[30,7],[33,3],[29,-2],[31,-7],[30,-3],[13,-20],[18,-17],[31,10],[32,3],[32,0],[31,1],[28,8],[29,7],[25,16],[26,11],[28,5],[21,17],[15,32],[16,20],[29,-10],[11,-21],[24,-13],[29,4],[19,-21],[21,-15],[28,14],[10,26],[25,10],[29,20],[27,8],[33,11],[22,13],[22,14],[22,13],[26,-7],[25,21],[18,16],[26,-1],[23,14],[6,21],[23,16],[23,11],[28,10],[25,4],[25,-3],[26,-6],[22,-16],[3,-26],[24,-19],[17,-17],[33,-7],[19,-16],[23,-16],[26,-3],[23,11],[24,24],[26,-12],[27,-7],[26,-7],[27,-5],[28,0],[23,-61],[-1,-15],[-4,-27],[-26,-15],[-22,-22],[4,-23],[31,1],[-4,-23],[-14,-22],[-13,-24],[21,-19],[32,-6],[32,11],[15,23],[10,22],[15,18],[17,18],[7,21],[15,29],[18,5],[31,3],[28,7],[28,9],[14,23],[8,22],[19,22],[27,15],[23,12],[16,19],[15,11],[21,9],[27,-6],[25,6],[28,7],[30,-4],[20,17],[14,39],[11,-16],[13,-28],[23,-12],[27,-4],[26,7],[29,-5],[26,-1],[17,6],[24,-4],[21,-12],[25,8],[30,0],[25,8],[29,-8],[19,19],[14,20],[19,16],[35,44],[18,-8],[21,-16],[18,-21],[36,-36],[27,-1],[25,0],[30,7],[30,8],[23,16],[19,18],[31,2],[21,13],[22,-12],[14,-18],[19,-19],[31,2],[19,-15],[33,-15],[35,-5],[29,4],[21,19],[19,18],[25,5],[25,-8],[29,-6],[26,9],[25,0],[24,-6],[26,-5],[25,10],[30,9],[28,3],[32,0],[25,5],[25,5],[8,29],[1,24],[17,-16],[5,-27],[10,-24],[11,-20],[23,-10],[32,4],[36,1],[25,3],[37,0],[26,1],[36,-2],[31,-5],[20,-18],[-5,-22],[18,-18],[30,-13],[31,-15],[35,-11],[38,-9],[28,-9],[32,-2],[18,20],[24,-16],[21,-19],[25,-13],[34,-6],[32,-7],[13,-23],[32,-14],[21,-21],[31,-9],[32,1],[30,-4],[33,1],[34,-4],[31,-8],[28,-14],[29,-12],[20,-17],[-3,-23],[-15,-21],[-13,-27],[-9,-21],[-14,-24],[-36,-9],[-16,-21],[-36,-13],[-13,-23],[-19,-22],[-20,-18],[-11,-25],[-7,-22],[-3,-26],[0,-22],[16,-23],[6,-22],[13,-21],[52,-8],[11,-26],[-50,-9],[-43,-13],[-52,-2],[-24,-34],[-5,-27],[-12,-22],[-14,-22],[37,-20],[14,-24],[24,-22],[33,-20],[39,-19],[42,-18],[64,-19],[14,-29],[80,-12],[5,-5],[21,-17],[77,15],[63,-19],[48,-14],[-9997,-1],[24,35],[50,-19],[3,2],[30,19],[4,0],[3,-1],[40,-25],[35,25],[7,3],[81,11],[27,-14],[13,-7],[41,-20],[79,-15],[63,-18],[107,-14],[80,16],[118,-11],[67,-19],[73,17],[78,17],[6,27],[-110,3],[-89,14],[-24,23],[-74,12],[5,27],[10,24],[10,22],[-5,25],[-46,16],[-22,21],[-43,18],[68,-3],[64,9],[40,-20],[50,18],[45,22],[23,19],[-10,25],[-36,16],[-41,17],[-57,4],[-50,8],[-54,6],[-18,22],[-36,18],[-21,21],[-9,67],[14,-6],[25,-18],[45,6],[44,8],[23,-26],[44,6],[37,13],[35,16],[32,20],[41,5],[-1,22],[-9,22],[8,21],[36,11],[16,-20],[42,12],[32,15],[40,1],[38,6],[37,13],[30,13],[34,13],[22,-4],[19,-4],[41,8],[37,-10],[38,1],[37,8],[37,-6],[41,-6],[39,3],[40,-2],[42,-1],[38,3],[28,17],[34,9],[35,-13],[33,11],[30,21],[18,-19],[9,-21],[18,-19],[29,17],[33,-22],[38,-7],[32,-16],[39,3],[36,11],[41,-3],[38,-8],[38,-10],[15,25],[-18,20],[-14,21],[-36,5],[-15,22],[-6,22],[-10,43],[21,-8],[36,-3],[36,3],[33,-9],[28,-17],[12,-21],[38,-4],[36,9],[38,11],[34,7],[28,-14],[37,5],[24,45],[23,-27],[32,-10],[34,6],[23,-23],[37,-3],[33,-7],[34,-12],[21,22],[11,20],[28,-23],[38,6],[28,-13],[19,-19],[37,5],[29,13],[29,15],[33,8],[39,7],[36,8],[27,13],[16,19],[7,25],[-3,24],[-9,24],[-10,23],[-9,23],[-7,21],[-1,23],[2,23],[13,22],[11,24],[5,23],[-6,26],[-3,23],[14,27],[15,17],[18,22],[19,19],[22,17],[11,25],[15,17],[18,15],[26,3],[18,19],[19,11],[23,7],[20,15],[16,19],[22,7],[16,-15],[-10,-20],[-29,-17]],[[6914,2185],[18,-19],[26,-7],[1,-11],[-7,-27],[-43,-4],[-1,31],[4,25],[2,12]],[[9038,2648],[27,-21],[15,8],[22,12],[16,-4],[2,-70],[-9,-21],[-3,-47],[-10,16],[-19,-41],[-6,3],[-17,2],[-17,50],[-4,39],[-16,52],[1,27],[18,-5]],[[8987,4244],[10,-46],[18,22],[9,-25],[13,-23],[-3,-26],[6,-51],[5,-29],[7,-7],[7,-51],[-3,-30],[9,-40],[31,-31],[19,-28],[19,-26],[-4,-14],[16,-37],[11,-64],[11,13],[11,-26],[7,9],[5,-63],[19,-36],[13,-22],[22,-48],[8,-48],[1,-33],[-2,-37],[13,-50],[-2,-52],[-5,-28],[-7,-52],[1,-34],[-6,-43],[-12,-53],[-21,-29],[-10,-46],[-9,-29],[-8,-51],[-11,-30],[-7,-44],[-4,-41],[2,-18],[-16,-21],[-31,-2],[-26,-24],[-13,-23],[-17,-26],[-23,27],[-17,10],[5,31],[-15,-11],[-25,-43],[-24,16],[-15,9],[-16,4],[-27,17],[-18,37],[-5,45],[-7,30],[-13,24],[-27,7],[9,28],[-7,44],[-13,-41],[-25,-11],[14,33],[5,34],[10,29],[-2,44],[-22,-50],[-18,-21],[-10,-47],[-22,25],[1,31],[-18,43],[-14,22],[5,14],[-36,35],[-19,2],[-27,29],[-50,-6],[-36,-21],[-31,-20],[-27,4],[-29,-30],[-24,-14],[-6,-31],[-10,-24],[-23,-1],[-18,-5],[-24,10],[-20,-6],[-19,-3],[-17,-31],[-8,2],[-14,-16],[-13,-19],[-21,2],[-18,0],[-30,38],[-15,11],[1,34],[14,8],[4,14],[-1,21],[4,41],[-3,35],[-15,60],[-4,33],[1,34],[-11,38],[-1,18],[-12,23],[-4,47],[-16,46],[-4,26],[13,-26],[-10,55],[14,-17],[8,-23],[0,30],[-14,47],[-3,18],[-6,18],[3,34],[6,15],[4,29],[-3,35],[11,42],[2,-45],[12,41],[22,20],[14,25],[21,22],[13,4],[7,-7],[22,22],[17,6],[4,13],[8,6],[15,-2],[29,18],[15,26],[7,31],[17,30],[1,24],[1,32],[19,50],[12,-51],[12,12],[-10,28],[9,29],[12,-13],[3,45],[15,29],[7,23],[14,10],[0,17],[13,-7],[0,15],[12,8],[14,8],[20,-27],[16,-35],[17,0],[18,-6],[-6,33],[13,47],[13,15],[-5,15],[12,34],[17,21],[14,-7],[24,11],[-1,30],[-20,19],[15,9],[18,-15],[15,-24],[23,-15],[8,6],[17,-18],[17,17],[10,-5],[7,11],[12,-29],[-7,-32],[-11,-24],[-9,-2],[3,-23],[-8,-30],[-10,-29],[2,-17],[22,-32],[21,-19],[15,-20],[20,-35],[8,0],[14,-15],[4,-19],[27,-20],[18,20],[6,32],[5,26],[4,33],[8,47],[-4,28],[2,17],[-3,34],[4,45],[5,12],[-4,20],[7,31],[5,32],[1,17],[10,22],[8,-29],[2,-37],[7,-7],[1,-25],[10,-30],[2,-33],[-1,-22]],[[5471,7900],[-2,-24],[-16,0],[6,-13],[-9,-38]],[[5450,7825],[-6,-10],[-24,-1],[-14,-13],[-23,4]],[[5383,7805],[-40,15],[-6,21],[-27,-10],[-4,-12],[-16,9]],[[5290,7828],[-15,1],[-12,11],[4,15],[-1,10]],[[5266,7865],[8,3],[14,-16],[4,16],[25,-3],[20,11],[13,-2],[9,-12],[2,10],[-4,38],[10,8],[10,27]],[[5377,7945],[21,-19],[15,24],[10,5],[22,-18],[13,3],[13,-12]],[[5471,7928],[-3,-7],[3,-21]],[[6281,7346],[-19,8],[-14,27],[-4,23]],[[6349,7527],[15,-31],[14,-42],[13,-2],[8,-16],[-23,-5],[-5,-46],[-4,-21],[-11,-13],[1,-30]],[[6357,7321],[-7,-3],[-17,31],[10,30],[-9,17],[-10,-4],[-33,-44]],[[6249,7494],[6,10],[21,-17],[15,-4],[4,7],[-14,32],[7,9]],[[6288,7531],[8,-2],[19,-36],[13,-4],[4,15],[17,23]],[[5814,4792],[-1,71],[-7,27]],[[5806,4890],[17,-5],[8,34],[15,-4]],[[5846,4915],[1,-23],[6,-14],[1,-19],[-7,-12],[-11,-31],[-10,-22],[-12,-2]],[[5092,8091],[20,-5],[26,12],[17,-25],[16,-14]],[[5171,8059],[-4,-40]],[[5167,8019],[-7,-2],[-3,-33]],[[5157,7984],[-24,26],[-14,-4],[-20,28],[-13,23],[-13,1],[-4,21]],[[5069,8079],[23,12]],[[5074,5427],[-23,-7]],[[5051,5420],[-7,41],[2,136],[-6,12],[-1,29],[-10,21],[-8,17],[3,31]],[[5024,5707],[10,7],[6,26],[13,5],[6,18]],[[5059,5763],[10,17],[10,0],[21,-34]],[[5100,5746],[-1,-19],[6,-35],[-6,-24],[3,-16],[-13,-37],[-9,-18],[-5,-37],[1,-38],[-2,-95]],[[4921,5627],[-19,15],[-13,-2],[-10,-15],[-12,13],[-5,19],[-13,13]],[[4849,5670],[-1,34],[7,26],[-1,20],[23,48],[4,41],[7,14],[14,-8],[11,12],[4,16],[22,26],[5,19],[26,24],[15,9],[7,-12],[18,0]],[[5010,5939],[-2,-28],[3,-27],[16,-39],[1,-28],[32,-14],[-1,-40]],[[5024,5707],[-24,1]],[[5e3,5708],[-13,5],[-9,-9],[-12,4],[-48,-3],[-1,-33],[4,-45]],[[7573,6360],[0,-43],[-10,9],[2,-47]],[[7565,6279],[-8,30],[-1,31],[-6,28],[-11,34],[-26,3],[3,-25],[-9,-32],[-12,12],[-4,-11],[-8,6],[-11,5]],[[7472,6360],[-4,49],[-10,45],[5,35],[-17,16],[6,22],[18,22],[-20,31],[9,40],[22,-26],[14,-3],[2,-41],[26,-8],[26,1],[16,-10],[-13,-50],[-12,-3],[-9,-34],[16,-31],[4,38],[8,0],[14,-93]],[[5629,7671],[8,-25],[11,5],[21,-9],[41,-4],[13,16],[33,13],[20,-21],[17,-6]],[[5793,7640],[-15,-25],[-10,-42],[9,-34]],[[5777,7539],[-24,8],[-28,-18]],[[5725,7529],[0,-30],[-26,-5],[-19,20],[-22,-16],[-21,2]],[[5637,7500],[-2,39],[-14,19]],[[5621,7558],[5,8],[-3,7],[4,19],[11,18],[-14,26],[-2,21],[7,14]],[[2846,6461],[-7,-3],[-7,34],[-10,17],[6,38],[8,-3],[10,-49],[0,-34]],[[2838,6628],[-30,-10],[-2,22],[13,5],[18,-2],[1,-15]],[[2861,6628],[-5,-42],[-5,8],[0,31],[-12,23],[0,7],[22,-27]],[[5527,7708],[10,0],[-7,-26],[14,-23],[-4,-28],[-7,-2]],[[5533,7629],[-5,-6],[-9,-13],[-4,-33]],[[5515,7577],[-25,23],[-10,24],[-11,13],[-12,22],[-6,19],[-14,27],[6,25],[10,-14],[6,12],[13,2],[24,-10],[19,1],[12,-13]],[[5652,8242],[27,0],[30,22],[6,34],[23,19],[-3,26]],[[5735,8343],[17,10],[30,23]],[[5782,8376],[29,-15],[4,-15],[15,7],[27,-14],[3,-27],[-6,-16],[17,-39],[12,-11],[-2,-11],[19,-10],[8,-16],[-11,-13],[-23,2],[-5,-5],[7,-20],[6,-37]],[[5882,8136],[-23,-4],[-9,-13],[-2,-30],[-11,6],[-25,-3],[-7,14],[-11,-10],[-10,8],[-22,1],[-31,15],[-28,4],[-22,-1],[-15,-16],[-13,-2]],[[5653,8105],[-1,26],[-8,27],[17,12],[0,24],[-8,22],[-1,26]],[[2524,6110],[-1,8],[4,3],[5,-7],[10,36],[5,0]],[[2547,6150],[0,-8],[5,-1],[0,-16],[-5,-25],[3,-9],[-3,-21],[2,-6],[-4,-30],[-5,-16],[-5,-1],[-6,-21]],[[2529,5996],[-8,0],[2,67],[1,47]],[[3136,3714],[-20,-8],[-11,82],[-15,66],[9,57],[-15,25],[-4,43],[-13,40]],[[3067,4019],[17,64],[-12,49],[7,20],[-5,22],[10,30],[1,50],[1,41],[6,20],[-24,96]],[[3068,4411],[21,-5],[14,1],[6,18],[25,24],[14,22],[37,10],[-3,-44],[3,-23],[-2,-40],[30,-53],[31,-9],[11,-23],[19,-11],[11,-17],[18,0],[16,-17],[1,-34],[6,-18],[0,-25],[-8,-1],[11,-69],[53,-2],[-4,-35],[3,-23],[15,-16],[6,-37],[-4,-47],[-8,-26],[3,-33],[-9,-12]],[[3384,3866],[-1,18],[-25,30],[-26,1],[-49,-17],[-13,-52],[-1,-32],[-11,-71]],[[3482,3537],[6,34],[3,35],[1,32],[-10,11],[-11,-9],[-10,2],[-4,23],[-2,54],[-5,18],[-19,16],[-11,-12],[-30,11],[2,81],[-8,33]],[[3068,4411],[-15,-11],[-13,7],[2,90],[-23,-35],[-24,2],[-11,31],[-18,4],[5,25],[-15,36],[-11,53],[7,11],[0,25],[17,17],[-3,32],[7,20],[2,28],[32,40],[22,11],[4,9],[25,-2]],[[3058,4804],[13,162],[0,25],[-4,34],[-12,22],[0,42],[15,10],[6,-6],[1,23],[-16,6],[-1,37],[54,-2],[10,21],[7,-19],[6,-35],[5,8]],[[3142,5132],[15,-32],[22,4],[5,18],[21,14],[11,10],[4,25],[19,17],[-1,12],[-24,5],[-3,37],[1,40],[-13,15],[5,6],[21,-8],[22,-15],[8,14],[20,9],[31,23],[10,22],[-3,17]],[[3313,5365],[14,2],[7,-13],[-4,-26],[9,-9],[7,-28],[-8,-20],[-4,-51],[7,-30],[2,-27],[17,-28],[14,-3],[3,12],[8,3],[13,10],[9,16],[15,-5],[7,2]],[[3429,5170],[15,-5],[3,12],[-5,12],[3,17],[11,-5],[13,6],[16,-13]],[[3485,5194],[12,-12],[9,16],[6,-3],[4,-16],[13,4],[11,22],[8,44],[17,54]],[[3565,5303],[9,3],[7,-33],[16,-103],[14,-10],[1,-41],[-21,-48],[9,-18],[49,-9],[1,-60],[21,39],[35,-21],[46,-36],[14,-35],[-5,-32],[33,18],[54,-32],[41,3],[41,-49],[36,-66],[21,-17],[24,-3],[10,-18],[9,-76],[5,-35],[-11,-98],[-14,-39],[-39,-82],[-18,-67],[-21,-51],[-7,-1],[-7,-43],[2,-111],[-8,-91],[-3,-39],[-9,-23],[-5,-79],[-28,-77],[-5,-61],[-22,-26],[-7,-35],[-30,0],[-44,-23],[-19,-26],[-31,-18],[-33,-47],[-23,-58],[-5,-44],[5,-33],[-5,-60],[-6,-28],[-20,-33],[-31,-104],[-24,-47],[-19,-27],[-13,-57],[-18,-33]],[[3517,3063],[-8,33],[13,28],[-16,40],[-22,33],[-29,38],[-10,-2],[-28,46],[-18,-7]],[[8172,5325],[11,22],[23,32]],[[8206,5379],[-1,-29],[-2,-37],[-13,1],[-6,-20],[-12,31]],[[7546,6698],[12,-19],[-2,-36],[-23,-2],[-23,4],[-18,-9],[-25,22],[-1,12]],[[7466,6670],[19,44],[15,15],[20,-14],[14,-1],[12,-16]],[[5817,3752],[-39,-43],[-25,-44],[-10,-40],[-8,-22],[-15,-4],[-5,-29],[-3,-18],[-17,-14],[-23,3],[-13,17],[-12,7],[-14,-14],[-6,-28],[-14,-18],[-13,-26],[-20,-6],[-6,20],[2,36],[-16,56],[-8,9]],[[5552,3594],[0,173],[27,2],[1,210],[21,2],[43,21],[10,-24],[18,23],[9,0],[15,13]],[[5696,4014],[5,-4]],[[5701,4010],[11,-48],[5,-10],[9,-34],[32,-65],[12,-7],[0,-20],[8,-38],[21,-9],[18,-27]],[[5424,5496],[23,4],[5,16],[5,-2],[7,-13],[34,23],[12,23],[15,20],[-3,21],[8,6],[27,-4],[26,27],[20,65],[14,24],[18,10]],[[5635,5716],[3,-26],[16,-36],[0,-25],[-5,-24],[2,-18],[10,-18]],[[5661,5569],[21,-25]],[[5682,5544],[15,-24],[0,-19],[19,-31],[12,-26],[7,-35],[20,-24],[5,-18]],[[5760,5367],[-9,-7],[-18,2],[-21,6],[-10,-5],[-5,-14],[-9,-2],[-10,12],[-31,-29],[-13,6],[-4,-5],[-8,-35],[-21,11],[-20,6],[-18,22],[-23,20],[-15,-19],[-10,-30],[-3,-41]],[[5512,5265],[-18,3],[-19,10],[-16,-32],[-15,-55]],[[5444,5191],[-3,18],[-1,27],[-13,19],[-10,30],[-2,21],[-13,31],[2,18],[-3,25],[2,45],[7,11],[14,60]],[[3231,7808],[20,-8],[26,1],[-14,-24],[-10,-4],[-35,25],[-7,20],[10,18],[10,-28]],[[3283,7958],[-14,-1],[-36,19],[-26,28],[10,5],[37,-15],[28,-25],[1,-11]],[[1569,7923],[-14,-8],[-46,27],[-8,21],[-25,21],[-5,16],[-28,11],[-11,32],[2,14],[30,-13],[17,-9],[26,-6],[9,-21],[14,-28],[28,-24],[11,-33]],[[3440,8052],[-18,-52],[18,20],[19,-12],[-10,-21],[25,-16],[12,14],[28,-18],[-8,-43],[19,10],[4,-32],[8,-36],[-11,-52],[-13,-2],[-18,11],[6,48],[-8,8],[-32,-52],[-17,2],[20,28],[-27,14],[-30,-3],[-54,2],[-4,17],[17,21],[-12,16],[24,36],[28,94],[18,33],[24,21],[13,-3],[-6,-16],[-15,-37]],[[1313,8250],[27,5],[-8,-67],[24,-48],[-11,0],[-17,27],[-10,27],[-14,19],[-5,26],[1,19],[13,-8]],[[2798,8730],[-11,-31],[-12,5],[-8,17],[2,4],[10,18],[12,-1],[7,-12]],[[2725,8762],[-33,-32],[-19,1],[-6,16],[20,27],[38,0],[0,-12]],[[2634,8936],[5,-26],[15,9],[16,-15],[30,-20],[32,-19],[2,-28],[21,5],[20,-20],[-25,-18],[-43,14],[-16,26],[-27,-31],[-40,-31],[-9,35],[-38,-6],[24,30],[4,46],[9,54],[20,-5]],[[2892,9024],[-31,-3],[-7,29],[12,34],[26,8],[21,-17],[1,-25],[-4,-8],[-18,-18]],[[2343,9140],[-17,-21],[-38,18],[-22,-6],[-38,26],[24,19],[19,25],[30,-16],[17,-11],[8,-11],[17,-23]],[[3135,7724],[-18,33],[0,81],[-13,17],[-18,-10],[-10,16],[-21,-45],[-8,-46],[-10,-27],[-12,-9],[-9,-3],[-3,-15],[-51,0],[-42,0],[-12,-11],[-30,-42],[-3,-5],[-9,-23],[-26,0],[-27,0],[-12,-10],[4,-11],[2,-18],[0,-6],[-36,-30],[-29,-9],[-32,-31],[-7,0],[-10,9],[-3,8],[1,6],[6,21],[13,33],[8,35],[-5,51],[-6,53],[-29,28],[3,11],[-4,7],[-8,0],[-5,9],[-2,14],[-5,-6],[-7,2],[1,6],[-6,6],[-3,15],[-21,19],[-23,20],[-27,23],[-26,21],[-25,-17],[-9,0],[-34,15],[-23,-8],[-27,19],[-28,9],[-19,4],[-9,10],[-5,32],[-9,0],[-1,-23],[-57,0],[-95,0],[-94,0],[-84,0],[-83,0],[-82,0],[-85,0],[-27,0],[-82,0],[-79,0]],[[1588,7952],[-4,0],[-54,58],[-20,26],[-50,24],[-15,53],[3,36],[-35,25],[-5,48],[-34,43],[0,30]],[[1374,8295],[15,29],[0,37],[-48,37],[-28,68],[-17,42],[-26,27],[-19,24],[-14,31],[-28,-20],[-27,-33],[-25,39],[-19,26],[-27,16],[-28,2],[0,337],[1,219]],[[1084,9176],[51,-14],[44,-29],[29,-5],[24,24],[34,19],[41,-7],[42,26],[45,14],[20,-24],[20,14],[6,27],[20,-6],[47,-53],[37,40],[3,-45],[34,10],[11,17],[34,-3],[42,-25],[65,-22],[38,-10],[28,4],[37,-30],[-39,-29],[50,-13],[75,7],[24,11],[29,-36],[31,30],[-29,25],[18,20],[34,3],[22,6],[23,-14],[28,-32],[31,5],[49,-27],[43,9],[40,-1],[-3,37],[25,10],[43,-20],[0,-56],[17,47],[23,-1],[12,59],[-30,36],[-32,24],[2,65],[33,43],[37,-9],[28,-26],[38,-67],[-25,-29],[52,-12],[-1,-60],[38,46],[33,-38],[-9,-44],[27,-40],[29,43],[21,51],[1,65],[40,-5],[41,-8],[37,-30],[2,-29],[-21,-31],[20,-32],[-4,-29],[-54,-41],[-39,-9],[-29,18],[-8,-30],[-27,-50],[-8,-26],[-32,-40],[-40,-4],[-22,-25],[-2,-38],[-32,-7],[-34,-48],[-30,-67],[-11,-46],[-1,-69],[40,-10],[13,-55],[13,-45],[39,12],[51,-26],[28,-22],[20,-28],[35,-17],[29,-24],[46,-4],[30,-6],[-4,-51],[8,-59],[21,-66],[41,-56],[21,19],[15,61],[-14,93],[-20,31],[45,28],[31,41],[16,41],[-3,40],[-19,50],[-33,44],[32,62],[-12,54],[-9,92],[19,14],[48,-16],[29,-6],[23,15],[25,-20],[35,-34],[8,-23],[50,-4],[-1,-50],[9,-74],[25,-10],[21,-35],[40,33],[26,65],[19,28],[21,-53],[36,-75],[31,-71],[-11,-37],[37,-33],[25,-34],[44,-15],[18,-19],[11,-50],[22,-8],[11,-22],[2,-67],[-20,-22],[-20,-21],[-46,-21],[-35,-48],[-47,-10],[-59,13],[-42,0],[-29,-4],[-23,-43],[-35,-26],[-40,-78],[-32,-54],[23,9],[45,78],[58,49],[42,6],[24,-29],[-26,-40],[9,-63],[9,-45],[36,-29],[46,8],[28,67],[2,-43],[17,-22],[-34,-38],[-61,-36],[-28,-23],[-31,-43],[-21,4],[-1,50],[48,49],[-44,-2],[-31,-7]],[[1829,9377],[-14,-27],[61,17],[39,-29],[31,30],[26,-20],[23,-58],[14,25],[-20,60],[24,9],[28,-9],[31,-24],[17,-58],[9,-41],[47,-30],[50,-28],[-3,-26],[-46,-4],[18,-23],[-9,-22],[-51,9],[-48,16],[-32,-3],[-52,-20],[-70,-9],[-50,-6],[-15,28],[-38,16],[-24,-6],[-35,47],[19,6],[43,10],[39,-3],[36,11],[-54,13],[-59,-4],[-39,1],[-15,22],[64,23],[-42,-1],[-49,16],[23,44],[20,24],[74,36],[29,-12]],[[2097,9395],[-24,-39],[-44,41],[10,9],[37,2],[21,-13]],[[2879,9376],[3,-16],[-30,2],[-30,1],[-30,-8],[-8,3],[-31,32],[1,21],[14,4],[63,-6],[48,-33]],[[2595,9379],[22,-36],[26,47],[70,24],[48,-61],[-4,-38],[55,17],[26,23],[62,-30],[38,-28],[3,-25],[52,13],[29,-38],[67,-23],[24,-24],[26,-55],[-51,-28],[66,-38],[44,-13],[40,-55],[44,-3],[-9,-42],[-49,-69],[-34,26],[-44,57],[-36,-8],[-3,-34],[29,-34],[38,-27],[11,-16],[18,-58],[-9,-43],[-35,16],[-70,47],[39,-51],[29,-35],[5,-21],[-76,24],[-59,34],[-34,29],[10,17],[-42,30],[-40,29],[0,-18],[-80,-9],[-23,20],[18,44],[52,1],[57,7],[-9,21],[10,30],[36,57],[-8,27],[-11,20],[-42,29],[-57,20],[18,15],[-29,36],[-25,4],[-22,20],[-14,-18],[-51,-7],[-101,13],[-59,17],[-45,9],[-23,21],[29,27],[-39,0],[-9,60],[21,53],[29,24],[72,16],[-21,-39]],[[2212,9420],[33,-12],[50,7],[7,-17],[-26,-28],[42,-26],[-5,-53],[-45,-23],[-27,5],[-19,23],[-69,45],[0,19],[57,-7],[-31,38],[33,29]],[[2411,9357],[-30,-45],[-32,3],[-17,52],[1,29],[14,25],[28,16],[58,-2],[53,-14],[-42,-53],[-33,-11]],[[1654,9275],[-73,-29],[-15,26],[-64,31],[12,25],[19,43],[24,39],[-27,36],[94,10],[39,-13],[71,-3],[27,-17],[30,-25],[-35,-15],[-68,-41],[-34,-42],[0,-25]],[[2399,9487],[-15,-23],[-40,5],[-34,15],[15,27],[40,16],[24,-21],[10,-19]],[[2264,9590],[21,-27],[1,-31],[-13,-44],[-46,-6],[-30,10],[1,34],[-45,-4],[-2,45],[30,-2],[41,21],[40,-4],[2,8]],[[1994,9559],[11,-21],[25,10],[29,-2],[5,-29],[-17,-28],[-94,-10],[-70,-25],[-43,-2],[-3,20],[57,26],[-125,-7],[-39,10],[38,58],[26,17],[78,-20],[50,-35],[48,-5],[-40,57],[26,21],[29,-7],[9,-28]],[[2370,9612],[30,-19],[55,0],[24,-19],[-6,-22],[32,-14],[17,-14],[38,-2],[40,-5],[44,13],[57,5],[45,-5],[30,-22],[6,-24],[-17,-16],[-42,-13],[-35,8],[-80,-10],[-57,-1],[-45,8],[-74,19],[-9,32],[-4,29],[-27,26],[-58,7],[-32,19],[10,24],[58,-4]],[[1772,9645],[-4,-46],[-21,-20],[-26,-3],[-52,-26],[-44,-9],[-38,13],[47,44],[57,39],[43,-1],[38,9]],[[2393,9637],[-13,-2],[-52,4],[-7,17],[56,-1],[19,-11],[-3,-7]],[[1939,9648],[-52,-17],[-41,19],[23,19],[40,6],[39,-10],[-9,-17]],[[1954,9701],[-34,-11],[-46,0],[0,8],[29,18],[14,-3],[37,-12]],[[2338,9669],[-41,-12],[-23,13],[-12,23],[-2,24],[36,-2],[16,-4],[33,-21],[-7,-21]],[[2220,9685],[11,-25],[-45,7],[-46,19],[-62,2],[27,18],[-34,14],[-2,22],[55,-8],[75,-21],[21,-28]],[[2583,9764],[33,-20],[-38,-17],[-51,-45],[-50,-4],[-57,8],[-30,24],[0,21],[22,16],[-50,0],[-31,19],[-18,27],[20,26],[19,18],[28,4],[-12,14],[65,3],[35,-32],[47,-12],[46,-11],[22,-39]],[[3097,9967],[74,-4],[60,-8],[51,-16],[-2,-16],[-67,-25],[-68,-12],[-25,-14],[61,1],[-66,-36],[-45,-17],[-48,-48],[-57,-10],[-18,-12],[-84,-6],[39,-8],[-20,-10],[23,-29],[-26,-21],[-43,-16],[-13,-24],[-39,-17],[4,-14],[48,3],[0,-15],[-74,-35],[-73,16],[-81,-9],[-42,7],[-52,3],[-4,29],[52,13],[-14,43],[17,4],[74,-26],[-38,38],[-45,11],[23,23],[49,14],[8,21],[-39,23],[-12,31],[76,-3],[22,-6],[43,21],[-62,7],[-98,-4],[-49,20],[-23,24],[-32,17],[-6,21],[41,11],[32,2],[55,9],[41,22],[34,-3],[30,-16],[21,32],[37,9],[50,7],[85,2],[14,-6],[81,10],[60,-4],[60,-4]],[[5290,7828],[-3,-24],[-12,-10],[-20,7],[-6,-24],[-14,-2],[-5,10],[-15,-20],[-13,-3],[-12,13]],[[5190,7775],[-10,25],[-13,-9],[0,27],[21,33],[-1,15],[12,-5],[8,10]],[[5207,7871],[24,-1],[5,13],[30,-18]],[[3140,1814],[-10,-24],[-23,-18],[-14,2],[-16,5],[-21,18],[-29,8],[-35,33],[-28,32],[-38,66],[23,-12],[39,-40],[36,-21],[15,27],[9,41],[25,24],[20,-7]],[[3095,1968],[-25,0],[-13,-14],[-25,-22],[-5,-55],[-11,-1],[-32,19],[-32,41],[-34,34],[-9,37],[8,35],[-14,39],[-4,101],[12,57],[30,45],[-43,18],[27,52],[9,98],[31,-21],[15,123],[-19,15],[-9,-73],[-17,8],[9,84],[9,110],[13,40],[-8,58],[-2,66],[11,2],[17,96],[20,94],[11,88],[-6,89],[8,49],[-3,72],[16,73],[5,114],[9,123],[9,132],[-2,96],[-6,84]],[[3045,3974],[14,15],[8,30]],[[8064,6161],[-24,-28],[-23,18],[0,51],[13,26],[31,17],[16,-1],[6,-23],[-12,-26],[-7,-34]],[[8628,7562],[-18,35],[-11,-33],[-43,-26],[4,-31],[-24,2],[-13,19],[-19,-42],[-30,-32],[-23,-38]],[[8451,7416],[-39,-17],[-20,-27],[-30,-17],[15,28],[-6,23],[22,40],[-15,30],[-24,-20],[-32,-41],[-17,-39],[-27,-2],[-14,-28],[15,-40],[22,-10],[1,-26],[22,-17],[31,42],[25,-23],[18,-2],[4,-31],[-39,-16],[-13,-32],[-27,-30],[-14,-41],[30,-33],[11,-58],[17,-54],[18,-45],[0,-44],[-17,-16],[6,-32],[17,-18],[-5,-48],[-7,-47],[-15,-5],[-21,-64],[-22,-78],[-26,-70],[-38,-55],[-39,-50],[-31,-6],[-17,-27],[-10,20],[-15,-30],[-39,-29],[-29,-9],[-10,-63],[-15,-3],[-8,43],[7,22],[-37,19],[-13,-9]],[[8001,6331],[-28,15],[-14,24],[5,34],[-26,11],[-13,22],[-24,-31],[-27,-7],[-22,0],[-15,-14]],[[7837,6385],[-14,-9],[4,-68],[-15,2],[-2,14]],[[7810,6324],[-1,24],[-20,-17],[-12,11],[-21,22],[8,49],[-18,12],[-6,54],[-30,-10],[4,70],[26,50],[1,48],[-1,46],[-12,14],[-9,35],[-16,-5]],[[7703,6727],[-30,9],[9,25],[-13,36],[-20,-24],[-23,14],[-32,-37],[-25,-44],[-23,-8]],[[7466,6670],[-2,47],[-17,-13]],[[7447,6704],[-32,6],[-32,14],[-22,26],[-22,11],[-9,29],[-16,8],[-28,39],[-22,18],[-12,-14]],[[7252,6841],[-38,41],[-28,37],[-7,65],[20,-7],[1,30],[-12,30],[3,48],[-30,69]],[[7161,7154],[-45,24],[-8,46],[-21,27]],[[7082,7268],[-4,34],[1,23],[-17,13],[-9,-6],[-7,55]],[[7046,7387],[8,13],[-4,14],[26,28],[20,12],[29,-8],[11,38],[35,7],[10,23],[44,32],[4,13]],[[7229,7559],[-2,34],[19,15],[-25,103],[55,24],[14,13],[20,106],[55,-20],[15,27],[2,59],[23,6],[21,39]],[[7426,7965],[11,5]],[[7437,7970],[7,-41],[23,-32],[40,-22],[19,-47],[-10,-70],[10,-25],[33,-10],[37,-8],[33,-37],[18,-7],[12,-54],[17,-35],[30,1],[58,-13],[36,8],[28,-9],[41,-36],[34,0],[12,-18],[32,32],[45,20],[42,2],[32,21],[20,32],[20,20],[-5,19],[-9,23],[15,38],[15,-5],[29,-12],[28,31],[42,23],[20,39],[20,17],[40,8],[22,-7],[3,21],[-25,41],[-22,19],[-22,-22],[-27,10],[-16,-8],[-7,24],[20,59],[13,45]],[[8240,8005],[34,-23],[39,38],[-1,26],[26,62],[15,19],[0,33],[-16,14],[23,29],[35,11],[37,2],[41,-18],[25,-22],[17,-59],[10,-26],[10,-36],[10,-58],[49,-19],[32,-42],[12,-55],[42,0],[24,23],[46,17],[-15,-53],[-11,-21],[-9,-65],[-19,-58],[-33,11],[-24,-21],[7,-51],[-4,-69],[-14,-2],[0,-30]],[[4920,5353],[-12,-1],[-20,12],[-18,-1],[-33,-10],[-19,-18],[-27,-21],[-6,1]],[[4785,5315],[2,49],[3,7],[-1,24],[-12,24],[-8,4],[-8,17],[6,26],[-3,28],[1,18]],[[4765,5512],[5,0],[1,25],[-2,12],[3,8],[10,7],[-7,47],[-6,25],[2,20],[5,4]],[[4776,5660],[4,6],[8,-9],[21,-1],[5,18],[5,-1],[8,6],[4,-25],[7,7],[11,9]],[[4921,5627],[7,-84],[-11,-50],[-8,-66],[12,-51],[-1,-23]],[[5363,5191],[-4,4],[-16,-8],[-17,8],[-13,-4]],[[5313,5191],[-45,1]],[[5268,5192],[4,47],[-11,39],[-13,10],[-6,27],[-7,8],[1,16]],[[5236,5339],[7,42],[13,57],[8,1],[17,34],[10,1],[16,-24],[19,20],[2,25],[7,23],[4,30],[15,25],[5,41],[6,13],[4,31],[7,37],[24,46],[1,20],[3,10],[-11,24]],[[5393,5795],[1,19],[8,3]],[[5402,5817],[11,-38],[2,-39],[-1,-39],[15,-54],[-15,1],[-8,-4],[-13,6],[-6,-28],[16,-35],[13,-10],[3,-24],[9,-41],[-4,-16]],[[5444,5191],[-2,-31],[-22,14],[-22,15],[-35,2]],[[5856,5265],[-2,-69],[11,-8],[-9,-21],[-10,-16],[-11,-31],[-6,-27],[-1,-48],[-7,-22],[0,-45]],[[5821,4978],[-8,-16],[-1,-35],[-4,-5],[-2,-32]],[[5814,4792],[5,-55],[-2,-30],[5,-35],[16,-33],[15,-74]],[[5853,4565],[-11,6],[-37,-10],[-7,-7],[-8,-38],[6,-26],[-5,-70],[-3,-59],[7,-11],[19,-23],[8,11],[2,-64],[-21,1],[-11,32],[-10,25],[-22,9],[-6,31],[-17,-19],[-22,8],[-10,27],[-17,6],[-13,-2],[-2,19],[-9,1]],[[5342,4697],[-4,18]],[[5360,4775],[8,-6],[9,23],[15,-1],[2,-17],[11,-10],[16,37],[16,29],[7,19],[-1,48],[12,58],[13,30],[18,29],[3,18],[1,22],[5,21],[-2,33],[4,52],[5,37],[8,32],[2,36]],[[5760,5367],[17,-49],[12,-7],[8,10],[12,-4],[16,12],[6,-25],[25,-39]],[[5330,4760],[-22,62]],[[5308,4822],[21,33],[-11,39],[10,15],[19,7],[2,26],[15,-28],[24,-2],[9,27],[3,40],[-3,46],[-13,35],[12,68],[-7,12],[-21,-5],[-7,31],[2,25]],[[2906,5049],[-12,14],[-14,19],[-7,-9],[-24,8],[-7,25],[-5,-1],[-28,34]],[[2809,5139],[-3,18],[10,5],[-1,29],[6,22],[14,4],[12,37],[10,31],[-10,14],[5,34],[-6,54],[6,16],[-4,50],[-12,31]],[[2836,5484],[4,29],[9,-4],[5,17],[-6,35],[3,9]],[[2851,5570],[14,-2],[21,41],[12,6],[0,20],[5,50],[16,27],[17,1],[3,13],[21,-5],[22,30],[11,13],[14,28],[9,-3],[8,-16],[-6,-20]],[[3018,5753],[-18,-10],[-7,-29],[-10,-17],[-8,-22],[-4,-42],[-8,-35],[15,-4],[3,-27],[6,-13],[3,-24],[-4,-22],[1,-12],[7,-5],[7,-20],[36,5],[16,-7],[19,-51],[11,6],[20,-3],[16,7],[10,-10],[-5,-32],[-6,-20],[-2,-42],[5,-40],[8,-17],[1,-13],[-14,-30],[10,-13],[8,-21],[8,-58]],[[3058,4804],[-14,31],[-8,1],[18,61],[-21,27],[-17,-5],[-10,10],[-15,-15],[-21,7],[-16,62],[-13,15],[-9,28],[-19,28],[-7,-5]],[[2695,5543],[-15,14],[-6,12],[4,10],[-1,13],[-8,14],[-11,12],[-10,8],[-1,17],[-8,10],[2,-17],[-5,-14],[-7,17],[-9,5],[-4,12],[1,18],[3,19],[-8,8],[7,12]],[[2619,5713],[4,7],[18,-15],[7,7],[9,-5],[4,-12],[8,-4],[7,13]],[[2676,5704],[7,-32],[11,-24],[13,-25]],[[2707,5623],[-11,-6],[0,-23],[6,-9],[-4,-7],[1,-11],[-2,-12],[-2,-12]],[[2715,6427],[23,-4],[22,0],[26,-21],[11,-21],[26,6],[10,-13],[24,-37],[17,-27],[9,1],[17,-12],[-2,-17],[20,-2],[21,-24],[-3,-14],[-19,-7],[-18,-3],[-19,4],[-40,-5],[18,32],[-11,16],[-18,4],[-9,17],[-7,33],[-16,-2],[-26,16],[-8,12],[-36,10],[-10,11],[11,15],[-28,3],[-20,-31],[-11,-1],[-4,-14],[-14,-7],[-12,6],[15,18],[6,22],[13,13],[14,11],[21,6],[7,6]],[[5909,7133],[2,1],[4,14],[20,-1],[25,18],[-19,-25],[2,-11]],[[5943,7129],[-3,2],[-5,-5],[-4,1],[-2,-2],[0,6],[-2,4],[-6,0],[-7,-5],[-5,3]],[[5943,7129],[1,-5],[-28,-24],[-14,8],[-7,23],[14,2]],[[5377,7945],[-16,25],[-14,15],[-3,25],[-5,17],[21,13],[10,15],[20,11],[7,11],[7,-6],[13,6]],[[5417,8077],[13,-19],[21,-5],[-2,-17],[15,-12],[4,15],[19,-6],[3,-19],[20,-3],[13,-29]],[[5523,7982],[-8,0],[-4,-11],[-7,-3],[-2,-13],[-5,-3],[-1,-5],[-9,-7],[-12,1],[-4,-13]],[[5275,8306],[1,-23],[28,-14],[-1,-21],[29,11],[15,16],[32,-23],[13,-19]],[[5392,8233],[6,-30],[-8,-16],[11,-21],[6,-31],[-2,-21],[12,-37]],[[5207,7871],[3,42],[14,40],[-40,11],[-13,16]],[[5171,7980],[2,26],[-6,13]],[[5171,8059],[-5,62],[17,0],[7,22],[6,54],[-5,20]],[[5191,8217],[6,13],[23,3],[5,-13],[19,29],[-6,22],[-2,34]],[[5236,8305],[21,-8],[18,9]],[[6196,5808],[7,-19],[-1,-24],[-16,-14],[12,-16]],[[6198,5735],[-10,-32]],[[6188,5703],[-7,11],[-6,-5],[-16,1],[0,18],[-2,17],[9,27],[10,26]],[[6176,5798],[12,-5],[8,15]],[[5352,8343],[-17,-48],[-29,33],[-4,25],[41,19],[9,-29]],[[5236,8305],[-11,32],[-1,61],[5,16],[8,17],[24,4],[10,16],[22,17],[-1,-30],[-8,-20],[4,-16],[15,-9],[-7,-22],[-8,6],[-20,-42],[7,-29]],[[3008,6222],[3,10],[22,0],[16,-15],[8,1],[5,-21],[15,1],[-1,-17],[12,-2],[14,-22],[-10,-24],[-14,13],[-12,-3],[-9,3],[-5,-11],[-11,-3],[-4,14],[-10,-8],[-11,-41],[-7,10],[-1,17]],[[3008,6124],[0,16],[-7,17],[7,10],[2,23],[-2,32]],[[5333,6444],[-95,-112],[-81,-117],[-39,-26]],[[5118,6189],[-31,-6],[0,38],[-13,10],[-17,16],[-7,28],[-94,129],[-93,129]],[[4863,6533],[-105,143]],[[4758,6676],[1,11],[0,4]],[[4759,6691],[0,70],[44,44],[28,9],[23,16],[11,29],[32,24],[1,44],[16,5],[13,22],[36,9],[5,23],[-7,13],[-10,62],[-1,36],[-11,38]],[[4939,7135],[27,32],[30,11],[17,24],[27,18],[47,11],[46,4],[14,-8],[26,23],[30,0],[11,-13],[19,3]],[[5233,7240],[-5,-30],[4,-56],[-6,-49],[-18,-33],[3,-45],[23,-35],[0,-14],[17,-24],[12,-106]],[[5263,6848],[9,-52],[1,-28],[-5,-48],[2,-27],[-3,-32],[2,-37],[-11,-25],[17,-43],[1,-25],[10,-33],[13,11],[22,-28],[12,-37]],[[2769,4856],[15,45],[-6,25],[-11,-27],[-16,26],[5,16],[-4,54],[9,9],[5,37],[11,38],[-2,24],[15,13],[19,23]],[[2906,5049],[4,-45],[-9,-39],[-30,-62],[-33,-23],[-17,-51],[-6,-40],[-15,-24],[-12,29],[-11,7],[-12,-5],[-1,22],[8,14],[-3,24]],[[5969,6800],[-7,-23],[-6,-45],[-8,-31],[-6,-10],[-10,19],[-12,26],[-20,85],[-3,-5],[12,-63],[17,-59],[21,-92],[10,-32],[9,-34],[25,-65],[-6,-10],[1,-39],[33,-53],[4,-12]],[[6023,6357],[-110,0],[-107,0],[-112,0]],[[5694,6357],[0,218],[0,210],[-8,47],[7,37],[-5,25],[10,29]],[[5698,6923],[37,0],[27,-15],[28,-18],[13,-9],[21,19],[11,17],[25,5],[20,-8],[7,-29],[7,19],[22,-14],[22,-3],[13,15]],[[5951,6902],[18,-102]],[[6176,5798],[-10,20],[-11,34],[-12,19],[-8,21],[-24,23],[-19,1],[-7,12],[-16,-14],[-17,27],[-8,-44],[-33,13]],[[6011,5910],[-3,23],[12,87],[3,39],[9,18],[20,10],[14,34]],[[6066,6121],[16,-69],[8,-54],[15,-29],[38,-55],[16,-34],[15,-34],[8,-20],[14,-18]],[[4749,7532],[1,42],[-11,25],[39,43],[34,-11],[37,1],[30,-10],[23,3],[45,-2]],[[4947,7623],[11,-23],[51,-27],[10,13],[31,-27],[32,8]],[[5082,7567],[2,-35],[-26,-39],[-36,-12],[-2,-20],[-18,-33],[-10,-48],[11,-34],[-16,-26],[-6,-39],[-21,-11],[-20,-46],[-35,-1],[-27,1],[-17,-21],[-11,-22],[-13,5],[-11,20],[-8,34],[-26,9]],[[4792,7249],[-2,20],[10,22],[4,16],[-9,17],[7,39],[-11,36],[12,5],[1,27],[5,9],[0,46],[13,16],[-8,30],[-16,2],[-5,-8],[-16,0],[-7,29],[-11,-8],[-10,-15]],[[5675,8472],[3,35],[-10,-8],[-18,21],[-2,34],[35,17],[35,8],[30,-10],[29,2]],[[5777,8571],[4,-10],[-20,-34],[8,-55],[-12,-19]],[[5757,8453],[-22,0],[-24,22],[-13,7],[-23,-10]],[[6188,5703],[-6,-21],[10,-32],[10,-29],[11,-21],[90,-70],[24,0]],[[6327,5530],[-79,-177],[-36,-3],[-25,-41],[-17,-1],[-8,-19]],[[6162,5289],[-19,0],[-11,20],[-26,-25],[-8,-24],[-18,4],[-6,7],[-7,-1],[-9,0],[-35,50],[-19,0],[-10,20],[0,33],[-14,10]],[[5980,5383],[-17,64],[-12,14],[-5,23],[-14,29],[-17,4],[9,34],[15,2],[4,18]],[[5943,5571],[0,53]],[[5943,5624],[8,62],[13,16],[3,24],[12,45],[17,30],[11,58],[4,51]],[[5794,9138],[-4,-42],[42,-39],[-26,-45],[33,-67],[-19,-51],[25,-43],[-11,-39],[41,-40],[-11,-31],[-25,-34],[-60,-75]],[[5779,8632],[-50,-5],[-49,-21],[-45,-13],[-16,32],[-27,20],[6,58],[-14,53],[14,35],[25,37],[63,64],[19,12],[-3,25],[-39,28]],[[5663,8957],[-9,23],[-1,91],[-43,40],[-37,29]],[[5573,9140],[17,16],[30,-32],[37,3],[30,-14],[26,26],[14,44],[43,20],[35,-24],[-11,-41]],[[9954,4033],[9,-17],[-4,-31],[-17,-8],[-16,7],[-2,26],[10,21],[13,-8],[7,10]],[[0,4079],[9981,-14],[-17,-13],[-4,23],[14,12],[9,3],[-9983,18]],[[0,4108],[0,-29]],[[0,4108],[6,3],[-4,-28],[-2,-4]],[[3300,1994],[33,36],[24,-15],[16,24],[22,-27],[-8,-21],[-37,-17],[-13,20],[-23,-26],[-14,26]],[[5265,7548],[-9,-46],[-13,12],[-6,40],[5,22],[18,22],[5,-50]],[[5157,7984],[6,-6],[8,2]],[[5190,7775],[-2,-17],[9,-22],[-10,-18],[7,-46],[15,-8],[-3,-25]],[[5206,7639],[-25,-34],[-55,16],[-40,-19],[-4,-35]],[[4947,7623],[14,35],[5,118],[-28,62],[-21,30],[-42,23],[-3,43],[36,12],[47,-15],[-9,67],[26,-25],[65,46],[8,48],[24,12]],[[3485,5194],[7,25],[3,27]],[[3495,5246],[4,26],[-10,34]],[[3489,5306],[-3,41],[15,51]],[[3501,5398],[9,-7],[21,-14],[29,-50],[5,-24]],[[5308,4822],[-29,60],[-18,49],[-17,61],[1,19],[6,19],[7,43],[5,44]],[[5263,5117],[10,4],[40,-1],[0,71]],[[4827,8240],[-21,12],[-17,-1],[6,32],[-6,32]],[[4789,8315],[23,2],[30,-37],[-15,-40]],[[4916,8521],[-30,-63],[29,8],[30,-1],[-7,-48],[-25,-53],[29,-4],[2,-6],[25,-69],[19,-10],[17,-67],[8,-24],[33,-11],[-3,-38],[-14,-17],[11,-30],[-25,-31],[-37,0],[-48,-16],[-13,12],[-18,-28],[-26,7],[-19,-23],[-15,12],[41,62],[25,13],[-1,0],[-43,9],[-8,24],[29,18],[-15,32],[5,39],[42,-6],[4,35],[-19,36],[0,1],[-34,10],[-7,16],[10,27],[-9,16],[-15,-28],[-1,57],[-14,30],[10,61],[21,48],[23,-4],[33,4]],[[6154,7511],[4,26],[-7,40],[-16,22],[-16,6],[-10,19]],[[6109,7624],[4,6],[23,-10],[41,-9],[38,-28],[5,-11],[17,9],[25,-13],[9,-24],[17,-13]],[[6210,7485],[-27,29],[-29,-3]],[[5029,5408],[-44,-35],[-15,-20],[-25,-17],[-25,17]],[[5e3,5708],[-2,-18],[12,-30],[0,-43],[2,-47],[7,-21],[-6,-54],[2,-29],[8,-37],[6,-21]],[[4765,5512],[-8,1],[-5,-24],[-8,1],[-6,12],[2,24],[-11,36],[-8,-7],[-6,-1]],[[4715,5554],[-7,-3],[0,21],[-4,16],[0,17],[-6,25],[-7,21],[-23,0],[-6,-11],[-8,-1],[-4,-13],[-4,-17],[-14,-26]],[[4632,5583],[-13,35],[-10,24],[-8,7],[-6,12],[-4,26],[-4,13],[-8,10]],[[4579,5710],[13,29],[8,-2],[7,10],[6,0],[5,8],[-3,20],[3,6],[1,20]],[[4619,5801],[13,-1],[20,-14],[6,1],[3,7],[15,-5],[4,4]],[[4680,5793],[1,-22],[5,0],[7,8],[5,-2],[7,-15],[12,-5],[8,13],[9,8],[6,8],[6,-1],[6,-13],[3,-17],[12,-24],[-6,-16],[-1,-19],[6,6],[3,-7],[-1,-17],[8,-18]],[[4532,5834],[3,27]],[[4535,5861],[31,1],[6,14],[9,1],[11,-14],[8,-1],[9,10],[6,-17],[-12,-13],[-12,1],[-12,13],[-10,-14],[-5,-1],[-7,-8],[-25,1]],[[4579,5710],[-15,24],[-11,4],[-7,17],[1,9],[-9,13],[-2,12]],[[4536,5789],[15,10],[9,-2],[8,7],[51,-3]],[[5263,5117],[-5,9],[10,66]],[[5658,7167],[15,-20],[22,3],[20,-4],[0,-10],[15,7],[-4,-18],[-40,-5],[1,10],[-34,12],[5,25]],[[5723,7469],[-17,2],[-14,6],[-34,-16],[19,-33],[-14,-10],[-15,0],[-15,31],[-5,-13],[6,-36],[14,-27],[-10,-13],[15,-27],[14,-18],[0,-33],[-25,16],[8,-30],[-18,-7],[11,-52],[-19,-1],[-23,26],[-10,47],[-5,40],[-11,27],[-14,34],[-2,16]],[[5583,7470],[18,6],[11,13],[15,-2],[5,11],[5,2]],[[5725,7529],[13,-16],[-8,-37],[-7,-7]],[[3701,9939],[93,35],[97,-2],[36,21],[98,6],[222,-7],[174,-47],[-52,-23],[-106,-3],[-150,-5],[14,-11],[99,7],[83,-21],[54,18],[23,-21],[-30,-34],[71,22],[135,23],[83,-12],[15,-25],[-113,-42],[-16,-14],[-88,-10],[64,-3],[-32,-43],[-23,-38],[1,-66],[33,-38],[-43,-3],[-46,-19],[52,-31],[6,-50],[-30,-6],[36,-50],[-61,-5],[32,-24],[-9,-20],[-39,-10],[-39,0],[35,-40],[0,-26],[-55,24],[-14,-15],[37,-15],[37,-36],[10,-48],[-49,-11],[-22,22],[-34,34],[10,-40],[-33,-31],[73,-2],[39,-3],[-75,-52],[-75,-46],[-81,-21],[-31,0],[-29,-23],[-38,-62],[-60,-42],[-19,-2],[-37,-15],[-40,-13],[-24,-37],[0,-41],[-15,-39],[-45,-47],[11,-47],[-12,-48],[-14,-58],[-39,-4],[-41,49],[-56,0],[-27,32],[-18,58],[-49,73],[-14,39],[-3,53],[-39,54],[10,44],[-18,21],[27,69],[42,22],[11,25],[6,46],[-32,-21],[-15,-9],[-25,-8],[-34,19],[-2,40],[11,31],[25,1],[57,-15],[-48,37],[-24,20],[-28,-8],[-23,15],[31,55],[-17,22],[-22,41],[-34,62],[-35,23],[0,25],[-74,34],[-59,5],[-74,-3],[-68,-4],[-32,19],[-49,37],[73,19],[56,3],[-119,15],[-62,24],[3,23],[106,28],[101,29],[11,21],[-75,22],[24,23],[97,41],[40,7],[-12,26],[66,16],[86,9],[85,1],[30,-19],[74,33],[66,-22],[39,-5],[58,-19],[-66,32],[4,25]],[[2497,5869],[-14,10],[-17,1],[-13,12],[-15,24]],[[2438,5916],[1,18],[3,13],[-4,12],[13,48],[36,0],[1,20],[-5,4],[-3,12],[-10,14],[-11,20],[13,0],[0,33],[26,0],[26,0]],[[2529,5996],[10,-11],[2,9],[8,-7]],[[2549,5987],[-13,-23],[-13,-16],[-2,-12],[2,-11],[-5,-15]],[[2518,5910],[-7,-4],[2,-7],[-6,-6],[-9,-15],[-1,-9]],[[3340,5552],[18,-22],[17,-38],[1,-31],[10,-1],[15,-29],[11,-21]],[[3412,5410],[-4,-53],[-17,-15],[1,-14],[-5,-31],[13,-42],[9,-1],[3,-33],[17,-51]],[[3313,5365],[-19,45],[7,16],[0,27],[17,10],[7,11],[-10,22],[3,21],[22,35]],[[2574,5825],[-5,18],[-8,5]],[[2561,5848],[2,24],[-4,6],[-6,4],[-12,-7],[-1,8],[-8,10],[-6,12],[-8,5]],[[2549,5987],[3,-3],[6,11],[8,1],[3,-5],[4,3],[13,-6],[13,2],[9,6],[3,7],[9,-3],[6,-4],[8,1],[5,5],[13,-8],[4,-1],[9,-11],[8,-13],[10,-9],[7,-17]],[[2690,5943],[-9,2],[-4,-8],[-10,-8],[-7,0],[-6,-8],[-6,3],[-4,9],[-3,-2],[-4,-14],[-3,1],[0,-12],[-10,-17],[-5,-7],[-3,-7],[-8,12],[-6,-16],[-6,1],[-6,-2],[0,-29],[-4,0],[-3,-14],[-9,-2]],[[5522,7770],[7,-23],[9,-17],[-11,-22]],[[5515,7577],[-3,-10]],[[5512,7567],[-26,22],[-16,21],[-26,18],[-23,43],[6,5],[-13,25],[-1,19],[-17,10],[-9,-26],[-8,20],[0,21],[1,1]],[[5380,7746],[20,-2],[5,9],[9,-9],[11,-1],[0,16],[10,6],[2,24],[23,16]],[[5460,7805],[8,-7],[21,-26],[23,-11],[10,9]],[[3008,6124],[-19,10],[-13,-5],[-17,5],[-13,-11],[-15,18],[3,19],[25,-8],[21,-5],[10,13],[-12,26],[0,23],[-18,9],[7,16],[17,-3],[24,-9]],[[5471,7900],[14,-15],[10,-6],[24,7],[2,12],[11,2],[14,9],[3,-4],[13,8],[6,13],[9,4],[30,-18],[6,6]],[[5613,7918],[15,-16],[2,-16]],[[5630,7886],[-17,-12],[-13,-40],[-17,-40],[-22,-11]],[[5561,7783],[-17,2],[-22,-15]],[[5460,7805],[-6,20],[-4,0]],[[8352,4453],[-11,-2],[-37,42],[26,11],[14,-18],[10,-17],[-2,-16]],[[8471,4532],[2,-11],[1,-18]],[[8474,4503],[-18,-45],[-24,-13],[-3,8],[2,20],[12,36],[28,23]],[[8274,4579],[10,-16],[17,5],[7,-25],[-32,-12],[-19,-8],[-15,1],[10,34],[15,0],[7,21]],[[8413,4579],[-4,-32],[-42,-17],[-37,7],[0,22],[22,12],[18,-18],[18,5],[25,21]],[[8017,4657],[53,-6],[6,25],[51,-29],[10,-38],[42,-11],[34,-35],[-31,-23],[-31,24],[-25,-1],[-29,4],[-26,11],[-32,22],[-21,6],[-11,-7],[-51,24],[-5,25],[-25,5],[19,56],[34,-3],[22,-23],[12,-5],[4,-21]],[[8741,4690],[-14,-40],[-3,45],[5,21],[6,20],[7,-17],[-1,-29]],[[8534,4853],[-11,-19],[-19,10],[-5,26],[28,3],[7,-20]],[[8623,4875],[10,-45],[-23,24],[-23,5],[-16,-4],[-19,2],[6,33],[35,2],[30,-17]],[[8916,4904],[0,-193],[1,-192]],[[8917,4519],[-25,48],[-28,12],[-7,-17],[-35,-1],[12,48],[17,16],[-7,64],[-14,50],[-53,50],[-23,5],[-42,54],[-8,-28],[-11,-5],[-6,21],[0,26],[-21,29],[29,21],[20,-1],[-2,16],[-41,0],[-11,35],[-25,11],[-11,29],[37,14],[14,20],[45,-25],[4,-22],[8,-95],[29,-35],[23,62],[32,36],[25,0],[23,-21],[21,-21],[30,-11]],[[8478,5141],[-22,-58],[-21,-12],[-27,12],[-46,-3],[-24,-8],[-4,-45],[24,-53],[15,27],[52,20],[-2,-27],[-12,9],[-12,-35],[-25,-23],[27,-76],[-5,-20],[25,-68],[-1,-39],[-14,-17],[-11,20],[13,49],[-27,-23],[-7,16],[3,23],[-20,35],[3,57],[-19,-18],[2,-69],[1,-84],[-17,-9],[-12,18],[8,54],[-4,57],[-12,1],[-9,40],[12,39],[4,47],[14,89],[5,24],[24,44],[22,-18],[35,-8],[32,3],[27,43],[5,-14]],[[8574,5124],[-2,-51],[-14,6],[-4,-36],[11,-32],[-8,-7],[-11,38],[-8,75],[6,47],[9,22],[2,-32],[16,-5],[3,-25]],[[8045,5176],[5,-39],[19,-34],[18,12],[18,-4],[16,30],[13,5],[26,-17],[23,13],[14,82],[11,21],[10,67],[32,0],[24,-10]],[[8274,5302],[-16,-53],[20,-56],[-5,-28],[32,-54],[-33,-7],[-10,-40],[2,-54],[-27,-40],[-1,-59],[-10,-91],[-5,21],[-31,-26],[-11,36],[-20,3],[-14,19],[-33,-21],[-10,29],[-18,-4],[-23,7],[-4,79],[-14,17],[-13,50],[-4,52],[3,55],[16,39]],[[7939,4712],[-31,-1],[-24,49],[-35,48],[-12,36],[-21,48],[-14,44],[-21,83],[-24,49],[-9,51],[-10,46],[-25,37],[-14,51],[-21,33],[-29,65],[-3,30],[18,-2],[43,-12],[25,-57],[21,-40],[16,-25],[26,-63],[28,-1],[23,-41],[16,-49],[22,-27],[-12,-49],[16,-20],[10,-2],[5,-41],[10,-33],[20,-5],[14,-37],[-7,-74],[-1,-91]],[[7252,6841],[-17,-27],[-11,-55],[27,-23],[26,-29],[36,-33],[38,-8],[16,-30],[22,-5],[33,-14],[23,1],[4,23],[-4,38],[2,25]],[[7703,6727],[2,-22],[-10,-11],[2,-36],[-19,10],[-36,-41],[0,-33],[-15,-50],[-1,-29],[-13,-48],[-21,13],[-1,-61],[-7,-20],[3,-25],[-14,-14]],[[7472,6360],[-4,-21],[-19,1],[-34,-13],[2,-44],[-15,-35],[-40,-40],[-31,-69],[-21,-38],[-28,-38],[0,-27],[-13,-15],[-26,-21],[-12,-3],[-9,-45],[6,-77],[1,-49],[-11,-56],[0,-101],[-15,-2],[-12,-46],[8,-19],[-25,-17],[-10,-40],[-11,-17],[-26,55],[-13,83],[-11,60],[-9,28],[-15,56],[-7,74],[-5,37],[-25,81],[-12,115],[-8,75],[0,72],[-5,55],[-41,-35],[-19,7],[-36,71],[13,22],[-8,23],[-33,50]],[[6893,6457],[19,40],[61,-1],[-6,51],[-15,30],[-4,46],[-18,26],[31,62],[32,-4],[29,61],[18,60],[27,60],[-1,42],[24,34],[-23,29],[-9,40],[-10,52],[14,25],[42,-14],[31,9],[26,49]],[[4827,8240],[5,-42],[-21,-53],[-49,-35],[-40,9],[23,62],[-15,60],[38,46],[21,28]],[[6497,7255],[25,12],[19,33],[19,-1],[12,11],[20,-6],[31,-30],[22,-6],[31,-53],[21,-2],[3,-49]],[[6690,6820],[14,-31],[11,-36],[27,-26],[1,-52],[13,-10],[2,-27],[-40,-30],[-10,-69]],[[6708,6539],[-53,18],[-30,13],[-31,8],[-12,73],[-13,10],[-22,-11],[-28,-28],[-34,20],[-28,45],[-27,17],[-18,56],[-21,79],[-15,-10],[-17,20],[-11,-24]],[[6348,6825],[-15,32],[0,31],[-9,0],[5,43],[-15,45],[-34,32],[-19,56],[6,46],[14,21],[-2,34],[-18,18],[-18,70]],[[6243,7253],[-15,48],[5,18],[-8,68],[19,17]],[[6357,7321],[9,-43],[26,-13],[20,-29],[39,-10],[44,15],[2,14]],[[6348,6825],[-16,3]],[[6332,6828],[-19,5],[-20,-56]],[[6293,6777],[-52,4],[-78,119],[-41,41],[-34,16]],[[6088,6957],[-11,72]],[[6077,7029],[61,62],[11,71],[-3,43],[16,15],[14,37]],[[6176,7257],[12,9],[32,-8],[10,-15],[13,10]],[[4597,8984],[-7,-39],[31,-40],[-36,-45],[-80,-41],[-24,-10],[-36,8],[-78,19],[28,26],[-61,29],[49,12],[-1,17],[-58,14],[19,38],[42,9],[43,-40],[42,32],[35,-17],[45,32],[47,-4]],[[5992,6990],[-5,-19]],[[5987,6971],[-10,8],[-6,-39],[7,-7],[-7,-8],[-1,-15],[13,8]],[[5983,6918],[0,-23],[-14,-95]],[[5951,6902],[8,19],[-2,4],[8,27],[5,45],[4,15],[1,0]],[[5975,7012],[9,0],[3,11],[7,0]],[[5994,7023],[1,-24],[-4,-9],[1,0]],[[5431,7316],[-10,-46],[4,-19],[-6,-30],[-21,22],[-14,7],[-39,30],[4,30],[32,-6],[28,7],[22,5]],[[5255,7492],[17,-42],[-4,-78],[-13,4],[-11,-20],[-10,16],[-2,71],[-6,34],[15,-3],[14,18]],[[5383,7805],[-3,-29],[7,-25]],[[5387,7751],[-22,8],[-23,-20],[1,-30],[-3,-17],[9,-30],[26,-29],[14,-49],[31,-48],[22,0],[7,-13],[-8,-11],[25,-22],[20,-18],[24,-30],[3,-11],[-5,-22],[-16,28],[-24,10],[-12,-39],[20,-21],[-3,-31],[-11,-4],[-15,-50],[-12,-5],[0,18],[6,32],[6,12],[-11,35],[-8,29],[-12,8],[-8,25],[-18,11],[-12,24],[-21,4],[-21,26],[-26,39],[-19,34],[-8,58],[-14,7],[-23,20],[-12,-8],[-16,-28],[-12,-4]],[[2845,6150],[19,-5],[14,-15],[5,-16],[-19,-1],[-9,-10],[-15,10],[-16,21],[3,14],[12,4],[6,-2]],[[5992,6990],[31,-24],[54,63]],[[6088,6957],[-5,-8],[-56,-30],[28,-59],[-9,-10],[-5,-20],[-21,-8],[-7,-21],[-12,-19],[-31,10]],[[5970,6792],[-1,8]],[[5983,6918],[4,17],[0,36]],[[8739,7075],[4,-20],[-16,-36],[-11,19],[-15,-14],[-7,-34],[-18,16],[0,28],[15,36],[16,-7],[12,25],[20,-13]],[[8915,7252],[-10,-47],[4,-30],[-14,-42],[-35,-27],[-49,-4],[-40,-67],[-19,22],[-1,44],[-48,-13],[-33,-27],[-32,-2],[28,-43],[-19,-101],[-18,-24],[-13,23],[7,53],[-18,17],[-11,41],[26,18],[15,37],[28,30],[20,41],[55,17],[30,-12],[29,105],[19,-28],[40,59],[16,23],[18,72],[-5,67],[11,37],[30,11],[15,-82],[-1,-48],[-25,-59],[0,-61]],[[8997,7667],[19,-12],[20,25],[6,-67],[-41,-16],[-25,-59],[-43,41],[-15,-65],[-31,-1],[-4,59],[14,46],[29,3],[8,82],[9,46],[32,-62],[22,-20]],[[6970,7554],[-15,-10],[-37,-42],[-12,-42],[-11,0],[-7,28],[-36,2],[-5,48],[-14,0],[2,60],[-33,43],[-48,-5],[-32,-8],[-27,53],[-22,22],[-43,43],[-6,5],[-71,-35],[1,-218]],[[6554,7498],[-14,-3],[-20,46],[-18,17],[-32,-12],[-12,-20]],[[6458,7526],[-2,14],[7,25],[-5,21],[-32,20],[-13,53],[-15,15],[-1,19],[27,-6],[1,44],[23,9],[25,-9],[5,58],[-5,36],[-28,-2],[-24,14],[-32,-26],[-26,-12]],[[6363,7799],[-14,9],[3,31],[-18,39],[-20,-2],[-24,40],[16,45],[-8,12],[22,65],[29,-34],[3,43],[58,64],[43,2],[61,-41],[33,-24],[30,25],[44,1],[35,-30],[8,17],[39,-2],[7,28],[-45,40],[27,29],[-5,16],[26,15],[-20,41],[13,20],[104,21],[13,14],[70,22],[25,24],[50,-12],[9,-61],[29,14],[35,-20],[-2,-32],[27,3],[69,56],[-10,-19],[35,-46],[62,-150],[15,31],[39,-34],[39,16],[16,-11],[13,-34],[20,-12],[11,-25],[36,8],[15,-36]],[[7229,7559],[-17,9],[-14,21],[-42,6],[-46,2],[-10,-6],[-39,24],[-16,-12],[-4,-35],[-46,21],[-18,-9],[-7,-26]],[[6155,4958],[-20,-24],[-7,-24],[-10,-4],[-4,-42],[-9,-24],[-5,-39],[-12,-20]],[[6088,4781],[-40,59],[-1,35],[-101,120],[-5,6]],[[5941,5001],[0,63],[8,24],[14,39],[10,43],[-13,68],[-3,30],[-13,41]],[[5944,5309],[17,35],[19,39]],[[6162,5289],[-24,-67],[0,-215],[17,-49]],[[7046,7387],[-53,-9],[-34,19],[-30,-4],[3,34],[30,-10],[10,18]],[[6972,7435],[21,-6],[36,43],[-33,31],[-20,-15],[-21,22],[24,39],[-9,5]],[[7849,5777],[-7,72],[18,49],[36,11],[26,-8]],[[7922,5901],[23,-23],[12,40],[25,-21]],[[7982,5897],[6,-40],[-3,-71],[-47,-45],[13,-36],[-30,-4],[-24,-24]],[[7897,5677],[-23,9],[-11,30],[-14,61]],[[8564,7339],[24,-70],[7,-38],[0,-68],[-10,-33],[-25,-11],[-22,-25],[-25,-5],[-3,32],[5,45],[-13,61],[21,10],[-19,51]],[[8504,7288],[2,5],[12,-2],[11,27],[20,2],[11,4],[4,15]],[[5557,7574],[5,13]],[[5562,7587],[7,4],[4,20],[5,3],[4,-8],[5,-4],[3,-10],[5,-2],[5,-11],[4,0],[-3,-14],[-3,-7],[1,-5]],[[5599,7553],[-6,-2],[-17,-9],[-1,-12],[-4,0]],[[6332,6828],[6,-26],[-3,-13],[9,-45]],[[6344,6744],[-19,-1],[-7,28],[-25,6]],[[7922,5901],[9,26],[1,50],[-22,52],[-2,58],[-21,48],[-21,4],[-6,-20],[-16,-2],[-8,10],[-30,-35],[0,53],[7,62],[-19,3],[-2,36],[-12,18]],[[7780,6264],[6,21],[24,39]],[[7837,6385],[17,-47],[12,-54],[34,0],[11,-52],[-18,-15],[-8,-21],[34,-36],[23,-70],[17,-52],[21,-41],[7,-41],[-5,-59]],[[5975,7012],[10,49],[14,41],[0,2]],[[5999,7104],[13,-3],[4,-23],[-15,-22],[-7,-33]],[[4785,5315],[-7,0],[-29,28],[-25,45],[-24,32],[-18,38]],[[4682,5458],[6,19],[2,17],[12,33],[13,27]],[[5412,6408],[-20,-22],[-15,33],[-44,25]],[[5263,6848],[13,14],[3,25],[-3,24],[19,23],[8,19],[14,17],[2,45]],[[5319,7015],[32,-20],[12,5],[23,-10],[37,-26],[13,-53],[25,-11],[39,-25],[30,-29],[13,15],[13,27],[-6,45],[9,29],[20,28],[19,8],[37,-12],[10,-27],[10,0],[9,-10],[28,-7],[6,-19]],[[5694,6357],[0,-118],[-32,0],[0,-25]],[[5662,6214],[-111,113],[-111,113],[-28,-32]],[[7271,5502],[-4,-62],[-12,-16],[-24,-14],[-13,47],[-5,85],[13,96],[19,-33],[13,-42],[13,-61]],[[5804,3347],[10,-18],[-9,-29],[-4,-19],[-16,-9],[-5,-19],[-10,-6],[-21,46],[15,37],[15,23],[13,12],[12,-18]],[[5631,8267],[-2,15],[3,16],[-13,10],[-29,10]],[[5590,8318],[-6,50]],[[5584,8368],[32,18],[47,-4],[27,6],[4,-12],[15,-4],[26,-29]],[[5652,8242],[-7,19],[-14,6]],[[5584,8368],[1,44],[14,37],[26,20],[22,-44],[22,1],[6,46]],[[5757,8453],[14,-14],[2,-28],[9,-35]],[[4759,6691],[-4,0],[0,-31],[-17,-2],[-9,-14],[-13,0],[-10,8],[-23,-6],[-9,-46],[-9,-5],[-13,-74],[-38,-64],[-9,-81],[-12,-27],[-3,-21],[-63,-5]],[[4527,6323],[1,27],[11,17],[9,30],[-2,20],[10,42],[15,38],[9,9],[8,35],[0,31],[10,37],[19,21],[18,60],[0,1],[14,23],[26,6],[22,41],[14,16],[23,49],[-7,73],[10,51],[4,31],[18,40],[28,27],[21,25],[18,61],[9,36],[20,0],[17,-25],[26,4],[29,-13],[12,-1]],[[5739,7906],[6,9],[19,6],[20,-19],[12,-2],[12,-16],[-2,-20],[11,-9],[4,-25],[9,-15],[-2,-9],[5,-6],[-7,-4],[-16,1],[-3,9],[-6,-5],[2,-11],[-7,-19],[-5,-20],[-7,-6]],[[5784,7745],[-5,27],[3,25],[-1,26],[-16,35],[-9,25],[-9,17],[-8,6]],[[6376,4321],[7,-25],[7,-39],[4,-71],[7,-28],[-2,-28],[-5,-18],[-10,35],[-5,-18],[5,-43],[-2,-25],[-8,-14],[-1,-50],[-11,-69],[-14,-81],[-17,-112],[-11,-82],[-12,-69],[-23,-14],[-24,-25],[-16,15],[-22,21],[-8,31],[-2,53],[-10,47],[-2,42],[5,43],[13,10],[0,20],[13,45],[2,37],[-6,28],[-5,38],[-2,54],[9,33],[4,38],[14,2],[15,12],[11,10],[12,1],[16,34],[23,36],[8,30],[-4,25],[12,-7],[15,41],[1,36],[9,26],[10,-25]],[[2301,6586],[-10,-52],[-5,-43],[-2,-79],[-3,-29],[5,-32],[9,-29],[5,-45],[19,-44],[6,-34],[11,-29],[29,-16],[12,-25],[24,17],[21,6],[21,11],[18,10],[17,24],[7,34],[2,50],[5,17],[19,16],[29,13],[25,-2],[17,5],[6,-12],[-1,-29],[-15,-35],[-6,-36],[5,-10],[-4,-26],[-7,-46],[-7,15],[-6,-1]],[[2438,5916],[-32,64],[-14,19],[-23,16],[-15,-5],[-22,-22],[-14,-6],[-20,16],[-21,11],[-26,27],[-21,8],[-31,28],[-23,28],[-7,16],[-16,3],[-28,19],[-12,27],[-30,34],[-14,37],[-6,29],[9,5],[-3,17],[7,16],[0,20],[-10,27],[-2,23],[-9,30],[-25,59],[-28,46],[-13,37],[-24,24],[-5,14],[4,37],[-14,13],[-17,29],[-7,41],[-14,5],[-17,31],[-13,29],[-1,19],[-15,44],[-10,45],[1,23],[-20,23],[-10,-2],[-15,16],[-5,-24],[5,-28],[2,-45],[10,-24],[21,-41],[4,-14],[4,-4],[4,-20],[5,1],[6,-38],[8,-15],[6,-21],[17,-30],[10,-55],[8,-26],[8,-28],[1,-31],[13,-2],[12,-27],[10,-26],[-1,-11],[-12,-21],[-5,0],[-7,36],[-18,33],[-20,29],[-14,15],[1,43],[-5,32],[-13,19],[-19,26],[-4,-8],[-7,16],[-17,14],[-16,34],[2,5],[11,-4],[11,22],[1,27],[-22,42],[-16,17],[-10,36],[-11,39],[-12,47],[-12,54]],[[1746,6980],[32,4],[35,7],[-2,-12],[41,-29],[64,-41],[55,0],[22,0],[0,24],[48,0],[10,-20],[15,-19],[16,-26],[9,-31],[7,-32],[15,-18],[23,-18],[17,47],[23,1],[19,-24],[14,-40],[10,-35],[16,-34],[6,-41],[8,-28],[22,-18],[20,-13],[10,2]],[[5599,7553],[9,4],[13,1]],[[4661,5921],[10,11],[4,35],[9,1],[20,-16],[15,11],[11,-4],[4,13],[112,1],[6,42],[-5,7],[-13,255],[-14,255],[43,1]],[[5118,6189],[0,-136],[-15,-39],[-2,-37],[-25,-9],[-38,-5],[-10,-21],[-18,-3]],[[4680,5793],[1,18],[-2,23],[-11,16],[-5,34],[-2,37]],[[7737,5644],[-3,44],[9,45],[-10,35],[3,65],[-12,30],[-9,71],[-5,75],[-12,49],[-18,-30],[-32,-42],[-15,5],[-17,14],[9,73],[-6,56],[-21,68],[3,21],[-16,7],[-20,49]],[[7780,6264],[-16,-14],[-16,-26],[-20,-2],[-12,-64],[-12,-11],[14,-52],[17,-43],[12,-39],[-11,-51],[-9,-11],[6,-30],[19,-47],[3,-33],[0,-27],[11,-54],[-16,-55],[-13,-61]],[[5538,7532],[-6,4],[-8,19],[-12,12]],[[5533,7629],[8,-10],[4,-9],[9,-6],[10,-12],[-2,-5]],[[7437,7970],[29,10],[53,51],[42,28],[24,-18],[29,-1],[19,-28],[28,-2],[40,-15],[27,41],[-11,35],[28,61],[31,-24],[26,-7],[32,-15],[6,-44],[39,-25],[26,11],[36,7],[27,-7],[28,-29],[16,-30],[26,1],[35,-10],[26,15],[36,9],[41,42],[17,-6],[14,-20],[33,5]],[[5959,4377],[21,5],[34,-17],[7,8],[19,1],[10,18],[17,-1],[30,23],[22,34]],[[6119,4448],[5,-26],[-1,-59],[3,-52],[1,-92],[5,-29],[-8,-43],[-11,-41],[-18,-36],[-25,-23],[-31,-28],[-32,-64],[-10,-11],[-20,-42],[-11,-13],[-3,-42],[14,-45],[5,-35],[0,-17],[5,3],[-1,-58],[-4,-28],[6,-10],[-4,-25],[-11,-21],[-23,-20],[-34,-32],[-12,-21],[3,-25],[7,-4],[-3,-31]],[[5911,3478],[-21,0]],[[5890,3478],[-2,26],[-4,27]],[[5884,3531],[-3,21],[5,66],[-7,42],[-13,83]],[[5866,3743],[29,67],[7,43],[5,5],[3,35],[-5,17],[1,44],[6,41],[0,75],[-15,19],[-13,4],[-6,15],[-13,12],[-23,-1],[-2,22]],[[5840,4141],[-2,42],[84,49]],[[5922,4232],[16,-28],[8,5],[11,-15],[1,-23],[-6,-28],[2,-42],[19,-36],[8,41],[12,12],[-2,76],[-12,43],[-10,19],[-10,-1],[-7,77],[7,45]],[[4661,5921],[-18,41],[-17,43],[-18,16],[-13,17],[-16,-1],[-13,-12],[-14,5],[-10,-19]],[[4542,6011],[-2,32],[8,29],[3,55],[-3,59],[-3,29],[2,30],[-7,28],[-14,25]],[[4526,6298],[6,20],[108,-1],[-5,86],[7,30],[26,5],[-1,152],[91,-4],[0,90]],[[5922,4232],[-15,15],[9,55],[9,21],[-6,49],[6,48],[5,16],[-7,50],[-14,26]],[[5909,4512],[28,-11],[5,-16],[10,-28],[7,-80]],[[7836,5425],[7,-5],[16,-36],[12,-40],[2,-39],[-3,-27],[2,-21],[2,-35],[10,-16],[11,-52],[-1,-20],[-19,-4],[-27,44],[-32,47],[-4,30],[-16,39],[-4,49],[-10,32],[4,43],[-7,25]],[[7779,5439],[5,11],[23,-26],[2,-30],[18,7],[9,24]],[[8045,5176],[21,-20],[21,11],[6,50],[12,11],[33,13],[20,47],[14,37]],[[8206,5379],[22,41],[14,47],[11,0],[14,-30],[1,-26],[19,-16],[23,-18],[-2,-23],[-19,-3],[5,-29],[-20,-20]],[[5453,3369],[-20,45],[-11,43],[-6,58],[-7,42],[-9,91],[-1,71],[-3,32],[-11,25],[-15,48],[-14,71],[-6,37],[-23,58],[-2,45]],[[5644,4022],[23,14],[18,-4],[11,-13],[0,-5]],[[5552,3594],[0,-218],[-25,-30],[-15,-4],[-17,11],[-13,4],[-4,25],[-11,17],[-14,-30]],[[9604,3812],[23,-36],[14,-28],[-10,-14],[-16,16],[-19,27],[-18,31],[-19,42],[-4,20],[12,-1],[16,-20],[12,-20],[9,-17]],[[5412,6408],[7,-92],[10,-15],[1,-19],[11,-20],[-6,-25],[-11,-120],[-1,-77],[-35,-56],[-12,-78],[11,-22],[0,-38],[18,-1],[-3,-28]],[[5393,5795],[-5,-1],[-19,64],[-6,3],[-22,-33],[-21,17],[-15,3],[-8,-8],[-17,2],[-16,-25],[-14,-2],[-34,31],[-13,-15],[-14,1],[-10,23],[-28,22],[-30,-7],[-7,-13],[-4,-34],[-8,-24],[-2,-53]],[[5236,5339],[-29,-21],[-11,3],[-10,-13],[-23,1],[-15,37],[-9,43],[-19,39],[-21,-1],[-25,0]],[[2619,5713],[-10,18],[-13,24],[-6,20],[-12,19],[-13,26],[3,9],[4,-9],[2,5]],[[2690,5943],[-2,-5],[-2,-13],[3,-22],[-6,-20],[-3,-24],[-1,-26],[1,-15],[1,-27],[-4,-6],[-3,-25],[2,-15],[-6,-16],[2,-16],[4,-9]],[[5092,8091],[14,16],[24,87],[38,25],[23,-2]],[[5863,9167],[-47,-24],[-22,-5]],[[5573,9140],[-17,-2],[-4,-39],[-53,9],[-7,-33],[-27,1],[-18,-42],[-28,-66],[-43,-83],[10,-20],[-10,-24],[-27,1],[-18,-55],[2,-79],[17,-29],[-9,-70],[-23,-40],[-12,-34]],[[5306,8535],[-19,36],[-55,-69],[-37,-13],[-38,30],[-10,63],[-9,137],[26,38],[73,49],[55,61],[51,82],[66,115],[47,44],[76,74],[61,26],[46,-3],[42,49],[51,-3],[50,12],[87,-43],[-36,-16],[30,-37]],[[5686,9657],[-62,-24],[-49,13],[19,16],[-16,19],[57,11],[11,-22],[40,-13]],[[5506,9766],[92,-44],[-70,-23],[-15,-44],[-25,-11],[-13,-49],[-34,-2],[-59,36],[25,21],[-42,17],[-54,50],[-21,46],[75,21],[16,-20],[39,0],[11,21],[40,2],[35,-21]],[[5706,9808],[55,-21],[-41,-32],[-81,-7],[-82,10],[-5,16],[-40,1],[-30,27],[86,17],[40,-14],[28,17],[70,-14]],[[9805,2640],[6,-24],[20,24],[8,-25],[0,-25],[-10,-27],[-18,-44],[-14,-24],[10,-28],[-22,-1],[-23,-22],[-8,-39],[-16,-60],[-21,-26],[-14,-17],[-26,1],[-18,20],[-30,4],[-5,22],[15,43],[35,59],[18,11],[20,22],[24,31],[16,31],[13,44],[10,15],[5,33],[19,27],[6,-25]],[[9849,2922],[20,-63],[1,41],[13,-16],[4,-45],[22,-19],[19,-5],[16,22],[14,-6],[-7,-53],[-8,-34],[-22,1],[-7,-18],[3,-25],[-4,-11],[-11,-32],[-14,-41],[-21,-23],[-5,15],[-12,9],[16,48],[-9,33],[-30,23],[1,22],[20,20],[5,46],[-1,38],[-12,40],[1,10],[-13,25],[-22,52],[-12,42],[11,4],[15,-33],[21,-15],[8,-52]],[[6475,6041],[-9,41],[-22,98]],[[6444,6180],[83,59],[19,118],[-13,42]],[[6566,6530],[12,-40],[16,-22],[20,-8],[17,-10],[12,-34],[8,-20],[10,-7],[0,-13],[-10,-36],[-5,-16],[-12,-19],[-10,-41],[-13,3],[-5,-14],[-5,-30],[4,-39],[-3,-7],[-13,0],[-17,-22],[-3,-29],[-6,-12],[-18,0],[-10,-15],[0,-24],[-14,-16],[-15,5],[-19,-19],[-12,-4]],[[6557,6597],[8,20],[3,-5],[-2,-25],[-4,-10]],[[6893,6457],[-20,15],[-9,43],[-21,45],[-51,-12],[-45,-1],[-39,-8]],[[2836,5484],[-9,17],[-6,32],[7,16],[-7,4],[-5,20],[-14,16],[-12,-4],[-6,-20],[-11,-15],[-6,-2],[-3,-13],[13,-32],[-7,-7],[-4,-9],[-13,-3],[-5,35],[-4,-10],[-9,4],[-5,24],[-12,3],[-7,7],[-12,0],[-1,-13],[-3,9]],[[2707,5623],[10,-22],[-1,-12],[11,-3],[3,5],[8,-14],[13,4],[12,15],[17,12],[9,17],[16,-3],[-1,-6],[15,-2],[12,-10],[10,-18],[10,-16]],[[3045,3974],[-28,33],[-2,25],[-55,59],[-50,65],[-22,36],[-11,49],[4,17],[-23,77],[-28,109],[-26,118],[-11,27],[-9,43],[-21,39],[-20,24],[9,26],[-14,57],[9,41],[22,37]],[[8510,5555],[2,-40],[2,-33],[-9,-54],[-11,60],[-13,-30],[9,-43],[-8,-28],[-32,35],[-8,42],[8,28],[-17,28],[-9,-24],[-13,2],[-21,-33],[-4,17],[11,50],[17,17],[15,22],[10,-27],[21,17],[5,26],[19,1],[-1,46],[22,-28],[3,-30],[2,-21]],[[8443,5665],[-10,-20],[-9,-37],[-8,-17],[-17,40],[5,16],[7,17],[3,36],[16,4],[-5,-40],[21,57],[-3,-56]],[[8291,5608],[-37,-56],[14,41],[20,37],[16,41],[15,58],[5,-48],[-18,-33],[-15,-40]],[[8385,5760],[16,-18],[18,0],[0,-25],[-13,-25],[-18,-18],[-1,28],[2,30],[-4,28]],[[8485,5776],[8,-66],[-21,16],[0,-20],[7,-37],[-13,-13],[-1,42],[-9,3],[-4,36],[16,-5],[0,22],[-17,45],[27,-1],[7,-22]],[[8375,5830],[-7,-51],[-12,29],[-15,45],[24,-2],[10,-21]],[[8369,6151],[17,-17],[9,15],[2,-15],[-4,-24],[9,-43],[-7,-49],[-16,-19],[-5,-48],[7,-47],[14,-7],[13,7],[34,-32],[-2,-32],[9,-15],[-3,-27],[-22,29],[-10,31],[-7,-22],[-18,36],[-25,-9],[-14,13],[1,25],[9,15],[-8,13],[-4,-21],[-14,34],[-4,26],[-1,56],[11,-19],[3,92],[9,54],[17,0]],[[9329,4655],[-8,-6],[-12,22],[-12,38],[-6,45],[4,6],[3,-18],[8,-13],[14,-38],[13,-20],[-4,-16]],[[9221,4734],[-15,-5],[-4,-17],[-15,-14],[-15,-14],[-14,0],[-23,18],[-16,16],[2,18],[25,-8],[15,4],[5,29],[4,1],[2,-31],[16,4],[8,20],[16,21],[-4,35],[17,1],[6,-9],[-1,-33],[-9,-36]],[[8916,4904],[48,-41],[51,-34],[19,-30],[16,-30],[4,-34],[46,-37],[7,-31],[-25,-7],[6,-39],[25,-39],[18,-62],[15,2],[-1,-27],[22,-10],[-9,-11],[30,-25],[-3,-17],[-18,-4],[-7,16],[-24,6],[-28,9],[-22,38],[-16,32],[-14,52],[-36,26],[-24,-17],[-17,-20],[4,-43],[-22,-20],[-16,9],[-28,3]],[[9253,4792],[-9,-16],[-5,35],[-6,23],[-13,19],[-16,25],[-20,18],[8,14],[15,-17],[9,-13],[12,-14],[11,-25],[11,-19],[3,-30]],[[5392,8233],[19,18],[43,27],[35,20],[28,-10],[2,-14],[27,-1]],[[5546,8273],[34,-7],[51,1]],[[5653,8105],[14,-52],[-3,-17],[-14,-6],[-25,-50],[7,-26],[-6,3]],[[5626,7957],[-26,23],[-20,-8],[-13,6],[-17,-13],[-14,21],[-11,-8],[-2,4]],[[3159,6151],[14,-5],[5,-12],[-7,-15],[-21,1],[-17,-2],[-1,25],[4,9],[23,-1]],[[8628,7562],[4,-10]],[[8632,7552],[-11,3],[-12,-20],[-8,-20],[1,-42],[-14,-13],[-5,-11],[-11,-17],[-18,-10],[-12,-16],[-1,-25],[-3,-7],[11,-9],[15,-26]],[[8504,7288],[-13,11],[-4,-11],[-8,-5],[-1,11],[-7,5],[-8,10],[8,26],[7,7],[-3,11],[7,31],[-2,10],[-16,7],[-13,15]],[[4792,7249],[-11,-15],[-14,8],[-15,-6],[5,46],[-3,36],[-12,6],[-7,22],[2,39],[11,21],[2,24],[6,36],[-1,25],[-5,21],[-1,20]],[[6411,6520],[-2,43],[7,31],[8,6],[8,-18],[1,-35],[-6,-35]],[[6427,6512],[-8,-4],[-8,12]],[[5630,7886],[12,13],[17,-7],[18,0],[13,-14],[10,9],[20,5],[7,14],[12,0]],[[5784,7745],[12,-11],[13,9],[13,-10]],[[5822,7733],[0,-15],[-13,-13],[-9,6],[-7,-71]],[[5629,7671],[-5,10],[6,10],[-7,7],[-8,-13],[-17,17],[-2,25],[-17,14],[-3,18],[-15,24]],[[8989,8056],[28,-105],[-41,19],[-17,-85],[27,-61],[-1,-41],[-21,36],[-18,-46],[-5,50],[3,57],[-3,64],[6,45],[2,79],[-17,58],[3,80],[25,28],[-11,27],[13,8],[7,-39],[10,-57],[-1,-58],[11,-59]],[[5546,8273],[6,26],[38,19]],[[0,9132],[68,-45],[73,-59],[-3,-37],[19,-15],[-6,43],[75,-8],[55,-56],[-28,-26],[-46,-6],[0,-57],[-11,-13],[-26,2],[-22,21],[-36,17],[-7,26],[-28,9],[-31,-7],[-16,20],[6,22],[-33,-14],[13,-28],[-16,-25]],[[0,8896],[0,236]],[[0,9282],[9999,-40],[-30,-3],[-5,19],[-9964,24]],[[0,9282],[4,3],[23,0],[40,-17],[-2,-8],[-29,-14],[-36,-4],[0,40]],[[8988,9383],[-42,-1],[-57,7],[-5,3],[27,23],[34,6],[40,-23],[3,-15]],[[9186,9493],[-32,-23],[-44,5],[-52,23],[7,20],[51,-9],[70,-16]],[[9029,9522],[-22,-44],[-102,1],[-46,-14],[-55,39],[15,40],[37,11],[73,-2],[100,-31]],[[6598,9235],[-17,-5],[-91,8],[-7,26],[-50,16],[-4,32],[28,13],[-1,32],[55,50],[-25,7],[66,52],[-7,27],[62,31],[91,38],[93,11],[48,22],[54,8],[19,-23],[-19,-19],[-98,-29],[-85,-28],[-86,-57],[-42,-57],[-43,-57],[5,-49],[54,-49]],[[0,8896],[9963,-26],[-36,4],[25,-31],[17,-49],[13,-16],[3,-24],[-7,-16],[-52,13],[-78,-44],[-25,-7],[-42,-42],[-40,-36],[-11,-27],[-39,41],[-73,-46],[-12,22],[-27,-26],[-37,8],[-9,-38],[-33,-58],[1,-24],[31,-13],[-4,-86],[-25,-2],[-12,-49],[11,-26],[-48,-30],[-10,-67],[-41,-15],[-9,-60],[-40,-55],[-10,41],[-12,86],[-15,131],[13,82],[23,35],[2,28],[43,13],[50,75],[47,60],[50,48],[23,83],[-34,-5],[-17,-49],[-70,-65],[-23,73],[-72,-20],[-69,-99],[23,-36],[-62,-16],[-43,-6],[2,43],[-43,9],[-35,-29],[-85,10],[-91,-18],[-90,-115],[-106,-139],[43,-8],[14,-37],[27,-13],[18,30],[30,-4],[40,-65],[1,-50],[-21,-59],[-3,-71],[-12,-94],[-42,-86],[-9,-41],[-38,-69],[-38,-68],[-18,-35],[-37,-34],[-17,-1],[-17,29],[-38,-44],[-4,-19]],[[6363,7799],[-12,-35],[-27,-10],[-28,-61],[25,-56],[-2,-40],[30,-70]],[[6109,7624],[-35,49],[-32,23],[-24,34],[20,10],[23,49],[-15,24],[41,24],[-1,13],[-25,-10]],[[6061,7840],[1,26],[14,17],[27,4],[5,20],[-7,33],[12,30],[-1,18],[-41,19],[-16,-1],[-17,28],[-21,-9],[-35,20],[0,12],[-10,26],[-22,3],[-2,18],[7,12],[-18,33],[-29,-5],[-8,3],[-7,-14],[-11,3]],[[5777,8571],[31,33],[-29,28]],[[5863,9167],[29,20],[46,-35],[76,-14],[105,-67],[21,-28],[2,-40],[-31,-31],[-45,-15],[-124,44],[-21,-7],[45,-43],[2,-28],[2,-60],[36,-18],[22,-15],[3,28],[-17,26],[18,22],[67,-37],[24,15],[-19,43],[65,58],[25,-4],[26,-20],[16,40],[-23,35],[14,36],[-21,36],[78,-18],[16,-34],[-35,-7],[0,-33],[22,-20],[43,13],[7,38],[58,28],[97,50],[20,-3],[-27,-35],[35,-7],[19,21],[52,1],[42,25],[31,-36],[32,39],[-29,35],[14,19],[82,-18],[39,-18],[100,-68],[19,31],[-28,31],[-1,13],[-34,6],[10,28],[-15,46],[-1,19],[51,53],[18,54],[21,11],[74,-15],[5,-33],[-26,-48],[17,-19],[9,-41],[-6,-81],[31,-36],[-12,-40],[-55,-84],[32,-8],[11,21],[31,15],[7,29],[24,29],[-16,33],[13,39],[-31,5],[-6,33],[22,59],[-36,48],[50,40],[-7,42],[14,2],[15,-33],[-11,-57],[29,-11],[-12,43],[46,23],[58,3],[51,-34],[-25,49],[-2,63],[48,12],[67,-2],[60,7],[-23,31],[33,39],[31,2],[54,29],[74,8],[9,16],[73,6],[23,-14],[62,32],[51,-1],[8,25],[26,25],[66,25],[48,-19],[-38,-15],[63,-9],[7,-29],[25,14],[82,-1],[62,-29],[23,-22],[-7,-30],[-31,-18],[-73,-33],[-21,-17],[35,-8],[41,-15],[25,11],[14,-38],[12,15],[44,10],[90,-10],[6,-28],[116,-9],[2,46],[59,-11],[44,1],[45,-32],[13,-37],[-17,-25],[35,-47],[44,-24],[27,62],[44,-26],[48,16],[53,-18],[21,16],[45,-8],[-20,55],[37,25],[251,-38],[24,-35],[72,-45],[112,11],[56,-10],[23,-24],[-4,-44],[35,-16],[37,12],[49,1],[52,-11],[53,6],[49,-52],[34,19],[-23,37],[13,27],[88,-17],[58,4],[80,-29],[-9960,-25]],[[7918,9684],[-157,-23],[51,77],[23,7],[21,-4],[70,-33],[-8,-24]],[[6420,9816],[-37,-8],[-25,-4],[-4,-10],[-33,-10],[-30,14],[16,19],[-62,2],[54,10],[43,1],[5,-16],[16,14],[26,10],[42,-13],[-11,-9]],[[7775,9718],[-60,-8],[-78,17],[-46,23],[-21,42],[-38,12],[72,40],[60,14],[54,-30],[64,-57],[-7,-53]],[[5844,4990],[11,-33],[-1,-35],[-8,-7]],[[5821,4978],[7,-6],[16,18]],[[4526,6298],[1,25]],[[6188,6023],[-4,26],[-8,17],[-2,24],[-15,21],[-15,50],[-7,48],[-20,40],[-12,10],[-18,56],[-4,41],[2,35],[-16,66],[-13,23],[-15,12],[-10,34],[2,13],[-8,31],[-8,13],[-11,44],[-17,48],[-14,40],[-14,0],[5,33],[1,20],[3,24]],[[6344,6744],[11,-51],[14,-13],[5,-21],[18,-25],[2,-24],[-3,-20],[4,-20],[8,-16],[4,-20],[4,-14]],[[6427,6512],[5,-22]],[[6444,6180],[-80,-23],[-26,-26],[-20,-62],[-13,-10],[-7,20],[-11,-3],[-27,6],[-5,5],[-32,-1],[-7,-5],[-12,15],[-7,-29],[3,-25],[-12,-19]],[[5943,5617],[-4,1],[0,29],[-3,20],[-14,24],[-4,42],[4,44],[-13,4],[-2,-13],[-17,-3],[7,-17],[2,-36],[-15,-32],[-14,-43],[-14,-6],[-23,34],[-11,-12],[-3,-17],[-14,-11],[-1,-12],[-28,0],[-3,12],[-20,2],[-10,-10],[-8,5],[-14,34],[-5,17],[-20,-9],[-8,-27],[-7,-53],[-10,-11],[-8,-6]],[[5663,5567],[-2,2]],[[5635,5716],[0,14],[-10,17],[-1,35],[-5,23],[-10,-4],[3,22],[7,25],[-3,24],[9,18],[-6,14],[7,36],[13,44],[24,-4],[-1,234]],[[6023,6357],[9,-58],[-6,-10],[4,-61],[11,-71],[10,-14],[15,-22]],[[5943,5624],[0,-7]],[[5943,5617],[0,-46]],[[5944,5309],[-17,-28],[-20,1],[-22,-14],[-18,13],[-11,-16]],[[5682,5544],[-19,23]],[[4535,5861],[-11,46],[-14,21],[12,11],[14,41],[6,31]],[[4536,5789],[-4,45]],[[9502,4438],[8,-20],[-19,0],[-11,37],[17,-15],[5,-2]],[[9467,4474],[-11,-1],[-17,6],[-5,9],[1,23],[19,-9],[9,-12],[4,-16]],[[9490,4490],[-4,-11],[-21,52],[-5,35],[9,0],[10,-47],[11,-29]],[[9440,4565],[1,-12],[-22,25],[-15,21],[-10,20],[4,6],[13,-14],[23,-27],[6,-19]],[[9375,4623],[-5,-3],[-13,14],[-11,24],[1,10],[17,-25],[11,-20]],[[4682,5458],[-8,5],[-20,24],[-14,31],[-5,22],[-3,43]],[[2561,5848],[-3,-14],[-16,1],[-10,6],[-12,12],[-15,3],[-8,13]],[[6198,5735],[9,-11],[5,-25],[13,-24],[14,-1],[26,16],[30,7],[25,18],[13,4],[10,11],[16,2]],[[6359,5732],[0,-1],[0,-25],[0,-59],[0,-31],[-13,-36],[-19,-50]],[[6359,5732],[9,1],[13,9],[14,6],[14,20],[10,0],[1,-16],[-3,-35],[0,-31],[-6,-21],[-7,-64],[-14,-66],[-17,-75],[-24,-87],[-23,-66],[-33,-81],[-28,-48],[-42,-58],[-25,-45],[-31,-72],[-6,-31],[-6,-14]],[[3412,5410],[34,-11],[2,10],[23,4],[30,-15]],[[3489,5306],[10,-35],[-4,-25]],[[5626,7957],[-8,-15],[-5,-24]],[[5380,7746],[7,5]],[[5663,8957],[-47,-17],[-27,-41],[4,-36],[-44,-48],[-54,-50],[-20,-84],[20,-41],[26,-33],[-25,-67],[-29,-14],[-11,-99],[-15,-55],[-34,6],[-16,-47],[-32,-3],[-9,56],[-23,67],[-21,84]],[[5890,3478],[-5,-26],[-17,-6],[-16,32],[0,20],[7,22],[3,17],[8,5],[14,-11]],[[5999,7104],[-2,45],[7,25]],[[6004,7174],[7,13],[7,13],[2,33],[9,-12],[31,17],[14,-12],[23,1],[32,22],[15,-1],[32,9]],[[5051,5420],[-22,-12]],[[7849,5777],[-25,28],[-24,-2],[4,47],[-24,0],[-2,-65],[-15,-87],[-10,-52],[2,-43],[18,-2],[12,-53],[5,-52],[15,-33],[17,-7],[14,-31]],[[7779,5439],[-11,23],[-4,29],[-15,34],[-14,28],[-4,-35],[-5,33],[3,37],[8,56]],[[6883,7252],[16,60],[-6,44],[-20,14],[7,26],[23,-3],[13,33],[9,38],[37,13],[-6,-27],[4,-17],[12,2]],[[6497,7255],[-5,42],[4,62],[-22,20],[8,40],[-19,4],[6,49],[26,-14],[25,19],[-20,35],[-8,34],[-23,-15],[-3,-43],[-8,38]],[[6554,7498],[31,1],[-4,29],[24,21],[23,34],[37,-31],[3,-47],[11,-12],[30,2],[9,-10],[14,-61],[32,-41],[18,-28],[29,-29],[37,-25],[-1,-36]],[[8471,4532],[3,14],[24,13],[19,2],[9,8],[10,-8],[-10,-16],[-29,-25],[-23,-17]],[[3286,5693],[16,8],[6,-2],[-1,-44],[-23,-7],[-5,6],[8,16],[-1,23]],[[5233,7240],[31,24],[19,-7],[-1,-30],[24,22],[2,-12],[-14,-29],[0,-27],[9,-15],[-3,-51],[-19,-29],[6,-33],[14,-1],[7,-28],[11,-9]],[[6004,7174],[-11,27],[11,22],[-17,-5],[-23,13],[-19,-34],[-43,-6],[-22,31],[-30,2],[-6,-24],[-20,-7],[-26,31],[-31,-1],[-16,59],[-21,33],[14,46],[-18,28],[31,56],[43,3],[12,45],[53,-8],[33,38],[32,17],[46,1],[49,-42],[40,-22],[32,9],[24,-6],[33,31]],[[5777,7539],[3,-23],[25,-19],[-5,-14],[-33,-3],[-12,-19],[-23,-31],[-9,27],[0,12]],[[8382,6499],[-17,-95],[-12,-49],[-14,50],[-4,44],[17,58],[22,45],[13,-18],[-5,-35]],[[6088,4781],[-12,-73],[1,-33],[18,-22],[1,-15],[-8,-36],[2,-18],[-2,-28],[10,-37],[11,-58],[10,-13]],[[5909,4512],[-15,18],[-18,10],[-11,10],[-12,15]],[[5844,4990],[10,8],[31,-1],[56,4]],[[6061,7840],[-22,-5],[-18,-19],[-26,-3],[-24,-22],[1,-37],[14,-14],[28,4],[-5,-21],[-31,-11],[-37,-34],[-16,12],[6,28],[-30,17],[5,12],[26,19],[-8,14],[-43,15],[-2,22],[-25,-8],[-11,-32],[-21,-44]],[[3517,3063],[-12,-38],[-31,-32],[-21,11],[-15,-6],[-26,25],[-18,-1],[-17,32]],[[679,6185],[-4,-10],[-7,8],[1,17],[-4,21],[1,7],[5,10],[-2,11],[1,6],[3,-1],[10,-10],[5,-5],[5,-8],[7,-21],[-1,-3],[-11,-13],[-9,-9]],[[664,6277],[-9,-4],[-5,12],[-3,5],[0,4],[3,5],[9,-6],[8,-9],[-3,-7]],[[646,6309],[-1,-7],[-15,2],[2,7],[14,-2]],[[621,6317],[-2,-3],[-2,1],[-9,2],[-4,13],[-1,2],[7,8],[3,-3],[8,-20]],[[574,6356],[-4,-6],[-9,11],[1,4],[5,6],[6,-1],[1,-14]],[[3135,7724],[5,-19],[-30,-29],[-29,-20],[-29,-18],[-15,-35],[-4,-13],[-1,-31],[10,-32],[11,-1],[-3,21],[8,-13],[-2,-17],[-19,-9],[-13,1],[-20,-10],[-12,-3],[-17,-3],[-23,-17],[41,11],[8,-11],[-39,-18],[-17,0],[0,7],[-8,-16],[8,-3],[-6,-43],[-20,-45],[-2,15],[-6,3],[-9,15],[5,-32],[7,-10],[1,-23],[-9,-23],[-16,-47],[-2,3],[8,40],[-14,22],[-3,49],[-5,-25],[5,-38],[-18,10],[19,-19],[1,-57],[8,-4],[3,-20],[4,-59],[-17,-44],[-29,-18],[-18,-34],[-14,-4],[-14,-22],[-4,-20],[-31,-38],[-16,-28],[-13,-35],[-4,-42],[5,-41],[9,-51],[13,-41],[0,-26],[13,-69],[-1,-39],[-1,-23],[-7,-36],[-8,-8],[-14,7],[-4,26],[-11,14],[-15,51],[-13,45],[-4,23],[6,39],[-8,33],[-22,49],[-10,9],[-28,-27],[-5,3],[-14,28],[-17,14],[-32,-7],[-24,7],[-21,-5],[-12,-9],[5,-15],[0,-24],[5,-12],[-5,-8],[-10,9],[-11,-11],[-20,2],[-20,31],[-25,-8],[-20,14],[-17,-4],[-24,-14],[-25,-44],[-27,-25],[-16,-28],[-6,-27],[0,-41],[1,-28],[5,-20]],[[1746,6980],[-4,30],[-18,34],[-13,7],[-3,17],[-16,3],[-10,16],[-26,6],[-7,9],[-3,32],[-27,60],[-23,82],[1,14],[-13,19],[-21,50],[-4,48],[-15,32],[6,49],[-1,51],[-8,45],[10,56],[4,53],[3,54],[-5,79],[-9,51],[-8,27],[4,12],[40,-20],[15,-56],[7,15],[-5,49],[-9,48]],[[750,8432],[-28,-23],[-14,15],[-4,28],[25,21],[15,9],[18,-4],[12,-18],[-24,-28]],[[401,8597],[-18,-9],[-18,11],[-17,16],[28,10],[22,-6],[3,-22]],[[230,8826],[17,-12],[17,6],[23,-15],[27,-8],[-2,-7],[-21,-12],[-21,13],[-11,11],[-24,-4],[-7,5],[2,23]],[[1374,8295],[-15,22],[-25,19],[-8,52],[-36,47],[-15,56],[-26,4],[-44,2],[-33,17],[-57,61],[-27,11],[-49,21],[-38,-5],[-55,27],[-33,25],[-30,-12],[5,-41],[-15,-4],[-32,-12],[-25,-20],[-30,-13],[-4,35],[12,58],[30,18],[-8,15],[-35,-33],[-19,-39],[-40,-42],[20,-29],[-26,-42],[-30,-25],[-28,-18],[-7,-26],[-43,-31],[-9,-28],[-32,-25],[-20,5],[-25,-17],[-29,-20],[-23,-20],[-47,-16],[-5,9],[31,28],[27,18],[29,33],[35,6],[14,25],[38,35],[6,12],[21,21],[5,44],[14,35],[-32,-18],[-9,11],[-15,-22],[-18,30],[-8,-21],[-10,29],[-28,-23],[-17,0],[-3,35],[5,21],[-17,22],[-37,-12],[-23,28],[-19,14],[0,34],[-22,25],[11,34],[23,33],[10,30],[22,4],[19,-9],[23,28],[20,-5],[21,19],[-5,27],[-16,10],[21,23],[-17,-1],[-30,-13],[-8,-13],[-22,13],[-39,-6],[-41,14],[-12,24],[-35,34],[39,25],[62,29],[23,0],[-4,-30],[59,2],[-23,37],[-34,23],[-20,29],[-26,25],[-38,19],[15,31],[49,2],[35,27],[7,29],[28,28],[28,6],[52,27],[26,-4],[42,31],[42,-12],[21,-27],[12,11],[47,-3],[-2,-14],[43,-10],[28,6],[59,-18],[53,-6],[21,-8],[37,10],[42,-18],[31,-8]],[[3018,5753],[-1,-14],[-16,-7],[9,-26],[0,-31],[-12,-35],[10,-47],[12,4],[6,43],[-8,21],[-2,45],[35,24],[-4,27],[10,19],[10,-41],[19,-1],[18,-33],[1,-20],[25,0],[30,6],[16,-27],[21,-7],[16,18],[0,15],[34,4],[34,1],[-24,-18],[10,-28],[22,-4],[21,-29],[4,-48],[15,2],[11,-14]],[[8001,6331],[-37,-51],[-24,-56],[-6,-41],[22,-62],[25,-77],[26,-37],[17,-47],[12,-109],[-3,-104],[-24,-39],[-31,-38],[-23,-49],[-35,-55],[-10,37],[8,40],[-21,34]],[[9661,4085],[-9,-8],[-9,26],[1,16],[17,-34]],[[9641,4175],[4,-47],[-7,7],[-6,-3],[-4,16],[0,45],[13,-18]],[[6475,6041],[-21,-16],[-5,-26],[-1,-20],[-27,-25],[-45,-28],[-24,-41],[-13,-3],[-8,3],[-16,-25],[-18,-11],[-23,-3],[-7,-3],[-6,-16],[-8,-4],[-4,-15],[-14,1],[-9,-8],[-19,3],[-7,35],[1,32],[-5,17],[-5,44],[-8,24],[5,3],[-2,27],[3,12],[-1,25]],[[5817,3752],[11,0],[14,-10],[9,7],[15,-6]],[[5911,3478],[-7,-43],[-3,-49],[-7,-27],[-19,-30],[-5,-8],[-12,-30],[-8,-31],[-16,-42],[-31,-61],[-20,-36],[-21,-26],[-29,-23],[-14,-3],[-3,-17],[-17,9],[-14,-11],[-30,11],[-17,-7],[-12,3],[-28,-23],[-24,-10],[-17,-22],[-13,-1],[-11,21],[-10,1],[-12,26],[-1,-8],[-4,16],[0,34],[-9,40],[9,11],[0,45],[-19,55],[-14,50],[0,1],[-20,76]],[[5840,4141],[-21,-8],[-15,-23],[-4,-21],[-10,-4],[-24,-49],[-15,-38],[-10,-2],[-9,7],[-31,7]]],
transform:{scale:[.036003600360036005,.016927109510951093],translate:[-180,-85.609038]}},d.prototype.usaTopo={type:"Topology",transform:{scale:[.03514630243024302,.005240860686068607],translate:[-178.123152,18.948267]},objects:{usa:{type:"GeometryCollection",geometries:[{type:"Polygon",id:"AL",arcs:[[0,1,2,3,4]],properties:{name:"Alabama"}},{type:"MultiPolygon",id:"AK",arcs:[[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[14]],[[15]],[[16]],[[17]],[[18]],[[19]],[[20]],[[21]],[[22]],[[23]],[[24]],[[25]],[[26]],[[27]],[[28]],[[29]],[[30]],[[31]],[[32]],[[33]],[[34]],[[35]],[[36]],[[37]],[[38]],[[39]],[[40]],[[41]],[[42]],[[43]]],properties:{name:"Alaska"}},{type:"Polygon",id:"AZ",arcs:[[44,45,46,47,48]],properties:{name:"Arizona"}},{type:"Polygon",id:"AR",arcs:[[49,50,51,52,53,54]],properties:{name:"Arkansas"}},{type:"Polygon",id:"CA",arcs:[[55,-47,56,57]],properties:{name:"California"}},{type:"Polygon",id:"CO",arcs:[[58,59,60,61,62,63]],properties:{name:"Colorado"}},{type:"Polygon",id:"CT",arcs:[[64,65,66,67]],properties:{name:"Connecticut"}},{type:"Polygon",id:"DE",arcs:[[68,69,70,71]],properties:{name:"Delaware"}},{type:"Polygon",id:"DC",arcs:[[72,73]],properties:{name:"District of Columbia"}},{type:"Polygon",id:"FL",arcs:[[74,75,-2]],properties:{name:"Florida"}},{type:"Polygon",id:"GA",arcs:[[76,77,-75,-1,78,79]],properties:{name:"Georgia"}},{type:"MultiPolygon",id:"HI",arcs:[[[80]],[[81]],[[82]],[[83]],[[84]]],properties:{name:"Hawaii"}},{type:"Polygon",id:"ID",arcs:[[85,86,87,88,89,90,91]],properties:{name:"Idaho"}},{type:"Polygon",id:"IL",arcs:[[92,93,94,95,96,97]],properties:{name:"Illinois"}},{type:"Polygon",id:"IN",arcs:[[98,99,-95,100,101]],properties:{name:"Indiana"}},{type:"Polygon",id:"IA",arcs:[[102,-98,103,104,105,106]],properties:{name:"Iowa"}},{type:"Polygon",id:"KS",arcs:[[107,108,-60,109]],properties:{name:"Kansas"}},{type:"Polygon",id:"KY",arcs:[[110,111,112,113,-96,-100,114]],properties:{name:"Kentucky"}},{type:"Polygon",id:"LA",arcs:[[115,116,117,-52]],properties:{name:"Louisiana"}},{type:"Polygon",id:"ME",arcs:[[118,119]],properties:{name:"Maine"}},{type:"MultiPolygon",id:"MD",arcs:[[[120]],[[-71,121,122,123,124,-74,125,126,127]]],properties:{name:"Maryland"}},{type:"Polygon",id:"MA",arcs:[[128,129,130,131,-68,132,133,134]],properties:{name:"Massachusetts"}},{type:"MultiPolygon",id:"MI",arcs:[[[-102,135,136]],[[137]],[[138,139]],[[140]]],properties:{name:"Michigan"}},{type:"Polygon",id:"MN",arcs:[[-107,141,142,143,144]],properties:{name:"Minnesota"}},{type:"Polygon",id:"MS",arcs:[[-4,145,-116,-51,146]],properties:{name:"Mississippi"}},{type:"Polygon",id:"MO",arcs:[[-97,-114,147,-55,148,-108,149,-104]],properties:{name:"Missouri"}},{type:"Polygon",id:"MT",arcs:[[150,151,-92,152,153]],properties:{name:"Montana"}},{type:"Polygon",id:"NE",arcs:[[-105,-150,-110,-59,154,155]],properties:{name:"Nebraska"}},{type:"Polygon",id:"NV",arcs:[[156,-48,-56,157,-88]],properties:{name:"Nevada"}},{type:"Polygon",id:"NH",arcs:[[-135,158,159,-120,160]],properties:{name:"New Hampshire"}},{type:"Polygon",id:"NJ",arcs:[[161,-69,162,163]],properties:{name:"New Jersey"}},{type:"Polygon",id:"NM",arcs:[[164,165,166,-45,-62]],properties:{name:"New Mexico"}},{type:"Polygon",id:"NY",arcs:[[-133,-67,167,-164,168,169,170]],properties:{name:"New York"}},{type:"Polygon",id:"NC",arcs:[[171,172,-80,173,174]],properties:{name:"North Carolina"}},{type:"Polygon",id:"ND",arcs:[[175,-154,176,-143]],properties:{name:"North Dakota"}},{type:"Polygon",id:"OH",arcs:[[177,-115,-99,-137,178,179]],properties:{name:"Ohio"}},{type:"Polygon",id:"OK",arcs:[[-149,-54,180,-165,-61,-109]],properties:{name:"Oklahoma"}},{type:"Polygon",id:"OR",arcs:[[-89,-158,-58,181,182]],properties:{name:"Oregon"}},{type:"Polygon",id:"PA",arcs:[[-163,-72,-128,183,-180,184,-169]],properties:{name:"Pennsylvania"}},{type:"MultiPolygon",id:"RI",arcs:[[[185,-130]],[[186,-65,-132]]],properties:{name:"Rhode Island"}},{type:"Polygon",id:"SC",arcs:[[187,-77,-173]],properties:{name:"South Carolina"}},{type:"Polygon",id:"SD",arcs:[[-142,-106,-156,188,-151,-176]],properties:{name:"South Dakota"}},{type:"Polygon",id:"TN",arcs:[[189,-174,-79,-5,-147,-50,-148,-113]],properties:{name:"Tennessee"}},{type:"Polygon",id:"TX",arcs:[[-53,-118,190,-166,-181]],properties:{name:"Texas"}},{type:"Polygon",id:"UT",arcs:[[191,-63,-49,-157,-87]],properties:{name:"Utah"}},{type:"Polygon",id:"VT",arcs:[[-134,-171,192,-159]],properties:{name:"Vermont"}},{type:"MultiPolygon",id:"VA",arcs:[[[193,-123]],[[120]],[[-126,-73,-125,194,-175,-190,-112,195]]],properties:{name:"Virginia"}},{type:"MultiPolygon",id:"WA",arcs:[[[-183,196,-90]],[[197]],[[198]]],properties:{name:"Washington"}},{type:"Polygon",id:"WV",arcs:[[-184,-127,-196,-111,-178]],properties:{name:"West Virginia"}},{type:"Polygon",id:"WI",arcs:[[199,-93,-103,-145,200,-140]],properties:{name:"Wisconsin"}},{type:"Polygon",id:"WY",arcs:[[-189,-155,-64,-192,-86,-152]],properties:{name:"Wyoming"}}]}},arcs:[[[2632,3060],[5,-164],[7,-242],[4,-53],[3,-30],[-2,-19],[4,-11],[-5,-25],[0,-24],[-2,-32],[2,-57],[-2,-51],[3,-52]],[[2649,2300],[-14,-1],[-59,0],[-1,-25],[6,-37],[-1,-31],[2,-16],[-4,-28]],[[2578,2162],[-4,-6],[-7,31],[-1,47],[-2,6],[-3,-36],[-1,-34],[-7,9]],[[2553,2179],[-2,291],[6,363],[4,209],[-3,20]],[[2558,3062],[24,1],[50,-3]],[[1324,6901],[1,32],[6,-19],[-1,-32],[-8,4],[2,15]],[[1317,6960],[5,-23],[-3,-33],[-2,11],[0,45]],[[1285,7153],[6,5],[3,-8],[-1,-28],[-6,-6],[-5,17],[3,20]],[[1267,7137],[12,-7],[3,-36],[13,-41],[4,-25],[0,-21],[3,-4],[1,-27],[5,-27],[0,-25],[3,8],[2,-19],[1,-74],[-3,-17],[-7,3],[-3,38],[-2,-3],[-6,28],[-2,-10],[-5,10],[1,-28],[5,7],[3,-10],[-2,-39],[-5,4],[-9,49],[-2,25],[1,26],[-7,-2],[0,20],[5,2],[5,18],[-2,31],[-6,7],[-1,50],[-2,25],[-4,-18],[-2,28],[4,14],[-3,32],[2,8]],[[1263,6985],[5,-12],[4,15],[4,-7],[-4,-28],[-6,8],[-3,24]],[[1258,7247],[-4,19],[5,13],[15,-18],[7,1],[5,-36],[9,-29],[-1,-22],[-5,-11],[-6,5],[-5,-14],[-6,9],[-7,-9],[-1,45],[0,30],[-5,1],[-1,16]],[[1252,7162],[-4,14],[-4,32],[0,24],[3,11],[4,-11],[0,20],[12,-35],[1,-33],[-4,-5],[-3,-37],[3,-11],[-3,-43],[-5,9],[0,-27],[-3,13],[-2,54],[5,25]],[[1207,7331],[8,38],[3,-16],[7,-13],[6,-2],[0,-30],[6,-99],[0,-85],[-1,-22],[-4,13],[-10,84],[-7,25],[3,20],[-3,48],[-8,39]],[[1235,7494],[10,-15],[5,2],[0,-14],[8,-52],[-5,8],[-2,-18],[6,-27],[2,-48],[-6,-13],[-2,-16],[-10,-35],[-3,1],[-1,37],[2,22],[-1,32],[-3,40],[0,21],[-2,51],[-4,22],[-1,38],[7,-36]],[[1203,7324],[4,0],[4,-35],[-2,-24],[-6,-5],[0,38],[0,26]],[[1207,7331],[-5,7],[-3,26],[-6,18],[-5,37],[-6,17],[1,30],[4,10],[1,26],[3,-11],[8,-1],[6,17],[8,-23],[-5,-26],[2,-9],[4,28],[10,-9],[5,-21],[-3,-38],[3,-3],[3,-50],[-7,-7],[-14,41],[0,-42],[-4,-17]],[[883,7871],[-12,-48],[-1,-19],[-9,-12],[2,29],[10,30],[7,34],[3,-14]],[[870,7943],[-2,-39],[-4,-41],[-6,14],[5,47],[7,19]],[[863,9788],[3,-8],[15,-9],[8,5],[10,0],[12,-7],[7,4],[7,-15],[12,-18],[16,-4],[5,10],[11,6],[4,14],[12,2],[0,-9],[7,5],[15,-15],[9,-24],[10,-11],[2,-11],[8,-2],[8,-18],[1,-11],[5,9],[6,-7],[0,-1783],[13,-16],[2,17],[14,-24],[8,30],[18,4],[-3,-52],[4,-17],[10,-17],[2,-27],[29,-101],[4,-63],[6,17],[12,31],[7,1],[3,23],[0,34],[5,0],[1,31],[9,7],[13,26],[13,-45],[-1,-27],[3,-27],[7,-7],[10,-40],[-1,-12],[4,-22],[12,-25],[19,-110],[3,-29],[6,-29],[8,-65],[9,-55],[-3,-23],[9,-9],[-2,-33],[7,-14],[1,-38],[7,2],[14,-40],[9,-7],[5,-19],[4,-5],[1,-19],[9,-5],[3,-23],[-4,-43],[1,-36],[4,-58],[-4,-15],[-6,-53],[-10,-39],[-3,20],[-4,-6],[-3,39],[1,17],[-3,20],[7,21],[-2,7],[-7,-26],[-3,17],[-4,-10],[-12,42],[4,46],[-8,-15],[0,-23],[-6,17],[-1,22],[4,24],[-1,24],[-6,-19],[-6,42],[-3,-8],[-2,36],[5,23],[6,0],[-2,28],[3,36],[-5,-1],[-9,32],[-6,37],[-15,27],[0,77],[-4,9],[1,31],[-5,9],[-8,42],[-2,22],[-12,7],[-14,56],[-6,132],[-3,-30],[1,-27],[6,-53],[-1,-8],[3,-43],[0,-28],[-6,6],[-4,31],[-6,6],[-8,-9],[0,45],[-5,38],[-5,-12],[-17,40],[-2,-11],[10,-13],[7,-31],[3,-1],[1,-25],[4,-30],[-10,-16],[-5,10],[0,-26],[-8,20],[-2,14],[-5,0],[-13,38],[-10,33],[-1,20],[-5,30],[-14,21],[-9,21],[-14,26],[-9,24],[1,26],[2,-9],[3,17],[-3,38],[4,21],[-2,9],[-7,-40],[-14,-26],[-18,10],[-14,24],[-1,18],[-7,-4],[-7,14],[-17,12],[-9,1],[-21,-10],[-8,-7],[-10,27],[-12,12],[-3,17],[-2,28],[-8,-2],[-3,-25],[-15,34],[-2,14],[-15,-27],[-7,-32],[-3,30],[3,17],[4,-5],[14,22],[-2,17],[-6,-8],[-3,22],[-6,3],[-6,55],[-3,-13],[-8,-8],[-3,8],[-3,-18],[-11,6],[-1,-20],[-7,-5],[-3,7],[2,36],[-3,-1],[-5,-38],[7,-12],[1,-27],[4,-30],[-3,-31],[-5,10],[-2,-15],[6,-7],[3,-41],[-8,-9],[-4,9],[-7,-12],[-3,10],[-9,-2],[0,16],[-4,-10],[-3,-20],[-3,18],[-5,-25],[2,-12],[-6,-15],[-6,-2],[-3,-20],[-6,-17],[-4,6],[-5,-21],[-4,1],[-8,-43],[-9,-3],[-3,14],[-5,-23],[-11,17],[2,33],[8,11],[4,-2],[2,13],[8,25],[0,21],[-11,-28],[-9,16],[-1,12],[5,48],[8,34],[1,29],[2,5],[1,30],[-4,34],[10,12],[19,48],[4,-19],[6,-5],[9,20],[-10,26],[-4,20],[-7,-2],[-5,9],[-2,-8],[-9,-14],[-4,-26],[-9,-6],[-9,-30],[-1,-20],[-7,-11],[-2,-22],[-5,-13],[-2,-39],[-10,-25],[5,-20],[-4,-29],[-9,-5],[-1,-38],[-8,-13],[-3,15],[-4,-29],[-5,-1],[1,-21],[-11,-13],[-2,-57],[12,-3],[10,-16],[3,-19],[-4,-30],[-7,-19],[-6,-1],[0,-17],[-4,-6],[1,-21],[-4,-31],[-9,-29],[-5,0],[-5,-11],[-5,2],[-4,-11],[2,-16],[-7,-8],[-2,-23],[-5,14],[-5,-45],[-9,4],[1,-24],[-6,6],[-3,-11],[0,-32],[-6,-50],[-10,-6],[-7,-23],[-2,-13],[-5,18],[-8,-48],[-2,13],[-5,-4],[-1,-27],[-5,-10],[-6,4],[-4,-27],[8,-9],[-9,-60],[-25,-20],[-6,-54],[-2,12],[1,33],[-5,6],[-6,-13],[-1,-14],[-10,-22],[-4,-25],[-1,18],[-2,-21],[-6,14],[-10,-33],[-8,2],[1,25],[-4,24],[-3,-20],[1,-21],[-11,-64],[-3,16],[-1,-24],[-8,4],[-1,38],[-4,8],[-2,-14],[4,-16],[-2,-27],[-5,-13],[-5,29],[-5,2],[-1,-11],[5,-17],[-9,-27],[6,-7],[0,-13],[-5,9],[-7,-25],[-15,1],[-7,-16],[0,-13],[-8,-15],[-6,6],[-2,35],[6,12],[4,43],[6,1],[13,28],[10,1],[4,-27],[3,20],[-1,23],[6,10],[7,0],[8,50],[10,45],[12,40],[15,18],[6,-9],[6,12],[1,-17],[-3,-19],[4,-14],[1,23],[7,2],[2,-15],[5,-5],[0,18],[-8,15],[0,11],[5,49],[6,28],[9,27],[15,24],[10,35],[5,-13],[4,5],[-1,22],[1,21],[8,44],[11,28],[8,38],[0,21],[7,148],[11,40],[-1,31],[-27,-45],[-8,6],[-2,18],[-5,9],[-1,21],[-4,-10],[-3,-32],[5,-41],[-6,-18],[-5,7],[-9,64],[-6,33],[-4,0],[-2,-24],[-3,-4],[-4,19],[-5,4],[-2,32],[-16,-37],[-13,-26],[-1,-14],[-11,-22],[-6,20],[5,23],[-1,54],[-4,57],[7,24],[-6,49],[-5,27],[-4,39],[-6,17],[-2,-34],[-7,-8],[-12,-22],[-14,-9],[-7,2],[-7,12],[-1,30],[-5,9],[-9,42],[-8,8],[-8,46],[6,21],[1,39],[-5,-8],[0,24],[2,19],[-6,18],[0,-19],[-7,8],[-1,32],[-6,4],[-3,22],[0,27],[-5,-12],[-1,26],[7,6],[-6,30],[10,2],[0,35],[2,24],[18,77],[4,23],[3,-5],[-2,33],[7,55],[6,22],[11,9],[8,-9],[12,-33],[8,4],[11,32],[11,49],[6,6],[1,-13],[13,0],[12,10],[11,52],[0,12],[-5,48],[-1,28],[-8,31],[-3,26],[8,-7],[8,22],[0,20],[-10,39],[-8,-30],[-7,5],[-6,-17],[-8,-4],[-2,-11],[-9,-17],[-2,-28],[-5,-12],[-2,34],[-5,7],[-4,-26],[-2,12],[-10,19],[-20,-1],[-14,-21],[-6,-3],[-11,13],[-22,14],[-6,12],[-3,19],[2,26],[-8,22],[2,24],[5,12],[-2,31],[-8,0],[-6,8],[-13,6],[-7,16],[-10,16],[-1,19],[16,27],[20,43],[15,27],[8,-15],[8,-3],[2,21],[-5,3],[-1,18],[20,29],[22,22],[12,2],[7,-7],[-4,-32],[2,-22],[-3,-15],[4,-26],[8,5],[10,-5],[11,6],[4,-10],[7,-2],[7,10],[8,-11],[9,42],[5,2],[5,-8],[2,24],[-12,11],[-11,-9],[1,31],[-8,34],[-10,10],[-2,30],[7,8],[9,-31],[-1,-24],[4,-18],[10,-22],[2,23],[-11,30],[5,54],[-4,10],[-11,-12],[-11,3],[-2,10],[-6,-10],[-24,23],[0,24],[-7,54],[-6,19],[-9,17],[-19,46],[-9,18],[-8,4],[-13,31],[-12,18],[-1,6],[9,10],[4,29],[1,59],[25,-4],[31,13],[8,11],[12,29],[12,45],[3,45],[5,38],[10,33],[5,24],[13,38],[2,-10],[11,-3],[16,20],[10,21],[24,64],[9,4],[1,-10],[9,7],[9,-2],[18,9],[17,28],[17,58],[7,13],[2,-10],[26,-24],[2,-17],[-9,-22],[-4,-1],[0,-29],[14,9],[0,16],[6,14],[2,-8],[5,33],[13,-30],[-2,-23],[8,-6],[5,-14],[7,22],[13,1],[7,7],[18,-7],[10,-8],[-5,-45],[17,-12],[2,-11],[16,-20],[1,9],[12,13],[11,-1],[0,-11],[7,-1],[7,15],[11,2],[9,-6],[11,-16],[5,3],[7,-22],[4,9],[7,-7],[5,-13]],[[717,7456],[-1,-8],[-9,13],[7,49],[6,4],[4,45],[5,-40],[4,14],[8,-22],[0,-31],[-11,-4],[-5,-13],[-8,-7]],[[688,7363],[8,25],[-8,6],[0,22],[6,14],[5,-10],[0,-22],[3,15],[0,32],[5,-15],[1,21],[5,-12],[5,0],[5,11],[7,-20],[0,-55],[9,4],[-6,-37],[-11,15],[4,-24],[-3,-20],[-6,10],[0,-38],[-8,-10],[-3,-16],[-5,15],[-6,-40],[-4,-4],[-5,-18],[-2,43],[-6,-23],[-1,13],[-6,14],[0,39],[-6,15],[4,45],[11,28],[7,-2],[1,-21]],[[671,7185],[-6,-39],[-2,6],[8,33]],[[640,7055],[4,-2],[-1,-40],[-8,6],[-1,13],[6,23]],[[519,6933],[-2,-41],[-9,-33],[5,51],[2,-5],[4,28]],[[501,6947],[5,0],[0,-20],[-5,-23],[-5,15],[-3,-14],[-2,35],[2,12],[8,-5]],[[451,6875],[1,-16],[-3,-11],[-3,18],[5,9]],[[447,8527],[-4,-19],[-2,16],[6,3]],[[436,6781],[6,-7],[-1,-16],[-5,1],[0,22]],[[358,6745],[2,-22],[-5,-10],[-1,23],[4,9]],[[352,6718],[-8,-21],[-2,14],[3,19],[7,-12]],[[335,7902],[6,7],[2,-14],[5,3],[6,-12],[1,-54],[-3,-18],[-7,-11],[-2,-18],[-11,20],[-5,-1],[-10,28],[-4,0],[-6,15],[-3,25],[4,7],[10,-7],[5,20],[5,2],[3,14],[4,-6]],[[334,6690],[5,-14],[-10,-36],[1,-6],[12,26],[0,-15],[-5,-17],[-8,-12],[-1,-18],[-8,-18],[-7,-1],[-5,-18],[-9,-16],[-5,17],[9,20],[3,-3],[8,16],[-2,19],[4,20],[6,-9],[1,12],[-7,4],[-4,14],[4,23],[11,13],[2,-26],[5,25]],[[266,6527],[10,37],[1,16],[4,17],[7,9],[3,-10],[1,-25],[-12,-27],[-6,-40],[-6,-13],[-2,36]],[[238,6477],[2,-19],[-8,-1],[-1,13],[7,7]],[[227,7303],[-4,-18],[-1,18],[5,0]],[[212,6440],[2,-18],[-5,-13],[-1,19],[4,12]],[[182,8542],[22,-28],[13,24],[6,-2],[5,-14],[2,-23],[11,-12],[4,-12],[15,-5],[8,-8],[-4,-28],[-7,6],[-8,-5],[-4,-13],[-4,-28],[-5,26],[-6,18],[-6,2],[-3,20],[-15,25],[-6,1],[-11,-22],[-7,11],[-4,23],[4,44]],[[162,6381],[0,-22],[-5,-4],[1,19],[4,7]],[[128,6335],[4,-8],[10,1],[1,-7],[-13,-9],[-2,23]],[[108,6360],[0,19],[4,7],[6,-19],[-2,-17],[-4,1],[1,-20],[-5,-2],[-12,-21],[-6,6],[2,15],[7,-2],[9,33]],[[47,6279],[5,3],[0,-24],[-6,3],[-8,-28],[-4,37],[4,1],[0,29],[5,1],[0,-21],[4,-1]],[[28,6296],[3,-9],[-2,-32],[-5,-10],[0,20],[4,31]],[[0,6291],[5,-1],[4,-23],[-4,-27],[-5,51]],[[9993,6496],[6,-13],[0,-19],[-11,-12],[-8,31],[0,15],[13,-2]],[[1966,3444],[-1,-1081]],[[1965,2363],[-57,0],[-34,71],[-73,150],[3,43]],[[1804,2627],[6,8],[1,16],[-1,36],[-4,1],[-2,71],[6,27],[0,28],[-1,45],[4,34],[4,12],[4,25],[-6,27],[-4,51],[-5,31],[0,24]],[[1806,3063],[2,26],[0,36],[-3,36],[-2,112],[11,7],[3,-23],[3,1],[3,33],[0,153]],[[1823,3444],[101,2],[42,-2]],[[2515,3253],[-1,-35],[-4,-11],[-1,-29],[-5,-31],[0,-46],[-3,-34],[-3,-5]],[[2498,3062],[2,-17],[-4,-14],[-2,-33],[-3,-8],[0,-38],[-5,-10],[0,-13],[-6,-31],[2,-21],[-5,-30],[-5,-59],[5,-25],[-2,-16],[1,-39],[-2,-26]],[[2474,2682],[-69,3],[-13,0]],[[2392,2685],[0,101],[-4,8],[-5,-9],[-3,18]],[[2380,2803],[1,335],[-5,211]],[[2376,3349],[4,0],[123,-1],[2,-36],[-4,-23],[-4,-36],[18,0]],[[1654,4398],[0,-331],[0,-241],[36,-171],[35,-169],[27,-137],[20,-101],[34,-185]],[[1804,2627],[-38,-18],[-30,-16],[-4,25],[0,40],[-2,47],[-4,33],[-9,46],[-12,43],[-2,-12],[-4,8],[1,18],[-5,39],[-7,-8],[-12,28],[-2,23],[-8,28],[-9,-1],[-7,13],[-10,-6],[-5,26],[1,53],[-1,8],[1,38],[-8,28],[0,39],[-3,2],[-4,33],[-4,8],[-1,20],[-11,79],[-5,23],[-1,61],[2,-5],[2,37],[-4,33],[-5,-4],[-7,30],[-2,24],[0,23],[-3,31],[0,50],[5,0],[-2,70],[-2,-7],[-1,-35],[-5,-7],[-7,26],[-1,45],[-4,35],[-6,22],[-3,25],[-9,50],[2,14],[-4,64],[2,35],[-3,54],[-7,52],[-7,29],[-2,35],[7,83],[2,29],[-2,22],[3,57],[-2,52],[-3,13],[1,42]],[[1534,4399],[28,1],[24,1],[38,-3],[30,0]],[[2107,4208],[57,0],[0,-191]],[[2164,4017],[1,-574]],[[2165,3443],[-28,1]],[[2137,3444],[-38,-1],[-72,0],[-15,1],[-46,0]],[[1966,3444],[0,223],[-1,21],[0,162],[0,357]],[[1965,4207],[32,1],[63,-1],[47,1]],[[3025,4400],[0,-113],[-2,-18]],[[3023,4269],[-2,3],[-12,-14],[-15,4],[-7,-26],[-7,-9],[-8,-22]],[[2972,4205],[-2,22],[7,21],[-2,16],[2,144]],[[2977,4408],[12,-2],[36,-3],[0,-3]],[[2922,3980],[-2,-23]],[[2920,3957],[-3,-13],[0,-30],[5,-29],[1,-47],[6,-49],[3,-2],[1,-66]],[[2933,3721],[-19,2],[-2,241]],[[2912,3964],[5,21],[5,-5]],[[2876,3786],[-2,27]],[[2874,3813],[2,12],[4,-19],[-4,-20]],[[2649,2300],[4,-55],[39,-13],[37,-14],[1,-41],[4,1],[1,39],[-1,35],[2,15],[7,-16],[8,-7]],[[2751,2244],[1,-83],[4,-93],[8,-122],[13,-131],[-2,-9],[1,-61],[5,-68],[8,-137],[2,-42],[0,-44],[-3,-158],[-3,-3],[-3,-49],[1,-16],[-5,-36],[-2,9],[-6,-15],[-9,-8],[-2,20],[1,29],[-7,85],[-5,15],[-4,-11],[-3,47],[-1,38],[-6,43],[-2,28],[1,41],[-3,8],[1,-24],[-3,-7],[-9,104],[-4,26],[9,76],[-6,-4],[-4,-24],[-3,38],[5,104],[1,87],[-4,21],[-1,28],[-5,6],[-7,46],[-5,19],[0,28],[-4,11],[-3,31],[-11,42],[-9,-10],[0,-29],[-3,5],[-12,-35],[-12,-9],[0,21],[-3,25],[-15,57],[-10,24],[-10,6],[-8,-4],[-17,-18]],[[2703,3063],[-6,-41],[0,-20],[9,-40],[3,3],[5,-42],[1,-22],[4,-40],[7,-24],[3,-35],[8,-33],[0,-22],[5,-35],[7,-29],[2,-32],[1,-40],[3,-14],[5,-51],[0,-33],[7,-16]],[[2767,2497],[-7,-65],[-2,-34],[-3,-29],[0,-30],[-3,-14],[-1,-81]],[[2632,3060],[37,1]],[[2669,3061],[20,-1],[14,3]],[[640,0],[-7,17],[-1,16],[1,43],[-5,73],[4,24],[2,34],[-2,22],[1,23],[8,-27],[9,-20],[5,-29],[0,-26],[8,-40],[-5,-34],[-8,-15],[-7,-25],[-3,-36]],[[613,397],[3,-26],[4,11],[9,-30],[-1,-27],[-9,-14],[-2,6],[-1,33],[-5,7],[-1,19],[3,21]],[[602,432],[-3,-20],[-7,0],[2,22],[8,-2]],[[574,525],[3,-45],[-2,-26],[-6,-5],[-4,54],[4,1],[5,21]],[[531,626],[3,-2],[2,-20],[-1,-28],[-4,-18],[-9,22],[1,31],[8,15]],[[1908,4871],[0,-472]],[[1908,4399],[-31,-1],[-54,0]],[[1823,4398],[-85,1]],[[1738,4399],[0,349],[4,62],[-2,16],[-6,3],[-2,26],[6,68],[3,6],[3,29],[-1,17],[4,23],[1,34],[6,56],[-2,26],[-7,14],[-4,32]],[[1741,5160],[0,34],[-3,33],[0,16],[0,255],[0,236]],[[1738,5734],[28,0]],[[1766,5734],[0,-195],[9,-54],[1,-52],[5,-23],[6,-8],[0,-14],[11,-51],[1,-21],[8,-20],[0,-12],[8,1],[-4,-71],[-1,-45],[3,-29],[-5,-21],[2,-20],[-1,-21],[6,-20],[7,26],[3,21],[5,-19],[-1,-15],[3,-37],[5,-39],[3,-13],[0,-37],[3,-16],[6,-2],[4,-61],[3,-11],[3,18],[9,-1],[7,17],[3,-10],[7,9],[2,-11],[5,8],[7,39],[4,-33],[5,-20]],[[2489,4496],[53,-3],[28,0]],[[2570,4493],[-1,-37],[4,-43],[5,-70]],[[2578,4343],[0,-450],[-3,-35],[3,-40],[1,-34],[-4,-27],[-1,-25],[-5,-41],[-3,-3],[0,-24],[-2,-9],[-1,-45],[0,-13]],[[2563,3597],[-3,-27],[2,-34],[-11,-17],[-1,-20],[2,-25],[-3,-16],[-11,29],[-3,-2],[-4,-33],[1,-11]],[[2532,3441],[-5,2],[-6,55],[2,12],[-2,37],[0,29],[-9,41],[-3,-4],[-3,25],[-9,38],[0,31],[5,49],[-1,18],[3,23],[-4,13],[-6,9],[-3,-18],[-3,11],[-1,63],[-10,41],[-9,49],[-3,58],[-1,39],[3,27]],[[2467,4089],[0,35],[8,21],[1,29],[4,19],[0,33],[-4,27],[2,34],[11,9],[9,24],[0,29],[4,13],[1,37],[0,24],[-7,18],[-1,20],[-6,35]],[[2655,4340],[0,-228],[0,-266]],[[2655,3846],[-2,-9],[2,-52],[-5,-1],[-5,-18],[-8,9],[1,-38],[-5,-16],[-2,-24],[-5,-9],[-3,-48],[-3,-13],[-6,18],[-1,22],[-7,-24],[1,-21],[-7,-7],[-1,19],[-8,-19],[-2,-20],[-7,28],[-4,-6],[-2,13],[-3,-13],[-7,-2],[-3,-18]],[[2578,4343],[3,-12],[8,0],[9,22]],[[2598,4353],[23,0],[34,0],[0,-13]],[[2473,4685],[0,-28],[4,-19],[-3,-23],[1,-43],[2,-30],[10,-22],[2,-24]],[[2467,4089],[-3,7],[-6,38],[-3,-1],[-40,-5],[-39,-2],[-33,3]],[[2343,4129],[-3,25],[2,49],[-3,43],[0,48],[-5,17],[-1,26],[2,23],[-2,33],[-4,13],[-5,86]],[[2324,4492],[-5,41],[2,29],[1,37],[2,14],[-3,19],[1,33],[-2,16],[4,4]],[[2324,4685],[144,0],[5,0]],[[2356,4017],[3,-18],[9,-14],[-6,-56],[4,-18],[4,-45],[6,-10],[0,-412]],[[2376,3444],[-156,0],[-55,-1]],[[2164,4017],[5,0],[187,0]],[[2718,3716],[-1,-57],[4,-37],[4,-28],[2,-22],[5,-22],[4,-3]],[[2736,3547],[-11,-51],[-11,-29],[0,-14],[-4,-13],[0,-16],[-6,-8],[-1,-21],[-16,-27]],[[2687,3368],[0,-3],[-24,2],[-22,6],[-5,-2],[-32,8],[-36,-5],[-6,9],[1,-35],[-36,2],[-3,-2]],[[2524,3348],[1,24],[5,-8],[2,77]],[[2655,3846],[11,0],[5,-40],[1,-17],[9,-7],[6,-26],[5,13],[10,-14],[4,19],[4,6],[1,-32],[3,-6],[4,-26]],[[2474,2682],[3,-22],[-2,-9],[-1,-38],[5,-24],[0,-57],[-3,-44],[-7,-27],[-2,-43],[-2,4],[-1,-70],[-3,-2],[2,-37],[-2,-14],[54,0],[-3,-63],[4,-41],[1,-32],[4,-20]],[[2521,2143],[-9,-26],[0,-19],[7,-12],[3,30],[6,-30],[-1,-24],[-3,-11],[-7,10],[1,-18],[-2,-27],[5,-24],[9,-7],[3,-29],[3,-4],[-5,-32],[-5,6],[-4,33],[-10,18],[0,33],[-6,-11],[1,-27],[-3,-25],[-3,-4],[-3,28],[-7,1],[-2,-29],[-4,-9],[-5,18],[-4,2],[-3,47],[-7,21],[-2,-3],[-3,40],[-7,-5],[0,24],[-8,-23],[1,-18],[-5,-17],[-9,8],[-10,27],[-7,11],[-16,-9],[-2,-8]],[[2398,2049],[-2,19],[6,68],[-2,37],[2,20],[-1,26],[3,19],[3,50],[0,40],[-8,78],[0,41],[-7,42],[0,196]],[[3046,5029],[12,26],[-2,13],[5,30],[4,13],[-1,12],[5,18],[-1,33],[2,50],[5,17],[1,53],[22,147],[6,-7],[0,-35],[4,-13],[9,21],[6,0],[4,14],[8,-31],[4,-25],[1,-214],[-1,-51],[10,-14],[-2,-22],[3,-21],[-2,-18],[4,-30],[5,7],[5,-68],[-6,-31],[-3,12],[-3,-21],[-4,5],[0,-18],[-6,2],[-8,-40],[-2,28],[-3,2],[1,-30],[-6,-15],[-2,24],[-3,-12],[-7,0],[0,28],[-5,-6],[1,-20],[-4,-42],[1,-12],[-6,-23],[-5,9],[-3,-24],[-4,-3],[-4,-20],[-4,4],[-1,21],[-7,-34],[2,-21],[-5,-7],[0,-18],[-5,-22],[-5,-50]],[[3056,4600],[-3,14],[0,19],[-4,22],[-2,250],[-1,124]],[[2904,3626],[2,0],[-1,0],[-1,0]],[[2933,3721],[-6,-80]],[[2927,3641],[-4,-3],[-8,-12]],[[2915,3626],[-6,-8],[0,31],[-2,13],[3,13],[-4,32],[-2,-14],[-6,3],[-2,35],[2,0],[0,45],[2,18],[-2,60],[3,36],[5,6],[0,37],[-3,-5],[0,-18],[-8,-25],[-2,-21],[0,-56],[-3,-26],[1,-44],[4,-30],[-1,-23],[3,-23],[-2,-16],[-6,30],[-10,15],[-2,29],[-6,-16],[-2,23],[5,29]],[[2874,3756],[2,30]],[[2874,3813],[-4,18],[-6,10],[0,28],[-3,15],[-4,4]],[[2857,3888],[-4,53],[-4,0],[-5,18],[-3,-15],[-5,1],[-1,-21],[-8,14],[-6,-28],[-3,6],[-6,-33],[-6,-17],[1,98]],[[2807,3964],[105,0]],[[3053,4565],[1,-34],[-1,-27],[-5,-25],[0,-29],[6,-4],[4,-31],[0,-24],[3,-6],[0,-22],[8,-19],[9,18],[-2,-26],[-13,-23],[-5,-1],[-3,18],[-5,-6],[0,-13],[-5,-9]],[[3045,4302],[-3,35]],[[3042,4337],[0,6]],[[3042,4343],[-3,14],[-2,45],[-4,0],[-8,-2]],[[2977,4408],[0,7],[6,126]],[[2983,4541],[23,-3]],[[3006,4538],[34,-7],[3,18],[7,19],[3,-3]],[[2598,4353],[5,25],[4,43],[4,26],[3,36],[1,52],[0,57],[-9,111],[3,42],[-2,50],[6,51],[2,43],[-1,23],[5,9],[0,31],[8,9],[5,34],[0,-69],[3,-3],[3,35],[1,58],[2,15],[8,9],[-3,41],[5,35],[7,2],[7,-22],[7,-3],[3,-28],[6,-2],[9,-25],[3,1],[4,-41],[-3,-21],[3,-29],[2,-32],[-2,-71],[-6,-18],[-1,-37],[-7,-12],[-4,-44],[2,-17],[6,-15],[6,24],[6,49],[10,19],[5,-15],[3,-27],[3,-80],[0,-39],[3,-48],[-3,-69],[-4,-11],[-1,25],[-3,-7],[-3,-58],[-6,-21],[-2,-44],[-7,-37],[0,-16]],[[2694,4347],[-39,-7]],[[2635,5110],[1,-23],[-4,-4],[1,33],[2,-6]],[[2496,5270],[11,20],[5,23],[12,9],[8,29],[4,1],[3,20],[9,28],[4,24],[7,15],[6,-13],[-11,-59],[-2,-19],[0,-36],[5,27],[10,-4],[8,-19],[7,-52],[3,-10],[7,9],[2,-12],[7,-6],[16,44],[8,4],[10,-2],[7,15],[6,1],[1,-54],[5,-7],[6,8],[2,-12],[4,16],[8,5],[1,-67],[3,-28],[6,-8],[1,19],[5,0],[3,-20],[-3,-14],[-15,12],[-8,-8],[-8,23],[-2,-21],[1,-18],[-4,4],[-5,27],[-9,15],[-5,1],[-4,-25],[-8,-6],[-8,5],[-3,-10],[-1,-21],[-9,-18],[1,25],[-4,5],[-2,-26],[-6,-1],[-3,-11],[-5,-45],[-8,-58],[1,-5]],[[2576,4989],[-4,20],[2,27],[-7,4],[3,26],[0,34],[-5,23],[-4,24],[-12,19],[-4,-7],[-12,29],[-29,38],[-3,33],[-5,11]],[[2541,5539],[-7,-24],[-4,-3],[1,19],[18,45],[-4,-31],[-4,-6]],[[2324,4685],[0,343],[-7,22],[-5,36],[8,41],[1,22]],[[2321,5149],[-1,76],[-4,20],[-2,42],[0,51],[-1,8],[-1,123],[-5,65],[-3,36],[0,77],[1,27],[-3,60]],[[2302,5734],[59,0],[0,73],[5,-2],[4,-14],[4,-100],[3,-11],[9,-3],[1,-10],[11,-4],[1,-21],[10,5],[0,9],[7,10],[6,-4],[8,-16],[2,-19],[4,2],[4,-43],[2,18],[7,8],[1,-18],[9,-12],[0,-17],[4,-14],[8,8],[5,18],[8,12],[2,-28],[5,6],[6,-6],[6,4],[8,-24],[7,4],[0,-10],[-10,-24],[-13,-19],[-9,-20],[-12,-49],[-5,-31],[-8,-34],[-13,-46],[2,-16]],[[2450,5296],[-2,9],[-6,-16],[0,-113],[-2,-11],[-8,-16],[-6,-41],[-1,-27],[3,-2],[4,-24],[-3,-29],[0,-33],[-2,-70],[8,-34],[6,-3],[3,-21],[8,-21],[2,-25],[8,-33],[5,-7],[5,-42],[-1,-30],[2,-22]],[[2553,2179],[-3,-8],[-7,4],[-3,12],[-7,-8],[-9,-22],[-3,-14]],[[2498,3062],[53,0],[7,0]],[[2524,3348],[-2,0],[-2,0],[1,-47],[-6,-48]],[[2376,3349],[0,95]],[[2356,4017],[-7,50],[-6,62]],[[2108,5151],[0,-181],[-1,0]],[[2107,4970],[-53,1],[-90,0],[-56,0],[0,-100]],[[1766,5734],[130,-1],[58,1],[154,0]],[[2108,5734],[0,-217],[0,-366]],[[2107,4208],[0,382]],[[2107,4590],[21,0],[49,-1],[88,0],[1,-10],[15,-34],[4,19],[4,-4],[13,0],[15,-36],[2,-27],[5,-5]],[[1823,4398],[0,-954]],[[1654,4398],[37,-1],[47,2]],[[3006,4538],[-2,14],[0,28],[3,11],[-1,27],[3,81],[5,37],[2,43],[3,16],[-1,47],[10,17],[5,33],[-3,31],[4,32],[0,18]],[[3034,4973],[4,49],[6,-5],[2,12]],[[3056,4600],[-3,-35]],[[2962,4152],[-5,-13],[-2,-29],[8,-14],[0,-22],[-3,-103],[-9,-76],[-6,-22],[-5,-48],[-3,31],[-8,16],[-10,42],[-1,28],[0,4],[2,11]],[[2922,3980],[8,15],[0,15],[9,31],[2,17],[-9,39],[0,24],[-3,6],[-1,22],[5,33],[-3,20],[7,40],[2,21],[4,13]],[[2943,4276],[13,-41],[9,-28],[-3,-55]],[[2137,3444],[0,-95]],[[2137,3349],[-1,0],[0,-474],[0,-193],[0,-192],[-101,0],[-1,-18],[3,-22]],[[2037,2450],[-48,0],[0,-87],[-24,0]],[[2972,4205],[13,-15],[2,11],[10,0],[6,6],[8,31],[1,-22],[5,-10],[-11,-28],[-22,-42],[-9,-8],[-6,2],[-5,-9],[-2,31]],[[2943,4276],[-2,14],[-4,1],[-5,32],[1,29],[-4,22],[-2,-2],[-3,27],[-125,0],[0,48],[0,3]],[[2799,4450],[17,54],[3,26],[5,18],[-2,32],[-2,7],[-2,52],[17,22],[15,-1],[6,-5],[6,-21],[4,8],[12,-1],[8,14],[8,34],[5,1],[0,52],[3,31],[-7,21],[2,24],[11,32],[4,28],[14,64],[13,32],[19,-5],[23,4]],[[2981,4973],[1,-39],[-2,-36],[3,-34],[-1,-37],[-3,-39],[2,-52],[-1,-16],[4,-31],[-1,-132],[0,-16]],[[2909,3359],[4,-77],[-8,8],[-1,-10],[-10,-11],[-1,-11],[-7,-3],[0,-13],[8,9],[1,-8],[9,9],[3,-18],[5,8],[2,-46],[-2,-22],[-3,-2],[-8,-47],[-9,-2],[-2,-33],[4,-32],[4,-6],[-6,-54],[-6,7],[-9,-6],[-6,-11],[-10,-37],[-7,-48],[-4,-60],[-6,13],[-11,-12]],[[2833,2844],[-32,181],[-32,4],[1,21],[-5,33],[-3,-12],[0,20],[-35,10],[-8,-8],[-6,-17],[-10,-13]],[[2669,3061],[1,45],[5,4],[3,31],[7,29],[7,1],[7,29],[8,10],[6,43],[4,13],[1,-19],[11,37],[5,-8],[4,36],[5,9],[1,45]],[[2744,3366],[20,-5],[19,-3],[23,-1],[103,2]],[[2321,5149],[-213,2]],[[2108,5734],[194,0]],[[2777,4138],[-4,-10],[2,-21],[0,-29],[-4,-46],[-3,-70],[-11,-62],[-3,-8],[-4,12],[-3,-27],[-3,1],[-4,-36],[1,-22],[-3,-18],[-4,29],[-5,-46],[1,-29],[-3,-11],[-1,-25],[-8,-4]],[[2694,4347],[11,-26],[3,-15],[3,14],[6,-30],[4,-9],[14,25],[7,-6],[9,36],[12,34],[14,24]],[[2777,4394],[0,-256]],[[2380,2803],[-11,21],[-3,22],[-7,18],[-2,-16],[-8,1],[-1,10],[-7,-19],[-3,11],[-6,-10],[-5,-29],[-2,17],[-6,14],[-7,0],[-2,21],[-7,-42],[-2,24],[-3,-8],[-3,16],[-7,15],[-5,-25],[-2,26],[-4,3],[-2,21],[-6,8],[-3,-18],[-3,16],[-5,-2],[-6,17],[-6,-2],[-2,36],[-9,2],[-4,-6],[-6,37],[-2,-3],[0,370],[-52,0],[-34,0]],[[1534,4399],[-4,22],[-2,61],[0,43],[-4,33],[3,32],[2,51],[4,54],[2,48],[3,162],[0,22],[3,71],[1,99],[-2,54],[1,32],[12,29]],[[1553,5212],[5,-22],[4,5],[3,2],[6,-20],[3,-23],[1,-57],[15,-21],[12,30],[8,3],[9,-10],[1,-13],[16,27],[3,-9],[9,5],[7,19],[12,17],[12,4],[4,12],[58,-1]],[[2807,3964],[-30,0],[0,174]],[[2777,4394],[5,11],[17,45]],[[3045,4302],[-6,-4],[3,39]],[[3042,4343],[-4,3],[-3,-28],[-1,-40],[-11,-9]],[[2833,2844],[-5,-10],[-6,-31],[-6,-49],[-1,-40],[-5,-31],[-6,0],[-2,-23],[-6,-25],[-4,-28],[-6,-11],[-6,-29],[-1,-14],[-6,-16],[-6,-40]],[[2107,4590],[0,380]],[[2687,3368],[57,-2]],[[2398,2049],[-5,-1],[-14,-26],[-6,15],[-1,31],[-3,-22],[-3,5],[-1,-27],[3,-11],[0,-36],[-5,-37],[-9,-47],[-17,-51],[-2,9],[-5,-13],[0,12],[-7,-9],[-3,24],[-2,-5],[7,-49],[-5,-16],[-5,10],[-1,-35],[-7,-35],[-6,-66],[-4,-69],[-3,5],[-1,-25],[3,6],[-2,-50],[-2,-2],[0,-28],[3,-16],[1,-57],[3,-20],[0,-37],[3,-32],[-9,-20],[-3,25],[-7,10],[-9,-3],[-8,32],[-5,3],[-5,25],[-6,8],[-4,24],[-2,58],[-5,34],[0,30],[-2,31],[1,27],[-4,30],[-3,4],[-5,27],[-1,34],[-5,32],[-6,26],[-3,57],[-2,16],[-4,46],[-1,38],[-4,27],[-6,24],[-1,16],[-6,15],[-4,42],[-13,9],[-7,-2],[-7,15],[-1,-20],[-7,-6],[-5,-40],[-3,-64],[-2,-1],[-4,-37],[-5,-1],[-7,29],[-17,47],[-4,25],[-6,24],[-5,54],[-1,49],[-4,40],[-2,35],[-3,22],[-11,32],[-6,44],[-4,15],[-6,38],[-7,20],[-5,50],[-4,11]],[[1908,4399],[0,-192],[57,0]],[[2981,4973],[30,-2],[23,2]],[[2927,3641],[-4,-32],[-3,-12],[-3,-44],[-6,-71],[-5,-15],[-1,27],[2,58],[8,74]],[[2874,3756],[-4,-8],[-2,-28],[1,-19],[8,6],[1,-31],[10,-12],[3,-24],[8,-26],[-4,-54],[4,-41],[-4,-20],[-1,-24],[4,-15],[-4,-23],[-6,30],[-1,-10],[5,-22],[14,-5],[3,-71]],[[2736,3547],[-1,-16],[4,-32],[5,-16],[4,1],[5,25],[4,-20],[7,11],[13,36],[1,-11],[5,17],[0,34],[4,30],[5,29],[2,34],[6,36],[2,44],[5,-27],[4,-8],[3,16],[6,68],[4,-17],[13,77],[2,57],[15,-64],[3,37]],[[1553,5212],[-5,7],[-4,-12],[-6,17],[1,26],[4,14],[-6,40],[-4,103],[-2,14],[-3,73],[-6,28],[-2,56],[3,38],[6,-18],[11,-24],[8,1],[8,-9],[8,9],[3,-16],[7,1],[5,-42],[3,3],[1,-56],[2,-52],[3,6],[-3,43],[1,43],[4,44],[-3,18],[-1,31],[-3,35],[2,25],[-2,29],[-5,4],[-4,22],[1,21],[163,0]],[[1576,5602],[4,9],[0,-39],[-5,15],[1,15]],[[1568,5655],[3,25],[4,-30],[-1,-27],[-7,8],[1,24]],[[2576,4989],[-1,-23],[-6,-4],[-4,-44],[-2,-30],[3,-6],[5,20],[4,38],[6,15],[5,48],[6,10],[-1,-25],[-4,-23],[-8,-79],[-2,-44],[0,-32],[-3,-10],[-2,-43],[1,-37],[-3,-24],[-3,-59],[0,-47],[4,-42],[-1,-55]],[[2450,5296],[6,-2],[20,33],[8,17],[2,-13],[-4,-25],[9,-33],[5,-3]]]},d.prototype.latLngToXY=function(t,e){return this.projection([e,t])},d.prototype.addLayer=function(t,e,n){var r;return r=n?this.svg.insert("g",":first-child"):this.svg.append("g"),r.attr("id",e||"").attr("class",t||"")},d.prototype.updateChoropleth=function(t){var e=this.svg;for(var n in t)if(t.hasOwnProperty(n)){var r,i=t[n];if(!n)continue;if(r="string"==typeof i?i:"string"==typeof i.color?i.color:this.options.fills[i.fillKey],i===Object(i)){this.options.data[n]=p(i,this.options.data[n]||{});this.svg.select("."+n).attr("data-info",JSON.stringify(this.options.data[n]))}e.selectAll("."+n).transition().style("fill",r)}},d.prototype.updatePopup=function(t,e,n){var r=this;t.on("mousemove",null),t.on("mousemove",function(){var i=m.mouse(this);m.select(r.svg[0][0].parentNode).select(".datamaps-hoverover").style("top",i[1]+30+"px").html(function(){var r=JSON.parse(t.attr("data-info"));return n.popupTemplate(e,r)}).style("left",i[0]+"px")}),m.select(r.svg[0][0].parentNode).select(".datamaps-hoverover").style("display","block")},d.prototype.addPlugin=function(t,e){"undefined"==typeof d.prototype[t]&&(d.prototype[t]=function(n,r,i,o){var a;"undefined"==typeof o&&(o=!1),"function"==typeof r&&(i=r,r=void 0),r=p(r||{},y[t+"Config"]),!o&&this.options[t+"Layer"]?(a=this.options[t+"Layer"],r=r||this.options[t+"Options"]):(a=this.addLayer(t),this.options[t+"Layer"]=a,this.options[t+"Options"]=r),e.apply(this,[a,n,r]),i&&i(a)})},"function"==typeof define&&define.amd?define("datamaps",function(t){return m=t("d3"),g=t("topojson"),d}):window.Datamap=window.Datamaps=d,window.jQuery&&(window.jQuery.fn.datamaps=function(t,e){t=t||{},t.element=this[0];var n=new d(t);return"function"==typeof e&&e(n,t),this}),e.exports=d},{d3:275,topojson:276}],275:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],276:[function(t,e,r){!function(){function t(t,e){function n(e){var n,r=t.arcs[0>e?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],0>e?[n,i]:[i,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){i[0>t?~t:t]=1}),s.push(r)}}var i={},o={},a={},s=[],u=-1;return e.forEach(function(n,r){var i,o=t.arcs[0>n?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++u],e[u]=n,e[r]=i)}),e.forEach(function(t){var e,r,i=n(t),s=i[0],u=i[1];if(e=a[s])if(delete a[e.end],e.push(t),e.end=u,r=o[u]){delete o[r.start];var l=r===e?e:e.concat(r);o[l.start=e.start]=a[l.end=r.end]=l}else o[e.start]=a[e.end]=e;else if(e=o[u])if(delete o[e.start],e.unshift(t),e.start=s,r=a[s]){delete a[r.end];var c=r===e?e:r.concat(e);o[c.start=r.start]=a[c.end=e.end]=c}else o[e.start]=a[e.end]=e;else e=[t],o[e.start=s]=a[e.end=u]=e}),r(a,o),r(o,a),e.forEach(function(t){i[0>t?~t:t]||s.push([t])}),s}function r(e,n,r){function i(t){var e=0>t?~t:t;(c[e]||(c[e]=[])).push({i:t,g:l})}function o(t){t.forEach(i)}function a(t){t.forEach(o)}function s(t){"GeometryCollection"===t.type?t.geometries.forEach(s):t.type in h&&(l=t,h[t.type](t.arcs))}var u=[];if(arguments.length>1){var l,c=[],h={LineString:o,MultiLineString:a,Polygon:a,MultiPolygon:function(t){t.forEach(a)}};s(n),c.forEach(arguments.length<3?function(t){
u.push(t[0].i)}:function(t){r(t[0].g,t[t.length-1].g)&&u.push(t[0].i)})}else for(var f=0,p=e.arcs.length;p>f;++f)u.push(f);return{type:"MultiLineString",arcs:t(e,u)}}function i(e,r){function i(t){t.forEach(function(e){e.forEach(function(e){(a[e=0>e?~e:e]||(a[e]=[])).push(t)})}),u.push(t)}function o(t){return f(s(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var a={},u=[],l=[];return r.forEach(function(t){"Polygon"===t.type?i(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(i)}),u.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,l.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){a[0>t?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),u.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:l.map(function(r){var i=[];if(r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){a[0>t?~t:t].length<2&&i.push(t)})})}),i=t(e,i),(n=i.length)>1)for(var s,u=o(r[0][0]),l=0;l<n;++l)if(u===o(i[l])){s=i[0],i[0]=i[l],i[l]=s;break}return i})}}function o(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return a(t,e)})}:a(t,e)}function a(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:s(t,e)};return null==e.id&&delete n.id,n}function s(t,e){function n(t,e){e.length&&e.pop();for(var n,r=c[0>t?~t:t],i=0,o=r.length;o>i;++i)e.push(n=r[i].slice()),l(n,i);0>t&&u(e,o)}function r(t){return t=t.slice(),l(t,0),t}function i(t){for(var e=[],r=0,i=t.length;i>r;++r)n(t[r],e);return e.length<2&&e.push(e[0].slice()),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0].slice());return e}function a(t){return t.map(o)}function s(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(s)}:e in h?{type:e,coordinates:h[e](t)}:null}var l=g(t.transform),c=t.arcs,h={Point:function(t){return r(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(r)},LineString:function(t){return i(t.arcs)},MultiLineString:function(t){return t.arcs.map(i)},Polygon:function(t){return a(t.arcs)},MultiPolygon:function(t){return t.arcs.map(a)}};return s(e)}function u(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function l(t,e){for(var n=0,r=t.length;r>n;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}function c(t){function e(t,e){t.forEach(function(t){0>t&&(t=~t);var n=i[t];n?n.push(e):i[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}function r(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,e)}):t.type in a&&a[t.type](t.arcs,e)}var i={},o=t.map(function(){return[]}),a={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};t.forEach(r);for(var s in i)for(var u=i[s],c=u.length,h=0;c>h;++h)for(var f=h+1;c>f;++f){var p,d=u[h],m=u[f];(p=o[d])[s=l(p,m)]!==m&&p.splice(s,0,m),(p=o[m])[s=l(p,d)]!==d&&p.splice(s,0,d)}return o}function h(t,e){function n(t){o.remove(t),t[1][2]=e(t),o.push(t)}var r=g(t.transform),i=y(t.transform),o=m();return e||(e=p),t.arcs.forEach(function(t){for(var a,s,u=[],l=0,c=0,h=t.length;h>c;++c)s=t[c],r(t[c]=[s[0],s[1],1/0],c);for(var c=1,h=t.length-1;h>c;++c)a=t.slice(c-1,c+2),a[1][2]=e(a),u.push(a),o.push(a);for(var c=0,h=u.length;h>c;++c)a=u[c],a.previous=u[c-1],a.next=u[c+1];for(;a=o.pop();){var f=a.previous,p=a.next;a[1][2]<l?a[1][2]=l:l=a[1][2],f&&(f.next=p,f[2]=a[2],n(f)),p&&(p.previous=f,p[0]=a[0],n(p))}t.forEach(i)}),t}function f(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return.5*o}function p(t){var e=t[0],n=t[1],r=t[2];return Math.abs((e[0]-r[0])*(n[1]-e[1])-(e[0]-n[0])*(r[1]-e[1]))}function d(t,e){return t[1][2]-e[1][2]}function m(){function t(t,e){for(;e>0;){var n=(e+1>>1)-1,i=r[n];if(d(t,i)>=0)break;r[i._=e]=i,r[t._=e=n]=t}}function e(t,e){for(;;){var n=e+1<<1,o=n-1,a=e,s=r[a];if(i>o&&d(r[o],s)<0&&(s=r[a=o]),i>n&&d(r[n],s)<0&&(s=r[a=n]),a===e)break;r[s._=e]=s,r[t._=e=a]=t}}var n={},r=[],i=0;return n.push=function(e){return t(r[e._=i]=e,i++),i},n.pop=function(){if(!(0>=i)){var t,n=r[0];return--i>0&&(t=r[i],e(r[t._=0]=t,0)),n}},n.remove=function(n){var o,a=n._;if(r[a]===n)return a!==--i&&(o=r[i],(d(o,n)<0?t:e)(r[o._=a]=o,a)),a},n}function g(t){if(!t)return v;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0),t[0]=(e+=t[0])*r+o,t[1]=(n+=t[1])*i+a}}function y(t){if(!t)return v;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=(t[0]-o)/r|0,l=(t[1]-a)/i|0;t[0]=u-e,t[1]=l-n,e=u,n=l}}function v(){}var b={version:"1.6.19",mesh:function(t){return s(t,r.apply(this,arguments))},meshArcs:r,merge:function(t){return s(t,i.apply(this,arguments))},mergeArcs:i,feature:o,neighbors:c,presimplify:h};"function"==typeof define&&define.amd?define(b):"object"==typeof e&&e.exports?e.exports=b:this.topojson=b}()},{}],277:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],278:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:279,colorbrewer:273,"d3-color":284,"d3-scale":285,dup:10,lodash:286,superagent:287}],279:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":281,"color-string":282,dup:11}],280:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],281:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":280,dup:13}],282:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":283,dup:14}],283:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],284:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],285:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],286:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],287:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:288,reduce:289}],288:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],289:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],290:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:291,"insert-css":292,lodash:394,qwery:293}],291:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],292:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],293:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],294:[function(t,e,n){"use strict";var r=t("lightning-visualization"),i=(t("datamaps-all-browserify"),t("jquery")),o=t("lodash"),a=t("colorbrewer"),s=t("lightning-client-utils"),u=r.extend({defaultColormap:"Purples",init:function(){this.$el=i(this.selector).first(),this.$el.append('<div id="map-container"></div>'),this.render()},render:function(){var t=this.width,e=this.height,n=this.data,r=(this.selector,n.regions),i=n.values,a=this,s={},u={defaultFill:"#ddd"},l=o.every(r,function(t){return 3===t.length}),c=a.scaleColors(i,8,n.colormap);o.each(r,function(t,e){var n=c(i[e]);u[n]=n,s[t]={fillKey:n,value:i[e]}});var h=new Datamap({element:a.$el.find("#map-container")[0],height:e,width:t,scope:l?"world":"usa",fills:u,data:s,geographyConfig:{popupTemplate:function(t,e){},highlightBorderColor:"#fff",highlightFillColor:"rgb(150,150,150)"}});this.map=h},scaleColors:function(t,e,n){var r=d3.min(t),i=d3.max(t),u=o.uniq(t).length;u>8&&(u=8);var l;l="Lightning"==n?s.getColors(u):a[n][u];var c=d3.range(e).map(function(t){return t*(i-r)/(u-1)+r}),h=d3.scale.linear().domain(c).range(l);return h},formatData:function(t){return t.colormap=t.colormap?t.colormap:this.defaultColormap,t}});e.exports=u},{colorbrewer:273,"datamaps-all-browserify":274,jquery:277,"lightning-client-utils":278,"lightning-visualization":290,lodash:394}],295:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":315,dup:6}],296:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],297:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":296,dup:8}],298:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],299:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:300,colorbrewer:297,"d3-color":305,"d3-scale":306,dup:10,lodash:307,superagent:308}],300:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":302,"color-string":303,dup:11}],301:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],302:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":301,dup:13}],303:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":304,dup:14}],304:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],305:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],306:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],307:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],308:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:309,reduce:310}],309:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],310:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],311:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:312,"insert-css":313,lodash:394,qwery:314}],312:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],313:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],314:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],315:[function(t,e,n){(function(n){"use strict";var r=t("d3"),i=t("lodash"),o=t("lightning-client-utils"),a=t("colorbrewer"),s=t("lightning-visualization"),u=n("QGltcG9ydCB1cmwoaHR0cDovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zKTsKCi5heGlzLWxhYmVsIHsKCWZpbGw6ICM5Mzk1OTg7CiAgICBmb250LWZhbWlseTogJ09wZW4gU2FucycsIHNhbnMtc2VyaWY7CiAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lOwogICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKfQoKLnNlbGVjdGVkIHsKCWZpbGw6IGJsYWNrOwp9Cgouc2VsZWN0ZWQtc3RpY2t5IHsKCWZpbGw6IGJsYWNrOwp9","base64"),l=s.extend({getDefaultStyles:function(){return{colormap:"Purples"}},getDefaultOptions:function(){return{numbers:!1}},init:function(){this.margin={left:0,top:0},this.data.rowLabels&&(this.margin.left=80),this.data.columnLabels&&(this.margin.top=80),this.render()},css:u,render:function(){function t(){r.select(this).classed("selected",!0)}function e(){r.select(this).classed("selected",!1)}function n(){var t=r.select(this),e=t.node().__data__,n=i.indexOf(p.columnLabels,e),o=i.indexOf(p.rowLabels,e);n>-1&&(A=a(A,n)),o>-1&&(D=a(D,o)),u()}function a(t,e){return i.indexOf(t,e)>-1?[]:[e]}function s(){A=[],D=[],u()}function u(){r.selectAll(".row-label").classed("selected-sticky",function(t){return D.length>0?i.indexOf(p.rowLabels,t)==D:!1}),r.selectAll(".column-label").classed("selected-sticky",function(t){return A.length>0?i.indexOf(p.columnLabels,t)==A:!1}),T.clearRect(0,0,c,h),i.forEach(p.entries,function(t){var e;e=A.length>0||D.length>0?A.length>0&&i.indexOf(A,t.x)>-1?1:D.length>0&&i.indexOf(D,t.y)>-1?1:.2:1;var n=m.getColor(t,e);if(T.beginPath(),T.fillStyle=n,T.strokeStyle="white",T.lineWidth=v,T.rect(m.x(t.x),m.y(t.y),m.x.rangeBand(),m.y.rangeBand()),T.fill(),T.stroke(),T.closePath(),d.numbers){var r=m.formatLabel(t.z);T.font=L+"px monospace",t.z<=m.data.zmin+(m.data.zmax-m.data.zmin)/2?1>e?T.fillStyle=o.buildRGBA("black",e/5):T.fillStyle=o.buildRGBA("black",e):T.fillStyle=o.buildRGBA("white",e),T.textBaseline="middle",T.textAlign="center",T.fillText(r,m.x(t.x)+m.x.rangeBand()/2,m.y(t.y)+m.y.rangeBand()/2)}})}function l(){if(38==r.event.keyCode||40==r.event.keyCode){if(r.event.preventDefault(),38==r.event.keyCode&&(C+=.05,C>.4))return void(C=.4);if(40==r.event.keyCode&&(C-=.05,-2>C))return void(C=-2);var t=m.data.zmax-m.data.zmin,e=o.linspace(m.data.zmin+t*C,m.data.zmax-t*C,m.data.distinct);m.updateDomain(e),u()}(37==r.event.keyCode||39==r.event.keyCode)&&(r.event.preventDefault(),37==r.event.keyCode&&(M-=1,0>M&&(M=w.length-1)),39==r.event.keyCode&&(M+=1,M>w.length-1&&(M=0)),m.updateRange(w[M]),u())}var c=this.width,h=this.height,f=this.margin,p=this.data,d=this.options,m=this,g=p.nrow,y=p.ncol,v=Math.max(1-9e-5*g*y,.1),b=p.colormap?p.colormap:this.styles.colormap;this.makeScales(b);var _,x=r.select(this.el).append("div").style("width",c).style("height",h).style("position","relative");_=y>g?Math.min((h-f.top)/g,(c-f.left)/y):(h-f.top)/g,this.y=r.scale.ordinal().rangeBands([0,g*_]).domain(r.range(g)),this.x=r.scale.ordinal().rangeBands([0,y*_]).domain(r.range(y)),this.sortRows(""),h=g*m.y.rangeBand(),c=y*m.x.rangeBand();var w=["Purples","Blues","Greens","Oranges","Reds","Greys"],M=0,C=0,P=x.append("svg").attr("width",c+f.left).attr("height",h+f.top).style("position","absolute").on("dblclick",s),E=x.append("canvas").attr("width",c).attr("height",h).attr("id","canvas1").style("margin-left",f.left+"px").style("margin-top",f.top+"px"),T=E.node().getContext("2d");r.select(this.el).attr("tabindex",-1),r.select(this.el).on("keydown",l);var S=Math.min(72*_/96/2,14);S=Math.max(S,8);var L=72*_/96/2.5;p.columnLabels&&P.selectAll(".column-label").data(p.columnLabels).enter().append("text").attr("text-anchor","start").attr("transform",function(t,e){return"translate("+(f.left+m.x(e)+m.x.rangeBand()/2)+","+.9*f.top+")rotate(-50)"}).attr("class","axis-label column-label").style("font-size",S+"px").text(function(t){return t}).on("mouseover",t).on("mouseout",e).on("click",n),p.rowLabels&&P.selectAll(".row-label").data(p.rowLabels).enter().append("text").attr("text-anchor","end").attr("x",.9*f.left).attr("y",function(t,e){return f.top+m.y(e)+m.y.rangeBand()/2}).attr("dy","0.35em").attr("class","axis-label row-label").style("font-size",S+"px").text(function(t){return t}).on("mouseover",t).on("mouseout",e).on("click",n);var A=[],D=[];u()},sortRows:function(t){},makeScales:function(t){this.c=r.scale.linear(),this.c.domain(o.linspace(this.data.zmin,this.data.zmax,this.data.distinct));var e;e="Lightning"==t?o.getColors(this.data.distinct):a[t][this.data.distinct],this.c.range(e)},updateRange:function(t){this.c.range(a[t][this.data.distinct])},updateDomain:function(t){this.c.domain(t)},getColor:function(t,e){return o.buildRGBA(this.c(t.z),e)},formatLabel:function(t){return parseFloat(r.format(".2f")(t)).toString()},formatData:function(t){var e=[];i.each(t.matrix,function(n,r){i.each(n,function(n,i){var o={};o.x=i,o.y=r,o.z=n,t.rowLabels&&(o.r=t.rowLabels[r]),t.columnLabels&&(o.c=t.columnLabels[i]),e.push(o)})});var n=t.matrix.length,o=t.matrix[0].length,a=r.min(e,function(t){return t.z}),s=r.max(e,function(t){return t.z}),u=i.uniq(i.flatten(t.matrix)).length;return u>8&&(u=8),{entries:e,nrow:n,ncol:o,colormap:t.colormap,rowLabels:t.rowLabels,columnLabels:t.columnLabels,zmin:a,zmax:s,distinct:u}},updateData:function(t){this.data=t,this.draw()}});e.exports=l}).call(this,t("buffer").Buffer)},{buffer:1,colorbrewer:297,d3:298,"lightning-client-utils":299,"lightning-visualization":311,lodash:394}],316:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":337,dup:6}],317:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],318:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:319,colorbrewer:325,"d3-color":317,"d3-scale":326,dup:10,lodash:327,superagent:328}],319:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":321,"color-string":322,dup:11}],320:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],321:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":320,dup:13}],322:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":323,dup:14}],323:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],324:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],325:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":324,dup:8}],326:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],327:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],328:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:329,reduce:330}],329:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],330:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],331:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:332,"insert-css":333,lodash:394,qwery:334}],332:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],333:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],334:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],335:[function(t,e,n){e.exports=function(t){t.FlyControls=function(e,n,r){function i(t,e){return function(){e.apply(t,arguments)}}this.object=e,r=r||{},this.domElement=void 0!==n?n:document,n&&this.domElement.setAttribute("tabindex",-1),this.movementSpeed=void 0===r.movementSpeed?1:r.movementSpeed,this.rollSpeed=void 0===r.rollSpeed?.005:r.rollSpeed,this.dragToLook=!0,this.autoForward=!1,this.tmpQuaternion=new t.Quaternion,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new t.Vector3(0,0,0),this.rotationVector=new t.Vector3(0,0,0);var o=Date.now();this.handleEvent=function(t){"function"==typeof this[t.type]&&this[t.type](t)},this.keydown=function(t){if(!t.altKey){switch(t.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}var e=[38,40,37,39];e.indexOf(t.keyCode)>-1&&t.preventDefault(),this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(t){switch(t.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(t){if(this.domElement!==document&&this.domElement.focus(),t.preventDefault(),t.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(t){if(!this.dragToLook||this.mouseStatus>0){var e=this.getContainerDimensions(),n=e.size[0]/2,r=e.size[1]/2;this.moveState.yawLeft=-(t.pageX-e.offset[0]-n)/n,this.moveState.pitchDown=(t.pageY-e.offset[1]-r)/r,this.updateRotationVector()}},this.mouseout=function(t){t.preventDefault(),t.stopPropagation(),this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.updateRotationVector(),this.updateMovementVector()},this.mouseup=function(t){if(t.preventDefault(),t.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(t){var e=Date.now(),t=(e-o)/10,n=t*this.movementSpeed,r=t*this.rollSpeed;this.object.translateX(this.moveVector.x*n),this.object.translateY(this.moveVector.y*n),this.object.translateZ(this.moveVector.z*n),this.tmpQuaternion.set(this.rotationVector.x*r,this.rotationVector.y*r,this.rotationVector.z*r,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),this.object.rotation.setFromQuaternion(this.object.quaternion,this.object.rotation.order),o=e},this.updateMovementVector=function(){var t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-t+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousemove",i(this,this.mousemove),!1),this.domElement.addEventListener("mousedown",i(this,this.mousedown),!1),this.domElement.addEventListener("mouseup",i(this,this.mouseup),!1),this.domElement.addEventListener("mouseout",i(this,this.mouseout),!1),this.domElement.addEventListener("keydown",i(this,this.keydown),!1),this.domElement.addEventListener("keyup",i(this,this.keyup),!1),this.updateMovementVector(),this.updateRotationVector()}}},{}],336:[function(t,e,n){"use strict";var r={REVISION:"70"};"object"==typeof e&&(e.exports=r),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:t>0?1:0}),r.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},r.CullFaceNone=0,r.CullFaceBack=1,r.CullFaceFront=2,r.CullFaceFrontBack=3,r.FrontFaceDirectionCW=0,r.FrontFaceDirectionCCW=1,r.BasicShadowMap=0,r.PCFShadowMap=1,r.PCFSoftShadowMap=2,r.FrontSide=0,r.BackSide=1,r.DoubleSide=2,r.NoShading=0,r.FlatShading=1,r.SmoothShading=2,r.NoColors=0,r.FaceColors=1,r.VertexColors=2,r.NoBlending=0,r.NormalBlending=1,r.AdditiveBlending=2,r.SubtractiveBlending=3,r.MultiplyBlending=4,r.CustomBlending=5,r.AddEquation=100,r.SubtractEquation=101,r.ReverseSubtractEquation=102,r.MinEquation=103,r.MaxEquation=104,r.ZeroFactor=200,r.OneFactor=201,r.SrcColorFactor=202,r.OneMinusSrcColorFactor=203,r.SrcAlphaFactor=204,r.OneMinusSrcAlphaFactor=205,r.DstAlphaFactor=206,r.OneMinusDstAlphaFactor=207,r.DstColorFactor=208,r.OneMinusDstColorFactor=209,r.SrcAlphaSaturateFactor=210,r.MultiplyOperation=0,r.MixOperation=1,r.AddOperation=2,r.UVMapping=300,r.CubeReflectionMapping=301,r.CubeRefractionMapping=302,r.EquirectangularReflectionMapping=303,r.EquirectangularRefractionMapping=304,r.SphericalReflectionMapping=305,r.RepeatWrapping=1e3,r.ClampToEdgeWrapping=1001,r.MirroredRepeatWrapping=1002,r.NearestFilter=1003,r.NearestMipMapNearestFilter=1004,r.NearestMipMapLinearFilter=1005,r.LinearFilter=1006,r.LinearMipMapNearestFilter=1007,r.LinearMipMapLinearFilter=1008,r.UnsignedByteType=1009,r.ByteType=1010,r.ShortType=1011,r.UnsignedShortType=1012,r.IntType=1013,r.UnsignedIntType=1014,r.FloatType=1015,r.UnsignedShort4444Type=1016,r.UnsignedShort5551Type=1017,r.UnsignedShort565Type=1018,r.AlphaFormat=1019,r.RGBFormat=1020,r.RGBAFormat=1021,r.LuminanceFormat=1022,r.LuminanceAlphaFormat=1023,r.RGBEFormat=r.RGBAFormat,r.RGB_S3TC_DXT1_Format=2001,r.RGBA_S3TC_DXT1_Format=2002,r.RGBA_S3TC_DXT3_Format=2003,r.RGBA_S3TC_DXT5_Format=2004,r.RGB_PVRTC_4BPPV1_Format=2100,r.RGB_PVRTC_2BPPV1_Format=2101,r.RGBA_PVRTC_4BPPV1_Format=2102,r.RGBA_PVRTC_2BPPV1_Format=2103,r.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},r.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},r.Color=function(t){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(t)},r.Color.prototype={constructor:r.Color,r:1,g:1,b:1,set:function(t){return t instanceof r.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(0===e)this.r=this.g=this.b=n;else{var r=function(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+6*(e-t)*(2/3-n):t};e=.5>=n?n*(1+e):n+e-n*e,n=2*n-e,this.r=r(n,e,t+1/3),this.g=r(n,e,t),this.b=r(n,e,t-1/3)}return this},setStyle:function(t){return/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(t)?(t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(t),this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this):/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(t)?(t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(t),this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this):/^\#([0-9a-f]{6})$/i.test(t)?(t=/^\#([0-9a-f]{6})$/i.exec(t),this.setHex(parseInt(t[1],16)),this):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t)?(t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t),this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this):/^(\w+)$/i.test(t)?(this.setHex(r.ColorKeywords[t]),this):void 0},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t){return this.r=t.r*t.r,this.g=t.g*t.g,this.b=t.b*t.b,this},copyLinearToGamma:function(t){return this.r=Math.sqrt(t.r),this.g=Math.sqrt(t.g),this.b=Math.sqrt(t.b),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){t=t||{h:0,s:0,l:0};var e,n=this.r,r=this.g,i=this.b,o=Math.max(n,r,i),a=Math.min(n,r,i),s=(a+o)/2;if(a===o)a=e=0;else{var u=o-a,a=.5>=s?u/(o+a):u/(2-o-a);switch(o){case n:e=(r-i)/u+(i>r?6:0);break;case r:e=(i-n)/u+2;break;case i:e=(n-r)/u+4}e/=6}return t.h=e,t.s=a,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t){return this.r=t[0],this.g=t[1],this.b=t[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new r.Color).setRGB(this.r,this.g,this.b)}},r.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},r.Quaternion=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1},r.Quaternion.prototype={constructor:r.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1==t instanceof r.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),i=Math.cos(t._y/2),o=Math.cos(t._z/2),a=Math.sin(t._x/2),s=Math.sin(t._y/2),u=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=a*i*o+n*s*u,this._y=n*s*o-a*i*u,this._z=n*i*u+a*s*o,this._w=n*i*o-a*s*u):"YXZ"===t.order?(this._x=a*i*o+n*s*u,this._y=n*s*o-a*i*u,this._z=n*i*u-a*s*o,this._w=n*i*o+a*s*u):"ZXY"===t.order?(this._x=a*i*o-n*s*u,this._y=n*s*o+a*i*u,this._z=n*i*u+a*s*o,this._w=n*i*o-a*s*u):"ZYX"===t.order?(this._x=a*i*o-n*s*u,this._y=n*s*o+a*i*u,this._z=n*i*u-a*s*o,this._w=n*i*o+a*s*u):"YZX"===t.order?(this._x=a*i*o+n*s*u,this._y=n*s*o+a*i*u,this._z=n*i*u-a*s*o,this._w=n*i*o-a*s*u):"XZY"===t.order&&(this._x=a*i*o-n*s*u,this._y=n*s*o-a*i*u,this._z=n*i*u+a*s*o,this._w=n*i*o+a*s*u),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);
return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,n=e[0];t=e[4];var r=e[8],i=e[1],o=e[5],a=e[9],s=e[2],u=e[6],e=e[10],l=n+o+e;return l>0?(n=.5/Math.sqrt(l+1),this._w=.25/n,this._x=(u-a)*n,this._y=(r-s)*n,this._z=(i-t)*n):n>o&&n>e?(n=2*Math.sqrt(1+n-o-e),this._w=(u-a)/n,this._x=.25*n,this._y=(t+i)/n,this._z=(r+s)/n):o>e?(n=2*Math.sqrt(1+o-n-e),this._w=(r-s)/n,this._x=(t+i)/n,this._y=.25*n,this._z=(a+u)/n):(n=2*Math.sqrt(1+e-n-o),this._w=(i-t)/n,this._x=(r+s)/n,this._y=(a+u)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(n,i){return void 0===t&&(t=new r.Vector3),e=n.dot(i)+1,1e-6>e?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this.onChangeCallback(),this},multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(0>a?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.acos(a),u=Math.sqrt(1-a*a);return.001>Math.abs(u)?(this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this):(a=Math.sin((1-e)*s)/u,s=Math.sin(e*s)/u,this._w=o*a+this._w*s,this._x=n*a+this._x*s,this._y=r*a+this._y*s,this._z=i*a+this._z*s,this.onChangeCallback(),this)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new r.Quaternion(this._x,this._y,this._z,this._w)}},r.Quaternion.slerp=function(t,e,n,r){return n.copy(t).slerp(e,r)},r.Vector2=function(t,e){this.x=t||0,this.y=e||0},r.Vector2.prototype={constructor:r.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t):this.y=this.x=0,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new r.Vector2,e=new r.Vector2),t.set(n,n),e.set(i,i),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return t=this.y-t.y,e*e+t*t},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},clone:function(){return new r.Vector2(this.x,this.y)}},r.Vector3=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},r.Vector3.prototype={constructor:r.Vector3,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return!1==e instanceof r.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new r.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new r.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,n)),this}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z;return t=t.elements,this.x=t[0]*e+t[3]*n+t[6]*r,this.y=t[1]*e+t[4]*n+t[7]*r,this.z=t[2]*e+t[5]*n+t[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*r+t[12],this.y=t[1]*e+t[5]*n+t[9]*r+t[13],this.z=t[2]*e+t[6]*n+t[10]*r+t[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z;t=t.elements;var i=1/(t[3]*e+t[7]*n+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*n+t[8]*r+t[12])*i,this.y=(t[1]*e+t[5]*n+t[9]*r+t[13])*i,this.z=(t[2]*e+t[6]*n+t[10]*r+t[14])*i,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z;t=t.w;var s=t*e+o*r-a*n,u=t*n+a*e-i*r,l=t*r+i*n-o*e,e=-i*e-o*n-a*r;return this.x=s*t+e*-i+u*-a-l*-o,this.y=u*t+e*-o+l*-i-s*-a,this.z=l*t+e*-a+s*-o-u*-i,this},project:function(){var t;return function(e){return void 0===t&&(t=new r.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new r.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*r,this.y=t[1]*e+t[5]*n+t[9]*r,this.z=t[2]*e+t[6]*n+t[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t,this.z*=t):this.z=this.y=this.x=0,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new r.Vector3,e=new r.Vector3),t.set(n,n,n),e.set(i,i,i),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(){var t,e;return function(n){return void 0===t&&(t=new r.Vector3),t.copy(n).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new r.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new r.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/(this.length()*t.length()),Math.acos(r.Math.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return t=this.z-t.z,e*e+n*n+t*t},setEulerFromRotationMatrix:function(t,e){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,e){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),n=this.set(t.elements[4],t.elements[5],t.elements[6]).length();return t=this.set(t.elements[8],t.elements[9],t.elements[10]).length(),this.x=e,this.y=n,this.z=t,this},setFromMatrixColumn:function(t,e){var n=4*t,r=e.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this},clone:function(){return new r.Vector3(this.x,this.y,this.z)}},r.Vector4=function(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1},r.Vector4.prototype={constructor:r.Vector4,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*r+t[12]*i,this.y=t[1]*e+t[5]*n+t[9]*r+t[13]*i,this.z=t[2]*e+t[6]*n+t[10]*r+t[14]*i,this.w=t[3]*e+t[7]*n+t[11]*r+t[15]*i,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.z=this.y=this.x=0,this.w=1),this},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r;t=t.elements;var i=t[0];r=t[4];var o=t[8],a=t[1],s=t[5],u=t[9];n=t[2],e=t[6];var l=t[10];return.01>Math.abs(r-a)&&.01>Math.abs(o-n)&&.01>Math.abs(u-e)?.1>Math.abs(r+a)&&.1>Math.abs(o+n)&&.1>Math.abs(u+e)&&.1>Math.abs(i+s+l-3)?(this.set(1,0,0,0),this):(t=Math.PI,i=(i+1)/2,s=(s+1)/2,l=(l+1)/2,r=(r+a)/4,o=(o+n)/4,u=(u+e)/4,i>s&&i>l?.01>i?(e=0,r=n=.707106781):(e=Math.sqrt(i),n=r/e,r=o/e):s>l?.01>s?(e=.707106781,n=0,r=.707106781):(n=Math.sqrt(s),e=r/n,r=u/n):.01>l?(n=e=.707106781,r=0):(r=Math.sqrt(l),e=o/r,n=u/r),this.set(e,n,r,t),this):(t=Math.sqrt((e-u)*(e-u)+(o-n)*(o-n)+(a-r)*(a-r)),.001>Math.abs(t)&&(t=1),this.x=(e-u)/t,this.y=(o-n)/t,this.z=(a-r)/t,this.w=Math.acos((i+s+l-1)/2),this)},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this.w>t.w&&(this.w=t.w),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this.w<t.w&&(this.w=t.w),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this.w<t.w?this.w=t.w:this.w>e.w&&(this.w=e.w),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new r.Vector4,e=new r.Vector4),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this},clone:function(){return new r.Vector4(this.x,this.y,this.z,this.w)}},r.Euler=function(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||r.Euler.DefaultOrder},r.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),r.Euler.DefaultOrder="XYZ",r.Euler.prototype={constructor:r.Euler,_x:0,_y:0,_z:0,_order:r.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=r.Math.clamp,o=t.elements;t=o[0];var a=o[4],s=o[8],u=o[1],l=o[5],c=o[9],h=o[2],f=o[6],o=o[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-c,o),this._z=Math.atan2(-a,t)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(c,-1,1)),.99999>Math.abs(c)?(this._y=Math.atan2(s,o),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(f,-1,1)),.99999>Math.abs(f)?(this._y=Math.atan2(-h,o),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,t))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(f,o),this._z=Math.atan2(u,t)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(i(u,-1,1)),.99999>Math.abs(u)?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,t)):(this._x=0,this._y=Math.atan2(s,o))):"XZY"===e?(this._z=Math.asin(-i(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,t)):(this._x=Math.atan2(-c,o),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,n,i){return void 0===t&&(t=new r.Matrix4),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i),this}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new r.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new r.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new r.Euler(this._x,this._y,this._z,this._order)}},r.Line3=function(t,e){this.start=void 0!==t?t:new r.Vector3,this.end=void 0!==e?e:new r.Vector3},r.Line3.prototype={constructor:r.Line3,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){return(t||new r.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new r.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var n=e||new r.Vector3;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new r.Vector3,e=new r.Vector3;return function(n,i){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var o=e.dot(e),o=e.dot(t)/o;return i&&(o=r.Math.clamp(o,0,1)),o}}(),closestPointToPoint:function(t,e,n){return t=this.closestPointToPointParameter(t,e),n=n||new r.Vector3,this.delta(n).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)},clone:function(){return(new r.Line3).copy(this)}},r.Box2=function(t,e){this.min=void 0!==t?t:new r.Vector2(1/0,1/0),this.max=void 0!==e?e:new r.Vector2(-(1/0),-(1/0))},r.Box2.prototype={constructor:r.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;n>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new r.Vector2;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){return(t||new r.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new r.Vector2).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y?!0:!1},getParameter:function(t,e){return(e||new r.Vector2).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y?!1:!0},clampPoint:function(t,e){return(e||new r.Vector2).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r.Vector2;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new r.Box2).copy(this)}},r.Box3=function(t,e){this.min=void 0!==t?t:new r.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new r.Vector3(-(1/0),-(1/0),-(1/0))},r.Box3.prototype={constructor:r.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;n>e;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new r.Vector3;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(){var t=new r.Vector3;return function(e){var n=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var i=e.geometry;if(void 0!==i)if(i instanceof r.Geometry)for(var o=i.vertices,i=0,a=o.length;a>i;i++)t.copy(o[i]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t);else if(i instanceof r.BufferGeometry&&void 0!==i.attributes.position)for(o=i.attributes.position.array,i=0,a=o.length;a>i;i+=3)t.set(o[i],o[i+1],o[i+2]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t)}),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){return(t||new r.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new r.Vector3).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z?!0:!1},getParameter:function(t,e){return(e||new r.Vector3).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?!1:!0},clampPoint:function(t,e){return(e||new r.Vector3).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r.Vector3;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new r.Vector3;return function(e){return e=e||new r.Sphere,e.center=this.center(),e.radius=.5*this.size(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3];return function(e){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new r.Box3).copy(this)}},r.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},r.Matrix3.prototype={constructor:r.Matrix3,set:function(t,e,n,r,i,o,a,s,u){var l=this.elements;return l[0]=t,l[3]=e,l[6]=n,l[1]=r,l[4]=i,l[7]=o,l[2]=a,l[5]=s,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(t){return t=t.elements,this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new r.Vector3;return function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=e.length);for(var i=0;r>i;i+=3,n+=3)t.x=e[n],t.y=e[n+1],t.z=e[n+2],t.applyMatrix3(this),e[n]=t.x,e[n+1]=t.y,e[n+2]=t.z;return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],t=t[8];return e*o*t-e*a*u-n*i*t+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){var n=t.elements,r=this.elements;if(r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4],n=n[0]*r[0]+n[1]*r[3]+n[2]*r[6],0===n){if(e)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),
this.identity(),this}return this.multiplyScalar(1/n),this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},clone:function(){return(new r.Matrix3).fromArray(this.elements)}},r.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},r.Matrix4.prototype={constructor:r.Matrix4,set:function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=f,g[7]=p,g[11]=d,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,n){var r=this.elements;return t.set(r[0],r[1],r[2]),e.set(r[4],r[5],r[6]),n.set(r[8],r[9],r[10]),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new r.Vector3;return function(e){var n=this.elements;e=e.elements;var r=1/t.set(e[0],e[1],e[2]).length(),i=1/t.set(e[4],e[5],e[6]).length(),o=1/t.set(e[8],e[9],e[10]).length();return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[4]=e[4]*i,n[5]=e[5]*i,n[6]=e[6]*i,n[8]=e[8]*o,n[9]=e[9]*o,n[10]=e[10]*o,this}}(),makeRotationFromEuler:function(t){!1==t instanceof r.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,o=t.z,a=Math.cos(n),n=Math.sin(n),s=Math.cos(i),i=Math.sin(i),u=Math.cos(o),o=Math.sin(o);if("XYZ"===t.order){t=a*u;var l=a*o,c=n*u,h=n*o;e[0]=s*u,e[4]=-s*o,e[8]=i,e[1]=l+c*i,e[5]=t-h*i,e[9]=-n*s,e[2]=h-t*i,e[6]=c+l*i,e[10]=a*s}else"YXZ"===t.order?(t=s*u,l=s*o,c=i*u,h=i*o,e[0]=t+h*n,e[4]=c*n-l,e[8]=a*i,e[1]=a*o,e[5]=a*u,e[9]=-n,e[2]=l*n-c,e[6]=h+t*n,e[10]=a*s):"ZXY"===t.order?(t=s*u,l=s*o,c=i*u,h=i*o,e[0]=t-h*n,e[4]=-a*o,e[8]=c+l*n,e[1]=l+c*n,e[5]=a*u,e[9]=h-t*n,e[2]=-a*i,e[6]=n,e[10]=a*s):"ZYX"===t.order?(t=a*u,l=a*o,c=n*u,h=n*o,e[0]=s*u,e[4]=c*i-l,e[8]=t*i+h,e[1]=s*o,e[5]=h*i+t,e[9]=l*i-c,e[2]=-i,e[6]=n*s,e[10]=a*s):"YZX"===t.order?(t=a*s,l=a*i,c=n*s,h=n*i,e[0]=s*u,e[4]=h-t*o,e[8]=c*o+l,e[1]=o,e[5]=a*u,e[9]=-n*u,e[2]=-i*u,e[6]=l*o+c,e[10]=t-h*o):"XZY"===t.order&&(t=a*s,l=a*i,c=n*s,h=n*i,e[0]=s*u,e[4]=-o,e[8]=i*u,e[1]=t*o+h,e[5]=a*u,e[9]=l*o-c,e[2]=c*o-l,e[6]=n*u,e[10]=h*o+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z,o=t.w,a=n+n,s=r+r,u=i+i;t=n*a;var l=n*s,n=n*u,c=r*s,r=r*u,i=i*u,a=o*a,s=o*s,o=o*u;return e[0]=1-(c+i),e[4]=l-o,e[8]=n+s,e[1]=l+o,e[5]=1-(t+i),e[9]=r-a,e[2]=n-s,e[6]=r+a,e[10]=1-(t+c),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new r.Vector3,e=new r.Vector3,n=new r.Vector3;return function(r,i,o){var a=this.elements;return n.subVectors(r,i).normalize(),0===n.length()&&(n.z=1),t.crossVectors(o,n).normalize(),0===t.length()&&(n.x+=1e-4,t.crossVectors(o,n).normalize()),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],p=n[2],d=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],n=n[15],_=r[0],x=r[4],w=r[8],M=r[12],C=r[1],P=r[5],E=r[9],T=r[13],S=r[2],L=r[6],A=r[10],D=r[14],I=r[3],k=r[7],N=r[11],r=r[15];return i[0]=o*_+a*C+s*S+u*I,i[4]=o*x+a*P+s*L+u*k,i[8]=o*w+a*E+s*A+u*N,i[12]=o*M+a*T+s*D+u*r,i[1]=l*_+c*C+h*S+f*I,i[5]=l*x+c*P+h*L+f*k,i[9]=l*w+c*E+h*A+f*N,i[13]=l*M+c*T+h*D+f*r,i[2]=p*_+d*C+m*S+g*I,i[6]=p*x+d*P+m*L+g*k,i[10]=p*w+d*E+m*A+g*N,i[14]=p*M+d*T+m*D+g*r,i[3]=y*_+v*C+b*S+n*I,i[7]=y*x+v*P+b*L+n*k,i[11]=y*w+v*E+b*A+n*N,i[15]=y*M+v*T+b*D+n*r,this},multiplyToArray:function(t,e,n){var r=this.elements;return this.multiplyMatrices(t,e),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new r.Vector3;return function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=e.length);for(var i=0;r>i;i+=3,n+=3)t.x=e[n],t.y=e[n+1],t.z=e[n+2],t.applyMatrix4(this),e[n]=t.x,e[n+1]=t.y,e[n+2]=t.z;return e}}(),rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+t[11]*(+e*u*c-e*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+t[15]*(-r*a*l-e*s*c+e*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},getPosition:function(){var t=new r.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[4],a=r[8],s=r[12],u=r[1],l=r[5],c=r[9],h=r[13],f=r[2],p=r[6],d=r[10],m=r[14],g=r[3],y=r[7],v=r[11],r=r[15];if(n[0]=c*m*y-h*d*y+h*p*v-l*m*v-c*p*r+l*d*r,n[4]=s*d*y-a*m*y-s*p*v+o*m*v+a*p*r-o*d*r,n[8]=a*h*y-s*c*y+s*l*v-o*h*v-a*l*r+o*c*r,n[12]=s*c*p-a*h*p-s*l*d+o*h*d+a*l*m-o*c*m,n[1]=h*d*g-c*m*g-h*f*v+u*m*v+c*f*r-u*d*r,n[5]=a*m*g-s*d*g+s*f*v-i*m*v-a*f*r+i*d*r,n[9]=s*c*g-a*h*g-s*u*v+i*h*v+a*u*r-i*c*r,n[13]=a*h*f-s*c*f+s*u*d-i*h*d-a*u*m+i*c*m,n[2]=l*m*g-h*p*g+h*f*y-u*m*y-l*f*r+u*p*r,n[6]=s*p*g-o*m*g-s*f*y+i*m*y+o*f*r-i*p*r,n[10]=o*h*g-s*l*g+s*u*y-i*h*y-o*u*r+i*l*r,n[14]=s*l*f-o*h*f-s*u*p+i*h*p+o*u*m-i*l*m,n[3]=c*p*g-l*d*g-c*f*y+u*d*y+l*f*v-u*p*v,n[7]=o*d*g-a*p*g+a*f*y-i*d*y-o*f*v+i*p*v,n[11]=a*l*g-o*c*g-a*u*y+i*c*y+o*u*v-i*l*v,n[15]=o*c*f-a*l*f+a*u*p-i*c*p-o*u*d+i*l*d,n=i*n[0]+u*n[4]+f*n[8]+g*n[12],0==n){if(e)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/n),this},translate:function(t){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,e){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(t){var e=this.elements,n=t.x,r=t.y;return t=t.z,e[0]*=n,e[4]*=r,e[8]*=t,e[1]*=n,e[5]*=r,e[9]*=t,e[2]*=n,e[6]*=r,e[10]*=t,e[3]*=n,e[7]*=r,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],Math.max(t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10])))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t=new r.Vector3,e=new r.Matrix4;return function(n,r,i){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),u=t.set(o[8],o[9],o[10]).length();0>this.determinant()&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.elements.set(this.elements),n=1/a;var o=1/s,l=1/u;return e.elements[0]*=n,e.elements[1]*=n,e.elements[2]*=n,e.elements[4]*=o,e.elements[5]*=o,e.elements[6]*=o,e.elements[8]*=l,e.elements[9]*=l,e.elements[10]*=l,r.setFromRotationMatrix(e),i.x=a,i.y=s,i.z=u,this}}(),makeFrustum:function(t,e,n,r,i,o){var a=this.elements;return a[0]=2*i/(e-t),a[4]=0,a[8]=(e+t)/(e-t),a[12]=0,a[1]=0,a[5]=2*i/(r-n),a[9]=(r+n)/(r-n),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+i)/(o-i),a[14]=-2*o*i/(o-i),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(t,e,n,i){t=n*Math.tan(r.Math.degToRad(.5*t));var o=-t;return this.makeFrustum(o*e,t*e,o,t,n,i)},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=e-t,u=n-r,l=o-i;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-((e+t)/s),a[1]=0,a[5]=2/u,a[9]=0,a[13]=-((n+r)/u),a[2]=0,a[6]=0,a[10]=-2/l,a[14]=-((o+i)/l),a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},clone:function(){return(new r.Matrix4).fromArray(this.elements)}},r.Ray=function(t,e){this.origin=void 0!==t?t:new r.Vector3,this.direction=void 0!==e?e:new r.Vector3},r.Ray.prototype={constructor:r.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new r.Vector3).copy(this.direction).multiplyScalar(t).add(this.origin)},recast:function(){var t=new r.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var n=e||new r.Vector3;n.subVectors(t,this.origin);var i=n.dot(this.direction);return 0>i?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(){var t=new r.Vector3;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return 0>n?this.origin.distanceTo(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceTo(e))}}(),distanceSqToSegment:function(){var t=new r.Vector3,e=new r.Vector3,n=new r.Vector3;return function(r,i,o,a){t.copy(r).add(i).multiplyScalar(.5),e.copy(i).sub(r).normalize(),n.copy(this.origin).sub(t);var s,u=.5*r.distanceTo(i),l=-this.direction.dot(e),c=n.dot(this.direction),h=-n.dot(e),f=n.lengthSq(),p=Math.abs(1-l*l);return p>0?(r=l*h-c,i=l*c-h,s=u*p,r>=0?i>=-s?s>=i?(u=1/p,r*=u,i*=u,l=r*(r+l*i+2*c)+i*(l*r+i+2*h)+f):(i=u,r=Math.max(0,-(l*i+c)),l=-r*r+i*(i+2*h)+f):(i=-u,r=Math.max(0,-(l*i+c)),l=-r*r+i*(i+2*h)+f):-s>=i?(r=Math.max(0,-(-l*u+c)),i=r>0?-u:Math.min(Math.max(-u,-h),u),l=-r*r+i*(i+2*h)+f):s>=i?(r=0,i=Math.min(Math.max(-u,-h),u),l=i*(i+2*h)+f):(r=Math.max(0,-(l*u+c)),i=r>0?u:Math.min(Math.max(-u,-h),u),l=-r*r+i*(i+2*h)+f)):(i=l>0?-u:u,r=Math.max(0,-(l*i+c)),l=-r*r+i*(i+2*h)+f),o&&o.copy(this.direction).multiplyScalar(r).add(this.origin),a&&a.copy(e).multiplyScalar(i).add(t),l}}(),isIntersectionSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},intersectSphere:function(){var t=new r.Vector3;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;return i>o?null:(o=Math.sqrt(o-i),i=r-o,r+=o,0>i&&0>r?null:0>i?this.at(r,n):this.at(i,n))}}(),isIntersectionPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e?!0:!1},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0==e?0==t.distanceToPoint(this.origin)?0:null:(t=-(this.origin.dot(t.normal)+t.constant)/e,t>=0?t:null)},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},isIntersectionBox:function(){var t=new r.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectBox:function(t,e){var n,r,i,o,a;r=1/this.direction.x,o=1/this.direction.y,a=1/this.direction.z;var s=this.origin;return r>=0?(n=(t.min.x-s.x)*r,r*=t.max.x-s.x):(n=(t.max.x-s.x)*r,r*=t.min.x-s.x),o>=0?(i=(t.min.y-s.y)*o,o*=t.max.y-s.y):(i=(t.max.y-s.y)*o,o*=t.min.y-s.y),n>o||i>r?null:((i>n||n!==n)&&(n=i),(r>o||r!==r)&&(r=o),a>=0?(i=(t.min.z-s.z)*a,a*=t.max.z-s.z):(i=(t.max.z-s.z)*a,a*=t.min.z-s.z),n>a||i>r?null:((i>n||n!==n)&&(n=i),(r>a||r!==r)&&(r=a),0>r?null:this.at(n>=0?n:r,e)))},intersectTriangle:function(){var t=new r.Vector3,e=new r.Vector3,n=new r.Vector3,i=new r.Vector3;return function(r,o,a,s,u){if(e.subVectors(o,r),n.subVectors(a,r),i.crossVectors(e,n),o=this.direction.dot(i),o>0){if(s)return null;s=1}else{if(!(0>o))return null;s=-1,o=-o}return t.subVectors(this.origin,r),r=s*this.direction.dot(n.crossVectors(t,n)),0>r?null:(a=s*this.direction.dot(e.cross(t)),0>a||r+a>o?null:(r=-s*t.dot(i),0>r?null:this.at(r/o,u)))}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},clone:function(){return(new r.Ray).copy(this)}},r.Sphere=function(t,e){this.center=void 0!==t?t:new r.Vector3,this.radius=void 0!==e?e:0},r.Sphere.prototype={constructor:r.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new r.Box3;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).center(r);for(var i=0,o=0,a=e.length;a>o;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}}(),copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),i=e||new r.Vector3;return i.copy(t),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(t){return t=t||new r.Box3,t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return(new r.Sphere).copy(this)}},r.Frustum=function(t,e,n,i,o,a){this.planes=[void 0!==t?t:new r.Plane,void 0!==e?e:new r.Plane,void 0!==n?n:new r.Plane,void 0!==i?i:new r.Plane,void 0!==o?o:new r.Plane,void 0!==a?a:new r.Plane]},r.Frustum.prototype={constructor:r.Frustum,set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},copy:function(t){for(var e=this.planes,n=0;6>n;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements;t=n[0];var r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],l=n[7],c=n[8],h=n[9],f=n[10],p=n[11],d=n[12],m=n[13],g=n[14],n=n[15];return e[0].setComponents(o-t,l-a,p-c,n-d).normalize(),e[1].setComponents(o+t,l+a,p+c,n+d).normalize(),e[2].setComponents(o+r,l+s,p+h,n+m).normalize(),e[3].setComponents(o-r,l-s,p-h,n-m).normalize(),e[4].setComponents(o-i,l-u,p-f,n-g).normalize(),e[5].setComponents(o+i,l+u,p+f,n+g).normalize(),this},intersectsObject:function(){var t=new r.Sphere;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere),t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes,n=t.center;t=-t.radius;for(var r=0;6>r;r++)if(e[r].distanceToPoint(n)<t)return!1;return!0},intersectsBox:function(){var t=new r.Vector3,e=new r.Vector3;return function(n){for(var r=this.planes,i=0;6>i;i++){var o=r[i];t.x=0<o.normal.x?n.min.x:n.max.x,e.x=0<o.normal.x?n.max.x:n.min.x,t.y=0<o.normal.y?n.min.y:n.max.y,e.y=0<o.normal.y?n.max.y:n.min.y,t.z=0<o.normal.z?n.min.z:n.max.z,e.z=0<o.normal.z?n.max.z:n.min.z;var a=o.distanceToPoint(t),o=o.distanceToPoint(e);if(0>a&&0>o)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;6>n;n++)if(0>e[n].distanceToPoint(t))return!1;return!0},clone:function(){return(new r.Frustum).copy(this)}},r.Plane=function(t,e){this.normal=void 0!==t?t:new r.Vector3(1,0,0),this.constant=void 0!==e?e:0},r.Plane.prototype={constructor:r.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new r.Vector3,e=new r.Vector3;return function(n,r,i){return r=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,n),this}}(),copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t);return(e||new r.Vector3).copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&t>0||0>t&&e>0},intersectLine:function(){var t=new r.Vector3;return function(e,n){var i=n||new r.Vector3,o=e.delta(t),a=this.normal.dot(o);return 0!=a?(a=-(e.start.dot(this.normal)+this.constant)/a,0>a||a>1?void 0:i.copy(o).multiplyScalar(a).add(e.start)):0==this.distanceToPoint(e.start)?i.copy(e.start):void 0}}(),coplanarPoint:function(t){return(t||new r.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new r.Vector3,e=new r.Vector3,n=new r.Matrix3;return function(r,i){var o=i||n.getNormalMatrix(r),o=t.copy(this.normal).applyMatrix3(o),a=this.coplanarPoint(e);return a.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(o,a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant==this.constant},clone:function(){return(new r.Plane).copy(this)}},r.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=Array(36),r=0;return function(){for(var i=0;36>i;i++)8==i||13==i||18==i||23==i?n[i]="-":14==i?n[i]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,n[i]=e[19==i?3&t|8:t]);return n.join("")}}(),clamp:function(t,e,n){return e>t?e:t>n?n:t},clampBottom:function(t,e){return e>t?e:t},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},smoothstep:function(t,e,n){return e>=t?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return e>=t?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return Math.floor(this.randFloat(t,e))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t}},r.Spline=function(t){function e(t,e,n,r,i,o,a){return t=.5*(n-t),r=.5*(r-e),(2*(e-n)+t+r)*a+(-3*(e-n)-2*t-r)*o+t*i+e}this.points=t;var n,i,o,a,s,u,l,c,h,f=[],p={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return n=(this.points.length-1)*t,i=Math.floor(n),o=n-i,f[0]=0===i?i:i-1,f[1]=i,f[2]=i>this.points.length-2?this.points.length-1:i+1,f[3]=i>this.points.length-3?this.points.length-1:i+2,u=this.points[f[0]],l=this.points[f[1]],c=this.points[f[2]],h=this.points[f[3]],a=o*o,s=o*a,p.x=e(u.x,l.x,c.x,h.x,o,a,s),p.y=e(u.y,l.y,c.y,h.y,o,a,s),p.z=e(u.z,l.z,c.z,h.z,o,a,s),p},this.getControlPointsArray=function(){var t,e,n=this.points.length,r=[];for(t=0;n>t;t++)e=this.points[t],r[t]=[e.x,e.y,e.z];return r},this.getLength=function(t){var e,n,i,o=e=e=0,a=new r.Vector3,s=new r.Vector3,u=[],l=0;for(u[0]=0,t||(t=100),n=this.points.length*t,a.copy(this.points[0]),t=1;n>t;t++)e=t/n,i=this.getPoint(e),s.copy(i),l+=s.distanceTo(a),a.copy(i),e*=this.points.length-1,e=Math.floor(e),e!=o&&(u[e]=l,o=e);return u[u.length]=l,{chunks:u,total:l}},this.reparametrizeByArcLength=function(t){var e,n,i,o,a,s,u=[],l=new r.Vector3,c=this.getLength();for(u.push(l.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(n=c.chunks[e]-c.chunks[e-1],s=Math.ceil(t*n/c.total),o=(e-1)/(this.points.length-1),a=e/(this.points.length-1),n=1;s-1>n;n++)i=o+1/s*n*(a-o),i=this.getPoint(i),u.push(l.copy(i).clone());u.push(l.copy(this.points[e]).clone())}this.points=u}},r.Triangle=function(t,e,n){this.a=void 0!==t?t:new r.Vector3,this.b=void 0!==e?e:new r.Vector3,this.c=void 0!==n?n:new r.Vector3},r.Triangle.normal=function(){var t=new r.Vector3;return function(e,n,i,o){return o=o||new r.Vector3,o.subVectors(i,n),t.subVectors(e,n),o.cross(t),e=o.lengthSq(),e>0?o.multiplyScalar(1/Math.sqrt(e)):o.set(0,0,0)}}(),r.Triangle.barycoordFromPoint=function(){var t=new r.Vector3,e=new r.Vector3,n=new r.Vector3;return function(i,o,a,s,u){t.subVectors(s,o),e.subVectors(a,o),n.subVectors(i,o),i=t.dot(t),o=t.dot(e),a=t.dot(n);var l=e.dot(e);s=e.dot(n);var c=i*l-o*o;return u=u||new r.Vector3,0==c?u.set(-2,-1,-1):(c=1/c,l=(l*a-o*s)*c,i=(i*s-o*a)*c,u.set(1-l-i,i,l))}}(),r.Triangle.containsPoint=function(){var t=new r.Vector3;return function(e,n,i,o){return e=r.Triangle.barycoordFromPoint(e,n,i,o,t),0<=e.x&&0<=e.y&&1>=e.x+e.y}}(),r.Triangle.prototype={constructor:r.Triangle,set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new r.Vector3,e=new r.Vector3;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new r.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return r.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new r.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return r.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return r.Triangle.containsPoint(t,this.a,this.b,this.c)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)},clone:function(){return(new r.Triangle).copy(this)}},r.Clock=function(t){this.autoStart=void 0!==t?t:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},r.Clock.prototype={constructor:r.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),t=.001*(e-this.oldTime);this.oldTime=e,this.elapsedTime+=t}return t}},r.EventDispatcher=function(){},r.EventDispatcher.prototype={constructor:r.EventDispatcher,apply:function(t){t.addEventListener=r.EventDispatcher.prototype.addEventListener,t.hasEventListener=r.EventDispatcher.prototype.hasEventListener,t.removeEventListener=r.EventDispatcher.prototype.removeEventListener,t.dispatchEvent=r.EventDispatcher.prototype.dispatchEvent},addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)?!0:!1},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=[],r=e.length,i=0;r>i;i++)n[i]=e[i];for(i=0;r>i;i++)n[i].call(this,t)}}}},function(t){t.Raycaster=function(e,n,r,i){this.ray=new t.Ray(e,n),this.near=r||0,this.far=i||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var e=function(t,e){return t.distance-e.distance},n=function(t,e,r,i){if(t.raycast(e,r),!0===i){t=t.children,i=0;for(var o=t.length;o>i;i++)n(t[i],e,r,!0)}};t.Raycaster.prototype={constructor:t.Raycaster,precision:1e-4,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(e,n){n instanceof t.PerspectiveCamera?(this.ray.origin.copy(n.position),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(n.position).normalize()):n instanceof t.OrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,r){var i=[];return n(t,this,i,r),i.sort(e),i},intersectObjects:function(t,r){var i=[];if(!1==t instanceof Array)return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,a=t.length;a>o;o++)n(t[o],this,i,r);return i.sort(e),i}}}(r),r.Object3D=function(){Object.defineProperty(this,"id",{value:r.Object3DIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=r.Object3D.DefaultUp.clone();var t=new r.Vector3,e=new r.Euler,n=new r.Quaternion,i=new r.Vector3(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i}}),this.rotationAutoUpdate=!0,this.matrix=new r.Matrix4,this.matrixWorld=new r.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.userData={}},r.Object3D.DefaultUp=new r.Vector3(0,1,0),r.Object3D.prototype={constructor:r.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(t){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=t},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new r.Quaternion;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new r.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new r.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new r.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new r.Vector3;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},translateX:function(){var t=new r.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new r.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new r.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new r.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new r.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);
return this}return t===this?(console.error("THREE.Object3D.add:",t,"can't be added as a child of itself."),this):(t instanceof r.Object3D?(void 0!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add:",t,"is not an instance of THREE.Object3D."),this)},remove:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);e=this.children.indexOf(t),-1!==e&&(t.parent=void 0,t.dispatchEvent({type:"removed"}),this.children.splice(e,1))},getChildByName:function(t,e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t,e)},getObjectById:function(t,e){return this.getObjectByProperty("id",t,e)},getObjectByName:function(t,e){return this.getObjectByProperty("name",t,e)},getObjectByProperty:function(t,e,n){if(this[t]===e)return this;for(var r=0,i=this.children.length;i>r;r++){var o=this.children[r].getObjectByProperty(t,e,n);if(void 0!==o)return o}},getWorldPosition:function(t){return t=t||new r.Vector3,this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new r.Vector3,e=new r.Vector3;return function(n){return n=n||new r.Quaternion,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new r.Quaternion;return function(e){return e=e||new r.Euler,this.getWorldQuaternion(t),e.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new r.Vector3,e=new r.Quaternion;return function(n){return n=n||new r.Vector3,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new r.Quaternion;return function(e){return e=e||new r.Vector3,this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=0,n=this.children.length;n>e;e++)this.children[e].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=0,n=this.children.length;n>e;e++)this.children[e].traverseVisible(t)}},traverseAncestors:function(t){this.parent&&(t(this.parent),this.parent.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===t)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,n=this.children.length;n>e;e++)this.children[e].updateMatrixWorld(t)},toJSON:function(){var t={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},e={},n=function(n){if(void 0===t.geometries&&(t.geometries=[]),void 0===e[n.uuid]){var r=n.toJSON();delete r.metadata,e[n.uuid]=r,t.geometries.push(r)}return n.uuid},i={},o=function(e){if(void 0===t.materials&&(t.materials=[]),void 0===i[e.uuid]){var n=e.toJSON();delete n.metadata,i[e.uuid]=n,t.materials.push(n)}return e.uuid},a=function(t){var e={};if(e.uuid=t.uuid,e.type=t.type,""!==t.name&&(e.name=t.name),"{}"!==JSON.stringify(t.userData)&&(e.userData=t.userData),!0!==t.visible&&(e.visible=t.visible),t instanceof r.PerspectiveCamera?(e.fov=t.fov,e.aspect=t.aspect,e.near=t.near,e.far=t.far):t instanceof r.OrthographicCamera?(e.left=t.left,e.right=t.right,e.top=t.top,e.bottom=t.bottom,e.near=t.near,e.far=t.far):t instanceof r.AmbientLight?e.color=t.color.getHex():t instanceof r.DirectionalLight?(e.color=t.color.getHex(),e.intensity=t.intensity):t instanceof r.PointLight?(e.color=t.color.getHex(),e.intensity=t.intensity,e.distance=t.distance):t instanceof r.SpotLight?(e.color=t.color.getHex(),e.intensity=t.intensity,e.distance=t.distance,e.angle=t.angle,e.exponent=t.exponent):t instanceof r.HemisphereLight?(e.color=t.color.getHex(),e.groundColor=t.groundColor.getHex()):t instanceof r.Mesh?(e.geometry=n(t.geometry),e.material=o(t.material)):t instanceof r.Line?(e.geometry=n(t.geometry),e.material=o(t.material)):t instanceof r.Sprite&&(e.material=o(t.material)),e.matrix=t.matrix.toArray(),0<t.children.length){e.children=[];for(var i=0;i<t.children.length;i++)e.children.push(a(t.children[i]))}return e};return t.object=a(this),t},clone:function(t,e){if(void 0===t&&(t=new r.Object3D),void 0===e&&(e=!0),t.name=this.name,t.up.copy(this.up),t.position.copy(this.position),t.quaternion.copy(this.quaternion),t.scale.copy(this.scale),t.rotationAutoUpdate=this.rotationAutoUpdate,t.matrix.copy(this.matrix),t.matrixWorld.copy(this.matrixWorld),t.matrixAutoUpdate=this.matrixAutoUpdate,t.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,t.visible=this.visible,t.castShadow=this.castShadow,t.receiveShadow=this.receiveShadow,t.frustumCulled=this.frustumCulled,t.userData=JSON.parse(JSON.stringify(this.userData)),!0===e)for(var n=0;n<this.children.length;n++)t.add(this.children[n].clone());return t}},r.EventDispatcher.prototype.apply(r.Object3D.prototype),r.Object3DIdCount=0,r.Face3=function(t,e,n,i,o,a){this.a=t,this.b=e,this.c=n,this.normal=i instanceof r.Vector3?i:new r.Vector3,this.vertexNormals=i instanceof Array?i:[],this.color=o instanceof r.Color?o:new r.Color,this.vertexColors=o instanceof Array?o:[],this.vertexTangents=[],this.materialIndex=void 0!==a?a:0},r.Face3.prototype={constructor:r.Face3,clone:function(){var t=new r.Face3(this.a,this.b,this.c);t.normal.copy(this.normal),t.color.copy(this.color),t.materialIndex=this.materialIndex;for(var e=0,n=this.vertexNormals.length;n>e;e++)t.vertexNormals[e]=this.vertexNormals[e].clone();for(e=0,n=this.vertexColors.length;n>e;e++)t.vertexColors[e]=this.vertexColors[e].clone();for(e=0,n=this.vertexTangents.length;n>e;e++)t.vertexTangents[e]=this.vertexTangents[e].clone();return t}},r.Face4=function(t,e,n,i,o,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new r.Face3(t,e,n,o,a,s)},r.BufferAttribute=function(t,e){this.array=t,this.itemSize=e,this.needsUpdate=!1},r.BufferAttribute.prototype={constructor:r.BufferAttribute,get length(){return this.array.length},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;i>r;r++)this.array[t+r]=e.array[n+r]},set:function(t){return this.array.set(t),this},setX:function(t,e){return this.array[t*this.itemSize]=e,this},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},clone:function(){return new r.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},r.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(t,e)},r.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(t,e)},r.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(t,e)},r.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(t,e)},r.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(t,e)},r.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(t,e)},r.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(t,e)},r.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(t,e)},r.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new r.BufferAttribute(t,e)},r.BufferGeometry=function(){Object.defineProperty(this,"id",{value:r.GeometryIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.offsets=this.drawcalls=[],this.boundingSphere=this.boundingBox=null},r.BufferGeometry.prototype={constructor:r.BufferGeometry,addAttribute:function(t,e,n){!1==e instanceof r.BufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[t]={array:e,itemSize:n}):(this.attributes[t]=e,this.attributesKeys=Object.keys(this.attributes))},getAttribute:function(t){return this.attributes[t]},addDrawCall:function(t,e,n){this.drawcalls.push({start:t,count:e,index:void 0!==n?n:0})},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0),e=this.attributes.normal,void 0!==e&&((new r.Matrix3).getNormalMatrix(t).applyToVector3Array(e.array),e.needsUpdate=!0)},center:function(){},fromGeometry:function(t,e){e=e||{vertexColors:r.NoColors};var n=t.vertices,i=t.faces,o=t.faceVertexUvs,a=e.vertexColors,s=0<o[0].length,u=3==i[0].vertexNormals.length,l=new Float32Array(9*i.length);this.addAttribute("position",new r.BufferAttribute(l,3));var c=new Float32Array(9*i.length);if(this.addAttribute("normal",new r.BufferAttribute(c,3)),a!==r.NoColors){var h=new Float32Array(9*i.length);this.addAttribute("color",new r.BufferAttribute(h,3))}if(!0===s){var f=new Float32Array(6*i.length);this.addAttribute("uv",new r.BufferAttribute(f,2))}for(var p=0,d=0,m=0;p<i.length;p++,d+=6,m+=9){var g=i[p],y=n[g.a],v=n[g.b],b=n[g.c];l[m]=y.x,l[m+1]=y.y,l[m+2]=y.z,l[m+3]=v.x,l[m+4]=v.y,l[m+5]=v.z,l[m+6]=b.x,l[m+7]=b.y,l[m+8]=b.z,!0===u?(y=g.vertexNormals[0],v=g.vertexNormals[1],b=g.vertexNormals[2],c[m]=y.x,c[m+1]=y.y,c[m+2]=y.z,c[m+3]=v.x,c[m+4]=v.y,c[m+5]=v.z,c[m+6]=b.x,c[m+7]=b.y,c[m+8]=b.z):(y=g.normal,c[m]=y.x,c[m+1]=y.y,c[m+2]=y.z,c[m+3]=y.x,c[m+4]=y.y,c[m+5]=y.z,c[m+6]=y.x,c[m+7]=y.y,c[m+8]=y.z),a===r.FaceColors?(g=g.color,h[m]=g.r,h[m+1]=g.g,h[m+2]=g.b,h[m+3]=g.r,h[m+4]=g.g,h[m+5]=g.b,h[m+6]=g.r,h[m+7]=g.g,h[m+8]=g.b):a===r.VertexColors&&(y=g.vertexColors[0],v=g.vertexColors[1],g=g.vertexColors[2],h[m]=y.r,h[m+1]=y.g,h[m+2]=y.b,h[m+3]=v.r,h[m+4]=v.g,h[m+5]=v.b,h[m+6]=g.r,h[m+7]=g.g,h[m+8]=g.b),!0===s&&(g=o[0][p][0],y=o[0][p][1],v=o[0][p][2],f[d]=g.x,f[d+1]=g.y,f[d+2]=y.x,f[d+3]=y.y,f[d+4]=v.x,f[d+5]=v.y)}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var t=new r.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new r.Box3);var e=this.attributes.position.array;if(e){var n=this.boundingBox;n.makeEmpty();for(var i=0,o=e.length;o>i;i+=3)t.set(e[i],e[i+1],e[i+2]),n.expandByPoint(t)}(void 0===e||0===e.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var t=new r.Box3,e=new r.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new r.Sphere);var n=this.attributes.position.array;if(n){t.makeEmpty();for(var i=this.boundingSphere.center,o=0,a=n.length;a>o;o+=3)e.set(n[o],n[o+1],n[o+2]),t.expandByPoint(e);t.center(i);for(var s=0,o=0,a=n.length;a>o;o+=3)e.set(n[o],n[o+1],n[o+2]),s=Math.max(s,i.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.attributes;if(t.position){var e=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new r.BufferAttribute(new Float32Array(e.length),3));else for(var n=t.normal.array,i=0,o=n.length;o>i;i++)n[i]=0;var a,s,u,n=t.normal.array,l=new r.Vector3,c=new r.Vector3,h=new r.Vector3,f=new r.Vector3,p=new r.Vector3;if(t.index)for(var d=t.index.array,m=0<this.offsets.length?this.offsets:[{start:0,count:d.length,index:0}],g=0,y=m.length;y>g;++g){o=m[g].start,a=m[g].count;for(var v=m[g].index,i=o,o=o+a;o>i;i+=3)a=3*(v+d[i]),s=3*(v+d[i+1]),u=3*(v+d[i+2]),l.fromArray(e,a),c.fromArray(e,s),h.fromArray(e,u),f.subVectors(h,c),p.subVectors(l,c),f.cross(p),n[a]+=f.x,n[a+1]+=f.y,n[a+2]+=f.z,n[s]+=f.x,n[s+1]+=f.y,n[s+2]+=f.z,n[u]+=f.x,n[u+1]+=f.y,n[u+2]+=f.z}else for(i=0,o=e.length;o>i;i+=9)l.fromArray(e,i),c.fromArray(e,i+3),h.fromArray(e,i+6),f.subVectors(h,c),p.subVectors(l,c),f.cross(p),n[i]=f.x,n[i+1]=f.y,n[i+2]=f.z,n[i+3]=f.x,n[i+4]=f.y,n[i+5]=f.z,n[i+6]=f.x,n[i+7]=f.y,n[i+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},computeTangents:function(){function t(t,e,n){S.fromArray(i,3*t),L.fromArray(i,3*e),A.fromArray(i,3*n),D.fromArray(a,2*t),I.fromArray(a,2*e),k.fromArray(a,2*n),f=L.x-S.x,p=A.x-S.x,d=L.y-S.y,m=A.y-S.y,g=L.z-S.z,y=A.z-S.z,v=I.x-D.x,b=k.x-D.x,_=I.y-D.y,x=k.y-D.y,w=1/(v*x-b*_),N.set((x*f-_*p)*w,(x*d-_*m)*w,(x*g-_*y)*w),B.set((v*p-b*f)*w,(v*m-b*d)*w,(v*y-b*g)*w),l[t].add(N),l[e].add(N),l[n].add(N),c[t].add(B),c[e].add(B),c[n].add(B)}function e(t){W.fromArray(o,3*t),H.copy(W),U=l[t],V.copy(U),V.sub(W.multiplyScalar(W.dot(U))).normalize(),G.crossVectors(H,U),z=G.dot(c[t]),F=0>z?-1:1,u[4*t]=V.x,u[4*t+1]=V.y,u[4*t+2]=V.z,u[4*t+3]=F}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var n=this.attributes.index.array,i=this.attributes.position.array,o=this.attributes.normal.array,a=this.attributes.uv.array,s=i.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new r.BufferAttribute(new Float32Array(4*s),4));for(var u=this.attributes.tangent.array,l=[],c=[],h=0;s>h;h++)l[h]=new r.Vector3,c[h]=new r.Vector3;var f,p,d,m,g,y,v,b,_,x,w,M,C,P,E,T,S=new r.Vector3,L=new r.Vector3,A=new r.Vector3,D=new r.Vector2,I=new r.Vector2,k=new r.Vector2,N=new r.Vector3,B=new r.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,n.length,0);var O=this.drawcalls,h=0;for(C=O.length;C>h;++h){M=O[h].start,P=O[h].count;var R=O[h].index,s=M;for(M+=P;M>s;s+=3)P=R+n[s],E=R+n[s+1],T=R+n[s+2],t(P,E,T)}var F,U,z,V=new r.Vector3,G=new r.Vector3,W=new r.Vector3,H=new r.Vector3,h=0;for(C=O.length;C>h;++h)for(M=O[h].start,P=O[h].count,R=O[h].index,s=M,M+=P;M>s;s+=3)P=R+n[s],E=R+n[s+1],T=R+n[s+2],e(P),e(E),e(T)}},computeOffsets:function(t){var e=t;void 0===t&&(e=65535),Date.now(),t=this.attributes.index.array;for(var n=this.attributes.position.array,r=t.length/3,i=new Uint16Array(t.length),o=0,a=0,s=[{start:0,count:0,index:0}],u=s[0],l=0,c=0,h=new Int32Array(6),f=new Int32Array(n.length),p=new Int32Array(n.length),d=0;d<n.length;d++)f[d]=-1,p[d]=-1;for(n=0;r>n;n++){for(var m=c=0;3>m;m++)d=t[3*n+m],-1==f[d]?(h[2*m]=d,h[2*m+1]=-1,c++):f[d]<u.index?(h[2*m]=d,h[2*m+1]=-1,l++):(h[2*m]=d,h[2*m+1]=f[d]);if(a+c>u.index+e)for(u={start:o,count:0,index:a},s.push(u),c=0;6>c;c+=2)m=h[c+1],m>-1&&m<u.index&&(h[c+1]=-1);for(c=0;6>c;c+=2)d=h[c],m=h[c+1],-1===m&&(m=a++),f[d]=m,p[m]=d,i[o++]=m-u.index,u.count++}return this.reorderBuffers(i,p,a),this.offsets=s},merge:function(t,e){if(!1!=t instanceof r.BufferGeometry){void 0===e&&(e=0);var n,i=this.attributes;for(n in i)if(void 0!==t.attributes[n])for(var o=i[n].array,a=t.attributes[n],s=a.array,u=0,a=a.itemSize*e;u<s.length;u++,a++)o[a]=s[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t,e,n,r=this.attributes.normal.array,i=0,o=r.length;o>i;i+=3)t=r[i],e=r[i+1],n=r[i+2],t=1/Math.sqrt(t*t+e*e+n*n),r[i]*=t,r[i+1]*=t,r[i+2]*=t},reorderBuffers:function(t,e,n){var r,i={};for(r in this.attributes)"index"!=r&&(i[r]=new this.attributes[r].array.constructor(this.attributes[r].itemSize*n));for(var o=0;n>o;o++){var a=e[o];for(r in this.attributes)if("index"!=r)for(var s=this.attributes[r].array,u=this.attributes[r].itemSize,l=i[r],c=0;u>c;c++)l[o*u+c]=s[a*u+c]}this.attributes.index.array=t;for(r in this.attributes)"index"!=r&&(this.attributes[r].array=i[r],this.attributes[r].numItems=this.attributes[r].itemSize*n)},toJSON:function(){var t,e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},n=this.attributes,r=this.offsets,i=this.boundingSphere;for(t in n){for(var o=n[t],a=[],s=o.array,u=0,l=s.length;l>u;u++)a[u]=s[u];e.data.attributes[t]={itemSize:o.itemSize,type:o.array.constructor.name,array:a}}return 0<r.length&&(e.data.offsets=JSON.parse(JSON.stringify(r))),null!==i&&(e.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),e},clone:function(){var t,e=new r.BufferGeometry;for(t in this.attributes)e.addAttribute(t,this.attributes[t].clone());t=0;for(var n=this.offsets.length;n>t;t++){var i=this.offsets[t];e.offsets.push({start:i.start,index:i.index,count:i.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.BufferGeometry.prototype),r.Geometry=function(){Object.defineProperty(this,"id",{value:r.GeometryIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.hasTangents=!1,this.dynamic=!0,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1},r.Geometry.prototype={constructor:r.Geometry,applyMatrix:function(t){for(var e=(new r.Matrix3).getNormalMatrix(t),n=0,i=this.vertices.length;i>n;n++)this.vertices[n].applyMatrix4(t);for(n=0,i=this.faces.length;i>n;n++){t=this.faces[n],t.normal.applyMatrix3(e).normalize();for(var o=0,a=t.vertexNormals.length;a>o;o++)t.vertexNormals[o].applyMatrix3(e).normalize()}this.boundingBox instanceof r.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof r.Sphere&&this.computeBoundingSphere()},fromBufferGeometry:function(t){for(var e=this,n=t.attributes,i=n.position.array,o=void 0!==n.index?n.index.array:void 0,a=void 0!==n.normal?n.normal.array:void 0,s=void 0!==n.color?n.color.array:void 0,u=void 0!==n.uv?n.uv.array:void 0,l=[],c=[],h=n=0;n<i.length;n+=3,h+=2)e.vertices.push(new r.Vector3(i[n],i[n+1],i[n+2])),void 0!==a&&l.push(new r.Vector3(a[n],a[n+1],a[n+2])),void 0!==s&&e.colors.push(new r.Color(s[n],s[n+1],s[n+2])),void 0!==u&&c.push(new r.Vector2(u[h],u[h+1]));if(h=function(t,n,i){var o=void 0!==a?[l[t].clone(),l[n].clone(),l[i].clone()]:[],h=void 0!==s?[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()]:[];e.faces.push(new r.Face3(t,n,i,o,h)),void 0!==u&&e.faceVertexUvs[0].push([c[t].clone(),c[n].clone(),c[i].clone()])},void 0!==o)for(n=0;n<o.length;n+=3)h(o[n],o[n+1],o[n+2]);else for(n=0;n<i.length/3;n+=3)h(n,n+1,n+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=new r.Vector3;return t.addVectors(this.boundingBox.min,this.boundingBox.max),t.multiplyScalar(-.5),this.applyMatrix((new r.Matrix4).makeTranslation(t.x,t.y,t.z)),this.computeBoundingBox(),t},computeFaceNormals:function(){for(var t=new r.Vector3,e=new r.Vector3,n=0,i=this.faces.length;i>n;n++){var o=this.faces[n],a=this.vertices[o.a],s=this.vertices[o.b];t.subVectors(this.vertices[o.c],s),e.subVectors(a,s),t.cross(e),t.normalize(),o.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i;for(i=Array(this.vertices.length),e=0,n=this.vertices.length;n>e;e++)i[e]=new r.Vector3;if(t){var o,a,s,u=new r.Vector3,l=new r.Vector3;for(new r.Vector3,new r.Vector3,new r.Vector3,t=0,e=this.faces.length;e>t;t++)n=this.faces[t],o=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c],u.subVectors(s,a),l.subVectors(o,a),u.cross(l),i[n.a].add(u),i[n.b].add(u),i[n.c].add(u)}else for(t=0,e=this.faces.length;e>t;t++)n=this.faces[t],i[n.a].add(n.normal),i[n.b].add(n.normal),i[n.c].add(n.normal);for(e=0,n=this.vertices.length;n>e;e++)i[e].normalize();for(t=0,e=this.faces.length;e>t;t++)n=this.faces[t],n.vertexNormals[0]=i[n.a].clone(),n.vertexNormals[1]=i[n.b].clone(),n.vertexNormals[2]=i[n.c].clone()},computeMorphNormals:function(){var t,e,n,i,o;for(n=0,i=this.faces.length;i>n;n++)for(o=this.faces[n],o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]),t=0,e=o.vertexNormals.length;e>t;t++)o.__originalVertexNormals[t]?o.__originalVertexNormals[t].copy(o.vertexNormals[t]):o.__originalVertexNormals[t]=o.vertexNormals[t].clone();var a=new r.Geometry;for(a.faces=this.faces,t=0,e=this.morphTargets.length;e>t;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[],o=this.morphNormals[t].faceNormals;var s,u,l=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;i>n;n++)s=new r.Vector3,u={a:new r.Vector3,b:new r.Vector3,c:new r.Vector3},o.push(s),l.push(u)}for(l=this.morphNormals[t],a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;i>n;n++)o=this.faces[n],s=l.faceNormals[n],u=l.vertexNormals[n],s.copy(o.normal),u.a.copy(o.vertexNormals[0]),u.b.copy(o.vertexNormals[1]),u.c.copy(o.vertexNormals[2])}for(n=0,i=this.faces.length;i>n;n++)o=this.faces[n],o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals},computeTangents:function(){var t,e,n,i,o,a,s,u,l,c,h,f,p,d,m,g,y,v=[],b=[];n=new r.Vector3;var _=new r.Vector3,x=new r.Vector3,w=new r.Vector3,M=new r.Vector3;for(t=0,e=this.vertices.length;e>t;t++)v[t]=new r.Vector3,b[t]=new r.Vector3;for(t=0,e=this.faces.length;e>t;t++)o=this.faces[t],a=this.faceVertexUvs[0][t],i=o.a,y=o.b,o=o.c,s=this.vertices[i],u=this.vertices[y],l=this.vertices[o],c=a[0],h=a[1],f=a[2],a=u.x-s.x,p=l.x-s.x,d=u.y-s.y,m=l.y-s.y,u=u.z-s.z,s=l.z-s.z,l=h.x-c.x,g=f.x-c.x,h=h.y-c.y,c=f.y-c.y,f=1/(l*c-g*h),n.set((c*a-h*p)*f,(c*d-h*m)*f,(c*u-h*s)*f),_.set((l*p-g*a)*f,(l*m-g*d)*f,(l*s-g*u)*f),v[i].add(n),v[y].add(n),v[o].add(n),b[i].add(_),b[y].add(_),b[o].add(_);for(_=["a","b","c","d"],t=0,e=this.faces.length;e>t;t++)for(o=this.faces[t],n=0;n<Math.min(o.vertexNormals.length,3);n++)M.copy(o.vertexNormals[n]),i=o[_[n]],y=v[i],x.copy(y),x.sub(M.multiplyScalar(M.dot(y))).normalize(),w.crossVectors(o.vertexNormals[n],y),i=w.dot(b[i]),i=0>i?-1:1,o.vertexTangents[n]=new r.Vector4(x.x,x.y,x.z,i);this.hasTangents=!0},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,r=e.length;r>n;n++)n>0&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new r.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new r.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!1==t instanceof r.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);else{var i,o=this.vertices.length,a=this.vertices,s=t.vertices,u=this.faces,l=t.faces,c=this.faceVertexUvs[0];t=t.faceVertexUvs[0],void 0===n&&(n=0),void 0!==e&&(i=(new r.Matrix3).getNormalMatrix(e));for(var h=0,f=s.length;f>h;h++){var p=s[h].clone();void 0!==e&&p.applyMatrix4(e),a.push(p)}for(h=0,f=l.length;f>h;h++){var d,s=l[h],m=s.vertexNormals,g=s.vertexColors,p=new r.Face3(s.a+o,s.b+o,s.c+o);for(p.normal.copy(s.normal),void 0!==i&&p.normal.applyMatrix3(i).normalize(),e=0,a=m.length;a>e;e++)d=m[e].clone(),void 0!==i&&d.applyMatrix3(i).normalize(),p.vertexNormals.push(d);for(p.color.copy(s.color),e=0,a=g.length;a>e;e++)d=g[e],p.vertexColors.push(d.clone());p.materialIndex=s.materialIndex+n,u.push(p)}for(h=0,f=t.length;f>h;h++)if(n=t[h],i=[],void 0!==n){for(e=0,a=n.length;a>e;e++)i.push(n[e].clone());c.push(i)}}},mergeMesh:function(t){!1==t instanceof r.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,r={},i=[],o=[],a=Math.pow(10,4);for(e=0,n=this.vertices.length;n>e;e++)t=this.vertices[e],t=Math.round(t.x*a)+"_"+Math.round(t.y*a)+"_"+Math.round(t.z*a),void 0===r[t]?(r[t]=e,i.push(this.vertices[e]),o[e]=i.length-1):o[e]=o[r[t]];for(r=[],e=0,n=this.faces.length;n>e;e++)for(a=this.faces[e],a.a=o[a.a],a.b=o[a.b],a.c=o[a.c],a=[a.a,a.b,a.c],t=0;3>t;t++)if(a[t]==a[(t+1)%3]){r.push(e);break}for(e=r.length-1;e>=0;e--)for(a=r[e],this.faces.splice(a,1),o=0,n=this.faceVertexUvs.length;n>o;o++)this.faceVertexUvs[o].splice(a,1);return e=this.vertices.length-i.length,this.vertices=i,e},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=u.length/3,u.push(t.x,t.y,t.z),l[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==h[e]?h[e]:(h[e]=c.length,c.push(t.getHex()),h[e])}function r(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]?p[e]:(p[e]=f.length/2,f.push(t.x,t.y),p[e])}var i={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o,a=this.parameters;for(o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(a=[],o=0;o<this.vertices.length;o++){var s=this.vertices[o];a.push(s.x,s.y,s.z)}var s=[],u=[],l={},c=[],h={},f=[],p={};for(o=0;o<this.faces.length;o++){var d=this.faces[o],m=void 0!==this.faceVertexUvs[0][o],g=0<d.normal.length(),y=0<d.vertexNormals.length,v=1!==d.color.r||1!==d.color.g||1!==d.color.b,b=0<d.vertexColors.length,_=0,_=t(_,0,0),_=t(_,1,!1),_=t(_,2,!1),_=t(_,3,m),_=t(_,4,g),_=t(_,5,y),_=t(_,6,v),_=t(_,7,b);s.push(_),s.push(d.a,d.b,d.c),m&&(m=this.faceVertexUvs[0][o],s.push(r(m[0]),r(m[1]),r(m[2]))),g&&s.push(e(d.normal)),y&&(g=d.vertexNormals,s.push(e(g[0]),e(g[1]),e(g[2]))),v&&s.push(n(d.color)),b&&(d=d.vertexColors,s.push(n(d[0]),n(d[1]),n(d[2])))}return i.data={},i.data.vertices=a,i.data.normals=u,0<c.length&&(i.data.colors=c),0<f.length&&(i.data.uvs=[f]),i.data.faces=s,i},clone:function(){for(var t=new r.Geometry,e=this.vertices,n=0,i=e.length;i>n;n++)t.vertices.push(e[n].clone());for(e=this.faces,n=0,i=e.length;i>n;n++)t.faces.push(e[n].clone());for(n=0,i=this.faceVertexUvs.length;i>n;n++){e=this.faceVertexUvs[n],void 0===t.faceVertexUvs[n]&&(t.faceVertexUvs[n]=[]);for(var o=0,a=e.length;a>o;o++){for(var s=e[o],u=[],l=0,c=s.length;c>l;l++)u.push(s[l].clone());t.faceVertexUvs[n].push(u)}}return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.Geometry.prototype),r.GeometryIdCount=0,r.Camera=function(){r.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new r.Matrix4,this.projectionMatrix=new r.Matrix4},r.Camera.prototype=Object.create(r.Object3D.prototype),r.Camera.prototype.constructor=r.Camera,r.Camera.prototype.getWorldDirection=function(){var t=new r.Quaternion;return function(e){return e=e||new r.Vector3,this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),r.Camera.prototype.lookAt=function(){var t=new r.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),r.Camera.prototype.clone=function(t){return void 0===t&&(t=new r.Camera),r.Object3D.prototype.clone.call(this,t),t.matrixWorldInverse.copy(this.matrixWorldInverse),t.projectionMatrix.copy(this.projectionMatrix),t},r.CubeCamera=function(t,e,n){r.Object3D.call(this),this.type="CubeCamera";var i=new r.PerspectiveCamera(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new r.Vector3(1,0,0)),this.add(i);var o=new r.PerspectiveCamera(90,1,t,e);o.up.set(0,-1,0),o.lookAt(new r.Vector3(-1,0,0)),this.add(o);var a=new r.PerspectiveCamera(90,1,t,e);a.up.set(0,0,1),a.lookAt(new r.Vector3(0,1,0)),this.add(a);var s=new r.PerspectiveCamera(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new r.Vector3(0,-1,0)),this.add(s);var u=new r.PerspectiveCamera(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new r.Vector3(0,0,1)),this.add(u);var l=new r.PerspectiveCamera(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new r.Vector3(0,0,-1)),this.add(l),this.renderTarget=new r.WebGLRenderTargetCube(n,n,{format:r.RGBFormat,magFilter:r.LinearFilter,minFilter:r.LinearFilter}),this.updateCubeMap=function(t,e){var n=this.renderTarget,r=n.generateMipmaps;n.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,i,n),n.activeCubeFace=1,t.render(e,o,n),n.activeCubeFace=2,t.render(e,a,n),n.activeCubeFace=3,t.render(e,s,n),n.activeCubeFace=4,t.render(e,u,n),n.generateMipmaps=r,n.activeCubeFace=5,t.render(e,l,n)}},r.CubeCamera.prototype=Object.create(r.Object3D.prototype),r.CubeCamera.prototype.constructor=r.CubeCamera,r.OrthographicCamera=function(t,e,n,i,o,a){r.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==o?o:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()},r.OrthographicCamera.prototype=Object.create(r.Camera.prototype),r.OrthographicCamera.prototype.constructor=r.OrthographicCamera,r.OrthographicCamera.prototype.updateProjectionMatrix=function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(n-t,n+t,r+e,r-e,this.near,this.far)},r.OrthographicCamera.prototype.clone=function(){var t=new r.OrthographicCamera;return r.Camera.prototype.clone.call(this,t),t.zoom=this.zoom,t.left=this.left,t.right=this.right,t.top=this.top,t.bottom=this.bottom,t.near=this.near,t.far=this.far,t.projectionMatrix.copy(this.projectionMatrix),t},r.PerspectiveCamera=function(t,e,n,i){r.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==t?t:50,this.aspect=void 0!==e?e:1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.updateProjectionMatrix()},r.PerspectiveCamera.prototype=Object.create(r.Camera.prototype),r.PerspectiveCamera.prototype.constructor=r.PerspectiveCamera,r.PerspectiveCamera.prototype.setLens=function(t,e){void 0===e&&(e=24),this.fov=2*r.Math.radToDeg(Math.atan(e/(2*t))),this.updateProjectionMatrix()},r.PerspectiveCamera.prototype.setViewOffset=function(t,e,n,r,i,o){this.fullWidth=t,this.fullHeight=e,this.x=n,this.y=r,this.width=i,this.height=o,this.updateProjectionMatrix()},r.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var t=r.Math.radToDeg(2*Math.atan(Math.tan(.5*r.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(r.Math.degToRad(.5*t))*this.near,n=-t,i=e*n,e=Math.abs(e*t-i),n=Math.abs(t-n);this.projectionMatrix.makeFrustum(i+this.x*e/this.fullWidth,i+(this.x+this.width)*e/this.fullWidth,t-(this.y+this.height)*n/this.fullHeight,t-this.y*n/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(t,this.aspect,this.near,this.far);
},r.PerspectiveCamera.prototype.clone=function(){var t=new r.PerspectiveCamera;return r.Camera.prototype.clone.call(this,t),t.zoom=this.zoom,t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t.projectionMatrix.copy(this.projectionMatrix),t},r.Light=function(t){r.Object3D.call(this),this.type="Light",this.color=new r.Color(t)},r.Light.prototype=Object.create(r.Object3D.prototype),r.Light.prototype.constructor=r.Light,r.Light.prototype.clone=function(t){return void 0===t&&(t=new r.Light),r.Object3D.prototype.clone.call(this,t),t.color.copy(this.color),t},r.AmbientLight=function(t){r.Light.call(this,t),this.type="AmbientLight"},r.AmbientLight.prototype=Object.create(r.Light.prototype),r.AmbientLight.prototype.constructor=r.AmbientLight,r.AmbientLight.prototype.clone=function(){var t=new r.AmbientLight;return r.Light.prototype.clone.call(this,t),t},r.AreaLight=function(t,e){r.Light.call(this,t),this.type="AreaLight",this.normal=new r.Vector3(0,-1,0),this.right=new r.Vector3(1,0,0),this.intensity=void 0!==e?e:1,this.height=this.width=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},r.AreaLight.prototype=Object.create(r.Light.prototype),r.AreaLight.prototype.constructor=r.AreaLight,r.DirectionalLight=function(t,e){r.Light.call(this,t),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new r.Object3D,this.intensity=void 0!==e?e:1,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraTop=this.shadowCameraRight=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowCascade=!1,this.shadowCascadeOffset=new r.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},r.DirectionalLight.prototype=Object.create(r.Light.prototype),r.DirectionalLight.prototype.constructor=r.DirectionalLight,r.DirectionalLight.prototype.clone=function(){var t=new r.DirectionalLight;return r.Light.prototype.clone.call(this,t),t.target=this.target.clone(),t.intensity=this.intensity,t.castShadow=this.castShadow,t.onlyShadow=this.onlyShadow,t.shadowCameraNear=this.shadowCameraNear,t.shadowCameraFar=this.shadowCameraFar,t.shadowCameraLeft=this.shadowCameraLeft,t.shadowCameraRight=this.shadowCameraRight,t.shadowCameraTop=this.shadowCameraTop,t.shadowCameraBottom=this.shadowCameraBottom,t.shadowCameraVisible=this.shadowCameraVisible,t.shadowBias=this.shadowBias,t.shadowDarkness=this.shadowDarkness,t.shadowMapWidth=this.shadowMapWidth,t.shadowMapHeight=this.shadowMapHeight,t.shadowCascade=this.shadowCascade,t.shadowCascadeOffset.copy(this.shadowCascadeOffset),t.shadowCascadeCount=this.shadowCascadeCount,t.shadowCascadeBias=this.shadowCascadeBias.slice(0),t.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),t.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),t.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),t.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),t},r.HemisphereLight=function(t,e,n){r.Light.call(this,t),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new r.Color(e),this.intensity=void 0!==n?n:1},r.HemisphereLight.prototype=Object.create(r.Light.prototype),r.HemisphereLight.prototype.constructor=r.HemisphereLight,r.HemisphereLight.prototype.clone=function(){var t=new r.HemisphereLight;return r.Light.prototype.clone.call(this,t),t.groundColor.copy(this.groundColor),t.intensity=this.intensity,t},r.PointLight=function(t,e,n){r.Light.call(this,t),this.type="PointLight",this.intensity=void 0!==e?e:1,this.distance=void 0!==n?n:0},r.PointLight.prototype=Object.create(r.Light.prototype),r.PointLight.prototype.constructor=r.PointLight,r.PointLight.prototype.clone=function(){var t=new r.PointLight;return r.Light.prototype.clone.call(this,t),t.intensity=this.intensity,t.distance=this.distance,t},r.SpotLight=function(t,e,n,i,o){r.Light.call(this,t),this.type="SpotLight",this.position.set(0,1,0),this.target=new r.Object3D,this.intensity=void 0!==e?e:1,this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.exponent=void 0!==o?o:10,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},r.SpotLight.prototype=Object.create(r.Light.prototype),r.SpotLight.prototype.constructor=r.SpotLight,r.SpotLight.prototype.clone=function(){var t=new r.SpotLight;return r.Light.prototype.clone.call(this,t),t.target=this.target.clone(),t.intensity=this.intensity,t.distance=this.distance,t.angle=this.angle,t.exponent=this.exponent,t.castShadow=this.castShadow,t.onlyShadow=this.onlyShadow,t.shadowCameraNear=this.shadowCameraNear,t.shadowCameraFar=this.shadowCameraFar,t.shadowCameraFov=this.shadowCameraFov,t.shadowCameraVisible=this.shadowCameraVisible,t.shadowBias=this.shadowBias,t.shadowDarkness=this.shadowDarkness,t.shadowMapWidth=this.shadowMapWidth,t.shadowMapHeight=this.shadowMapHeight,t},r.Cache=function(){this.files={}},r.Cache.prototype={constructor:r.Cache,add:function(t,e){this.files[t]=e},get:function(t){return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},r.Loader=function(t){this.statusDomElement=(this.showStatus=t)?r.Loader.prototype.addStatusElement():null,this.imageLoader=new r.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},r.Loader.prototype={constructor:r.Loader,crossOrigin:void 0,addStatusElement:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.right="0px",t.style.top="0px",t.style.fontSize="0.8em",t.style.textAlign="left",t.style.background="rgba(0,0,0,0.25)",t.style.color="#fff",t.style.width="120px",t.style.padding="0.5em 0.5em 0.5em 0.5em",t.style.zIndex=1e3,t.innerHTML="Loading ...",t},updateProgress:function(t){var e="Loaded ",e=t.total?e+((100*t.loaded/t.total).toFixed(0)+"%"):e+((t.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=e},extractUrlBase:function(t){return t=t.split("/"),1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(t,e){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e);return n},needsTangents:function(t){for(var e=0,n=t.length;n>e;e++)if(t[e]instanceof r.ShaderMaterial)return!0;return!1},createMaterial:function(t,e){function n(t){return t=Math.log(t)/Math.LN2,Math.pow(2,Math.round(t))}function i(t,i,o,s,u,l,c){var h,f=e+o,p=r.Loader.Handlers.get(f);null!==p?h=p.load(f):(h=new r.Texture,p=a.imageLoader,p.crossOrigin=a.crossOrigin,p.load(f,function(t){if(!1===r.Math.isPowerOfTwo(t.width)||!1===r.Math.isPowerOfTwo(t.height)){var e=n(t.width),i=n(t.height),o=document.createElement("canvas");o.width=e,o.height=i,o.getContext("2d").drawImage(t,0,0,e,i),h.image=o}else h.image=t;h.needsUpdate=!0})),h.sourceFile=o,s&&(h.repeat.set(s[0],s[1]),1!==s[0]&&(h.wrapS=r.RepeatWrapping),1!==s[1]&&(h.wrapT=r.RepeatWrapping)),u&&h.offset.set(u[0],u[1]),l&&(o={repeat:r.RepeatWrapping,mirror:r.MirroredRepeatWrapping},void 0!==o[l[0]]&&(h.wrapS=o[l[0]]),void 0!==o[l[1]]&&(h.wrapT=o[l[1]])),c&&(h.anisotropy=c),t[i]=h}function o(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]}var a=this,s="MeshLambertMaterial",u={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(t.shading){var l=t.shading.toLowerCase();"phong"===l?s="MeshPhongMaterial":"basic"===l&&(s="MeshBasicMaterial")}return void 0!==t.blending&&void 0!==r[t.blending]&&(u.blending=r[t.blending]),(void 0!==t.transparent||1>t.opacity)&&(u.transparent=t.transparent),void 0!==t.depthTest&&(u.depthTest=t.depthTest),void 0!==t.depthWrite&&(u.depthWrite=t.depthWrite),void 0!==t.visible&&(u.visible=t.visible),void 0!==t.flipSided&&(u.side=r.BackSide),void 0!==t.doubleSided&&(u.side=r.DoubleSide),void 0!==t.wireframe&&(u.wireframe=t.wireframe),void 0!==t.vertexColors&&("face"===t.vertexColors?u.vertexColors=r.FaceColors:t.vertexColors&&(u.vertexColors=r.VertexColors)),t.colorDiffuse?u.color=o(t.colorDiffuse):t.DbgColor&&(u.color=t.DbgColor),t.colorSpecular&&(u.specular=o(t.colorSpecular)),t.colorAmbient&&(u.ambient=o(t.colorAmbient)),t.colorEmissive&&(u.emissive=o(t.colorEmissive)),t.transparency&&(u.opacity=t.transparency),t.specularCoef&&(u.shininess=t.specularCoef),t.mapDiffuse&&e&&i(u,"map",t.mapDiffuse,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy),t.mapLight&&e&&i(u,"lightMap",t.mapLight,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy),t.mapBump&&e&&i(u,"bumpMap",t.mapBump,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy),t.mapNormal&&e&&i(u,"normalMap",t.mapNormal,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy),t.mapSpecular&&e&&i(u,"specularMap",t.mapSpecular,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy),t.mapAlpha&&e&&i(u,"alphaMap",t.mapAlpha,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy),t.mapBumpScale&&(u.bumpScale=t.mapBumpScale),t.mapNormalFactor&&(u.normalScale=new r.Vector2(t.mapNormalFactor,t.mapNormalFactor)),s=new r[s](u),void 0!==t.DbgName&&(s.name=t.DbgName),s}},r.Loader.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=0,n=this.handlers.length;n>e;e+=2){var r=this.handlers[e+1];if(this.handlers[e].test(t))return r}return null}},r.XHRLoader=function(t){this.cache=new r.Cache,this.manager=void 0!==t?t:r.DefaultLoadingManager},r.XHRLoader.prototype={constructor:r.XHRLoader,load:function(t,e,n,r){var i=this,o=i.cache.get(t);void 0!==o?e&&e(o):(o=new XMLHttpRequest,o.open("GET",t,!0),o.addEventListener("load",function(n){i.cache.add(t,this.response),e&&e(this.response),i.manager.itemEnd(t)},!1),void 0!==n&&o.addEventListener("progress",function(t){n(t)},!1),void 0!==r&&o.addEventListener("error",function(t){r(t)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(o.responseType=this.responseType),o.send(null),i.manager.itemStart(t))},setResponseType:function(t){this.responseType=t},setCrossOrigin:function(t){this.crossOrigin=t}},r.ImageLoader=function(t){this.cache=new r.Cache,this.manager=void 0!==t?t:r.DefaultLoadingManager},r.ImageLoader.prototype={constructor:r.ImageLoader,load:function(t,e,n,r){var i=this,o=i.cache.get(t);return void 0===o?(o=document.createElement("img"),void 0!==e&&o.addEventListener("load",function(n){i.cache.add(t,this),e(this),i.manager.itemEnd(t)},!1),void 0!==n&&o.addEventListener("progress",function(t){n(t)},!1),void 0!==r&&o.addEventListener("error",function(t){r(t)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.src=t,i.manager.itemStart(t),o):void e(o)},setCrossOrigin:function(t){this.crossOrigin=t}},r.JSONLoader=function(t){r.Loader.call(this,t),this.withCredentials=!1},r.JSONLoader.prototype=Object.create(r.Loader.prototype),r.JSONLoader.prototype.constructor=r.JSONLoader,r.JSONLoader.prototype.load=function(t,e,n){n=n&&"string"==typeof n?n:this.extractUrlBase(t),this.onLoadStart(),this.loadAjaxJSON(this,t,e,n)},r.JSONLoader.prototype.loadAjaxJSON=function(t,e,n,r,i){var o=new XMLHttpRequest,a=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var s=JSON.parse(o.responseText);if(void 0!==s.metadata&&"scene"===s.metadata.type)return void console.error('THREE.JSONLoader: "'+e+'" seems to be a Scene. Use THREE.SceneLoader instead.');s=t.parse(s,r),n(s.geometry,s.materials)}else console.error('THREE.JSONLoader: "'+e+'" seems to be unreachable or the file is empty.');t.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+e+'" ('+o.status+")");else o.readyState===o.LOADING?i&&(0===a&&(a=o.getResponseHeader("Content-Length")),i({total:a,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==i&&(a=o.getResponseHeader("Content-Length"))},o.open("GET",e,!0),o.withCredentials=this.withCredentials,o.send(null)},r.JSONLoader.prototype.parse=function(t,e){var n=new r.Geometry,i=void 0!==t.scale?1/t.scale:1;return function(e){var i,o,a,s,u,l,c,h,f,p,d,m,g,y=t.faces;l=t.vertices;var v=t.normals,b=t.colors,_=0;if(void 0!==t.uvs){for(i=0;i<t.uvs.length;i++)t.uvs[i].length&&_++;for(i=0;_>i;i++)n.faceVertexUvs[i]=[]}for(s=0,u=l.length;u>s;)i=new r.Vector3,i.x=l[s++]*e,i.y=l[s++]*e,i.z=l[s++]*e,n.vertices.push(i);for(s=0,u=y.length;u>s;)if(e=y[s++],f=1&e,a=2&e,i=8&e,c=16&e,p=32&e,l=64&e,e&=128,f){if(f=new r.Face3,f.a=y[s],f.b=y[s+1],f.c=y[s+3],d=new r.Face3,d.a=y[s+1],d.b=y[s+2],d.c=y[s+3],s+=4,a&&(a=y[s++],f.materialIndex=a,d.materialIndex=a),a=n.faces.length,i)for(i=0;_>i;i++)for(m=t.uvs[i],n.faceVertexUvs[i][a]=[],n.faceVertexUvs[i][a+1]=[],o=0;4>o;o++)h=y[s++],g=m[2*h],h=m[2*h+1],g=new r.Vector2(g,h),2!==o&&n.faceVertexUvs[i][a].push(g),0!==o&&n.faceVertexUvs[i][a+1].push(g);if(c&&(c=3*y[s++],f.normal.set(v[c++],v[c++],v[c]),d.normal.copy(f.normal)),p)for(i=0;4>i;i++)c=3*y[s++],p=new r.Vector3(v[c++],v[c++],v[c]),2!==i&&f.vertexNormals.push(p),0!==i&&d.vertexNormals.push(p);if(l&&(l=y[s++],l=b[l],f.color.setHex(l),d.color.setHex(l)),e)for(i=0;4>i;i++)l=y[s++],l=b[l],2!==i&&f.vertexColors.push(new r.Color(l)),0!==i&&d.vertexColors.push(new r.Color(l));n.faces.push(f),n.faces.push(d)}else{if(f=new r.Face3,f.a=y[s++],f.b=y[s++],f.c=y[s++],a&&(a=y[s++],f.materialIndex=a),a=n.faces.length,i)for(i=0;_>i;i++)for(m=t.uvs[i],n.faceVertexUvs[i][a]=[],o=0;3>o;o++)h=y[s++],g=m[2*h],h=m[2*h+1],g=new r.Vector2(g,h),n.faceVertexUvs[i][a].push(g);if(c&&(c=3*y[s++],f.normal.set(v[c++],v[c++],v[c])),p)for(i=0;3>i;i++)c=3*y[s++],p=new r.Vector3(v[c++],v[c++],v[c]),f.vertexNormals.push(p);if(l&&(l=y[s++],f.color.setHex(b[l])),e)for(i=0;3>i;i++)l=y[s++],f.vertexColors.push(new r.Color(b[l]));n.faces.push(f)}}(i),function(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,o=t.skinWeights.length;o>i;i+=e)n.skinWeights.push(new r.Vector4(t.skinWeights[i],e>1?t.skinWeights[i+1]:0,e>2?t.skinWeights[i+2]:0,e>3?t.skinWeights[i+3]:0));if(t.skinIndices)for(i=0,o=t.skinIndices.length;o>i;i+=e)n.skinIndices.push(new r.Vector4(t.skinIndices[i],e>1?t.skinIndices[i+1]:0,e>2?t.skinIndices[i+2]:0,e>3?t.skinIndices[i+3]:0));n.bones=t.bones,n.bones&&0<n.bones.length&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match."),n.animation=t.animation,n.animations=t.animations}(),function(e){if(void 0!==t.morphTargets){var i,o,a,s,u,l;for(i=0,o=t.morphTargets.length;o>i;i++)for(n.morphTargets[i]={},n.morphTargets[i].name=t.morphTargets[i].name,n.morphTargets[i].vertices=[],u=n.morphTargets[i].vertices,l=t.morphTargets[i].vertices,a=0,s=l.length;s>a;a+=3){var c=new r.Vector3;c.x=l[a]*e,c.y=l[a+1]*e,c.z=l[a+2]*e,u.push(c)}}if(void 0!==t.morphColors)for(i=0,o=t.morphColors.length;o>i;i++)for(n.morphColors[i]={},n.morphColors[i].name=t.morphColors[i].name,n.morphColors[i].colors=[],s=n.morphColors[i].colors,u=t.morphColors[i].colors,e=0,a=u.length;a>e;e+=3)l=new r.Color(16755200),l.setRGB(u[e],u[e+1],u[e+2]),s.push(l)}(i),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:n}:(i=this.initMaterials(t.materials,e),this.needsTangents(i)&&n.computeTangents(),{geometry:n,materials:i})},r.LoadingManager=function(t,e,n){var r=this,i=0,o=0;this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++},this.itemEnd=function(t){i++,void 0!==r.onProgress&&r.onProgress(t,i,o),i===o&&void 0!==r.onLoad&&r.onLoad()}},r.DefaultLoadingManager=new r.LoadingManager,r.BufferGeometryLoader=function(t){this.manager=void 0!==t?t:r.DefaultLoadingManager},r.BufferGeometryLoader.prototype={constructor:r.BufferGeometryLoader,load:function(t,e,n,i){var o=this,a=new r.XHRLoader(o.manager);a.setCrossOrigin(this.crossOrigin),a.load(t,function(t){e(o.parse(JSON.parse(t)))},n,i)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e,n=new r.BufferGeometry,i=t.attributes;for(e in i){var o=i[e],a=new self[o.type](o.array);n.addAttribute(e,new r.BufferAttribute(a,o.itemSize))}return i=t.offsets,void 0!==i&&(n.offsets=JSON.parse(JSON.stringify(i))),t=t.boundingSphere,void 0!==t&&(i=new r.Vector3,void 0!==t.center&&i.fromArray(t.center),n.boundingSphere=new r.Sphere(i,t.radius)),n}},r.MaterialLoader=function(t){this.manager=void 0!==t?t:r.DefaultLoadingManager},r.MaterialLoader.prototype={constructor:r.MaterialLoader,load:function(t,e,n,i){var o=this,a=new r.XHRLoader(o.manager);a.setCrossOrigin(this.crossOrigin),a.load(t,function(t){e(o.parse(JSON.parse(t)))},n,i)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e=new r[t.type];if(void 0!==t.color&&e.color.setHex(t.color),void 0!==t.ambient&&e.ambient.setHex(t.ambient),void 0!==t.emissive&&e.emissive.setHex(t.emissive),void 0!==t.specular&&e.specular.setHex(t.specular),void 0!==t.shininess&&(e.shininess=t.shininess),void 0!==t.uniforms&&(e.uniforms=t.uniforms),void 0!==t.vertexShader&&(e.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(e.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(e.vertexColors=t.vertexColors),void 0!==t.shading&&(e.shading=t.shading),void 0!==t.blending&&(e.blending=t.blending),void 0!==t.side&&(e.side=t.side),void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.transparent&&(e.transparent=t.transparent),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.materials)for(var n=0,i=t.materials.length;i>n;n++)e.materials.push(this.parse(t.materials[n]));return e}},r.ObjectLoader=function(t){this.manager=void 0!==t?t:r.DefaultLoadingManager},r.ObjectLoader.prototype={constructor:r.ObjectLoader,load:function(t,e,n,i){var o=this,a=new r.XHRLoader(o.manager);a.setCrossOrigin(this.crossOrigin),a.load(t,function(t){e(o.parse(JSON.parse(t)))},n,i)},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t){var e=this.parseGeometries(t.geometries),n=this.parseMaterials(t.materials);return this.parseObject(t.object,e,n)},parseGeometries:function(t){var e={};if(void 0!==t)for(var n=new r.JSONLoader,i=new r.BufferGeometryLoader,o=0,a=t.length;a>o;o++){var s,u=t[o];switch(u.type){case"PlaneGeometry":s=new r.PlaneGeometry(u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"CubeGeometry":s=new r.BoxGeometry(u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":s=new r.CircleGeometry(u.radius,u.segments);break;case"CylinderGeometry":s=new r.CylinderGeometry(u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded);break;case"SphereGeometry":s=new r.SphereGeometry(u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"IcosahedronGeometry":s=new r.IcosahedronGeometry(u.radius,u.detail);break;case"TorusGeometry":s=new r.TorusGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":s=new r.TorusKnotGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.p,u.q,u.heightScale);break;case"BufferGeometry":s=i.parse(u.data);break;case"Geometry":s=n.parse(u.data).geometry}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),e[u.uuid]=s}return e},parseMaterials:function(t){var e={};if(void 0!==t)for(var n=new r.MaterialLoader,i=0,o=t.length;o>i;i++){var a=t[i],s=n.parse(a);s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),e[a.uuid]=s}return e},parseObject:function(){var t=new r.Matrix4;return function(e,n,i){var o;switch(e.type){case"Scene":o=new r.Scene;break;case"PerspectiveCamera":o=new r.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);break;case"OrthographicCamera":o=new r.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":o=new r.AmbientLight(e.color);break;case"DirectionalLight":o=new r.DirectionalLight(e.color,e.intensity);break;case"PointLight":o=new r.PointLight(e.color,e.intensity,e.distance);break;case"SpotLight":o=new r.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent);break;case"HemisphereLight":o=new r.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":o=n[e.geometry];var a=i[e.material];void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",e.geometry),void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",e.material),o=new r.Mesh(o,a);break;case"Line":o=n[e.geometry],a=i[e.material],void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",e.geometry),void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",e.material),o=new r.Line(o,a);break;case"Sprite":a=i[e.material],void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",e.material),o=new r.Sprite(a);break;case"Group":o=new r.Group;break;default:o=new r.Object3D}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.children)for(var s in e.children)o.add(this.parseObject(e.children[s],n,i));return o}}()},r.TextureLoader=function(t){this.manager=void 0!==t?t:r.DefaultLoadingManager},r.TextureLoader.prototype={constructor:r.TextureLoader,load:function(t,e,n,i){var o=new r.ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.load(t,function(t){t=new r.Texture(t),t.needsUpdate=!0,void 0!==e&&e(t)},n,i)},setCrossOrigin:function(t){this.crossOrigin=t}},r.DataTextureLoader=r.BinaryTextureLoader=function(){this._parser=null},r.BinaryTextureLoader.prototype={constructor:r.BinaryTextureLoader,load:function(t,e,n,i){var o=this,a=new r.DataTexture,s=new r.XHRLoader;return s.setResponseType("arraybuffer"),s.load(t,function(t){(t=o._parser(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:r.ClampToEdgeWrapping,a.wrapT=void 0!==t.wrapT?t.wrapT:r.ClampToEdgeWrapping,a.magFilter=void 0!==t.magFilter?t.magFilter:r.LinearFilter,a.minFilter=void 0!==t.minFilter?t.minFilter:r.LinearMipMapLinearFilter,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps),1===t.mipmapCount&&(a.minFilter=r.LinearFilter),a.needsUpdate=!0,e&&e(a,t))},n,i),a}},r.CompressedTextureLoader=function(){this._parser=null},r.CompressedTextureLoader.prototype={constructor:r.CompressedTextureLoader,load:function(t,e,n){var i=this,o=[],a=new r.CompressedTexture;a.image=o;var s=new r.XHRLoader;if(s.setResponseType("arraybuffer"),t instanceof Array){var u=0;n=function(n){s.load(t[n],function(t){t=i._parser(t,!0),o[n]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},u+=1,6===u&&(1==t.mipmapCount&&(a.minFilter=r.LinearFilter),a.format=t.format,a.needsUpdate=!0,e&&e(a))})};for(var l=0,c=t.length;c>l;++l)n(l)}else s.load(t,function(t){if(t=i._parser(t,!0),t.isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,s=0;n>s;s++){o[s]={mipmaps:[]};for(var u=0;u<t.mipmapCount;u++)o[s].mipmaps.push(t.mipmaps[s*t.mipmapCount+u]),o[s].format=t.format,o[s].width=t.width,o[s].height=t.height}else a.image.width=t.width,a.image.height=t.height,a.mipmaps=t.mipmaps;1===t.mipmapCount&&(a.minFilter=r.LinearFilter),a.format=t.format,a.needsUpdate=!0,e&&e(a)});return a}},r.Material=function(){Object.defineProperty(this,"id",{value:r.MaterialIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.type="Material",this.side=r.FrontSide,this.opacity=1,this.transparent=!1,this.blending=r.NormalBlending,this.blendSrc=r.SrcAlphaFactor,this.blendDst=r.OneMinusSrcAlphaFactor,this.blendEquation=r.AddEquation,this.depthWrite=this.depthTest=!0,this.polygonOffset=!1,this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.needsUpdate=this.visible=!0},r.Material.prototype={constructor:r.Material,setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0===n)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if(e in this){var i=this[e];i instanceof r.Color?i.set(n):i instanceof r.Vector3&&n instanceof r.Vector3?i.copy(n):this[e]="overdraw"==e?Number(n):n}}},toJSON:function(){var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(t.name=this.name),this instanceof r.MeshBasicMaterial?(t.color=this.color.getHex(),this.vertexColors!==r.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==r.NormalBlending&&(t.blending=this.blending),this.side!==r.FrontSide&&(t.side=this.side)):this instanceof r.MeshLambertMaterial?(t.color=this.color.getHex(),t.ambient=this.ambient.getHex(),t.emissive=this.emissive.getHex(),this.vertexColors!==r.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==r.NormalBlending&&(t.blending=this.blending),this.side!==r.FrontSide&&(t.side=this.side)):this instanceof r.MeshPhongMaterial?(t.color=this.color.getHex(),t.ambient=this.ambient.getHex(),t.emissive=this.emissive.getHex(),t.specular=this.specular.getHex(),t.shininess=this.shininess,this.vertexColors!==r.NoColors&&(t.vertexColors=this.vertexColors),this.blending!==r.NormalBlending&&(t.blending=this.blending),this.side!==r.FrontSide&&(t.side=this.side)):this instanceof r.MeshNormalMaterial?(this.shading!==r.FlatShading&&(t.shading=this.shading),this.blending!==r.NormalBlending&&(t.blending=this.blending),this.side!==r.FrontSide&&(t.side=this.side)):this instanceof r.MeshDepthMaterial?(this.blending!==r.NormalBlending&&(t.blending=this.blending),this.side!==r.FrontSide&&(t.side=this.side)):this instanceof r.ShaderMaterial?(t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader):this instanceof r.SpriteMaterial&&(t.color=this.color.getHex()),1>this.opacity&&(t.opacity=this.opacity),!1!==this.transparent&&(t.transparent=this.transparent),!1!==this.wireframe&&(t.wireframe=this.wireframe),t},clone:function(t){return void 0===t&&(t=new r.Material),t.name=this.name,t.side=this.side,t.opacity=this.opacity,t.transparent=this.transparent,t.blending=this.blending,t.blendSrc=this.blendSrc,t.blendDst=this.blendDst,t.blendEquation=this.blendEquation,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.polygonOffset=this.polygonOffset,t.polygonOffsetFactor=this.polygonOffsetFactor,t.polygonOffsetUnits=this.polygonOffsetUnits,t.alphaTest=this.alphaTest,t.overdraw=this.overdraw,t.visible=this.visible,t},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.Material.prototype),r.MaterialIdCount=0,r.LineBasicMaterial=function(t){r.Material.call(this),this.type="LineBasicMaterial",this.color=new r.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=r.NoColors,this.fog=!0,this.setValues(t)},r.LineBasicMaterial.prototype=Object.create(r.Material.prototype),r.LineBasicMaterial.prototype.constructor=r.LineBasicMaterial,r.LineBasicMaterial.prototype.clone=function(){var t=new r.LineBasicMaterial;return r.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.linecap=this.linecap,t.linejoin=this.linejoin,t.vertexColors=this.vertexColors,t.fog=this.fog,t},r.LineDashedMaterial=function(t){r.Material.call(this),this.type="LineDashedMaterial",this.color=new r.Color(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(t)},r.LineDashedMaterial.prototype=Object.create(r.Material.prototype),r.LineDashedMaterial.prototype.constructor=r.LineDashedMaterial,r.LineDashedMaterial.prototype.clone=function(){var t=new r.LineDashedMaterial;return r.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.scale=this.scale,t.dashSize=this.dashSize,t.gapSize=this.gapSize,t.vertexColors=this.vertexColors,t.fog=this.fog,t},r.MeshBasicMaterial=function(t){r.Material.call(this),this.type="MeshBasicMaterial",this.color=new r.Color(16777215),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=r.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=r.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=r.NoColors,this.morphTargets=this.skinning=!1,this.setValues(t)},r.MeshBasicMaterial.prototype=Object.create(r.Material.prototype),r.MeshBasicMaterial.prototype.constructor=r.MeshBasicMaterial,r.MeshBasicMaterial.prototype.clone=function(){var t=new r.MeshBasicMaterial;return r.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t},r.MeshLambertMaterial=function(t){r.Material.call(this),this.type="MeshLambertMaterial",this.color=new r.Color(16777215),this.ambient=new r.Color(16777215),this.emissive=new r.Color(0),this.wrapAround=!1,this.wrapRGB=new r.Vector3(1,1,1),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=r.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=r.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=r.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)},r.MeshLambertMaterial.prototype=Object.create(r.Material.prototype),r.MeshLambertMaterial.prototype.constructor=r.MeshLambertMaterial,r.MeshLambertMaterial.prototype.clone=function(){var t=new r.MeshLambertMaterial;return r.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.ambient.copy(this.ambient),t.emissive.copy(this.emissive),t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},r.MeshPhongMaterial=function(t){r.Material.call(this),this.type="MeshPhongMaterial",this.color=new r.Color(16777215),this.ambient=new r.Color(16777215),this.emissive=new r.Color(0),this.specular=new r.Color(1118481),this.shininess=30,this.wrapAround=this.metal=!1,this.wrapRGB=new r.Vector3(1,1,1),this.bumpMap=this.lightMap=this.map=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r.Vector2(1,1),this.envMap=this.alphaMap=this.specularMap=null,this.combine=r.MultiplyOperation,
this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=r.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=r.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)},r.MeshPhongMaterial.prototype=Object.create(r.Material.prototype),r.MeshPhongMaterial.prototype.constructor=r.MeshPhongMaterial,r.MeshPhongMaterial.prototype.clone=function(){var t=new r.MeshPhongMaterial;return r.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.ambient.copy(this.ambient),t.emissive.copy(this.emissive),t.specular.copy(this.specular),t.shininess=this.shininess,t.metal=this.metal,t.wrapAround=this.wrapAround,t.wrapRGB.copy(this.wrapRGB),t.map=this.map,t.lightMap=this.lightMap,t.bumpMap=this.bumpMap,t.bumpScale=this.bumpScale,t.normalMap=this.normalMap,t.normalScale.copy(this.normalScale),t.specularMap=this.specularMap,t.alphaMap=this.alphaMap,t.envMap=this.envMap,t.combine=this.combine,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,t.fog=this.fog,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.wireframeLinecap=this.wireframeLinecap,t.wireframeLinejoin=this.wireframeLinejoin,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},r.MeshDepthMaterial=function(t){r.Material.call(this),this.type="MeshDepthMaterial",this.wireframe=this.morphTargets=!1,this.wireframeLinewidth=1,this.setValues(t)},r.MeshDepthMaterial.prototype=Object.create(r.Material.prototype),r.MeshDepthMaterial.prototype.constructor=r.MeshDepthMaterial,r.MeshDepthMaterial.prototype.clone=function(){var t=new r.MeshDepthMaterial;return r.Material.prototype.clone.call(this,t),t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},r.MeshNormalMaterial=function(t){r.Material.call(this,t),this.type="MeshNormalMaterial",this.shading=r.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(t)},r.MeshNormalMaterial.prototype=Object.create(r.Material.prototype),r.MeshNormalMaterial.prototype.constructor=r.MeshNormalMaterial,r.MeshNormalMaterial.prototype.clone=function(){var t=new r.MeshNormalMaterial;return r.Material.prototype.clone.call(this,t),t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t},r.MeshFaceMaterial=function(t){this.uuid=r.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=t instanceof Array?t:[]},r.MeshFaceMaterial.prototype={constructor:r.MeshFaceMaterial,toJSON:function(){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},e=0,n=this.materials.length;n>e;e++)t.materials.push(this.materials[e].toJSON());return t},clone:function(){for(var t=new r.MeshFaceMaterial,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t}},r.PointCloudMaterial=function(t){r.Material.call(this),this.type="PointCloudMaterial",this.color=new r.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=r.NoColors,this.fog=!0,this.setValues(t)},r.PointCloudMaterial.prototype=Object.create(r.Material.prototype),r.PointCloudMaterial.prototype.constructor=r.PointCloudMaterial,r.PointCloudMaterial.prototype.clone=function(){var t=new r.PointCloudMaterial;return r.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.size=this.size,t.sizeAttenuation=this.sizeAttenuation,t.vertexColors=this.vertexColors,t.fog=this.fog,t},r.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new r.PointCloudMaterial(t)},r.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new r.PointCloudMaterial(t)},r.ShaderMaterial=function(t){r.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=r.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.vertexColors=r.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(t)},r.ShaderMaterial.prototype=Object.create(r.Material.prototype),r.ShaderMaterial.prototype.constructor=r.ShaderMaterial,r.ShaderMaterial.prototype.clone=function(){var t=new r.ShaderMaterial;return r.Material.prototype.clone.call(this,t),t.fragmentShader=this.fragmentShader,t.vertexShader=this.vertexShader,t.uniforms=r.UniformsUtils.clone(this.uniforms),t.attributes=this.attributes,t.defines=this.defines,t.shading=this.shading,t.wireframe=this.wireframe,t.wireframeLinewidth=this.wireframeLinewidth,t.fog=this.fog,t.lights=this.lights,t.vertexColors=this.vertexColors,t.skinning=this.skinning,t.morphTargets=this.morphTargets,t.morphNormals=this.morphNormals,t},r.RawShaderMaterial=function(t){r.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"},r.RawShaderMaterial.prototype=Object.create(r.ShaderMaterial.prototype),r.RawShaderMaterial.prototype.constructor=r.RawShaderMaterial,r.RawShaderMaterial.prototype.clone=function(){var t=new r.RawShaderMaterial;return r.ShaderMaterial.prototype.clone.call(this,t),t},r.SpriteMaterial=function(t){r.Material.call(this),this.type="SpriteMaterial",this.color=new r.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(t)},r.SpriteMaterial.prototype=Object.create(r.Material.prototype),r.SpriteMaterial.prototype.constructor=r.SpriteMaterial,r.SpriteMaterial.prototype.clone=function(){var t=new r.SpriteMaterial;return r.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.map=this.map,t.rotation=this.rotation,t.fog=this.fog,t},r.Texture=function(t,e,n,i,o,a,s,u,l){Object.defineProperty(this,"id",{value:r.TextureIdCount++}),this.uuid=r.Math.generateUUID(),this.name="",this.image=void 0!==t?t:r.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:r.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:r.ClampToEdgeWrapping,this.wrapT=void 0!==i?i:r.ClampToEdgeWrapping,this.magFilter=void 0!==o?o:r.LinearFilter,this.minFilter=void 0!==a?a:r.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:r.RGBAFormat,this.type=void 0!==u?u:r.UnsignedByteType,this.offset=new r.Vector2(0,0),this.repeat=new r.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},r.Texture.DEFAULT_IMAGE=void 0,r.Texture.DEFAULT_MAPPING=r.UVMapping,r.Texture.prototype={constructor:r.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},clone:function(t){return void 0===t&&(t=new r.Texture),t.image=this.image,t.mipmaps=this.mipmaps.slice(0),t.mapping=this.mapping,t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t.anisotropy=this.anisotropy,t.format=this.format,t.type=this.type,t.offset.copy(this.offset),t.repeat.copy(this.repeat),t.generateMipmaps=this.generateMipmaps,t.premultiplyAlpha=this.premultiplyAlpha,t.flipY=this.flipY,t.unpackAlignment=this.unpackAlignment,t},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.Texture.prototype),r.TextureIdCount=0,r.CubeTexture=function(t,e,n,i,o,a,s,u,l){e=void 0!==e?e:r.CubeReflectionMapping,r.Texture.call(this,t,e,n,i,o,a,s,u,l),this.images=t},r.CubeTexture.prototype=Object.create(r.Texture.prototype),r.CubeTexture.prototype.constructor=r.CubeTexture,r.CubeTexture.clone=function(t){return void 0===t&&(t=new r.CubeTexture),r.Texture.prototype.clone.call(this,t),t.images=this.images,t},r.CompressedTexture=function(t,e,n,i,o,a,s,u,l,c,h){r.Texture.call(this,null,a,s,u,l,c,i,o,h),this.image={width:e,height:n},this.mipmaps=t,this.generateMipmaps=this.flipY=!1},r.CompressedTexture.prototype=Object.create(r.Texture.prototype),r.CompressedTexture.prototype.constructor=r.CompressedTexture,r.CompressedTexture.prototype.clone=function(){var t=new r.CompressedTexture;return r.Texture.prototype.clone.call(this,t),t},r.DataTexture=function(t,e,n,i,o,a,s,u,l,c,h){r.Texture.call(this,null,a,s,u,l,c,i,o,h),this.image={data:t,width:e,height:n}},r.DataTexture.prototype=Object.create(r.Texture.prototype),r.DataTexture.prototype.constructor=r.DataTexture,r.DataTexture.prototype.clone=function(){var t=new r.DataTexture;return r.Texture.prototype.clone.call(this,t),t},r.VideoTexture=function(t,e,n,i,o,a,s,u,l){r.Texture.call(this,t,e,n,i,o,a,s,u,l),this.generateMipmaps=!1;var c=this,h=function(){requestAnimationFrame(h),t.readyState===t.HAVE_ENOUGH_DATA&&(c.needsUpdate=!0)};h()},r.VideoTexture.prototype=Object.create(r.Texture.prototype),r.VideoTexture.prototype.constructor=r.VideoTexture,r.Group=function(){r.Object3D.call(this),this.type="Group"},r.Group.prototype=Object.create(r.Object3D.prototype),r.Group.prototype.constructor=r.Group,r.PointCloud=function(t,e){r.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==t?t:new r.Geometry,this.material=void 0!==e?e:new r.PointCloudMaterial({color:16777215*Math.random()})},r.PointCloud.prototype=Object.create(r.Object3D.prototype),r.PointCloud.prototype.constructor=r.PointCloud,r.PointCloud.prototype.raycast=function(){var t=new r.Matrix4,e=new r.Ray;return function(n,i){var o=this,a=o.geometry,s=n.params.PointCloud.threshold;if(t.getInverse(this.matrixWorld),e.copy(n.ray).applyMatrix4(t),null===a.boundingBox||!1!==e.isIntersectionBox(a.boundingBox)){var u=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=new r.Vector3,s=function(t,r){var a=e.distanceToPoint(t);if(u>a){var s=e.closestPointToPoint(t);s.applyMatrix4(o.matrixWorld);var l=n.ray.origin.distanceTo(s);i.push({distance:l,distanceToRay:a,point:s.clone(),index:r,face:null,object:o})}};if(a instanceof r.BufferGeometry){var c=a.attributes,h=c.position.array;if(void 0!==c.index){var c=c.index.array,f=a.offsets;0===f.length&&(f=[{start:0,count:c.length,index:0}]);for(var p=0,d=f.length;d>p;++p)for(var m=f[p].start,g=f[p].index,a=m,m=m+f[p].count;m>a;a++){var y=g+c[a];l.fromArray(h,3*y),s(l,y)}}else for(c=h.length/3,a=0;c>a;a++)l.set(h[3*a],h[3*a+1],h[3*a+2]),s(l,a)}else for(l=this.geometry.vertices,a=0;a<l.length;a++)s(l[a],a)}}}(),r.PointCloud.prototype.clone=function(t){return void 0===t&&(t=new r.PointCloud(this.geometry,this.material)),r.Object3D.prototype.clone.call(this,t),t},r.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new r.PointCloud(t,e)},r.Line=function(t,e,n){r.Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new r.Geometry,this.material=void 0!==e?e:new r.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==n?n:r.LineStrip},r.LineStrip=0,r.LinePieces=1,r.Line.prototype=Object.create(r.Object3D.prototype),r.Line.prototype.constructor=r.Line,r.Line.prototype.raycast=function(){var t=new r.Matrix4,e=new r.Ray,n=new r.Sphere;return function(i,o){var a=i.linePrecision,a=a*a,s=this.geometry;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(this.matrixWorld),!1!==i.ray.isIntersectionSphere(n)){t.getInverse(this.matrixWorld),e.copy(i.ray).applyMatrix4(t);var u=new r.Vector3,l=new r.Vector3,c=new r.Vector3,h=new r.Vector3,f=this.mode===r.LineStrip?1:2;if(s instanceof r.BufferGeometry){var p=s.attributes;if(void 0!==p.index){var d=p.index.array,p=p.position.array,m=s.offsets;0===m.length&&(m=[{start:0,count:d.length,index:0}]);for(var g=0;g<m.length;g++)for(var y=m[g].start,v=m[g].count,b=m[g].index,s=y;y+v-1>s;s+=f){var _=b+d[s+1];u.fromArray(p,3*(b+d[s])),l.fromArray(p,3*_),_=e.distanceSqToSegment(u,l,h,c),_>a||(_=e.origin.distanceTo(h),_<i.near||_>i.far||o.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this}))}}else for(p=p.position.array,s=0;s<p.length/3-1;s+=f)u.fromArray(p,3*s),l.fromArray(p,3*s+3),_=e.distanceSqToSegment(u,l,h,c),_>a||(_=e.origin.distanceTo(h),_<i.near||_>i.far||o.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this}))}else if(s instanceof r.Geometry)for(u=s.vertices,l=u.length,s=0;l-1>s;s+=f)_=e.distanceSqToSegment(u[s],u[s+1],h,c),_>a||(_=e.origin.distanceTo(h),_<i.near||_>i.far||o.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this}))}}}(),r.Line.prototype.clone=function(t){return void 0===t&&(t=new r.Line(this.geometry,this.material,this.mode)),r.Object3D.prototype.clone.call(this,t),t},r.Mesh=function(t,e){r.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new r.Geometry,this.material=void 0!==e?e:new r.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},r.Mesh.prototype=Object.create(r.Object3D.prototype),r.Mesh.prototype.constructor=r.Mesh,r.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;e>t;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},r.Mesh.prototype.getMorphTargetIndexByName=function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},r.Mesh.prototype.raycast=function(){var t=new r.Matrix4,e=new r.Ray,n=new r.Sphere,i=new r.Vector3,o=new r.Vector3,a=new r.Vector3;return function(s,u){var l=this.geometry;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(this.matrixWorld),!1!==s.ray.isIntersectionSphere(n)&&(t.getInverse(this.matrixWorld),e.copy(s.ray).applyMatrix4(t),null===l.boundingBox||!1!==e.isIntersectionBox(l.boundingBox)))if(l instanceof r.BufferGeometry){var c=this.material;if(void 0!==c){var h,f,p=l.attributes,d=s.precision;if(void 0!==p.index){var m=p.index.array,g=p.position.array,y=l.offsets;0===y.length&&(y=[{start:0,count:m.length,index:0}]);for(var v=0,b=y.length;b>v;++v)for(var p=y[v].start,_=y[v].index,l=p,x=p+y[v].count;x>l;l+=3){p=_+m[l],h=_+m[l+1],f=_+m[l+2],i.fromArray(g,3*p),o.fromArray(g,3*h),a.fromArray(g,3*f);var w=c.side===r.BackSide?e.intersectTriangle(a,o,i,!0):e.intersectTriangle(i,o,a,c.side!==r.DoubleSide);if(null!==w){w.applyMatrix4(this.matrixWorld);var M=s.ray.origin.distanceTo(w);d>M||M<s.near||M>s.far||u.push({distance:M,point:w,face:new r.Face3(p,h,f,r.Triangle.normal(i,o,a)),faceIndex:null,object:this})}}}else for(g=p.position.array,m=l=0,x=g.length;x>l;l+=3,m+=9)p=l,h=l+1,f=l+2,i.fromArray(g,m),o.fromArray(g,m+3),a.fromArray(g,m+6),w=c.side===r.BackSide?e.intersectTriangle(a,o,i,!0):e.intersectTriangle(i,o,a,c.side!==r.DoubleSide),null!==w&&(w.applyMatrix4(this.matrixWorld),M=s.ray.origin.distanceTo(w),d>M||M<s.near||M>s.far||u.push({distance:M,point:w,face:new r.Face3(p,h,f,r.Triangle.normal(i,o,a)),faceIndex:null,object:this}))}}else if(l instanceof r.Geometry)for(m=this.material instanceof r.MeshFaceMaterial,g=!0===m?this.material.materials:null,d=s.precision,y=l.vertices,v=0,b=l.faces.length;b>v;v++)if(_=l.faces[v],c=!0===m?g[_.materialIndex]:this.material,void 0!==c){if(p=y[_.a],h=y[_.b],f=y[_.c],!0===c.morphTargets){w=l.morphTargets,M=this.morphTargetInfluences,i.set(0,0,0),o.set(0,0,0),a.set(0,0,0);for(var x=0,C=w.length;C>x;x++){var P=M[x];if(0!==P){var E=w[x].vertices;i.x+=(E[_.a].x-p.x)*P,i.y+=(E[_.a].y-p.y)*P,i.z+=(E[_.a].z-p.z)*P,o.x+=(E[_.b].x-h.x)*P,o.y+=(E[_.b].y-h.y)*P,o.z+=(E[_.b].z-h.z)*P,a.x+=(E[_.c].x-f.x)*P,a.y+=(E[_.c].y-f.y)*P,a.z+=(E[_.c].z-f.z)*P}}i.add(p),o.add(h),a.add(f),p=i,h=o,f=a}w=c.side===r.BackSide?e.intersectTriangle(f,h,p,!0):e.intersectTriangle(p,h,f,c.side!==r.DoubleSide),null!==w&&(w.applyMatrix4(this.matrixWorld),M=s.ray.origin.distanceTo(w),d>M||M<s.near||M>s.far||u.push({distance:M,point:w,face:_,faceIndex:v,object:this}))}}}(),r.Mesh.prototype.clone=function(t,e){return void 0===t&&(t=new r.Mesh(this.geometry,this.material)),r.Object3D.prototype.clone.call(this,t,e),t},r.Bone=function(t){r.Object3D.call(this),this.skin=t},r.Bone.prototype=Object.create(r.Object3D.prototype),r.Bone.prototype.constructor=r.Bone,r.Skeleton=function(t,e,n){if(this.useVertexTexture=void 0!==n?n:!0,this.identityMatrix=new r.Matrix4,t=t||[],this.bones=t.slice(0),this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=t=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new r.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,r.RGBAFormat,r.FloatType),this.boneTexture.minFilter=r.NearestFilter,this.boneTexture.magFilter=r.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;t>e;e++)this.boneInverses.push(new r.Matrix4)},r.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var t=0,e=this.bones.length;e>t;t++){var n=new r.Matrix4;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},r.Skeleton.prototype.pose=function(){for(var t,e=0,n=this.bones.length;n>e;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;n>e;e++)(t=this.bones[e])&&(t.parent?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},r.Skeleton.prototype.update=function(){var t=new r.Matrix4;return function(){for(var e=0,n=this.bones.length;n>e;e++)t.multiplyMatrices(this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix,this.boneInverses[e]),t.flattenToArrayOffset(this.boneMatrices,16*e);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),r.SkinnedMesh=function(t,e,n){if(r.Mesh.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new r.Matrix4,this.bindMatrixInverse=new r.Matrix4,t=[],this.geometry&&void 0!==this.geometry.bones){for(var i,o,a,s,u=0,l=this.geometry.bones.length;l>u;++u)i=this.geometry.bones[u],o=i.pos,a=i.rotq,s=i.scl,e=new r.Bone(this),t.push(e),e.name=i.name,e.position.set(o[0],o[1],o[2]),e.quaternion.set(a[0],a[1],a[2],a[3]),void 0!==s?e.scale.set(s[0],s[1],s[2]):e.scale.set(1,1,1);for(u=0,l=this.geometry.bones.length;l>u;++u)i=this.geometry.bones[u],-1!==i.parent?t[i.parent].add(t[u]):this.add(t[u])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new r.Skeleton(t,void 0,n))},r.SkinnedMesh.prototype=Object.create(r.Mesh.prototype),r.SkinnedMesh.prototype.constructor=r.SkinnedMesh,r.SkinnedMesh.prototype.bind=function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},r.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},r.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof r.Geometry)for(var t=0;t<this.geometry.skinIndices.length;t++){var e=this.geometry.skinWeights[t],n=1/e.lengthManhattan();1/0!==n?e.multiplyScalar(n):e.set(1)}},r.SkinnedMesh.prototype.updateMatrixWorld=function(t){r.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},r.SkinnedMesh.prototype.clone=function(t){return void 0===t&&(t=new r.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),r.Mesh.prototype.clone.call(this,t),t},r.MorphAnimMesh=function(t,e){r.Mesh.call(this,t,e),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.currentKeyframe=this.lastKeyframe=this.time=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},r.MorphAnimMesh.prototype=Object.create(r.Mesh.prototype),r.MorphAnimMesh.prototype.constructor=r.MorphAnimMesh,r.MorphAnimMesh.prototype.setFrameRange=function(t,e){this.startKeyframe=t,this.endKeyframe=e,this.length=this.endKeyframe-this.startKeyframe+1},r.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},r.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},r.MorphAnimMesh.prototype.parseAnimations=function(){var t=this.geometry;t.animations||(t.animations={});for(var e,n=t.animations,r=/([a-z]+)_?(\d+)/,i=0,o=t.morphTargets.length;o>i;i++){var a=t.morphTargets[i].name.match(r);if(a&&1<a.length){a=a[1],n[a]||(n[a]={start:1/0,end:-(1/0)});var s=n[a];i<s.start&&(s.start=i),i>s.end&&(s.end=i),e||(e=a)}}t.firstAnimation=e},r.MorphAnimMesh.prototype.setAnimationLabel=function(t,e,n){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[t]={start:e,end:n}},r.MorphAnimMesh.prototype.playAnimation=function(t,e){var n=this.geometry.animations[t];n?(this.setFrameRange(n.start,n.end),this.duration=(n.end-n.start)/e*1e3,this.time=0):console.warn("animation["+t+"] undefined")},r.MorphAnimMesh.prototype.updateAnimation=function(t){var e=this.duration/this.length;this.time+=this.direction*t,this.mirroredLoop?(this.time>this.duration||0>this.time)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)):(this.time%=this.duration,0>this.time&&(this.time+=this.duration)),t=this.startKeyframe+r.Math.clamp(Math.floor(this.time/e),0,this.length-1),t!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[t]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=t),e=this.time%e/e,this.directionBackwards&&(e=1-e),this.morphTargetInfluences[this.currentKeyframe]=e,this.morphTargetInfluences[this.lastKeyframe]=1-e},r.MorphAnimMesh.prototype.interpolateTargets=function(t,e,n){for(var r=this.morphTargetInfluences,i=0,o=r.length;o>i;i++)r[i]=0;t>-1&&(r[t]=1-n),e>-1&&(r[e]=n)},r.MorphAnimMesh.prototype.clone=function(t){return void 0===t&&(t=new r.MorphAnimMesh(this.geometry,this.material)),t.duration=this.duration,t.mirroredLoop=this.mirroredLoop,t.time=this.time,t.lastKeyframe=this.lastKeyframe,t.currentKeyframe=this.currentKeyframe,t.direction=this.direction,t.directionBackwards=this.directionBackwards,r.Mesh.prototype.clone.call(this,t),t},r.LOD=function(){r.Object3D.call(this),this.objects=[]},r.LOD.prototype=Object.create(r.Object3D.prototype),r.LOD.prototype.constructor=r.LOD,r.LOD.prototype.addLevel=function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=0;n<this.objects.length&&!(e<this.objects[n].distance);n++);this.objects.splice(n,0,{distance:e,object:t}),this.add(t)},r.LOD.prototype.getObjectForDistance=function(t){for(var e=1,n=this.objects.length;n>e&&!(t<this.objects[e].distance);e++);return this.objects[e-1].object},r.LOD.prototype.raycast=function(){var t=new r.Vector3;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(t);this.getObjectForDistance(r).raycast(e,n)}}(),r.LOD.prototype.update=function(){var t=new r.Vector3,e=new r.Vector3;return function(n){if(1<this.objects.length){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld),n=t.distanceTo(e),this.objects[0].object.visible=!0;for(var r=1,i=this.objects.length;i>r&&n>=this.objects[r].distance;r++)this.objects[r-1].object.visible=!1,this.objects[r].object.visible=!0;for(;i>r;r++)this.objects[r].object.visible=!1}}}(),r.LOD.prototype.clone=function(t){void 0===t&&(t=new r.LOD),r.Object3D.prototype.clone.call(this,t);for(var e=0,n=this.objects.length;n>e;e++){var i=this.objects[e].object.clone();i.visible=0===e,t.addLevel(i,this.objects[e].distance)}return t},r.Sprite=function(){var t=new Uint16Array([0,1,2,0,2,3]),e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),n=new Float32Array([0,0,1,0,1,1,0,1]),i=new r.BufferGeometry;return i.addAttribute("index",new r.BufferAttribute(t,1)),i.addAttribute("position",new r.BufferAttribute(e,3)),i.addAttribute("uv",new r.BufferAttribute(n,2)),function(t){r.Object3D.call(this),this.type="Sprite",this.geometry=i,this.material=void 0!==t?t:new r.SpriteMaterial}}(),r.Sprite.prototype=Object.create(r.Object3D.prototype),r.Sprite.prototype.constructor=r.Sprite,r.Sprite.prototype.raycast=function(){var t=new r.Vector3;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.distanceToPoint(t);r>this.scale.x||n.push({distance:r,point:this.position,face:null,object:this})}}(),r.Sprite.prototype.clone=function(t){return void 0===t&&(t=new r.Sprite(this.material)),r.Object3D.prototype.clone.call(this,t),t},r.Particle=r.Sprite,r.LensFlare=function(t,e,n,i,o){r.Object3D.call(this),this.lensFlares=[],this.positionScreen=new r.Vector3,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,n,i,o)},r.LensFlare.prototype=Object.create(r.Object3D.prototype),r.LensFlare.prototype.constructor=r.LensFlare,r.LensFlare.prototype.add=function(t,e,n,i,o,a){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===o&&(o=new r.Color(16777215)),void 0===i&&(i=r.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:1,opacity:a,color:o,blending:i})},r.LensFlare.prototype.updateLensFlares=function(){var t,e,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(t=0;n>t;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+r*e.distance,e.y=this.positionScreen.y+i*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)},r.Scene=function(){r.Object3D.call(this),this.type="Scene",this.overrideMaterial=this.fog=null,this.autoUpdate=!0},r.Scene.prototype=Object.create(r.Object3D.prototype),r.Scene.prototype.constructor=r.Scene,r.Scene.prototype.clone=function(t){return void 0===t&&(t=new r.Scene),r.Object3D.prototype.clone.call(this,t),null!==this.fog&&(t.fog=this.fog.clone()),null!==this.overrideMaterial&&(t.overrideMaterial=this.overrideMaterial.clone()),t.autoUpdate=this.autoUpdate,t.matrixAutoUpdate=this.matrixAutoUpdate,t},r.Fog=function(t,e,n){this.name="",this.color=new r.Color(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3},r.Fog.prototype.clone=function(){return new r.Fog(this.color.getHex(),this.near,this.far)},r.FogExp2=function(t,e){this.name="",this.color=new r.Color(t),this.density=void 0!==e?e:25e-5},r.FogExp2.prototype.clone=function(){return new r.FogExp2(this.color.getHex(),this.density)},r.ShaderChunk={},r.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",r.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",
r.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",r.ShaderChunk.default_vertex="#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",r.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",r.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",r.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",r.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",r.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",r.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",r.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",r.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",r.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",r.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",r.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",r.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",r.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",r.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",r.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif",r.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",r.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",r.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",r.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif",r.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",r.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",r.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",r.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",r.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",r.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",r.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = clamp( flipNormal * reflectVec.y * 0.5 + 0.5, 0.0, 1.0);\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * 0.15915494309189533576888376337251 + 0.5; // reciprocal( 2 PI ) + 0.5\n		vec4 envColor = texture2D( envMap, sampleUV );\n		\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		envColor.xyz *= envColor.xyz;\n\n	#endif\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		gl_FragColor.xyz += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",r.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",r.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",r.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",r.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",r.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",r.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif",r.ShaderChunk.defaultnormal_vertex="#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",r.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",r.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",r.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",r.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",r.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",r.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",r.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",r.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",r.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",r.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n",r.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",
r.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",r.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",r.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",r.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",r.UniformsUtils={merge:function(t){for(var e={},n=0;n<t.length;n++){var r,i=this.clone(t[n]);for(r in i)e[r]=i[r]}return e},clone:function(t){var e,n={};for(e in t){n[e]={};for(var i in t[e]){var o=t[e][i];n[e][i]=o instanceof r.Color||o instanceof r.Vector2||o instanceof r.Vector3||o instanceof r.Vector4||o instanceof r.Matrix4||o instanceof r.Texture?o.clone():o instanceof Array?o.slice():o}}return n}},r.UniformsLib={common:{diffuse:{type:"c",value:new r.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new r.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new r.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new r.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new r.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new r.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},r.ShaderLib={basic:{uniforms:r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.fog,r.UniformsLib.shadowmap]),vertexShader:[r.ShaderChunk.map_pars_vertex,r.ShaderChunk.lightmap_pars_vertex,r.ShaderChunk.envmap_pars_vertex,r.ShaderChunk.color_pars_vertex,r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.skinning_pars_vertex,r.ShaderChunk.shadowmap_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.map_vertex,r.ShaderChunk.lightmap_vertex,r.ShaderChunk.color_vertex,r.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",r.ShaderChunk.morphnormal_vertex,r.ShaderChunk.skinnormal_vertex,r.ShaderChunk.defaultnormal_vertex,"	#endif",r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.skinning_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,r.ShaderChunk.worldpos_vertex,r.ShaderChunk.envmap_vertex,r.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.map_pars_fragment,r.ShaderChunk.alphamap_pars_fragment,r.ShaderChunk.lightmap_pars_fragment,r.ShaderChunk.envmap_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.shadowmap_pars_fragment,r.ShaderChunk.specularmap_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( diffuse, opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.map_fragment,r.ShaderChunk.alphamap_fragment,r.ShaderChunk.alphatest_fragment,r.ShaderChunk.specularmap_fragment,r.ShaderChunk.lightmap_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.envmap_fragment,r.ShaderChunk.shadowmap_fragment,r.ShaderChunk.linear_to_gamma_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.fog,r.UniformsLib.lights,r.UniformsLib.shadowmap,{ambient:{type:"c",value:new r.Color(16777215)},emissive:{type:"c",value:new r.Color(0)},wrapRGB:{type:"v3",value:new r.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",r.ShaderChunk.map_pars_vertex,r.ShaderChunk.lightmap_pars_vertex,r.ShaderChunk.envmap_pars_vertex,r.ShaderChunk.lights_lambert_pars_vertex,r.ShaderChunk.color_pars_vertex,r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.skinning_pars_vertex,r.ShaderChunk.shadowmap_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.map_vertex,r.ShaderChunk.lightmap_vertex,r.ShaderChunk.color_vertex,r.ShaderChunk.morphnormal_vertex,r.ShaderChunk.skinbase_vertex,r.ShaderChunk.skinnormal_vertex,r.ShaderChunk.defaultnormal_vertex,r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.skinning_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,r.ShaderChunk.worldpos_vertex,r.ShaderChunk.envmap_vertex,r.ShaderChunk.lights_lambert_vertex,r.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.map_pars_fragment,r.ShaderChunk.alphamap_pars_fragment,r.ShaderChunk.lightmap_pars_fragment,r.ShaderChunk.envmap_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.shadowmap_pars_fragment,r.ShaderChunk.specularmap_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( vec3( 1.0 ), opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.map_fragment,r.ShaderChunk.alphamap_fragment,r.ShaderChunk.alphatest_fragment,r.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED\n		if ( gl_FrontFacing )\n			gl_FragColor.xyz *= vLightFront;\n		else\n			gl_FragColor.xyz *= vLightBack;\n	#else\n		gl_FragColor.xyz *= vLightFront;\n	#endif",r.ShaderChunk.lightmap_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.envmap_fragment,r.ShaderChunk.shadowmap_fragment,r.ShaderChunk.linear_to_gamma_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.bump,r.UniformsLib.normalmap,r.UniformsLib.fog,r.UniformsLib.lights,r.UniformsLib.shadowmap,{ambient:{type:"c",value:new r.Color(16777215)},emissive:{type:"c",value:new r.Color(0)},specular:{type:"c",value:new r.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new r.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",r.ShaderChunk.map_pars_vertex,r.ShaderChunk.lightmap_pars_vertex,r.ShaderChunk.envmap_pars_vertex,r.ShaderChunk.lights_phong_pars_vertex,r.ShaderChunk.color_pars_vertex,r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.skinning_pars_vertex,r.ShaderChunk.shadowmap_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.map_vertex,r.ShaderChunk.lightmap_vertex,r.ShaderChunk.color_vertex,r.ShaderChunk.morphnormal_vertex,r.ShaderChunk.skinbase_vertex,r.ShaderChunk.skinnormal_vertex,r.ShaderChunk.defaultnormal_vertex,"	vNormal = normalize( transformedNormal );",r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.skinning_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",r.ShaderChunk.worldpos_vertex,r.ShaderChunk.envmap_vertex,r.ShaderChunk.lights_phong_vertex,r.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.map_pars_fragment,r.ShaderChunk.alphamap_pars_fragment,r.ShaderChunk.lightmap_pars_fragment,r.ShaderChunk.envmap_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.lights_phong_pars_fragment,r.ShaderChunk.shadowmap_pars_fragment,r.ShaderChunk.bumpmap_pars_fragment,r.ShaderChunk.normalmap_pars_fragment,r.ShaderChunk.specularmap_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( vec3( 1.0 ), opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.map_fragment,r.ShaderChunk.alphamap_fragment,r.ShaderChunk.alphatest_fragment,r.ShaderChunk.specularmap_fragment,r.ShaderChunk.lights_phong_fragment,r.ShaderChunk.lightmap_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.envmap_fragment,r.ShaderChunk.shadowmap_fragment,r.ShaderChunk.linear_to_gamma_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:r.UniformsUtils.merge([r.UniformsLib.particle,r.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",r.ShaderChunk.color_pars_vertex,r.ShaderChunk.shadowmap_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n	#else\n		gl_PointSize = size;\n	#endif\n	gl_Position = projectionMatrix * mvPosition;",r.ShaderChunk.logdepthbuf_vertex,r.ShaderChunk.worldpos_vertex,r.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.map_particle_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.shadowmap_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( psColor, opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.map_particle_fragment,r.ShaderChunk.alphatest_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.shadowmap_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",r.ShaderChunk.color_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;",r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.fog_pars_fragment,r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	gl_FragColor = vec4( diffuse, opacity );",r.ShaderChunk.logdepthbuf_fragment,r.ShaderChunk.color_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",r.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	float color = 1.0 - smoothstep( mNear, mFar, depth );\n	gl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vNormal = normalize( normalMatrix * normal );",r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",r.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n	vWorldPosition = worldPosition.xyz;\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",r.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n	vWorldPosition = worldPosition.xyz;\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",r.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = clamp( tFlip * direction.y * -0.5 + 0.5, 0.0, 1.0);\nsampleUV.x = atan( direction.z, direction.x ) * 0.15915494309189533576888376337251 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",r.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[r.ShaderChunk.morphtarget_pars_vertex,r.ShaderChunk.skinning_pars_vertex,r.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",r.ShaderChunk.skinbase_vertex,r.ShaderChunk.morphtarget_vertex,r.ShaderChunk.skinning_vertex,r.ShaderChunk.default_vertex,r.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[r.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bit_mask;\n	return res;\n}\nvoid main() {",r.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n	#else\n		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n	#endif\n}"].join("\n")}},r.WebGLRenderer=function(t){function e(t){var e=t.geometry;t=t.material;var n=e.vertices.length;if(t.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var r in t.attributes){var i=t.attributes[r];if(!i.__webglInitialized||i.createUniqueBuffers){i.__webglInitialized=!0;var o=1;"v2"===i.type?o=2:"v3"===i.type?o=3:"v4"===i.type?o=4:"c"===i.type&&(o=3),i.size=o,i.array=new Float32Array(n*o),i.buffer=Dt.createBuffer(),i.buffer.belongsToAttribute=r,i.needsUpdate=!0}e.__webglCustomAttributesList.push(i)}}}function n(t,e){var n=e.geometry,r=t.faces3,o=3*r.length,a=1*r.length,s=3*r.length,r=i(e,t);t.__vertexArray=new Float32Array(3*o),t.__normalArray=new Float32Array(3*o),t.__colorArray=new Float32Array(3*o),t.__uvArray=new Float32Array(2*o),1<n.faceVertexUvs.length&&(t.__uv2Array=new Float32Array(2*o)),n.hasTangents&&(t.__tangentArray=new Float32Array(4*o)),e.geometry.skinWeights.length&&e.geometry.skinIndices.length&&(t.__skinIndexArray=new Float32Array(4*o),t.__skinWeightArray=new Float32Array(4*o)),n=null!==Ft.get("OES_element_index_uint")&&a>21845?Uint32Array:Uint16Array,t.__typeArray=n,t.__faceArray=new n(3*a),t.__lineArray=new n(2*s);var u=t.numMorphTargets;if(u)for(t.__morphTargetsArrays=[],n=0;u>n;n++)t.__morphTargetsArrays.push(new Float32Array(3*o));if(u=t.numMorphNormals)for(t.__morphNormalsArrays=[],n=0;u>n;n++)t.__morphNormalsArrays.push(new Float32Array(3*o));if(t.__webglFaceCount=3*a,t.__webglLineCount=2*s,r.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]);for(var l in r.attributes){var c,a=r.attributes[l],s={};for(c in a)s[c]=a[c];(!s.__webglInitialized||s.createUniqueBuffers)&&(s.__webglInitialized=!0,n=1,"v2"===s.type?n=2:"v3"===s.type?n=3:"v4"===s.type?n=4:"c"===s.type&&(n=3),s.size=n,s.array=new Float32Array(o*n),s.buffer=Dt.createBuffer(),s.buffer.belongsToAttribute=l,a.needsUpdate=!0,s.__original=a),t.__webglCustomAttributesList.push(s)}}t.__inittedArrays=!0}function i(t,e){return t.material instanceof r.MeshFaceMaterial?t.material.materials[e.materialIndex]:t.material}function o(t,e,n,r){n=n.attributes;var i=e.attributes;e=e.attributesKeys;for(var o=0,a=e.length;a>o;o++){var l=e[o],c=i[l];if(c>=0){var h=n[l];void 0!==h?(l=h.itemSize,Dt.bindBuffer(Dt.ARRAY_BUFFER,h.buffer),s(c),Dt.vertexAttribPointer(c,l,Dt.FLOAT,!1,0,r*l*4)):void 0!==t.defaultAttributeValues&&(2===t.defaultAttributeValues[l].length?Dt.vertexAttrib2fv(c,t.defaultAttributeValues[l]):3===t.defaultAttributeValues[l].length&&Dt.vertexAttrib3fv(c,t.defaultAttributeValues[l]))}}u()}function a(){for(var t=0,e=Tt.length;e>t;t++)Tt[t]=0}function s(t){Tt[t]=1,0===St[t]&&(Dt.enableVertexAttribArray(t),St[t]=1)}function u(){for(var t=0,e=St.length;e>t;t++)St[t]!==Tt[t]&&(Dt.disableVertexAttribArray(t),St[t]=0)}function l(t,e){return t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function c(t,e){return t.z!==e.z?e.z-t.z:t.id-e.id}function h(t,e){return e[0]-t[0]}function f(t){if(!1!==t.visible){if(!(t instanceof r.Scene||t instanceof r.Group)){void 0===t.__webglInit&&(t.__webglInit=!0,t._modelViewMatrix=new r.Matrix4,t._normalMatrix=new r.Matrix3,t.addEventListener("removed",re));var n=t.geometry;if(void 0!==n&&void 0===n.__webglInit)if(n.__webglInit=!0,n.addEventListener("dispose",ie),n instanceof r.BufferGeometry)et.info.memory.geometries++;else if(t instanceof r.Mesh)g(t,n);else if(t instanceof r.Line){if(void 0===n.__webglVertexBuffer){n.__webglVertexBuffer=Dt.createBuffer(),n.__webglColorBuffer=Dt.createBuffer(),n.__webglLineDistanceBuffer=Dt.createBuffer(),et.info.memory.geometries++;var i=n.vertices.length;n.__vertexArray=new Float32Array(3*i),n.__colorArray=new Float32Array(3*i),n.__lineDistanceArray=new Float32Array(1*i),n.__webglLineCount=i,e(t),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0,n.lineDistancesNeedUpdate=!0}}else t instanceof r.PointCloud&&void 0===n.__webglVertexBuffer&&(n.__webglVertexBuffer=Dt.createBuffer(),n.__webglColorBuffer=Dt.createBuffer(),et.info.memory.geometries++,i=n.vertices.length,n.__vertexArray=new Float32Array(3*i),n.__colorArray=new Float32Array(3*i),n.__sortArray=[],n.__webglParticleCount=i,e(t),n.verticesNeedUpdate=!0,n.colorsNeedUpdate=!0);if(void 0===t.__webglActive)if(t.__webglActive=!0,t instanceof r.Mesh){if(n instanceof r.BufferGeometry)y(Z,n,t);else if(n instanceof r.Geometry)for(var n=ce[n.id],i=0,o=n.length;o>i;i++)y(Z,n[i],t)}else t instanceof r.Line||t instanceof r.PointCloud?y(Z,n,t):(t instanceof r.ImmediateRenderObject||t.immediateRenderCallback)&&K.push({id:null,object:t,opaque:null,transparent:null,z:0});if(t instanceof r.Light)q.push(t);else if(t instanceof r.Sprite)$.push(t);else if(t instanceof r.LensFlare)tt.push(t);else if((n=Z[t.id])&&(!1===t.frustumCulled||!0===Lt.intersectsObject(t)))for(i=0,o=n.length;o>i;i++){var a=n[i],s=a,u=s.object,l=s.buffer,c=u.geometry,u=u.material;u instanceof r.MeshFaceMaterial?(u=u.materials[c instanceof r.BufferGeometry?0:l.materialIndex],s.material=u,u.transparent?Q.push(s):J.push(s)):u&&(s.material=u,u.transparent?Q.push(s):J.push(s)),a.render=!0,!0===et.sortObjects&&(It.setFromMatrixPosition(t.matrixWorld),It.applyProjection(At),a.z=It.z)}}for(i=0,o=t.children.length;o>i;i++)f(t.children[i])}}function p(t,e,n,i,o,a){for(var s,u=0,l=t.length;l>u;u++){s=t[u];var c=s.object,h=s.buffer;if(C(c,e),a)s=a;else{if(s=s.material,!s)continue;o&&et.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),et.setDepthTest(s.depthTest),et.setDepthWrite(s.depthWrite),S(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}et.setMaterialFaces(s),h instanceof r.BufferGeometry?et.renderBufferDirect(e,n,i,s,h,c):et.renderBuffer(e,n,i,s,h,c)}}function d(t,e,n,r,i,o,a){for(var s,u=0,l=t.length;l>u;u++){s=t[u];var c=s.object;if(c.visible){if(a)s=a;else{if(s=s[e],!s)continue;o&&et.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),et.setDepthTest(s.depthTest),et.setDepthWrite(s.depthWrite),S(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}et.renderImmediateObject(n,r,i,s,c)}}}function m(t){var e=t.object.material;e.transparent?(t.transparent=e,t.opaque=null):(t.opaque=e,t.transparent=null)}function g(t,e){var i=t.material,o=!1;if(void 0===ce[e.id]||!0===e.groupsNeedUpdate){delete Z[t.id];for(var a,s,u=ce,l=e.id,i=i instanceof r.MeshFaceMaterial,c=Ft.get("OES_element_index_uint")?4294967296:65535,o={},h=e.morphTargets.length,f=e.morphNormals.length,p={},d=[],m=0,g=e.faces.length;g>m;m++){a=e.faces[m];var v=i?a.materialIndex:0;v in o||(o[v]={hash:v,counter:0}),a=o[v].hash+"_"+o[v].counter,a in p||(s={id:he++,faces3:[],materialIndex:v,vertices:0,numMorphTargets:h,numMorphNormals:f},p[a]=s,d.push(s)),p[a].vertices+3>c&&(o[v].counter+=1,a=o[v].hash+"_"+o[v].counter,a in p||(s={id:he++,faces3:[],materialIndex:v,vertices:0,numMorphTargets:h,numMorphNormals:f},p[a]=s,d.push(s))),p[a].faces3.push(m),p[a].vertices+=3}u[l]=d,e.groupsNeedUpdate=!1}for(u=ce[e.id],l=0,i=u.length;i>l;l++){if(c=u[l],void 0===c.__webglVertexBuffer){if(o=c,o.__webglVertexBuffer=Dt.createBuffer(),o.__webglNormalBuffer=Dt.createBuffer(),o.__webglTangentBuffer=Dt.createBuffer(),o.__webglColorBuffer=Dt.createBuffer(),o.__webglUVBuffer=Dt.createBuffer(),o.__webglUV2Buffer=Dt.createBuffer(),o.__webglSkinIndicesBuffer=Dt.createBuffer(),o.__webglSkinWeightsBuffer=Dt.createBuffer(),o.__webglFaceBuffer=Dt.createBuffer(),o.__webglLineBuffer=Dt.createBuffer(),f=o.numMorphTargets)for(o.__webglMorphTargetsBuffers=[],h=0;f>h;h++)o.__webglMorphTargetsBuffers.push(Dt.createBuffer());if(f=o.numMorphNormals)for(o.__webglMorphNormalsBuffers=[],h=0;f>h;h++)o.__webglMorphNormalsBuffers.push(Dt.createBuffer());et.info.memory.geometries++,n(c,t),e.verticesNeedUpdate=!0,e.morphTargetsNeedUpdate=!0,e.elementsNeedUpdate=!0,e.uvsNeedUpdate=!0,e.normalsNeedUpdate=!0,e.tangentsNeedUpdate=!0,o=e.colorsNeedUpdate=!0}else o=!1;(o||void 0===t.__webglActive)&&y(Z,c,t)}t.__webglActive=!0}function y(t,e,n){var r=n.id;t[r]=t[r]||[],t[r].push({id:r,buffer:e,object:n,material:null,z:0})}function v(t){var e=t.geometry;if(e instanceof r.BufferGeometry)for(var o=e.attributes,a=e.attributesKeys,s=0,u=a.length;u>s;s++){var l=a[s],c=o[l];if(void 0===c.buffer&&(c.buffer=Dt.createBuffer(),c.needsUpdate=!0),!0===c.needsUpdate){var h="index"===l?Dt.ELEMENT_ARRAY_BUFFER:Dt.ARRAY_BUFFER;Dt.bindBuffer(h,c.buffer),Dt.bufferData(h,c.array,Dt.STATIC_DRAW),c.needsUpdate=!1}}else if(t instanceof r.Mesh){!0===e.groupsNeedUpdate&&g(t,e);for(var f=ce[e.id],s=0,p=f.length;p>s;s++){var d=f[s],m=i(t,d);!0===e.groupsNeedUpdate&&n(d,t);var y=m.attributes&&b(m);if(e.verticesNeedUpdate||e.morphTargetsNeedUpdate||e.elementsNeedUpdate||e.uvsNeedUpdate||e.normalsNeedUpdate||e.colorsNeedUpdate||e.tangentsNeedUpdate||y){var v=d,x=t,w=Dt.DYNAMIC_DRAW,M=!e.dynamic,C=m;if(v.__inittedArrays){var P=C&&void 0!==C.shading&&C.shading===r.SmoothShading,E=void 0,T=void 0,S=void 0,L=void 0,A=void 0,D=void 0,I=void 0,k=void 0,N=void 0,B=void 0,O=void 0,R=void 0,F=void 0,U=void 0,z=void 0,V=void 0,G=void 0,W=void 0,H=void 0,j=void 0,X=void 0,Y=void 0,q=void 0,Z=void 0,K=void 0,J=void 0,Q=void 0,$=void 0,tt=void 0,et=void 0,nt=void 0,rt=void 0,it=void 0,ot=void 0,at=void 0,st=void 0,ut=void 0,lt=void 0,ct=void 0,ht=void 0,ft=0,pt=0,dt=0,mt=0,gt=0,yt=0,vt=0,bt=0,_t=0,xt=0,wt=0,Mt=0,Ct=void 0,Pt=v.__vertexArray,Et=v.__uvArray,Tt=v.__uv2Array,St=v.__normalArray,Lt=v.__tangentArray,At=v.__colorArray,It=v.__skinIndexArray,kt=v.__skinWeightArray,Nt=v.__morphTargetsArrays,Bt=v.__morphNormalsArrays,Ot=v.__webglCustomAttributesList,Rt=void 0,Ft=v.__faceArray,Ut=v.__lineArray,zt=x.geometry,Vt=zt.elementsNeedUpdate,Gt=zt.uvsNeedUpdate,Wt=zt.normalsNeedUpdate,Ht=zt.tangentsNeedUpdate,jt=zt.colorsNeedUpdate,Xt=zt.morphTargetsNeedUpdate,Yt=zt.vertices,qt=v.faces3,Zt=zt.faces,Kt=zt.faceVertexUvs[0],Jt=zt.faceVertexUvs[1],Qt=zt.skinIndices,$t=zt.skinWeights,te=zt.morphTargets,ee=zt.morphNormals;if(zt.verticesNeedUpdate){for(E=0,T=qt.length;T>E;E++)L=Zt[qt[E]],R=Yt[L.a],F=Yt[L.b],U=Yt[L.c],Pt[pt]=R.x,Pt[pt+1]=R.y,Pt[pt+2]=R.z,Pt[pt+3]=F.x,Pt[pt+4]=F.y,Pt[pt+5]=F.z,Pt[pt+6]=U.x,Pt[pt+7]=U.y,Pt[pt+8]=U.z,pt+=9;Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglVertexBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Pt,w)}if(Xt)for(at=0,st=te.length;st>at;at++){for(E=wt=0,T=qt.length;T>E;E++)ct=qt[E],L=Zt[ct],R=te[at].vertices[L.a],F=te[at].vertices[L.b],U=te[at].vertices[L.c],ut=Nt[at],ut[wt]=R.x,ut[wt+1]=R.y,ut[wt+2]=R.z,ut[wt+3]=F.x,ut[wt+4]=F.y,ut[wt+5]=F.z,ut[wt+6]=U.x,ut[wt+7]=U.y,ut[wt+8]=U.z,C.morphNormals&&(P?(ht=ee[at].vertexNormals[ct],W=ht.a,H=ht.b,j=ht.c):j=H=W=ee[at].faceNormals[ct],lt=Bt[at],lt[wt]=W.x,lt[wt+1]=W.y,lt[wt+2]=W.z,lt[wt+3]=H.x,lt[wt+4]=H.y,lt[wt+5]=H.z,lt[wt+6]=j.x,lt[wt+7]=j.y,lt[wt+8]=j.z),wt+=9;Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglMorphTargetsBuffers[at]),Dt.bufferData(Dt.ARRAY_BUFFER,Nt[at],w),C.morphNormals&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglMorphNormalsBuffers[at]),Dt.bufferData(Dt.ARRAY_BUFFER,Bt[at],w))}if($t.length){for(E=0,T=qt.length;T>E;E++)L=Zt[qt[E]],Z=$t[L.a],K=$t[L.b],J=$t[L.c],kt[xt]=Z.x,kt[xt+1]=Z.y,kt[xt+2]=Z.z,kt[xt+3]=Z.w,kt[xt+4]=K.x,kt[xt+5]=K.y,kt[xt+6]=K.z,kt[xt+7]=K.w,kt[xt+8]=J.x,kt[xt+9]=J.y,kt[xt+10]=J.z,kt[xt+11]=J.w,Q=Qt[L.a],$=Qt[L.b],tt=Qt[L.c],It[xt]=Q.x,It[xt+1]=Q.y,It[xt+2]=Q.z,It[xt+3]=Q.w,It[xt+4]=$.x,It[xt+5]=$.y,It[xt+6]=$.z,It[xt+7]=$.w,It[xt+8]=tt.x,It[xt+9]=tt.y,It[xt+10]=tt.z,It[xt+11]=tt.w,xt+=12;xt>0&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglSkinIndicesBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,It,w),Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglSkinWeightsBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,kt,w))}if(jt){for(E=0,T=qt.length;T>E;E++)L=Zt[qt[E]],I=L.vertexColors,k=L.color,3===I.length&&C.vertexColors===r.VertexColors?(X=I[0],Y=I[1],q=I[2]):q=Y=X=k,At[_t]=X.r,At[_t+1]=X.g,At[_t+2]=X.b,At[_t+3]=Y.r,At[_t+4]=Y.g,At[_t+5]=Y.b,At[_t+6]=q.r,At[_t+7]=q.g,At[_t+8]=q.b,_t+=9;_t>0&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglColorBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,At,w))}if(Ht&&zt.hasTangents){for(E=0,T=qt.length;T>E;E++)L=Zt[qt[E]],N=L.vertexTangents,z=N[0],V=N[1],G=N[2],Lt[vt]=z.x,Lt[vt+1]=z.y,Lt[vt+2]=z.z,Lt[vt+3]=z.w,Lt[vt+4]=V.x,Lt[vt+5]=V.y,Lt[vt+6]=V.z,Lt[vt+7]=V.w,Lt[vt+8]=G.x,Lt[vt+9]=G.y,Lt[vt+10]=G.z,Lt[vt+11]=G.w,vt+=12;Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglTangentBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Lt,w)}if(Wt){for(E=0,T=qt.length;T>E;E++)if(L=Zt[qt[E]],A=L.vertexNormals,D=L.normal,3===A.length&&P)for(et=0;3>et;et++)rt=A[et],St[yt]=rt.x,St[yt+1]=rt.y,St[yt+2]=rt.z,yt+=3;else for(et=0;3>et;et++)St[yt]=D.x,St[yt+1]=D.y,St[yt+2]=D.z,yt+=3;Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglNormalBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,St,w)}if(Gt&&Kt){for(E=0,T=qt.length;T>E;E++)if(S=qt[E],B=Kt[S],void 0!==B)for(et=0;3>et;et++)it=B[et],Et[dt]=it.x,Et[dt+1]=it.y,dt+=2;dt>0&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglUVBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Et,w))}if(Gt&&Jt){for(E=0,T=qt.length;T>E;E++)if(S=qt[E],O=Jt[S],void 0!==O)for(et=0;3>et;et++)ot=O[et],Tt[mt]=ot.x,Tt[mt+1]=ot.y,mt+=2;mt>0&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,v.__webglUV2Buffer),Dt.bufferData(Dt.ARRAY_BUFFER,Tt,w))}if(Vt){for(E=0,T=qt.length;T>E;E++)Ft[gt]=ft,Ft[gt+1]=ft+1,Ft[gt+2]=ft+2,gt+=3,Ut[bt]=ft,Ut[bt+1]=ft+1,Ut[bt+2]=ft,Ut[bt+3]=ft+2,Ut[bt+4]=ft+1,Ut[bt+5]=ft+2,bt+=6,ft+=3;Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,v.__webglFaceBuffer),Dt.bufferData(Dt.ELEMENT_ARRAY_BUFFER,Ft,w),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,v.__webglLineBuffer),Dt.bufferData(Dt.ELEMENT_ARRAY_BUFFER,Ut,w)}if(Ot)for(et=0,nt=Ot.length;nt>et;et++)if(Rt=Ot[et],Rt.__original.needsUpdate){if(Mt=0,1===Rt.size){if(void 0===Rt.boundTo||"vertices"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)L=Zt[qt[E]],Rt.array[Mt]=Rt.value[L.a],Rt.array[Mt+1]=Rt.value[L.b],Rt.array[Mt+2]=Rt.value[L.c],Mt+=3;else if("faces"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)Ct=Rt.value[qt[E]],Rt.array[Mt]=Ct,Rt.array[Mt+1]=Ct,Rt.array[Mt+2]=Ct,Mt+=3}else if(2===Rt.size){if(void 0===Rt.boundTo||"vertices"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)L=Zt[qt[E]],R=Rt.value[L.a],F=Rt.value[L.b],U=Rt.value[L.c],Rt.array[Mt]=R.x,Rt.array[Mt+1]=R.y,Rt.array[Mt+2]=F.x,Rt.array[Mt+3]=F.y,Rt.array[Mt+4]=U.x,Rt.array[Mt+5]=U.y,Mt+=6;else if("faces"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)U=F=R=Ct=Rt.value[qt[E]],Rt.array[Mt]=R.x,Rt.array[Mt+1]=R.y,Rt.array[Mt+2]=F.x,Rt.array[Mt+3]=F.y,Rt.array[Mt+4]=U.x,Rt.array[Mt+5]=U.y,Mt+=6}else if(3===Rt.size){var ne;if(ne="c"===Rt.type?["r","g","b"]:["x","y","z"],void 0===Rt.boundTo||"vertices"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)L=Zt[qt[E]],R=Rt.value[L.a],F=Rt.value[L.b],U=Rt.value[L.c],Rt.array[Mt]=R[ne[0]],Rt.array[Mt+1]=R[ne[1]],Rt.array[Mt+2]=R[ne[2]],Rt.array[Mt+3]=F[ne[0]],Rt.array[Mt+4]=F[ne[1]],Rt.array[Mt+5]=F[ne[2]],Rt.array[Mt+6]=U[ne[0]],Rt.array[Mt+7]=U[ne[1]],Rt.array[Mt+8]=U[ne[2]],Mt+=9;else if("faces"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)U=F=R=Ct=Rt.value[qt[E]],Rt.array[Mt]=R[ne[0]],Rt.array[Mt+1]=R[ne[1]],Rt.array[Mt+2]=R[ne[2]],Rt.array[Mt+3]=F[ne[0]],Rt.array[Mt+4]=F[ne[1]],Rt.array[Mt+5]=F[ne[2]],Rt.array[Mt+6]=U[ne[0]],Rt.array[Mt+7]=U[ne[1]],Rt.array[Mt+8]=U[ne[2]],Mt+=9;else if("faceVertices"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)Ct=Rt.value[qt[E]],R=Ct[0],F=Ct[1],U=Ct[2],Rt.array[Mt]=R[ne[0]],Rt.array[Mt+1]=R[ne[1]],Rt.array[Mt+2]=R[ne[2]],Rt.array[Mt+3]=F[ne[0]],Rt.array[Mt+4]=F[ne[1]],Rt.array[Mt+5]=F[ne[2]],Rt.array[Mt+6]=U[ne[0]],Rt.array[Mt+7]=U[ne[1]],Rt.array[Mt+8]=U[ne[2]],Mt+=9}else if(4===Rt.size)if(void 0===Rt.boundTo||"vertices"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)L=Zt[qt[E]],R=Rt.value[L.a],F=Rt.value[L.b],U=Rt.value[L.c],Rt.array[Mt]=R.x,Rt.array[Mt+1]=R.y,Rt.array[Mt+2]=R.z,Rt.array[Mt+3]=R.w,Rt.array[Mt+4]=F.x,Rt.array[Mt+5]=F.y,Rt.array[Mt+6]=F.z,
Rt.array[Mt+7]=F.w,Rt.array[Mt+8]=U.x,Rt.array[Mt+9]=U.y,Rt.array[Mt+10]=U.z,Rt.array[Mt+11]=U.w,Mt+=12;else if("faces"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)U=F=R=Ct=Rt.value[qt[E]],Rt.array[Mt]=R.x,Rt.array[Mt+1]=R.y,Rt.array[Mt+2]=R.z,Rt.array[Mt+3]=R.w,Rt.array[Mt+4]=F.x,Rt.array[Mt+5]=F.y,Rt.array[Mt+6]=F.z,Rt.array[Mt+7]=F.w,Rt.array[Mt+8]=U.x,Rt.array[Mt+9]=U.y,Rt.array[Mt+10]=U.z,Rt.array[Mt+11]=U.w,Mt+=12;else if("faceVertices"===Rt.boundTo)for(E=0,T=qt.length;T>E;E++)Ct=Rt.value[qt[E]],R=Ct[0],F=Ct[1],U=Ct[2],Rt.array[Mt]=R.x,Rt.array[Mt+1]=R.y,Rt.array[Mt+2]=R.z,Rt.array[Mt+3]=R.w,Rt.array[Mt+4]=F.x,Rt.array[Mt+5]=F.y,Rt.array[Mt+6]=F.z,Rt.array[Mt+7]=F.w,Rt.array[Mt+8]=U.x,Rt.array[Mt+9]=U.y,Rt.array[Mt+10]=U.z,Rt.array[Mt+11]=U.w,Mt+=12;Dt.bindBuffer(Dt.ARRAY_BUFFER,Rt.buffer),Dt.bufferData(Dt.ARRAY_BUFFER,Rt.array,w)}M&&(delete v.__inittedArrays,delete v.__colorArray,delete v.__normalArray,delete v.__tangentArray,delete v.__uvArray,delete v.__uv2Array,delete v.__faceArray,delete v.__vertexArray,delete v.__lineArray,delete v.__skinIndexArray,delete v.__skinWeightArray)}}}e.verticesNeedUpdate=!1,e.morphTargetsNeedUpdate=!1,e.elementsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.tangentsNeedUpdate=!1,m.attributes&&_(m)}else if(t instanceof r.Line){if(m=i(t,e),y=m.attributes&&b(m),e.verticesNeedUpdate||e.colorsNeedUpdate||e.lineDistancesNeedUpdate||y){var re,ie,oe,ae,se,ue,le,he,fe,pe,de,me,ge=Dt.DYNAMIC_DRAW,ye=e.vertices,ve=e.colors,be=e.lineDistances,_e=ye.length,xe=ve.length,we=be.length,Me=e.__vertexArray,Ce=e.__colorArray,Pe=e.__lineDistanceArray,Ee=e.colorsNeedUpdate,Te=e.lineDistancesNeedUpdate,Se=e.__webglCustomAttributesList;if(e.verticesNeedUpdate){for(re=0;_e>re;re++)ae=ye[re],se=3*re,Me[se]=ae.x,Me[se+1]=ae.y,Me[se+2]=ae.z;Dt.bindBuffer(Dt.ARRAY_BUFFER,e.__webglVertexBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Me,ge)}if(Ee){for(ie=0;xe>ie;ie++)ue=ve[ie],se=3*ie,Ce[se]=ue.r,Ce[se+1]=ue.g,Ce[se+2]=ue.b;Dt.bindBuffer(Dt.ARRAY_BUFFER,e.__webglColorBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Ce,ge)}if(Te){for(oe=0;we>oe;oe++)Pe[oe]=be[oe];Dt.bindBuffer(Dt.ARRAY_BUFFER,e.__webglLineDistanceBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Pe,ge)}if(Se)for(le=0,he=Se.length;he>le;le++)if(me=Se[le],me.needsUpdate&&(void 0===me.boundTo||"vertices"===me.boundTo)){if(se=0,pe=me.value.length,1===me.size)for(fe=0;pe>fe;fe++)me.array[fe]=me.value[fe];else if(2===me.size)for(fe=0;pe>fe;fe++)de=me.value[fe],me.array[se]=de.x,me.array[se+1]=de.y,se+=2;else if(3===me.size)if("c"===me.type)for(fe=0;pe>fe;fe++)de=me.value[fe],me.array[se]=de.r,me.array[se+1]=de.g,me.array[se+2]=de.b,se+=3;else for(fe=0;pe>fe;fe++)de=me.value[fe],me.array[se]=de.x,me.array[se+1]=de.y,me.array[se+2]=de.z,se+=3;else if(4===me.size)for(fe=0;pe>fe;fe++)de=me.value[fe],me.array[se]=de.x,me.array[se+1]=de.y,me.array[se+2]=de.z,me.array[se+3]=de.w,se+=4;Dt.bindBuffer(Dt.ARRAY_BUFFER,me.buffer),Dt.bufferData(Dt.ARRAY_BUFFER,me.array,ge),me.needsUpdate=!1}}e.verticesNeedUpdate=!1,e.colorsNeedUpdate=!1,e.lineDistancesNeedUpdate=!1,m.attributes&&_(m)}else if(t instanceof r.PointCloud){if(m=i(t,e),y=m.attributes&&b(m),e.verticesNeedUpdate||e.colorsNeedUpdate||y){var Le,Ae,De,Ie,ke,Ne,Be,Oe,Re,Fe,Ue,ze=Dt.DYNAMIC_DRAW,Ve=e.vertices,Ge=Ve.length,We=e.colors,He=We.length,je=e.__vertexArray,Xe=e.__colorArray,Ye=e.colorsNeedUpdate,qe=e.__webglCustomAttributesList;if(e.verticesNeedUpdate){for(Le=0;Ge>Le;Le++)De=Ve[Le],Ie=3*Le,je[Ie]=De.x,je[Ie+1]=De.y,je[Ie+2]=De.z;Dt.bindBuffer(Dt.ARRAY_BUFFER,e.__webglVertexBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,je,ze)}if(Ye){for(Ae=0;He>Ae;Ae++)ke=We[Ae],Ie=3*Ae,Xe[Ie]=ke.r,Xe[Ie+1]=ke.g,Xe[Ie+2]=ke.b;Dt.bindBuffer(Dt.ARRAY_BUFFER,e.__webglColorBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Xe,ze)}if(qe)for(Ne=0,Be=qe.length;Be>Ne;Ne++){if(Ue=qe[Ne],Ue.needsUpdate&&(void 0===Ue.boundTo||"vertices"===Ue.boundTo))if(Re=Ue.value.length,Ie=0,1===Ue.size)for(Oe=0;Re>Oe;Oe++)Ue.array[Oe]=Ue.value[Oe];else if(2===Ue.size)for(Oe=0;Re>Oe;Oe++)Fe=Ue.value[Oe],Ue.array[Ie]=Fe.x,Ue.array[Ie+1]=Fe.y,Ie+=2;else if(3===Ue.size)if("c"===Ue.type)for(Oe=0;Re>Oe;Oe++)Fe=Ue.value[Oe],Ue.array[Ie]=Fe.r,Ue.array[Ie+1]=Fe.g,Ue.array[Ie+2]=Fe.b,Ie+=3;else for(Oe=0;Re>Oe;Oe++)Fe=Ue.value[Oe],Ue.array[Ie]=Fe.x,Ue.array[Ie+1]=Fe.y,Ue.array[Ie+2]=Fe.z,Ie+=3;else if(4===Ue.size)for(Oe=0;Re>Oe;Oe++)Fe=Ue.value[Oe],Ue.array[Ie]=Fe.x,Ue.array[Ie+1]=Fe.y,Ue.array[Ie+2]=Fe.z,Ue.array[Ie+3]=Fe.w,Ie+=4;Dt.bindBuffer(Dt.ARRAY_BUFFER,Ue.buffer),Dt.bufferData(Dt.ARRAY_BUFFER,Ue.array,ze),Ue.needsUpdate=!1}}e.verticesNeedUpdate=!1,e.colorsNeedUpdate=!1,m.attributes&&_(m)}}function b(t){for(var e in t.attributes)if(t.attributes[e].needsUpdate)return!0;return!1}function _(t){for(var e in t.attributes)t.attributes[e].needsUpdate=!1}function x(t,e,n,i,o){var a,s,u,l;if(ut=0,i.needsUpdate){i.program&&le(i),i.addEventListener("dispose",se);var c=fe[i.type];if(c){var h=r.ShaderLib[c];i.__webglShader={uniforms:r.UniformsUtils.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else i.__webglShader={uniforms:i.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader};for(var f=0,p=0,d=0,m=0,g=0,y=e.length;y>g;g++){var v=e[g];v.onlyShadow||!1===v.visible||(v instanceof r.DirectionalLight&&f++,v instanceof r.PointLight&&p++,v instanceof r.SpotLight&&d++,v instanceof r.HemisphereLight&&m++)}a=f,s=p,u=d,l=m;for(var b,_=0,x=0,C=e.length;C>x;x++){var T=e[x];T.castShadow&&(T instanceof r.SpotLight&&_++,T instanceof r.DirectionalLight&&!T.shadowCascade&&_++)}b=_;var S;if(Xt&&o&&o.skeleton&&o.skeleton.useVertexTexture)S=1024;else{var D=Dt.getParameter(Dt.MAX_VERTEX_UNIFORM_VECTORS),I=Math.floor((D-20)/4);void 0!==o&&o instanceof r.SkinnedMesh&&(I=Math.min(o.skeleton.bones.length,I),I<o.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+o.skeleton.bones.length+", this GPU supports just "+I+" (try OpenGL instead of ANGLE)")),S=I}var k={precision:F,supportsVertexTextures:jt,map:!!i.map,envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,lightMap:!!i.lightMap,bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,combine:i.combine,vertexColors:i.vertexColors,fog:n,useFog:i.fog,fogExp:n instanceof r.FogExp2,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:j,skinning:i.skinning,maxBones:S,useVertexTexture:Xt&&o&&o.skeleton&&o.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:et.maxMorphTargets,maxMorphNormals:et.maxMorphNormals,maxDirLights:a,maxPointLights:s,maxSpotLights:u,maxHemiLights:l,maxShadows:b,shadowMapEnabled:et.shadowMapEnabled&&o.receiveShadow&&b>0,shadowMapType:et.shadowMapType,shadowMapDebug:et.shadowMapDebug,shadowMapCascade:et.shadowMapCascade,alphaTest:i.alphaTest,metal:i.metal,wrapAround:i.wrapAround,doubleSided:i.side===r.DoubleSide,flipSided:i.side===r.BackSide},O=[];if(c?O.push(c):(O.push(i.fragmentShader),O.push(i.vertexShader)),void 0!==i.defines)for(var R in i.defines)O.push(R),O.push(i.defines[R]);for(R in k)O.push(R),O.push(k[R]);for(var U,z=O.join(),V=0,G=nt.length;G>V;V++){var W=nt[V];if(W.code===z){U=W,U.usedTimes++;break}}void 0===U&&(U=new r.WebGLProgram(et,z,i,k),nt.push(U),et.info.memory.programs=nt.length),i.program=U;var H=U.attributes;if(i.morphTargets){i.numSupportedMorphTargets=0;for(var X,Y="morphTarget",q=0;q<et.maxMorphTargets;q++)X=Y+q,0<=H[X]&&i.numSupportedMorphTargets++}if(i.morphNormals)for(i.numSupportedMorphNormals=0,Y="morphNormal",q=0;q<et.maxMorphNormals;q++)X=Y+q,0<=H[X]&&i.numSupportedMorphNormals++;i.uniformsList=[];for(var Z in i.__webglShader.uniforms){var K=i.program.uniforms[Z];K&&i.uniformsList.push([i.__webglShader.uniforms[Z],K])}i.needsUpdate=!1}i.morphTargets&&!o.__webglMorphTargetInfluences&&(o.__webglMorphTargetInfluences=new Float32Array(et.maxMorphTargets));var J=!1,Q=!1,$=!1,tt=i.program,it=tt.uniforms,at=i.__webglShader.uniforms;if(tt.id!==rt&&(Dt.useProgram(tt.program),rt=tt.id,$=Q=J=!0),i.id!==ot&&(-1===ot&&($=!0),ot=i.id,Q=!0),(J||t!==st)&&(Dt.uniformMatrix4fv(it.projectionMatrix,!1,t.projectionMatrix.elements),j&&Dt.uniform1f(it.logDepthBufFC,2/(Math.log(t.far+1)/Math.LN2)),t!==st&&(st=t),(i instanceof r.ShaderMaterial||i instanceof r.MeshPhongMaterial||i.envMap)&&null!==it.cameraPosition&&(It.setFromMatrixPosition(t.matrixWorld),Dt.uniform3f(it.cameraPosition,It.x,It.y,It.z)),(i instanceof r.MeshPhongMaterial||i instanceof r.MeshLambertMaterial||i instanceof r.MeshBasicMaterial||i instanceof r.ShaderMaterial||i.skinning)&&null!==it.viewMatrix&&Dt.uniformMatrix4fv(it.viewMatrix,!1,t.matrixWorldInverse.elements)),i.skinning)if(o.bindMatrix&&null!==it.bindMatrix&&Dt.uniformMatrix4fv(it.bindMatrix,!1,o.bindMatrix.elements),o.bindMatrixInverse&&null!==it.bindMatrixInverse&&Dt.uniformMatrix4fv(it.bindMatrixInverse,!1,o.bindMatrixInverse.elements),Xt&&o.skeleton&&o.skeleton.useVertexTexture){if(null!==it.boneTexture){var lt=M();Dt.uniform1i(it.boneTexture,lt),et.setTexture(o.skeleton.boneTexture,lt)}null!==it.boneTextureWidth&&Dt.uniform1i(it.boneTextureWidth,o.skeleton.boneTextureWidth),null!==it.boneTextureHeight&&Dt.uniform1i(it.boneTextureHeight,o.skeleton.boneTextureHeight)}else o.skeleton&&o.skeleton.boneMatrices&&null!==it.boneGlobalMatrices&&Dt.uniformMatrix4fv(it.boneGlobalMatrices,!1,o.skeleton.boneMatrices);if(Q){if(n&&i.fog&&(at.fogColor.value=n.color,n instanceof r.Fog?(at.fogNear.value=n.near,at.fogFar.value=n.far):n instanceof r.FogExp2&&(at.fogDensity.value=n.density)),i instanceof r.MeshPhongMaterial||i instanceof r.MeshLambertMaterial||i.lights){if(Nt){var ct,ht,ft,pt,dt,mt,gt,yt,vt,$=!0,bt=0,_t=0,xt=0,wt=Bt,Mt=wt.directional.colors,Ct=wt.directional.positions,Pt=wt.point.colors,Et=wt.point.positions,Tt=wt.point.distances,St=wt.spot.colors,Lt=wt.spot.positions,At=wt.spot.distances,Ot=wt.spot.directions,Rt=wt.spot.anglesCos,Ft=wt.spot.exponents,Ut=wt.hemi.skyColors,zt=wt.hemi.groundColors,Vt=wt.hemi.positions,Gt=0,Wt=0,Yt=0,qt=0,Zt=0,Kt=0,Qt=0,$t=0,te=0,ee=0,ne=0,re=0;for(ct=0,ht=e.length;ht>ct;ct++)ft=e[ct],ft.onlyShadow||(pt=ft.color,gt=ft.intensity,vt=ft.distance,ft instanceof r.AmbientLight?ft.visible&&(et.gammaInput?(bt+=pt.r*pt.r,_t+=pt.g*pt.g,xt+=pt.b*pt.b):(bt+=pt.r,_t+=pt.g,xt+=pt.b)):ft instanceof r.DirectionalLight?(Zt+=1,ft.visible&&(kt.setFromMatrixPosition(ft.matrixWorld),It.setFromMatrixPosition(ft.target.matrixWorld),kt.sub(It),kt.normalize(),te=3*Gt,Ct[te]=kt.x,Ct[te+1]=kt.y,Ct[te+2]=kt.z,et.gammaInput?P(Mt,te,pt,gt*gt):E(Mt,te,pt,gt),Gt+=1)):ft instanceof r.PointLight?(Kt+=1,ft.visible&&(ee=3*Wt,et.gammaInput?P(Pt,ee,pt,gt*gt):E(Pt,ee,pt,gt),It.setFromMatrixPosition(ft.matrixWorld),Et[ee]=It.x,Et[ee+1]=It.y,Et[ee+2]=It.z,Tt[Wt]=vt,Wt+=1)):ft instanceof r.SpotLight?(Qt+=1,ft.visible&&(ne=3*Yt,et.gammaInput?P(St,ne,pt,gt*gt):E(St,ne,pt,gt),kt.setFromMatrixPosition(ft.matrixWorld),Lt[ne]=kt.x,Lt[ne+1]=kt.y,Lt[ne+2]=kt.z,At[Yt]=vt,It.setFromMatrixPosition(ft.target.matrixWorld),kt.sub(It),kt.normalize(),Ot[ne]=kt.x,Ot[ne+1]=kt.y,Ot[ne+2]=kt.z,Rt[Yt]=Math.cos(ft.angle),Ft[Yt]=ft.exponent,Yt+=1)):ft instanceof r.HemisphereLight&&($t+=1,ft.visible&&(kt.setFromMatrixPosition(ft.matrixWorld),kt.normalize(),re=3*qt,Vt[re]=kt.x,Vt[re+1]=kt.y,Vt[re+2]=kt.z,dt=ft.color,mt=ft.groundColor,et.gammaInput?(yt=gt*gt,P(Ut,re,dt,yt),P(zt,re,mt,yt)):(E(Ut,re,dt,gt),E(zt,re,mt,gt)),qt+=1)));for(ct=3*Gt,ht=Math.max(Mt.length,3*Zt);ht>ct;ct++)Mt[ct]=0;for(ct=3*Wt,ht=Math.max(Pt.length,3*Kt);ht>ct;ct++)Pt[ct]=0;for(ct=3*Yt,ht=Math.max(St.length,3*Qt);ht>ct;ct++)St[ct]=0;for(ct=3*qt,ht=Math.max(Ut.length,3*$t);ht>ct;ct++)Ut[ct]=0;for(ct=3*qt,ht=Math.max(zt.length,3*$t);ht>ct;ct++)zt[ct]=0;wt.directional.length=Gt,wt.point.length=Wt,wt.spot.length=Yt,wt.hemi.length=qt,wt.ambient[0]=bt,wt.ambient[1]=_t,wt.ambient[2]=xt,Nt=!1}if($){var ie=Bt;at.ambientLightColor.value=ie.ambient,at.directionalLightColor.value=ie.directional.colors,at.directionalLightDirection.value=ie.directional.positions,at.pointLightColor.value=ie.point.colors,at.pointLightPosition.value=ie.point.positions,at.pointLightDistance.value=ie.point.distances,at.spotLightColor.value=ie.spot.colors,at.spotLightPosition.value=ie.spot.positions,at.spotLightDistance.value=ie.spot.distances,at.spotLightDirection.value=ie.spot.directions,at.spotLightAngleCos.value=ie.spot.anglesCos,at.spotLightExponent.value=ie.spot.exponents,at.hemisphereLightSkyColor.value=ie.hemi.skyColors,at.hemisphereLightGroundColor.value=ie.hemi.groundColors,at.hemisphereLightDirection.value=ie.hemi.positions,w(at,!0)}else w(at,!1)}if(i instanceof r.MeshBasicMaterial||i instanceof r.MeshLambertMaterial||i instanceof r.MeshPhongMaterial){at.opacity.value=i.opacity,et.gammaInput?at.diffuse.value.copyGammaToLinear(i.color):at.diffuse.value=i.color,at.map.value=i.map,at.lightMap.value=i.lightMap,at.specularMap.value=i.specularMap,at.alphaMap.value=i.alphaMap,i.bumpMap&&(at.bumpMap.value=i.bumpMap,at.bumpScale.value=i.bumpScale),i.normalMap&&(at.normalMap.value=i.normalMap,at.normalScale.value.copy(i.normalScale));var ae;if(i.map?ae=i.map:i.specularMap?ae=i.specularMap:i.normalMap?ae=i.normalMap:i.bumpMap?ae=i.bumpMap:i.alphaMap&&(ae=i.alphaMap),void 0!==ae){var ue=ae.offset,ce=ae.repeat;at.offsetRepeat.value.set(ue.x,ue.y,ce.x,ce.y)}at.envMap.value=i.envMap,at.flipEnvMap.value=i.envMap instanceof r.WebGLRenderTargetCube?1:-1,at.reflectivity.value=i.reflectivity,at.refractionRatio.value=i.refractionRatio}if(i instanceof r.LineBasicMaterial?(at.diffuse.value=i.color,at.opacity.value=i.opacity):i instanceof r.LineDashedMaterial?(at.diffuse.value=i.color,at.opacity.value=i.opacity,at.dashSize.value=i.dashSize,at.totalSize.value=i.dashSize+i.gapSize,at.scale.value=i.scale):i instanceof r.PointCloudMaterial?(at.psColor.value=i.color,at.opacity.value=i.opacity,at.size.value=i.size,at.scale.value=B.height/2,at.map.value=i.map):i instanceof r.MeshPhongMaterial?(at.shininess.value=i.shininess,et.gammaInput?(at.ambient.value.copyGammaToLinear(i.ambient),at.emissive.value.copyGammaToLinear(i.emissive),at.specular.value.copyGammaToLinear(i.specular)):(at.ambient.value=i.ambient,at.emissive.value=i.emissive,at.specular.value=i.specular),i.wrapAround&&at.wrapRGB.value.copy(i.wrapRGB)):i instanceof r.MeshLambertMaterial?(et.gammaInput?(at.ambient.value.copyGammaToLinear(i.ambient),at.emissive.value.copyGammaToLinear(i.emissive)):(at.ambient.value=i.ambient,at.emissive.value=i.emissive),i.wrapAround&&at.wrapRGB.value.copy(i.wrapRGB)):i instanceof r.MeshDepthMaterial?(at.mNear.value=t.near,at.mFar.value=t.far,at.opacity.value=i.opacity):i instanceof r.MeshNormalMaterial&&(at.opacity.value=i.opacity),o.receiveShadow&&!i._shadowPass&&at.shadowMatrix)for(var he=0,pe=0,de=e.length;de>pe;pe++){var me=e[pe];me.castShadow&&(me instanceof r.SpotLight||me instanceof r.DirectionalLight&&!me.shadowCascade)&&(at.shadowMap.value[he]=me.shadowMap,at.shadowMapSize.value[he]=me.shadowMapSize,at.shadowMatrix.value[he]=me.shadowMatrix,at.shadowDarkness.value[he]=me.shadowDarkness,at.shadowBias.value[he]=me.shadowBias,he++)}for(var ge,ye,ve,be=i.uniformsList,_e=0,xe=be.length;xe>_e;_e++){var we=be[_e][0];if(!1!==we.needsUpdate){var Me=we.type,Ce=we.value,Pe=be[_e][1];switch(Me){case"1i":Dt.uniform1i(Pe,Ce);break;case"1f":Dt.uniform1f(Pe,Ce);break;case"2f":Dt.uniform2f(Pe,Ce[0],Ce[1]);break;case"3f":Dt.uniform3f(Pe,Ce[0],Ce[1],Ce[2]);break;case"4f":Dt.uniform4f(Pe,Ce[0],Ce[1],Ce[2],Ce[3]);break;case"1iv":Dt.uniform1iv(Pe,Ce);break;case"3iv":Dt.uniform3iv(Pe,Ce);break;case"1fv":Dt.uniform1fv(Pe,Ce);break;case"2fv":Dt.uniform2fv(Pe,Ce);break;case"3fv":Dt.uniform3fv(Pe,Ce);break;case"4fv":Dt.uniform4fv(Pe,Ce);break;case"Matrix3fv":Dt.uniformMatrix3fv(Pe,!1,Ce);break;case"Matrix4fv":Dt.uniformMatrix4fv(Pe,!1,Ce);break;case"i":Dt.uniform1i(Pe,Ce);break;case"f":Dt.uniform1f(Pe,Ce);break;case"v2":Dt.uniform2f(Pe,Ce.x,Ce.y);break;case"v3":Dt.uniform3f(Pe,Ce.x,Ce.y,Ce.z);break;case"v4":Dt.uniform4f(Pe,Ce.x,Ce.y,Ce.z,Ce.w);break;case"c":Dt.uniform3f(Pe,Ce.r,Ce.g,Ce.b);break;case"iv1":Dt.uniform1iv(Pe,Ce);break;case"iv":Dt.uniform3iv(Pe,Ce);break;case"fv1":Dt.uniform1fv(Pe,Ce);break;case"fv":Dt.uniform3fv(Pe,Ce);break;case"v2v":void 0===we._array&&(we._array=new Float32Array(2*Ce.length));for(var Ee=0,Te=Ce.length;Te>Ee;Ee++)ve=2*Ee,we._array[ve]=Ce[Ee].x,we._array[ve+1]=Ce[Ee].y;Dt.uniform2fv(Pe,we._array);break;case"v3v":for(void 0===we._array&&(we._array=new Float32Array(3*Ce.length)),Ee=0,Te=Ce.length;Te>Ee;Ee++)ve=3*Ee,we._array[ve]=Ce[Ee].x,we._array[ve+1]=Ce[Ee].y,we._array[ve+2]=Ce[Ee].z;Dt.uniform3fv(Pe,we._array);break;case"v4v":for(void 0===we._array&&(we._array=new Float32Array(4*Ce.length)),Ee=0,Te=Ce.length;Te>Ee;Ee++)ve=4*Ee,we._array[ve]=Ce[Ee].x,we._array[ve+1]=Ce[Ee].y,we._array[ve+2]=Ce[Ee].z,we._array[ve+3]=Ce[Ee].w;Dt.uniform4fv(Pe,we._array);break;case"m3":Dt.uniformMatrix3fv(Pe,!1,Ce.elements);break;case"m3v":for(void 0===we._array&&(we._array=new Float32Array(9*Ce.length)),Ee=0,Te=Ce.length;Te>Ee;Ee++)Ce[Ee].flattenToArrayOffset(we._array,9*Ee);Dt.uniformMatrix3fv(Pe,!1,we._array);break;case"m4":Dt.uniformMatrix4fv(Pe,!1,Ce.elements);break;case"m4v":for(void 0===we._array&&(we._array=new Float32Array(16*Ce.length)),Ee=0,Te=Ce.length;Te>Ee;Ee++)Ce[Ee].flattenToArrayOffset(we._array,16*Ee);Dt.uniformMatrix4fv(Pe,!1,we._array);break;case"t":if(ge=Ce,ye=M(),Dt.uniform1i(Pe,ye),!ge)continue;if(ge instanceof r.CubeTexture||ge.image instanceof Array&&6===ge.image.length){var Se=ge,Le=ye;if(6===Se.image.length)if(Se.needsUpdate){Se.image.__webglTextureCube||(Se.addEventListener("dispose",oe),Se.image.__webglTextureCube=Dt.createTexture(),et.info.memory.textures++),Dt.activeTexture(Dt.TEXTURE0+Le),Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,Se.image.__webglTextureCube),Dt.pixelStorei(Dt.UNPACK_FLIP_Y_WEBGL,Se.flipY);for(var Ae=Se instanceof r.CompressedTexture,De=Se.image[0]instanceof r.DataTexture,Ie=[],ke=0;6>ke;ke++)Ie[ke]=!et.autoScaleCubemaps||Ae||De?De?Se.image[ke].image:Se.image[ke]:A(Se.image[ke],Ht);var Ne=Ie[0],Be=r.Math.isPowerOfTwo(Ne.width)&&r.Math.isPowerOfTwo(Ne.height),Oe=N(Se.format),Re=N(Se.type);for(L(Dt.TEXTURE_CUBE_MAP,Se,Be),ke=0;6>ke;ke++)if(Ae)for(var Fe,Ue=Ie[ke].mipmaps,ze=0,Ve=Ue.length;Ve>ze;ze++)Fe=Ue[ze],Se.format!==r.RGBAFormat&&Se.format!==r.RGBFormat?-1<Jt().indexOf(Oe)?Dt.compressedTexImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ze,Oe,Fe.width,Fe.height,0,Fe.data):console.warn("Attempt to load unsupported compressed texture format"):Dt.texImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ze,Oe,Fe.width,Fe.height,0,Oe,Re,Fe.data);else De?Dt.texImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,Oe,Ie[ke].width,Ie[ke].height,0,Oe,Re,Ie[ke].data):Dt.texImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,Oe,Oe,Re,Ie[ke]);Se.generateMipmaps&&Be&&Dt.generateMipmap(Dt.TEXTURE_CUBE_MAP),Se.needsUpdate=!1,Se.onUpdate&&Se.onUpdate()}else Dt.activeTexture(Dt.TEXTURE0+Le),Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,Se.image.__webglTextureCube)}else if(ge instanceof r.WebGLRenderTargetCube){var Ge=ge;Dt.activeTexture(Dt.TEXTURE0+ye),Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,Ge.__webglTexture)}else et.setTexture(ge,ye);break;case"tv":for(void 0===we._array&&(we._array=[]),Ee=0,Te=we.value.length;Te>Ee;Ee++)we._array[Ee]=M();for(Dt.uniform1iv(Pe,we._array),Ee=0,Te=we.value.length;Te>Ee;Ee++)ge=we.value[Ee],ye=we._array[Ee],ge&&et.setTexture(ge,ye);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+Me)}}}}return Dt.uniformMatrix4fv(it.modelViewMatrix,!1,o._modelViewMatrix.elements),it.normalMatrix&&Dt.uniformMatrix3fv(it.normalMatrix,!1,o._normalMatrix.elements),null!==it.modelMatrix&&Dt.uniformMatrix4fv(it.modelMatrix,!1,o.matrixWorld.elements),tt}function w(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLightColor.needsUpdate=e,t.directionalLightDirection.needsUpdate=e,t.pointLightColor.needsUpdate=e,t.pointLightPosition.needsUpdate=e,t.pointLightDistance.needsUpdate=e,t.spotLightColor.needsUpdate=e,t.spotLightPosition.needsUpdate=e,t.spotLightDistance.needsUpdate=e,t.spotLightDirection.needsUpdate=e,t.spotLightAngleCos.needsUpdate=e,t.spotLightExponent.needsUpdate=e,t.hemisphereLightSkyColor.needsUpdate=e,t.hemisphereLightGroundColor.needsUpdate=e,t.hemisphereLightDirection.needsUpdate=e}function M(){var t=ut;return t>=Vt&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Vt),ut+=1,t}function C(t,e){t._modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,t.matrixWorld),t._normalMatrix.getNormalMatrix(t._modelViewMatrix)}function P(t,e,n,r){t[e]=n.r*n.r*r,t[e+1]=n.g*n.g*r,t[e+2]=n.b*n.b*r}function E(t,e,n,r){t[e]=n.r*r,t[e+1]=n.g*r,t[e+2]=n.b*r}function T(t){t*=R,t!==_t&&(Dt.lineWidth(t),_t=t)}function S(t,e,n){yt!==t&&(t?Dt.enable(Dt.POLYGON_OFFSET_FILL):Dt.disable(Dt.POLYGON_OFFSET_FILL),yt=t),!t||vt===e&&bt===n||(Dt.polygonOffset(e,n),vt=e,bt=n)}function L(t,e,n){n?(Dt.texParameteri(t,Dt.TEXTURE_WRAP_S,N(e.wrapS)),Dt.texParameteri(t,Dt.TEXTURE_WRAP_T,N(e.wrapT)),Dt.texParameteri(t,Dt.TEXTURE_MAG_FILTER,N(e.magFilter)),Dt.texParameteri(t,Dt.TEXTURE_MIN_FILTER,N(e.minFilter))):(Dt.texParameteri(t,Dt.TEXTURE_WRAP_S,Dt.CLAMP_TO_EDGE),Dt.texParameteri(t,Dt.TEXTURE_WRAP_T,Dt.CLAMP_TO_EDGE),e.wrapS===r.ClampToEdgeWrapping&&e.wrapT===r.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT is set to THREE.ClampToEdgeWrapping. ( "+e.sourceFile+" )"),Dt.texParameteri(t,Dt.TEXTURE_MAG_FILTER,k(e.magFilter)),Dt.texParameteri(t,Dt.TEXTURE_MIN_FILTER,k(e.minFilter)),e.minFilter!==r.NearestFilter&&e.minFilter!==r.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter is set to THREE.LinearFilter or THREE.NearestFilter. ( "+e.sourceFile+" )")),(n=Ft.get("EXT_texture_filter_anisotropic"))&&e.type!==r.FloatType&&(1<e.anisotropy||e.__oldAnisotropy)&&(Dt.texParameterf(t,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,et.getMaxAnisotropy())),e.__oldAnisotropy=e.anisotropy)}function A(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),r=document.createElement("canvas");return r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n),r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.log("THREE.WebGLRenderer:",t,"is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height+"."),r}return t}function D(t,e){Dt.bindRenderbuffer(Dt.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(Dt.renderbufferStorage(Dt.RENDERBUFFER,Dt.DEPTH_COMPONENT16,e.width,e.height),Dt.framebufferRenderbuffer(Dt.FRAMEBUFFER,Dt.DEPTH_ATTACHMENT,Dt.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(Dt.renderbufferStorage(Dt.RENDERBUFFER,Dt.DEPTH_STENCIL,e.width,e.height),Dt.framebufferRenderbuffer(Dt.FRAMEBUFFER,Dt.DEPTH_STENCIL_ATTACHMENT,Dt.RENDERBUFFER,t)):Dt.renderbufferStorage(Dt.RENDERBUFFER,Dt.RGBA4,e.width,e.height)}function I(t){t instanceof r.WebGLRenderTargetCube?(Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,t.__webglTexture),Dt.generateMipmap(Dt.TEXTURE_CUBE_MAP),Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,null)):(Dt.bindTexture(Dt.TEXTURE_2D,t.__webglTexture),Dt.generateMipmap(Dt.TEXTURE_2D),Dt.bindTexture(Dt.TEXTURE_2D,null))}function k(t){return t===r.NearestFilter||t===r.NearestMipMapNearestFilter||t===r.NearestMipMapLinearFilter?Dt.NEAREST:Dt.LINEAR}function N(t){var e;if(t===r.RepeatWrapping)return Dt.REPEAT;if(t===r.ClampToEdgeWrapping)return Dt.CLAMP_TO_EDGE;if(t===r.MirroredRepeatWrapping)return Dt.MIRRORED_REPEAT;if(t===r.NearestFilter)return Dt.NEAREST;if(t===r.NearestMipMapNearestFilter)return Dt.NEAREST_MIPMAP_NEAREST;if(t===r.NearestMipMapLinearFilter)return Dt.NEAREST_MIPMAP_LINEAR;if(t===r.LinearFilter)return Dt.LINEAR;if(t===r.LinearMipMapNearestFilter)return Dt.LINEAR_MIPMAP_NEAREST;if(t===r.LinearMipMapLinearFilter)return Dt.LINEAR_MIPMAP_LINEAR;if(t===r.UnsignedByteType)return Dt.UNSIGNED_BYTE;if(t===r.UnsignedShort4444Type)return Dt.UNSIGNED_SHORT_4_4_4_4;if(t===r.UnsignedShort5551Type)return Dt.UNSIGNED_SHORT_5_5_5_1;if(t===r.UnsignedShort565Type)return Dt.UNSIGNED_SHORT_5_6_5;if(t===r.ByteType)return Dt.BYTE;if(t===r.ShortType)return Dt.SHORT;if(t===r.UnsignedShortType)return Dt.UNSIGNED_SHORT;if(t===r.IntType)return Dt.INT;if(t===r.UnsignedIntType)return Dt.UNSIGNED_INT;if(t===r.FloatType)return Dt.FLOAT;if(t===r.AlphaFormat)return Dt.ALPHA;if(t===r.RGBFormat)return Dt.RGB;if(t===r.RGBAFormat)return Dt.RGBA;if(t===r.LuminanceFormat)return Dt.LUMINANCE;if(t===r.LuminanceAlphaFormat)return Dt.LUMINANCE_ALPHA;if(t===r.AddEquation)return Dt.FUNC_ADD;if(t===r.SubtractEquation)return Dt.FUNC_SUBTRACT;if(t===r.ReverseSubtractEquation)return Dt.FUNC_REVERSE_SUBTRACT;if(t===r.ZeroFactor)return Dt.ZERO;if(t===r.OneFactor)return Dt.ONE;if(t===r.SrcColorFactor)return Dt.SRC_COLOR;if(t===r.OneMinusSrcColorFactor)return Dt.ONE_MINUS_SRC_COLOR;if(t===r.SrcAlphaFactor)return Dt.SRC_ALPHA;if(t===r.OneMinusSrcAlphaFactor)return Dt.ONE_MINUS_SRC_ALPHA;if(t===r.DstAlphaFactor)return Dt.DST_ALPHA;if(t===r.OneMinusDstAlphaFactor)return Dt.ONE_MINUS_DST_ALPHA;if(t===r.DstColorFactor)return Dt.DST_COLOR;if(t===r.OneMinusDstColorFactor)return Dt.ONE_MINUS_DST_COLOR;if(t===r.SrcAlphaSaturateFactor)return Dt.SRC_ALPHA_SATURATE;if(e=Ft.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===r.RGB_S3TC_DXT1_Format)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===r.RGBA_S3TC_DXT1_Format)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===r.RGBA_S3TC_DXT3_Format)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===r.RGBA_S3TC_DXT5_Format)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=Ft.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===r.RGB_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===r.RGB_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===r.RGBA_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===r.RGBA_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=Ft.get("EXT_blend_minmax"),null!==e){if(t===r.MinEquation)return e.MIN_EXT;if(t===r.MaxEquation)return e.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",r.REVISION),t=t||{};var B=void 0!==t.canvas?t.canvas:document.createElement("canvas"),O=void 0!==t.context?t.context:null,R=1,F=void 0!==t.precision?t.precision:"highp",U=void 0!==t.alpha?t.alpha:!1,z=void 0!==t.depth?t.depth:!0,V=void 0!==t.stencil?t.stencil:!0,G=void 0!==t.antialias?t.antialias:!1,W=void 0!==t.premultipliedAlpha?t.premultipliedAlpha:!0,H=void 0!==t.preserveDrawingBuffer?t.preserveDrawingBuffer:!1,j=void 0!==t.logarithmicDepthBuffer?t.logarithmicDepthBuffer:!1,X=new r.Color(0),Y=0,q=[],Z={},K=[],J=[],Q=[],$=[],tt=[];this.domElement=B,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1,this.shadowMapType=r.PCFShadowMap,this.shadowMapCullFace=r.CullFaceFront,this.shadowMapCascade=this.shadowMapDebug=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var et=this,nt=[],rt=null,it=null,ot=-1,at="",st=null,ut=0,lt=-1,ct=-1,ht=-1,ft=-1,pt=-1,dt=-1,mt=-1,gt=-1,yt=null,vt=null,bt=null,_t=null,xt=0,wt=0,Mt=B.width,Ct=B.height,Pt=0,Et=0,Tt=new Uint8Array(16),St=new Uint8Array(16),Lt=new r.Frustum,At=new r.Matrix4;new r.Matrix4;var Dt,It=new r.Vector3,kt=new r.Vector3,Nt=!0,Bt={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var Ot={alpha:U,depth:z,stencil:V,antialias:G,premultipliedAlpha:W,preserveDrawingBuffer:H};if(Dt=O||B.getContext("webgl",Ot)||B.getContext("experimental-webgl",Ot),null===Dt){if(null!==B.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context."}B.addEventListener("webglcontextlost",function(t){t.preventDefault(),zt(),Ut(),Z={}},!1)}catch(Rt){console.error(Rt)}void 0===Dt.getShaderPrecisionFormat&&(Dt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var Ft=new r.WebGLExtensions(Dt);Ft.get("OES_texture_float"),Ft.get("OES_texture_float_linear"),Ft.get("OES_standard_derivatives"),j&&Ft.get("EXT_frag_depth");var Ut=function(){Dt.clearColor(0,0,0,1),Dt.clearDepth(1),Dt.clearStencil(0),Dt.enable(Dt.DEPTH_TEST),Dt.depthFunc(Dt.LEQUAL),Dt.frontFace(Dt.CCW),Dt.cullFace(Dt.BACK),Dt.enable(Dt.CULL_FACE),Dt.enable(Dt.BLEND),Dt.blendEquation(Dt.FUNC_ADD),Dt.blendFunc(Dt.SRC_ALPHA,Dt.ONE_MINUS_SRC_ALPHA),Dt.viewport(xt,wt,Mt,Ct),Dt.clearColor(X.r,X.g,X.b,Y)},zt=function(){st=rt=null,ct=lt=gt=mt=ht=-1,at="",ot=-1,Nt=!0;for(var t=0;t<St.length;t++)St[t]=0};Ut(),this.context=Dt;var Vt=Dt.getParameter(Dt.MAX_TEXTURE_IMAGE_UNITS),Gt=Dt.getParameter(Dt.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Wt=Dt.getParameter(Dt.MAX_TEXTURE_SIZE),Ht=Dt.getParameter(Dt.MAX_CUBE_MAP_TEXTURE_SIZE),jt=Gt>0,Xt=jt&&Ft.get("OES_texture_float"),Yt=Dt.getShaderPrecisionFormat(Dt.VERTEX_SHADER,Dt.HIGH_FLOAT),qt=Dt.getShaderPrecisionFormat(Dt.VERTEX_SHADER,Dt.MEDIUM_FLOAT);Dt.getShaderPrecisionFormat(Dt.VERTEX_SHADER,Dt.LOW_FLOAT);var Zt=Dt.getShaderPrecisionFormat(Dt.FRAGMENT_SHADER,Dt.HIGH_FLOAT),Kt=Dt.getShaderPrecisionFormat(Dt.FRAGMENT_SHADER,Dt.MEDIUM_FLOAT);Dt.getShaderPrecisionFormat(Dt.FRAGMENT_SHADER,Dt.LOW_FLOAT);var Jt=function(){var t;return function(){if(void 0!==t)return t;if(t=[],Ft.get("WEBGL_compressed_texture_pvrtc")||Ft.get("WEBGL_compressed_texture_s3tc"))for(var e=Dt.getParameter(Dt.COMPRESSED_TEXTURE_FORMATS),n=0;n<e.length;n++)t.push(e[n]);return t}}(),Qt=0<Yt.precision&&0<Zt.precision,$t=0<qt.precision&&0<Kt.precision;"highp"!==F||Qt||($t?(F="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(F="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==F||$t||(F="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var te=new r.ShadowMapPlugin(this,q,Z,K),ee=new r.SpritePlugin(this,$),ne=new r.LensFlarePlugin(this,tt);this.getContext=function(){return Dt},this.forceContextLoss=function(){Ft.get("WEBGL_lose_context").loseContext()},this.supportsVertexTextures=function(){return jt},this.supportsFloatTextures=function(){return Ft.get("OES_texture_float")},this.supportsStandardDerivatives=function(){return Ft.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return Ft.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return Ft.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return Ft.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var t;return function(){if(void 0!==t)return t;var e=Ft.get("EXT_texture_filter_anisotropic");return t=null!==e?Dt.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return F},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){R=t},this.setSize=function(t,e,n){B.width=t*R,B.height=e*R,!1!==n&&(B.style.width=t+"px",B.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,n,r){xt=t*R,wt=e*R,Mt=n*R,Ct=r*R,Dt.viewport(xt,wt,Mt,Ct)},this.setScissor=function(t,e,n,r){Dt.scissor(t*R,e*R,n*R,r*R)},this.enableScissorTest=function(t){t?Dt.enable(Dt.SCISSOR_TEST):Dt.disable(Dt.SCISSOR_TEST)},this.getClearColor=function(){return X},this.setClearColor=function(t,e){X.set(t),Y=void 0!==e?e:1,Dt.clearColor(X.r,X.g,X.b,Y)},this.getClearAlpha=function(){return Y},this.setClearAlpha=function(t){Y=t,Dt.clearColor(X.r,X.g,X.b,Y)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=Dt.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=Dt.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Dt.STENCIL_BUFFER_BIT),Dt.clear(r)},this.clearColor=function(){Dt.clear(Dt.COLOR_BUFFER_BIT)},this.clearDepth=function(){Dt.clear(Dt.DEPTH_BUFFER_BIT);
},this.clearStencil=function(){Dt.clear(Dt.STENCIL_BUFFER_BIT)},this.clearTarget=function(t,e,n,r){this.setRenderTarget(t),this.clear(e,n,r)},this.resetGLState=zt;var re=function(t){t.target.traverse(function(t){if(t.removeEventListener("remove",re),t instanceof r.Mesh||t instanceof r.PointCloud||t instanceof r.Line)delete Z[t.id];else if(t instanceof r.ImmediateRenderObject||t.immediateRenderCallback)for(var e=K,n=e.length-1;n>=0;n--)e[n].object===t&&e.splice(n,1);delete t.__webglInit,delete t._modelViewMatrix,delete t._normalMatrix,delete t.__webglActive})},ie=function(t){if(t=t.target,t.removeEventListener("dispose",ie),delete t.__webglInit,t instanceof r.BufferGeometry){for(var e in t.attributes){var n=t.attributes[e];void 0!==n.buffer&&(Dt.deleteBuffer(n.buffer),delete n.buffer)}et.info.memory.geometries--}else if(e=ce[t.id],void 0!==e){for(var n=0,i=e.length;i>n;n++){var o=e[n];if(void 0!==o.numMorphTargets){for(var a=0,s=o.numMorphTargets;s>a;a++)Dt.deleteBuffer(o.__webglMorphTargetsBuffers[a]);delete o.__webglMorphTargetsBuffers}if(void 0!==o.numMorphNormals){for(a=0,s=o.numMorphNormals;s>a;a++)Dt.deleteBuffer(o.__webglMorphNormalsBuffers[a]);delete o.__webglMorphNormalsBuffers}ue(o)}delete ce[t.id]}else ue(t);at=""},oe=function(t){t=t.target,t.removeEventListener("dispose",oe),t.image&&t.image.__webglTextureCube?(Dt.deleteTexture(t.image.__webglTextureCube),delete t.image.__webglTextureCube):void 0!==t.__webglInit&&(Dt.deleteTexture(t.__webglTexture),delete t.__webglTexture,delete t.__webglInit),et.info.memory.textures--},ae=function(t){if(t=t.target,t.removeEventListener("dispose",ae),t&&void 0!==t.__webglTexture){if(Dt.deleteTexture(t.__webglTexture),delete t.__webglTexture,t instanceof r.WebGLRenderTargetCube)for(var e=0;6>e;e++)Dt.deleteFramebuffer(t.__webglFramebuffer[e]),Dt.deleteRenderbuffer(t.__webglRenderbuffer[e]);else Dt.deleteFramebuffer(t.__webglFramebuffer),Dt.deleteRenderbuffer(t.__webglRenderbuffer);delete t.__webglFramebuffer,delete t.__webglRenderbuffer}et.info.memory.textures--},se=function(t){t=t.target,t.removeEventListener("dispose",se),le(t)},ue=function(t){for(var e="__webglVertexBuffer __webglNormalBuffer __webglTangentBuffer __webglColorBuffer __webglUVBuffer __webglUV2Buffer __webglSkinIndicesBuffer __webglSkinWeightsBuffer __webglFaceBuffer __webglLineBuffer __webglLineDistanceBuffer".split(" "),n=0,r=e.length;r>n;n++){var i=e[n];void 0!==t[i]&&(Dt.deleteBuffer(t[i]),delete t[i])}if(void 0!==t.__webglCustomAttributesList){for(i in t.__webglCustomAttributesList)Dt.deleteBuffer(t.__webglCustomAttributesList[i].buffer);delete t.__webglCustomAttributesList}et.info.memory.geometries--},le=function(t){var e=t.program.program;if(void 0!==e){t.program=void 0;var n,r,i=!1;for(t=0,n=nt.length;n>t;t++)if(r=nt[t],r.program===e){r.usedTimes--,0===r.usedTimes&&(i=!0);break}if(!0===i){for(i=[],t=0,n=nt.length;n>t;t++)r=nt[t],r.program!==e&&i.push(r);nt=i,Dt.deleteProgram(e),et.info.memory.programs--}}};this.renderBufferImmediate=function(t,e,n){if(a(),t.hasPositions&&!t.__webglVertexBuffer&&(t.__webglVertexBuffer=Dt.createBuffer()),t.hasNormals&&!t.__webglNormalBuffer&&(t.__webglNormalBuffer=Dt.createBuffer()),t.hasUvs&&!t.__webglUvBuffer&&(t.__webglUvBuffer=Dt.createBuffer()),t.hasColors&&!t.__webglColorBuffer&&(t.__webglColorBuffer=Dt.createBuffer()),t.hasPositions&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,t.__webglVertexBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,t.positionArray,Dt.DYNAMIC_DRAW),s(e.attributes.position),Dt.vertexAttribPointer(e.attributes.position,3,Dt.FLOAT,!1,0,0)),t.hasNormals){if(Dt.bindBuffer(Dt.ARRAY_BUFFER,t.__webglNormalBuffer),n.shading===r.FlatShading){var i,o,l,c,h,f,p,d,m,g,y,v=3*t.count;for(y=0;v>y;y+=9)g=t.normalArray,i=g[y],o=g[y+1],l=g[y+2],c=g[y+3],f=g[y+4],d=g[y+5],h=g[y+6],p=g[y+7],m=g[y+8],i=(i+c+h)/3,o=(o+f+p)/3,l=(l+d+m)/3,g[y]=i,g[y+1]=o,g[y+2]=l,g[y+3]=i,g[y+4]=o,g[y+5]=l,g[y+6]=i,g[y+7]=o,g[y+8]=l}Dt.bufferData(Dt.ARRAY_BUFFER,t.normalArray,Dt.DYNAMIC_DRAW),s(e.attributes.normal),Dt.vertexAttribPointer(e.attributes.normal,3,Dt.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,t.__webglUvBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,t.uvArray,Dt.DYNAMIC_DRAW),s(e.attributes.uv),Dt.vertexAttribPointer(e.attributes.uv,2,Dt.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==r.NoColors&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,t.__webglColorBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,t.colorArray,Dt.DYNAMIC_DRAW),s(e.attributes.color),Dt.vertexAttribPointer(e.attributes.color,3,Dt.FLOAT,!1,0,0)),u(),Dt.drawArrays(Dt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,s,u){if(!1!==i.visible)if(v(u),t=x(t,e,n,i,u),e=!1,n="direct_"+s.id+"_"+t.id+"_"+(i.wireframe?1:0),n!==at&&(at=n,e=!0),e&&a(),u instanceof r.Mesh){u=!0===i.wireframe?Dt.LINES:Dt.TRIANGLES;var l=s.attributes.index;if(l){var c,h;if(l.array instanceof Uint32Array&&Ft.get("OES_element_index_uint")?(c=Dt.UNSIGNED_INT,h=4):(c=Dt.UNSIGNED_SHORT,h=2),n=s.offsets,0===n.length)e&&(o(i,t,s,0),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,l.buffer)),Dt.drawElements(u,l.array.length,c,0),et.info.render.calls++,et.info.render.vertices+=l.array.length,et.info.render.faces+=l.array.length/3;else{e=!0;for(var f=0,p=n.length;p>f;f++){var d=n[f].index;e&&(o(i,t,s,d),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,l.buffer)),Dt.drawElements(u,n[f].count,c,n[f].start*h),et.info.render.calls++,et.info.render.vertices+=n[f].count,et.info.render.faces+=n[f].count/3}}}else e&&o(i,t,s,0),i=s.attributes.position,Dt.drawArrays(u,0,i.array.length/3),et.info.render.calls++,et.info.render.vertices+=i.array.length/3,et.info.render.faces+=i.array.length/9}else if(u instanceof r.PointCloud)if(u=Dt.POINTS,l=s.attributes.index)if(l.array instanceof Uint32Array&&Ft.get("OES_element_index_uint")?(c=Dt.UNSIGNED_INT,h=4):(c=Dt.UNSIGNED_SHORT,h=2),n=s.offsets,0===n.length)e&&(o(i,t,s,0),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,l.buffer)),Dt.drawElements(u,l.array.length,c,0),et.info.render.calls++,et.info.render.points+=l.array.length;else for(1<n.length&&(e=!0),f=0,p=n.length;p>f;f++)d=n[f].index,e&&(o(i,t,s,d),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,l.buffer)),Dt.drawElements(u,n[f].count,c,n[f].start*h),et.info.render.calls++,et.info.render.points+=n[f].count;else if(e&&o(i,t,s,0),i=s.attributes.position,n=s.offsets,0===n.length)Dt.drawArrays(u,0,i.array.length/3),et.info.render.calls++,et.info.render.points+=i.array.length/3;else for(f=0,p=n.length;p>f;f++)Dt.drawArrays(u,n[f].index,n[f].count),et.info.render.calls++,et.info.render.points+=n[f].count;else if(u instanceof r.Line)if(u=u.mode===r.LineStrip?Dt.LINE_STRIP:Dt.LINES,T(i.linewidth),l=s.attributes.index)if(l.array instanceof Uint32Array?(c=Dt.UNSIGNED_INT,h=4):(c=Dt.UNSIGNED_SHORT,h=2),n=s.offsets,0===n.length)e&&(o(i,t,s,0),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,l.buffer)),Dt.drawElements(u,l.array.length,c,0),et.info.render.calls++,et.info.render.vertices+=l.array.length;else for(1<n.length&&(e=!0),f=0,p=n.length;p>f;f++)d=n[f].index,e&&(o(i,t,s,d),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,l.buffer)),Dt.drawElements(u,n[f].count,c,n[f].start*h),et.info.render.calls++,et.info.render.vertices+=n[f].count;else if(e&&o(i,t,s,0),i=s.attributes.position,n=s.offsets,0===n.length)Dt.drawArrays(u,0,i.array.length/3),et.info.render.calls++,et.info.render.vertices+=i.array.length/3;else for(f=0,p=n.length;p>f;f++)Dt.drawArrays(u,n[f].index,n[f].count),et.info.render.calls++,et.info.render.vertices+=n[f].count},this.renderBuffer=function(t,e,n,i,o,l){if(!1!==i.visible){if(v(l),n=x(t,e,n,i,l),e=n.attributes,t=!1,n=o.id+"_"+n.id+"_"+(i.wireframe?1:0),n!==at&&(at=n,t=!0),t&&a(),!i.morphTargets&&0<=e.position)t&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglVertexBuffer),s(e.position),Dt.vertexAttribPointer(e.position,3,Dt.FLOAT,!1,0,0));else if(l.morphTargetBase){if(n=i.program.attributes,-1!==l.morphTargetBase&&0<=n.position?(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglMorphTargetsBuffers[l.morphTargetBase]),s(n.position),Dt.vertexAttribPointer(n.position,3,Dt.FLOAT,!1,0,0)):0<=n.position&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglVertexBuffer),s(n.position),Dt.vertexAttribPointer(n.position,3,Dt.FLOAT,!1,0,0)),l.morphTargetForcedOrder.length)for(var c,f=0,p=l.morphTargetForcedOrder,d=l.morphTargetInfluences;f<i.numSupportedMorphTargets&&f<p.length;)c=n["morphTarget"+f],c>=0&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglMorphTargetsBuffers[p[f]]),s(c),Dt.vertexAttribPointer(c,3,Dt.FLOAT,!1,0,0)),c=n["morphNormal"+f],c>=0&&i.morphNormals&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglMorphNormalsBuffers[p[f]]),s(c),Dt.vertexAttribPointer(c,3,Dt.FLOAT,!1,0,0)),l.__webglMorphTargetInfluences[f]=d[p[f]],f++;else{for(p=[],d=l.morphTargetInfluences,f=0,c=d.length;c>f;f++)p.push([d[f],f]);p.length>i.numSupportedMorphTargets?(p.sort(h),p.length=i.numSupportedMorphTargets):p.length>i.numSupportedMorphNormals?p.sort(h):0===p.length&&p.push([0,0]);for(var f=0,m=i.numSupportedMorphTargets;m>f;f++)if(p[f]){var g=p[f][1];c=n["morphTarget"+f],c>=0&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglMorphTargetsBuffers[g]),s(c),Dt.vertexAttribPointer(c,3,Dt.FLOAT,!1,0,0)),c=n["morphNormal"+f],c>=0&&i.morphNormals&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglMorphNormalsBuffers[g]),s(c),Dt.vertexAttribPointer(c,3,Dt.FLOAT,!1,0,0)),l.__webglMorphTargetInfluences[f]=d[g]}else l.__webglMorphTargetInfluences[f]=0}null!==i.program.uniforms.morphTargetInfluences&&Dt.uniform1fv(i.program.uniforms.morphTargetInfluences,l.__webglMorphTargetInfluences)}if(t){if(o.__webglCustomAttributesList)for(n=0,d=o.__webglCustomAttributesList.length;d>n;n++)p=o.__webglCustomAttributesList[n],0<=e[p.buffer.belongsToAttribute]&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,p.buffer),s(e[p.buffer.belongsToAttribute]),Dt.vertexAttribPointer(e[p.buffer.belongsToAttribute],p.size,Dt.FLOAT,!1,0,0));0<=e.color&&(0<l.geometry.colors.length||0<l.geometry.faces.length?(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglColorBuffer),s(e.color),Dt.vertexAttribPointer(e.color,3,Dt.FLOAT,!1,0,0)):void 0!==i.defaultAttributeValues&&Dt.vertexAttrib3fv(e.color,i.defaultAttributeValues.color)),0<=e.normal&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglNormalBuffer),s(e.normal),Dt.vertexAttribPointer(e.normal,3,Dt.FLOAT,!1,0,0)),0<=e.tangent&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglTangentBuffer),s(e.tangent),Dt.vertexAttribPointer(e.tangent,4,Dt.FLOAT,!1,0,0)),0<=e.uv&&(l.geometry.faceVertexUvs[0]?(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglUVBuffer),s(e.uv),Dt.vertexAttribPointer(e.uv,2,Dt.FLOAT,!1,0,0)):void 0!==i.defaultAttributeValues&&Dt.vertexAttrib2fv(e.uv,i.defaultAttributeValues.uv)),0<=e.uv2&&(l.geometry.faceVertexUvs[1]?(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglUV2Buffer),s(e.uv2),Dt.vertexAttribPointer(e.uv2,2,Dt.FLOAT,!1,0,0)):void 0!==i.defaultAttributeValues&&Dt.vertexAttrib2fv(e.uv2,i.defaultAttributeValues.uv2)),i.skinning&&0<=e.skinIndex&&0<=e.skinWeight&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglSkinIndicesBuffer),s(e.skinIndex),Dt.vertexAttribPointer(e.skinIndex,4,Dt.FLOAT,!1,0,0),Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglSkinWeightsBuffer),s(e.skinWeight),Dt.vertexAttribPointer(e.skinWeight,4,Dt.FLOAT,!1,0,0)),0<=e.lineDistance&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,o.__webglLineDistanceBuffer),s(e.lineDistance),Dt.vertexAttribPointer(e.lineDistance,1,Dt.FLOAT,!1,0,0))}u(),l instanceof r.Mesh?(l=o.__typeArray===Uint32Array?Dt.UNSIGNED_INT:Dt.UNSIGNED_SHORT,i.wireframe?(T(i.wireframeLinewidth),t&&Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,o.__webglLineBuffer),Dt.drawElements(Dt.LINES,o.__webglLineCount,l,0)):(t&&Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,o.__webglFaceBuffer),Dt.drawElements(Dt.TRIANGLES,o.__webglFaceCount,l,0)),et.info.render.calls++,et.info.render.vertices+=o.__webglFaceCount,et.info.render.faces+=o.__webglFaceCount/3):l instanceof r.Line?(l=l.mode===r.LineStrip?Dt.LINE_STRIP:Dt.LINES,T(i.linewidth),Dt.drawArrays(l,0,o.__webglLineCount),et.info.render.calls++):l instanceof r.PointCloud&&(Dt.drawArrays(Dt.POINTS,0,o.__webglParticleCount),et.info.render.calls++,et.info.render.points+=o.__webglParticleCount)}},this.render=function(t,e,n,i){if(!1==e instanceof r.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var o=t.fog;at="",ot=-1,st=null,Nt=!0,!0===t.autoUpdate&&t.updateMatrixWorld(),void 0===e.parent&&e.updateMatrixWorld(),t.traverse(function(t){t instanceof r.SkinnedMesh&&t.skeleton.update()}),e.matrixWorldInverse.getInverse(e.matrixWorld),At.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Lt.setFromMatrix(At),q.length=0,J.length=0,Q.length=0,$.length=0,tt.length=0,f(t),!0===et.sortObjects&&(J.sort(l),Q.sort(c)),te.render(t,e),et.info.render.calls=0,et.info.render.vertices=0,et.info.render.faces=0,et.info.render.points=0,this.setRenderTarget(n),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),i=0;for(var a=K.length;a>i;i++){var s=K[i],u=s.object;u.visible&&(C(u,e),m(s))}t.overrideMaterial?(i=t.overrideMaterial,this.setBlending(i.blending,i.blendEquation,i.blendSrc,i.blendDst),this.setDepthTest(i.depthTest),this.setDepthWrite(i.depthWrite),S(i.polygonOffset,i.polygonOffsetFactor,i.polygonOffsetUnits),p(J,e,q,o,!0,i),p(Q,e,q,o,!0,i),d(K,"",e,q,o,!1,i)):(i=null,this.setBlending(r.NoBlending),p(J,e,q,o,!1,i),d(K,"opaque",e,q,o,!1,i),p(Q,e,q,o,!0,i),d(K,"transparent",e,q,o,!0,i)),ee.render(t,e),ne.render(t,e,Pt,Et),n&&n.generateMipmaps&&n.minFilter!==r.NearestFilter&&n.minFilter!==r.LinearFilter&&I(n),this.setDepthTest(!0),this.setDepthWrite(!0)}},this.renderImmediateObject=function(t,e,n,r,i){var o=x(t,e,n,r,i);at="",et.setMaterialFaces(r),i.immediateRenderCallback?i.immediateRenderCallback(o,Dt,Lt):i.render(function(t){et.renderBufferImmediate(t,o,r)})};var ce={},he=0,fe={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"};this.setFaceCulling=function(t,e){t===r.CullFaceNone?Dt.disable(Dt.CULL_FACE):(e===r.FrontFaceDirectionCW?Dt.frontFace(Dt.CW):Dt.frontFace(Dt.CCW),t===r.CullFaceBack?Dt.cullFace(Dt.BACK):t===r.CullFaceFront?Dt.cullFace(Dt.FRONT):Dt.cullFace(Dt.FRONT_AND_BACK),Dt.enable(Dt.CULL_FACE))},this.setMaterialFaces=function(t){var e=t.side===r.DoubleSide;t=t.side===r.BackSide,lt!==e&&(e?Dt.disable(Dt.CULL_FACE):Dt.enable(Dt.CULL_FACE),lt=e),ct!==t&&(t?Dt.frontFace(Dt.CW):Dt.frontFace(Dt.CCW),ct=t)},this.setDepthTest=function(t){mt!==t&&(t?Dt.enable(Dt.DEPTH_TEST):Dt.disable(Dt.DEPTH_TEST),mt=t)},this.setDepthWrite=function(t){gt!==t&&(Dt.depthMask(t),gt=t)},this.setBlending=function(t,e,n,i){t!==ht&&(t===r.NoBlending?Dt.disable(Dt.BLEND):t===r.AdditiveBlending?(Dt.enable(Dt.BLEND),Dt.blendEquation(Dt.FUNC_ADD),Dt.blendFunc(Dt.SRC_ALPHA,Dt.ONE)):t===r.SubtractiveBlending?(Dt.enable(Dt.BLEND),Dt.blendEquation(Dt.FUNC_ADD),Dt.blendFunc(Dt.ZERO,Dt.ONE_MINUS_SRC_COLOR)):t===r.MultiplyBlending?(Dt.enable(Dt.BLEND),Dt.blendEquation(Dt.FUNC_ADD),Dt.blendFunc(Dt.ZERO,Dt.SRC_COLOR)):t===r.CustomBlending?Dt.enable(Dt.BLEND):(Dt.enable(Dt.BLEND),Dt.blendEquationSeparate(Dt.FUNC_ADD,Dt.FUNC_ADD),Dt.blendFuncSeparate(Dt.SRC_ALPHA,Dt.ONE_MINUS_SRC_ALPHA,Dt.ONE,Dt.ONE_MINUS_SRC_ALPHA)),ht=t),t===r.CustomBlending?(e!==ft&&(Dt.blendEquation(N(e)),ft=e),(n!==pt||i!==dt)&&(Dt.blendFunc(N(n),N(i)),pt=n,dt=i)):dt=pt=ft=null},this.uploadTexture=function(t){void 0===t.__webglInit&&(t.__webglInit=!0,t.addEventListener("dispose",oe),t.__webglTexture=Dt.createTexture(),et.info.memory.textures++),Dt.bindTexture(Dt.TEXTURE_2D,t.__webglTexture),Dt.pixelStorei(Dt.UNPACK_FLIP_Y_WEBGL,t.flipY),Dt.pixelStorei(Dt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),Dt.pixelStorei(Dt.UNPACK_ALIGNMENT,t.unpackAlignment),t.image=A(t.image,Wt);var e=t.image,n=r.Math.isPowerOfTwo(e.width)&&r.Math.isPowerOfTwo(e.height),i=N(t.format),o=N(t.type);L(Dt.TEXTURE_2D,t,n);var a=t.mipmaps;if(t instanceof r.DataTexture)if(0<a.length&&n){for(var s=0,u=a.length;u>s;s++)e=a[s],Dt.texImage2D(Dt.TEXTURE_2D,s,i,e.width,e.height,0,i,o,e.data);t.generateMipmaps=!1}else Dt.texImage2D(Dt.TEXTURE_2D,0,i,e.width,e.height,0,i,o,e.data);else if(t instanceof r.CompressedTexture)for(s=0,u=a.length;u>s;s++)e=a[s],t.format!==r.RGBAFormat&&t.format!==r.RGBFormat?-1<Jt().indexOf(i)?Dt.compressedTexImage2D(Dt.TEXTURE_2D,s,i,e.width,e.height,0,e.data):console.warn("Attempt to load unsupported compressed texture format"):Dt.texImage2D(Dt.TEXTURE_2D,s,i,e.width,e.height,0,i,o,e.data);else if(0<a.length&&n){for(s=0,u=a.length;u>s;s++)e=a[s],Dt.texImage2D(Dt.TEXTURE_2D,s,i,i,o,e);t.generateMipmaps=!1}else Dt.texImage2D(Dt.TEXTURE_2D,0,i,i,o,t.image);t.generateMipmaps&&n&&Dt.generateMipmap(Dt.TEXTURE_2D),t.needsUpdate=!1,t.onUpdate&&t.onUpdate()},this.setTexture=function(t,e){Dt.activeTexture(Dt.TEXTURE0+e),t.needsUpdate?et.uploadTexture(t):Dt.bindTexture(Dt.TEXTURE_2D,t.__webglTexture)},this.setRenderTarget=function(t){var e=t instanceof r.WebGLRenderTargetCube;if(t&&void 0===t.__webglFramebuffer){void 0===t.depthBuffer&&(t.depthBuffer=!0),void 0===t.stencilBuffer&&(t.stencilBuffer=!0),t.addEventListener("dispose",ae),t.__webglTexture=Dt.createTexture(),et.info.memory.textures++;var n=r.Math.isPowerOfTwo(t.width)&&r.Math.isPowerOfTwo(t.height),i=N(t.format),o=N(t.type);if(e){t.__webglFramebuffer=[],t.__webglRenderbuffer=[],Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,t.__webglTexture),L(Dt.TEXTURE_CUBE_MAP,t,n);for(var a=0;6>a;a++){t.__webglFramebuffer[a]=Dt.createFramebuffer(),t.__webglRenderbuffer[a]=Dt.createRenderbuffer(),Dt.texImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,i,t.width,t.height,0,i,o,null);var s=t,u=Dt.TEXTURE_CUBE_MAP_POSITIVE_X+a;Dt.bindFramebuffer(Dt.FRAMEBUFFER,t.__webglFramebuffer[a]),Dt.framebufferTexture2D(Dt.FRAMEBUFFER,Dt.COLOR_ATTACHMENT0,u,s.__webglTexture,0),D(t.__webglRenderbuffer[a],t)}n&&Dt.generateMipmap(Dt.TEXTURE_CUBE_MAP)}else t.__webglFramebuffer=Dt.createFramebuffer(),t.__webglRenderbuffer=t.shareDepthFrom?t.shareDepthFrom.__webglRenderbuffer:Dt.createRenderbuffer(),Dt.bindTexture(Dt.TEXTURE_2D,t.__webglTexture),L(Dt.TEXTURE_2D,t,n),Dt.texImage2D(Dt.TEXTURE_2D,0,i,t.width,t.height,0,i,o,null),i=Dt.TEXTURE_2D,Dt.bindFramebuffer(Dt.FRAMEBUFFER,t.__webglFramebuffer),Dt.framebufferTexture2D(Dt.FRAMEBUFFER,Dt.COLOR_ATTACHMENT0,i,t.__webglTexture,0),t.shareDepthFrom?t.depthBuffer&&!t.stencilBuffer?Dt.framebufferRenderbuffer(Dt.FRAMEBUFFER,Dt.DEPTH_ATTACHMENT,Dt.RENDERBUFFER,t.__webglRenderbuffer):t.depthBuffer&&t.stencilBuffer&&Dt.framebufferRenderbuffer(Dt.FRAMEBUFFER,Dt.DEPTH_STENCIL_ATTACHMENT,Dt.RENDERBUFFER,t.__webglRenderbuffer):D(t.__webglRenderbuffer,t),n&&Dt.generateMipmap(Dt.TEXTURE_2D);e?Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,null):Dt.bindTexture(Dt.TEXTURE_2D,null),Dt.bindRenderbuffer(Dt.RENDERBUFFER,null),Dt.bindFramebuffer(Dt.FRAMEBUFFER,null)}t?(e=e?t.__webglFramebuffer[t.activeCubeFace]:t.__webglFramebuffer,n=t.width,t=t.height,o=i=0):(e=null,n=Mt,t=Ct,i=xt,o=wt),e!==it&&(Dt.bindFramebuffer(Dt.FRAMEBUFFER,e),Dt.viewport(i,o,n,t),it=e),Pt=n,Et=t},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},r.WebGLRenderTarget=function(t,e,n){this.width=t,this.height=e,n=n||{},this.wrapS=void 0!==n.wrapS?n.wrapS:r.ClampToEdgeWrapping,this.wrapT=void 0!==n.wrapT?n.wrapT:r.ClampToEdgeWrapping,this.magFilter=void 0!==n.magFilter?n.magFilter:r.LinearFilter,this.minFilter=void 0!==n.minFilter?n.minFilter:r.LinearMipMapLinearFilter,this.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,this.offset=new r.Vector2(0,0),this.repeat=new r.Vector2(1,1),this.format=void 0!==n.format?n.format:r.RGBAFormat,this.type=void 0!==n.type?n.type:r.UnsignedByteType,this.depthBuffer=void 0!==n.depthBuffer?n.depthBuffer:!0,this.stencilBuffer=void 0!==n.stencilBuffer?n.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},r.WebGLRenderTarget.prototype={constructor:r.WebGLRenderTarget,setSize:function(t,e){this.width=t,this.height=e},clone:function(){var t=new r.WebGLRenderTarget(this.width,this.height);return t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t.anisotropy=this.anisotropy,t.offset.copy(this.offset),t.repeat.copy(this.repeat),t.format=this.format,t.type=this.type,t.depthBuffer=this.depthBuffer,t.stencilBuffer=this.stencilBuffer,t.generateMipmaps=this.generateMipmaps,t.shareDepthFrom=this.shareDepthFrom,t},dispose:function(){this.dispatchEvent({type:"dispose"})}},r.EventDispatcher.prototype.apply(r.WebGLRenderTarget.prototype),r.WebGLRenderTargetCube=function(t,e,n){r.WebGLRenderTarget.call(this,t,e,n),this.activeCubeFace=0},r.WebGLRenderTargetCube.prototype=Object.create(r.WebGLRenderTarget.prototype),r.WebGLRenderTargetCube.prototype.constructor=r.WebGLRenderTargetCube,r.WebGLExtensions=function(t){var e={};this.get=function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.log("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r}},r.WebGLProgram=function(){var t=0;return function(e,n,i,o){var a=e.context,s=i.defines,u=i.__webglShader.uniforms,l=i.attributes,c=i.__webglShader.vertexShader,h=i.__webglShader.fragmentShader,f=i.index0AttributeName;void 0===f&&!0===o.morphTargets&&(f="position");var p="SHADOWMAP_TYPE_BASIC";o.shadowMapType===r.PCFShadowMap?p="SHADOWMAP_TYPE_PCF":o.shadowMapType===r.PCFSoftShadowMap&&(p="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",m="ENVMAP_MODE_REFLECTION",g="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case r.CubeReflectionMapping:case r.CubeRefractionMapping:d="ENVMAP_TYPE_CUBE";break;case r.EquirectangularReflectionMapping:case r.EquirectangularRefractionMapping:d="ENVMAP_TYPE_EQUIREC";break;case r.SphericalReflectionMapping:d="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case r.CubeRefractionMapping:case r.EquirectangularRefractionMapping:m="ENVMAP_MODE_REFRACTION"}switch(i.combine){case r.MultiplyOperation:g="ENVMAP_BLENDING_MULTIPLY";break;case r.MixOperation:g="ENVMAP_BLENDING_MIX";break;case r.AddOperation:g="ENVMAP_BLENDING_ADD"}}var y,v;y=[];for(var b in s)v=s[b],!1!==v&&(v="#define "+b+" "+v,y.push(v));y=y.join("\n"),s=a.createProgram(),i instanceof r.RawShaderMaterial?e=i="":(i=["precision "+o.precision+" float;","precision "+o.precision+" int;",y,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.gammaInput?"#define GAMMA_INPUT":"",e.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+o.maxDirLights,"#define MAX_POINT_LIGHTS "+o.maxPointLights,"#define MAX_SPOT_LIGHTS "+o.maxSpotLights,"#define MAX_HEMI_LIGHTS "+o.maxHemiLights,"#define MAX_SHADOWS "+o.maxShadows,"#define MAX_BONES "+o.maxBones,o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+m:"",o.lightMap?"#define USE_LIGHTMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals?"#define USE_MORPHNORMALS":"",o.wrapAround?"#define WRAP_AROUND":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+p:"",o.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",o.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n	attribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n	attribute vec3 morphTarget0;\n	attribute vec3 morphTarget1;\n	attribute vec3 morphTarget2;\n	attribute vec3 morphTarget3;\n	#ifdef USE_MORPHNORMALS\n		attribute vec3 morphNormal0;\n		attribute vec3 morphNormal1;\n		attribute vec3 morphNormal2;\n		attribute vec3 morphNormal3;\n	#else\n		attribute vec3 morphTarget4;\n		attribute vec3 morphTarget5;\n		attribute vec3 morphTarget6;\n		attribute vec3 morphTarget7;\n	#endif\n#endif\n#ifdef USE_SKINNING\n	attribute vec4 skinIndex;\n	attribute vec4 skinWeight;\n#endif\n"].join("\n"),e=["precision "+o.precision+" float;","precision "+o.precision+" int;",o.bumpMap||o.normalMap?"#extension GL_OES_standard_derivatives : enable":"",y,"#define MAX_DIR_LIGHTS "+o.maxDirLights,"#define MAX_POINT_LIGHTS "+o.maxPointLights,"#define MAX_SPOT_LIGHTS "+o.maxSpotLights,"#define MAX_HEMI_LIGHTS "+o.maxHemiLights,"#define MAX_SHADOWS "+o.maxShadows,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"",e.gammaInput?"#define GAMMA_INPUT":"",e.gammaOutput?"#define GAMMA_OUTPUT":"",o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.envMap?"#define "+m:"",o.envMap?"#define "+g:"",o.lightMap?"#define USE_LIGHTMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.metal?"#define METAL":"",o.wrapAround?"#define WRAP_AROUND":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+p:"",o.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",o.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n")),c=new r.WebGLShader(a,a.VERTEX_SHADER,i+c),h=new r.WebGLShader(a,a.FRAGMENT_SHADER,e+h),a.attachShader(s,c),a.attachShader(s,h),void 0!==f&&a.bindAttribLocation(s,0,f),a.linkProgram(s),!1===a.getProgramParameter(s,a.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(s,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError())),""!==a.getProgramInfoLog(s)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",a.getProgramInfoLog(s)),a.deleteShader(c),a.deleteShader(h),f="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" "),o.useVertexTexture?(f.push("boneTexture"),f.push("boneTextureWidth"),f.push("boneTextureHeight")):f.push("boneGlobalMatrices"),o.logarithmicDepthBuffer&&f.push("logDepthBufFC");for(var _ in u)f.push(_);for(u=f,_={},f=0,e=u.length;e>f;f++)p=u[f],_[p]=a.getUniformLocation(s,p);for(this.uniforms=_,f="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" "),u=0;u<o.maxMorphTargets;u++)f.push("morphTarget"+u);for(u=0;u<o.maxMorphNormals;u++)f.push("morphNormal"+u);for(var x in l)f.push(x);for(o=f,l={},x=0,u=o.length;u>x;x++)_=o[x],l[_]=a.getAttribLocation(s,_);return this.attributes=l,this.attributesKeys=Object.keys(this.attributes),this.id=t++,this.code=n,this.usedTimes=1,this.program=s,this.vertexShader=c,this.fragmentShader=h,this}}(),r.WebGLShader=function(){var t=function(t){t=t.split("\n");for(var e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")};return function(e,n,r){return n=e.createShader(n),e.shaderSource(n,r),e.compileShader(n),!1===e.getShaderParameter(n,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(n)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e.getShaderInfoLog(n)),console.warn(t(r))),n}}(),r.LensFlarePlugin=function(t,e){var n,i,o,a,s,u,l,c,h,f,p,d,m,g,y,v,b=t.context;this.render=function(_,x,w,M){if(0!==e.length){_=new r.Vector3;var C=M/w,P=.5*w,E=.5*M,T=16/M,S=new r.Vector2(T*C,T),L=new r.Vector3(1,1,0),A=new r.Vector2(1,1);if(void 0===m){var T=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),D=new Uint16Array([0,1,2,0,2,3]);p=b.createBuffer(),d=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,p),b.bufferData(b.ARRAY_BUFFER,T,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,d),b.bufferData(b.ELEMENT_ARRAY_BUFFER,D,b.STATIC_DRAW),y=b.createTexture(),v=b.createTexture(),b.bindTexture(b.TEXTURE_2D,y),b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.bindTexture(b.TEXTURE_2D,v),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);var T=(g=0<b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},D=b.createProgram(),I=b.createShader(b.FRAGMENT_SHADER),k=b.createShader(b.VERTEX_SHADER),N="precision "+t.getPrecision()+" float;\n";b.shaderSource(I,N+T.fragmentShader),b.shaderSource(k,N+T.vertexShader),b.compileShader(I),b.compileShader(k),b.attachShader(D,I),b.attachShader(D,k),b.linkProgram(D),m=D,h=b.getAttribLocation(m,"position"),f=b.getAttribLocation(m,"uv"),n=b.getUniformLocation(m,"renderType"),i=b.getUniformLocation(m,"map"),o=b.getUniformLocation(m,"occlusionMap"),a=b.getUniformLocation(m,"opacity"),s=b.getUniformLocation(m,"color"),u=b.getUniformLocation(m,"scale"),l=b.getUniformLocation(m,"rotation"),c=b.getUniformLocation(m,"screenPosition")}for(b.useProgram(m),b.enableVertexAttribArray(h),b.enableVertexAttribArray(f),b.uniform1i(o,0),b.uniform1i(i,1),b.bindBuffer(b.ARRAY_BUFFER,p),b.vertexAttribPointer(h,2,b.FLOAT,!1,16,0),b.vertexAttribPointer(f,2,b.FLOAT,!1,16,8),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,d),b.disable(b.CULL_FACE),b.depthMask(!1),D=0,I=e.length;I>D;D++)if(T=16/M,S.set(T*C,T),k=e[D],_.set(k.matrixWorld.elements[12],k.matrixWorld.elements[13],k.matrixWorld.elements[14]),_.applyMatrix4(x.matrixWorldInverse),_.applyProjection(x.projectionMatrix),L.copy(_),A.x=L.x*P+P,A.y=L.y*E+E,g||0<A.x&&A.x<w&&0<A.y&&A.y<M){b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,y),b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,A.x-8,A.y-8,16,16,0),b.uniform1i(n,0),b.uniform2f(u,S.x,S.y),b.uniform3f(c,L.x,L.y,L.z),b.disable(b.BLEND),b.enable(b.DEPTH_TEST),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,v),b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,A.x-8,A.y-8,16,16,0),b.uniform1i(n,1),b.disable(b.DEPTH_TEST),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,y),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0),k.positionScreen.copy(L),k.customUpdateCallback?k.customUpdateCallback(k):k.updateLensFlares(),b.uniform1i(n,2),b.enable(b.BLEND);for(var N=0,B=k.lensFlares.length;B>N;N++){var O=k.lensFlares[N];.001<O.opacity&&.001<O.scale&&(L.x=O.x,L.y=O.y,L.z=O.z,T=O.size*O.scale/M,S.x=T*C,S.y=T,b.uniform3f(c,L.x,L.y,L.z),b.uniform2f(u,S.x,S.y),b.uniform1f(l,O.rotation),b.uniform1f(a,O.opacity),b.uniform3f(s,O.color.r,O.color.g,O.color.b),t.setBlending(O.blending,O.blendEquation,O.blendSrc,O.blendDst),t.setTexture(O.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}}b.enable(b.CULL_FACE),b.enable(b.DEPTH_TEST),b.depthMask(!0),t.resetGLState()}}},r.ShadowMapPlugin=function(t,e,n,i){function o(t,e,r){if(e.visible){var i=n[e.id];if(i&&e.castShadow&&(!1===e.frustumCulled||!0===h.intersectsObject(e)))for(var a=0,s=i.length;s>a;a++){var u=i[a];e._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),g.push(u)}for(a=0,s=e.children.length;s>a;a++)o(t,e.children[a],r)}}var a,s,u,l,c=t.context,h=new r.Frustum,f=new r.Matrix4,p=new r.Vector3,d=new r.Vector3,m=new r.Vector3,g=[],y=r.ShaderLib.depthRGBA,v=r.UniformsUtils.clone(y.uniforms);a=new r.ShaderMaterial({uniforms:v,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader}),s=new r.ShaderMaterial({uniforms:v,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,morphTargets:!0}),u=new r.ShaderMaterial({uniforms:v,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,skinning:!0}),l=new r.ShaderMaterial({uniforms:v,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,morphTargets:!0,skinning:!0}),a._shadowPass=!0,s._shadowPass=!0,u._shadowPass=!0,l._shadowPass=!0,this.render=function(n,y){if(!1!==t.shadowMapEnabled){var v,b,_,x,w,M,C,P,E=[];for(x=0,c.clearColor(1,1,1,1),c.disable(c.BLEND),c.enable(c.CULL_FACE),c.frontFace(c.CCW),t.shadowMapCullFace===r.CullFaceFront?c.cullFace(c.FRONT):c.cullFace(c.BACK),t.setDepthTest(!0),v=0,b=e.length;b>v;v++)if(_=e[v],_.castShadow)if(_ instanceof r.DirectionalLight&&_.shadowCascade)for(w=0;w<_.shadowCascadeCount;w++){var T;if(_.shadowCascadeArray[w])T=_.shadowCascadeArray[w];else{C=_;var S=w;T=new r.DirectionalLight,T.isVirtual=!0,T.onlyShadow=!0,T.castShadow=!0,T.shadowCameraNear=C.shadowCameraNear,T.shadowCameraFar=C.shadowCameraFar,T.shadowCameraLeft=C.shadowCameraLeft,T.shadowCameraRight=C.shadowCameraRight,T.shadowCameraBottom=C.shadowCameraBottom,T.shadowCameraTop=C.shadowCameraTop,T.shadowCameraVisible=C.shadowCameraVisible,T.shadowDarkness=C.shadowDarkness,T.shadowBias=C.shadowCascadeBias[S],T.shadowMapWidth=C.shadowCascadeWidth[S],T.shadowMapHeight=C.shadowCascadeHeight[S],T.pointsWorld=[],T.pointsFrustum=[],P=T.pointsWorld,M=T.pointsFrustum;for(var L=0;8>L;L++)P[L]=new r.Vector3,M[L]=new r.Vector3;P=C.shadowCascadeNearZ[S],C=C.shadowCascadeFarZ[S],M[0].set(-1,-1,P),M[1].set(1,-1,P),M[2].set(-1,1,P),M[3].set(1,1,P),M[4].set(-1,-1,C),M[5].set(1,-1,C),M[6].set(-1,1,C),M[7].set(1,1,C),T.originalCamera=y,M=new r.Gyroscope,M.position.copy(_.shadowCascadeOffset),M.add(T),M.add(T.target),y.add(M),_.shadowCascadeArray[w]=T,console.log("Created virtualLight",T)}S=_,P=w,C=S.shadowCascadeArray[P],C.position.copy(S.position),C.target.position.copy(S.target.position),C.lookAt(C.target),C.shadowCameraVisible=S.shadowCameraVisible,C.shadowDarkness=S.shadowDarkness,C.shadowBias=S.shadowCascadeBias[P],M=S.shadowCascadeNearZ[P],S=S.shadowCascadeFarZ[P],C=C.pointsFrustum,C[0].z=M,C[1].z=M,C[2].z=M,C[3].z=M,C[4].z=S,C[5].z=S,C[6].z=S,C[7].z=S,E[x]=T,x++}else E[x]=_,x++;for(v=0,b=E.length;b>v;v++){if(_=E[v],_.shadowMap||(w=r.LinearFilter,t.shadowMapType===r.PCFSoftShadowMap&&(w=r.NearestFilter),_.shadowMap=new r.WebGLRenderTarget(_.shadowMapWidth,_.shadowMapHeight,{minFilter:w,magFilter:w,format:r.RGBAFormat}),_.shadowMapSize=new r.Vector2(_.shadowMapWidth,_.shadowMapHeight),_.shadowMatrix=new r.Matrix4),!_.shadowCamera){if(_ instanceof r.SpotLight)_.shadowCamera=new r.PerspectiveCamera(_.shadowCameraFov,_.shadowMapWidth/_.shadowMapHeight,_.shadowCameraNear,_.shadowCameraFar);else{if(!(_ instanceof r.DirectionalLight)){console.error("Unsupported light type for shadow");continue}_.shadowCamera=new r.OrthographicCamera(_.shadowCameraLeft,_.shadowCameraRight,_.shadowCameraTop,_.shadowCameraBottom,_.shadowCameraNear,_.shadowCameraFar)}n.add(_.shadowCamera),!0===n.autoUpdate&&n.updateMatrixWorld()}if(_.shadowCameraVisible&&!_.cameraHelper&&(_.cameraHelper=new r.CameraHelper(_.shadowCamera),n.add(_.cameraHelper)),_.isVirtual&&T.originalCamera==y){for(w=y,x=_.shadowCamera,M=_.pointsFrustum,C=_.pointsWorld,p.set(1/0,1/0,1/0),d.set(-(1/0),-(1/0),-(1/0)),S=0;8>S;S++)P=C[S],P.copy(M[S]),P.unproject(w),P.applyMatrix4(x.matrixWorldInverse),P.x<p.x&&(p.x=P.x),P.x>d.x&&(d.x=P.x),P.y<p.y&&(p.y=P.y),P.y>d.y&&(d.y=P.y),P.z<p.z&&(p.z=P.z),P.z>d.z&&(d.z=P.z);x.left=p.x,x.right=d.x,x.top=d.y,x.bottom=p.y,x.updateProjectionMatrix()}for(x=_.shadowMap,M=_.shadowMatrix,w=_.shadowCamera,w.position.setFromMatrixPosition(_.matrixWorld),m.setFromMatrixPosition(_.target.matrixWorld),w.lookAt(m),w.updateMatrixWorld(),w.matrixWorldInverse.getInverse(w.matrixWorld),_.cameraHelper&&(_.cameraHelper.visible=_.shadowCameraVisible),_.shadowCameraVisible&&_.cameraHelper.update(),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(w.projectionMatrix),M.multiply(w.matrixWorldInverse),f.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),h.setFromMatrix(f),t.setRenderTarget(x),t.clear(),g.length=0,o(n,n,w),_=0,x=g.length;x>_;_++)C=g[_],M=C.object,C=C.buffer,S=M.material instanceof r.MeshFaceMaterial?M.material.materials[0]:M.material,P=void 0!==M.geometry.morphTargets&&0<M.geometry.morphTargets.length&&S.morphTargets,L=M instanceof r.SkinnedMesh&&S.skinning,P=M.customDepthMaterial?M.customDepthMaterial:L?P?l:u:P?s:a,t.setMaterialFaces(S),C instanceof r.BufferGeometry?t.renderBufferDirect(w,e,null,P,C,M):t.renderBuffer(w,e,null,P,C,M);for(_=0,x=i.length;x>_;_++)C=i[_],M=C.object,M.visible&&M.castShadow&&(M._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,M.matrixWorld),t.renderImmediateObject(w,e,null,a,M))}v=t.getClearColor(),b=t.getClearAlpha(),c.clearColor(v.r,v.g,v.b,b),c.enable(c.BLEND),t.shadowMapCullFace===r.CullFaceFront&&c.cullFace(c.BACK),t.resetGLState()}}},r.SpritePlugin=function(t,e){function n(t,e){return t.z!==e.z?e.z-t.z:e.id-t.id}var i,o,a,s,u,l,c,h,f,p,d,m,g,y,v,b,_,x,w,M,C,P=t.context,E=new r.Vector3,T=new r.Quaternion,S=new r.Vector3;this.render=function(L,A){if(0!==e.length){if(void 0===M){var D=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),I=new Uint16Array([0,1,2,0,2,3]);x=P.createBuffer(),w=P.createBuffer(),P.bindBuffer(P.ARRAY_BUFFER,x),P.bufferData(P.ARRAY_BUFFER,D,P.STATIC_DRAW),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,w),P.bufferData(P.ELEMENT_ARRAY_BUFFER,I,P.STATIC_DRAW);var D=P.createProgram(),I=P.createShader(P.VERTEX_SHADER),k=P.createShader(P.FRAGMENT_SHADER);P.shaderSource(I,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),P.shaderSource(k,["precision "+t.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),P.compileShader(I),P.compileShader(k),P.attachShader(D,I),P.attachShader(D,k),P.linkProgram(D),M=D,b=P.getAttribLocation(M,"position"),_=P.getAttribLocation(M,"uv"),i=P.getUniformLocation(M,"uvOffset"),o=P.getUniformLocation(M,"uvScale"),a=P.getUniformLocation(M,"rotation"),s=P.getUniformLocation(M,"scale"),u=P.getUniformLocation(M,"color"),l=P.getUniformLocation(M,"map"),c=P.getUniformLocation(M,"opacity"),h=P.getUniformLocation(M,"modelViewMatrix"),f=P.getUniformLocation(M,"projectionMatrix"),p=P.getUniformLocation(M,"fogType"),d=P.getUniformLocation(M,"fogDensity"),m=P.getUniformLocation(M,"fogNear"),g=P.getUniformLocation(M,"fogFar"),y=P.getUniformLocation(M,"fogColor"),v=P.getUniformLocation(M,"alphaTest"),D=document.createElement("canvas"),D.width=8,D.height=8,I=D.getContext("2d"),I.fillStyle="white",I.fillRect(0,0,8,8),C=new r.Texture(D),C.needsUpdate=!0}P.useProgram(M),P.enableVertexAttribArray(b),P.enableVertexAttribArray(_),P.disable(P.CULL_FACE),P.enable(P.BLEND),P.bindBuffer(P.ARRAY_BUFFER,x),P.vertexAttribPointer(b,2,P.FLOAT,!1,16,0),P.vertexAttribPointer(_,2,P.FLOAT,!1,16,8),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,w),P.uniformMatrix4fv(f,!1,A.projectionMatrix.elements),P.activeTexture(P.TEXTURE0),P.uniform1i(l,0),I=D=0,(k=L.fog)?(P.uniform3f(y,k.color.r,k.color.g,k.color.b),k instanceof r.Fog?(P.uniform1f(m,k.near),P.uniform1f(g,k.far),P.uniform1i(p,1),I=D=1):k instanceof r.FogExp2&&(P.uniform1f(d,k.density),P.uniform1i(p,2),I=D=2)):(P.uniform1i(p,0),I=D=0);for(var k=0,N=e.length;N>k;k++){var B=e[k];B._modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,B.matrixWorld),B.z=-B._modelViewMatrix.elements[14]}e.sort(n);for(var O=[],k=0,N=e.length;N>k;k++){var B=e[k],R=B.material;P.uniform1f(v,R.alphaTest),P.uniformMatrix4fv(h,!1,B._modelViewMatrix.elements),B.matrixWorld.decompose(E,T,S),O[0]=S.x,O[1]=S.y,B=0,L.fog&&R.fog&&(B=I),D!==B&&(P.uniform1i(p,B),D=B),null!==R.map?(P.uniform2f(i,R.map.offset.x,R.map.offset.y),P.uniform2f(o,R.map.repeat.x,R.map.repeat.y)):(P.uniform2f(i,0,0),P.uniform2f(o,1,1)),P.uniform1f(c,R.opacity),P.uniform3f(u,R.color.r,R.color.g,R.color.b),P.uniform1f(a,R.rotation),P.uniform2fv(s,O),t.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst),t.setDepthTest(R.depthTest),t.setDepthWrite(R.depthWrite),R.map&&R.map.image&&R.map.image.width?t.setTexture(R.map,0):t.setTexture(C,0),P.drawElements(P.TRIANGLES,6,P.UNSIGNED_SHORT,0)}P.enable(P.CULL_FACE),t.resetGLState()}}},r.GeometryUtils={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;e instanceof r.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},r.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,n,i){var o=new r.ImageLoader;o.crossOrigin=this.crossOrigin;var a=new r.Texture(void 0,e);return o.load(t,function(t){a.image=t,a.needsUpdate=!0,n&&n(a)},void 0,function(t){i&&i(t)}),a.sourceFile=t,a},loadTextureCube:function(t,e,n,i){var o=new r.ImageLoader;o.crossOrigin=this.crossOrigin;var a=new r.CubeTexture([],e);a.flipY=!1;var s=0;e=function(e){o.load(t[e],function(t){a.images[e]=t,s+=1,6===s&&(a.needsUpdate=!0,n&&n(a))},void 0,i)};for(var u=0,l=t.length;l>u;++u)e(u);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(t,e){var n=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[t[0]/e,t[1]/e,t[2]/e]};e|=1;var r=t.width,i=t.height,o=document.createElement("canvas");o.width=r,o.height=i;var a=o.getContext("2d");a.drawImage(t,0,0);for(var s=a.getImageData(0,0,r,i).data,u=a.createImageData(r,i),l=u.data,c=0;r>c;c++)for(var h=0;i>h;h++){var f=0>h-1?0:h-1,p=h+1>i-1?i-1:h+1,d=0>c-1?0:c-1,m=c+1>r-1?r-1:c+1,g=[],y=[0,0,s[4*(h*r+c)]/255*e];for(g.push([-1,0,s[4*(h*r+d)]/255*e]),g.push([-1,-1,s[4*(f*r+d)]/255*e]),g.push([0,-1,s[4*(f*r+c)]/255*e]),g.push([1,-1,s[4*(f*r+m)]/255*e]),g.push([1,0,s[4*(h*r+m)]/255*e]),g.push([1,1,s[4*(p*r+m)]/255*e]),g.push([0,1,s[4*(p*r+c)]/255*e]),g.push([-1,1,s[4*(p*r+d)]/255*e]),f=[],d=g.length,p=0;d>p;p++){var m=g[p],v=g[(p+1)%d],m=[m[0]-y[0],m[1]-y[1],m[2]-y[2]],v=[v[0]-y[0],v[1]-y[1],v[2]-y[2]];f.push(n([m[1]*v[2]-m[2]*v[1],m[2]*v[0]-m[0]*v[2],m[0]*v[1]-m[1]*v[0]]))}for(g=[0,0,0],p=0;p<f.length;p++)g[0]+=f[p][0],g[1]+=f[p][1],g[2]+=f[p][2];g[0]/=f.length,g[1]/=f.length,g[2]/=f.length,y=4*(h*r+c),l[y]=(g[0]+1)/2*255|0,l[y+1]=(g[1]+1)/2*255|0,l[y+2]=255*g[2]|0,l[y+3]=255}return a.putImageData(u,0,0),o},generateDataTexture:function(t,e,n){var i=t*e,o=new Uint8Array(3*i),a=Math.floor(255*n.r),s=Math.floor(255*n.g);n=Math.floor(255*n.b);for(var u=0;i>u;u++)o[3*u]=a,o[3*u+1]=s,o[3*u+2]=n;return t=new r.DataTexture(o,t,e,r.RGBFormat),t.needsUpdate=!0,t}},r.SceneUtils={createMultiMaterialObject:function(t,e){for(var n=new r.Object3D,i=0,o=e.length;o>i;i++)n.add(new r.Mesh(t,e[i]));return n},detach:function(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t)},attach:function(t,e,n){var i=new r.Matrix4;i.getInverse(n.matrixWorld),t.applyMatrix(i),e.remove(t),n.add(t)}},r.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(t){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(t){var e=t.familyName.toLowerCase();return this.faces[e]=this.faces[e]||{},this.faces[e][t.cssFontWeight]=this.faces[e][t.cssFontWeight]||{},this.faces[e][t.cssFontWeight][t.cssFontStyle]=t,this.faces[e][t.cssFontWeight][t.cssFontStyle]=t},drawText:function(t){var e=this.getFace(),n=this.size/e.resolution,i=0,o=String(t).split(""),a=o.length,s=[];for(t=0;a>t;t++){var u=new r.Path,u=this.extractGlyphPoints(o[t],e,n,i,u),i=i+u.offset;s.push(u.path)}return{paths:s,offset:i/2}},extractGlyphPoints:function(t,e,n,i,o){var a,s,u,l,c,h,f,p,d,m,g,y=[],v=e.glyphs[t]||e.glyphs["?"];if(v){if(v.o)for(e=v._cachedOutline||(v._cachedOutline=v.o.split(" ")),l=e.length,t=0;l>t;)switch(u=e[t++]){case"m":u=e[t++]*n+i,c=e[t++]*n,o.moveTo(u,c);break;case"l":u=e[t++]*n+i,c=e[t++]*n,o.lineTo(u,c);break;case"q":if(u=e[t++]*n+i,c=e[t++]*n,p=e[t++]*n+i,d=e[t++]*n,o.quadraticCurveTo(p,d,u,c),a=y[y.length-1])for(h=a.x,f=a.y,a=1,s=this.divisions;s>=a;a++){var b=a/s;r.Shape.Utils.b2(b,h,p,u),r.Shape.Utils.b2(b,f,d,c)}break;case"b":if(u=e[t++]*n+i,c=e[t++]*n,p=e[t++]*n+i,d=e[t++]*n,m=e[t++]*n+i,g=e[t++]*n,o.bezierCurveTo(p,d,m,g,u,c),a=y[y.length-1])for(h=a.x,f=a.y,a=1,s=this.divisions;s>=a;a++)b=a/s,r.Shape.Utils.b3(b,h,p,m,u),r.Shape.Utils.b3(b,f,d,g,c)}return{offset:v.ha*n,path:o}}}},r.FontUtils.generateShapes=function(t,e){e=e||{};var n=void 0!==e.curveSegments?e.curveSegments:4,i=void 0!==e.font?e.font:"helvetiker",o=void 0!==e.weight?e.weight:"normal",a=void 0!==e.style?e.style:"normal";for(r.FontUtils.size=void 0!==e.size?e.size:100,r.FontUtils.divisions=n,r.FontUtils.face=i,r.FontUtils.weight=o,r.FontUtils.style=a,n=r.FontUtils.drawText(t).paths,i=[],o=0,a=n.length;a>o;o++)Array.prototype.push.apply(i,n[o].toShapes());return i},function(t){var e=function(t){for(var e=t.length,n=0,r=e-1,i=0;e>i;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n};return t.Triangulate=function(t,n){var r=t.length;if(3>r)return null;var i,o,a,s=[],u=[],l=[];if(0<e(t))for(o=0;r>o;o++)u[o]=o;else for(o=0;r>o;o++)u[o]=r-1-o;var c=2*r;for(o=r-1;r>2;){if(0>=c--){console.log("Warning, unable to triangulate polygon!");break}i=o,i>=r&&(i=0),o=i+1,o>=r&&(o=0),a=o+1,a>=r&&(a=0);var h;t:{var f=h=void 0,p=void 0,d=void 0,m=void 0,g=void 0,y=void 0,v=void 0,b=void 0,f=t[u[i]].x,p=t[u[i]].y,d=t[u[o]].x,m=t[u[o]].y,g=t[u[a]].x,y=t[u[a]].y;if(1e-10>(d-f)*(y-p)-(m-p)*(g-f))h=!1;else{var _=void 0,x=void 0,w=void 0,M=void 0,C=void 0,P=void 0,E=void 0,T=void 0,S=void 0,L=void 0,S=T=E=b=v=void 0,_=g-d,x=y-m,w=f-g,M=p-y,C=d-f,P=m-p;for(h=0;r>h;h++)if(v=t[u[h]].x,b=t[u[h]].y,!(v===f&&b===p||v===d&&b===m||v===g&&b===y)&&(E=v-f,T=b-p,S=v-d,L=b-m,v-=g,b-=y,S=_*L-x*S,E=C*T-P*E,T=w*b-M*v,S>=-1e-10&&T>=-1e-10&&E>=-1e-10)){h=!1;break t}h=!0}}if(h){for(s.push([t[u[i]],t[u[o]],t[u[a]]]),l.push([u[i],u[o],u[a]]),i=o,a=o+1;r>a;i++,a++)u[i]=u[a];r--,c=2*r}}return n?l:s},t.Triangulate.area=e,t}(r.FontUtils),self._typeface_js={faces:r.FontUtils.faces,loadFace:r.FontUtils.loadFace},r.typeface_js=self._typeface_js,r.Audio=function(t){r.Object3D.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},r.Audio.prototype=Object.create(r.Object3D.prototype),r.Audio.prototype.constructor=r.Audio,r.Audio.prototype.load=function(t){var e=this,n=new XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(t){e.context.decodeAudioData(this.response,function(t){e.source.buffer=t,e.source.connect(e.panner),e.source.start(0)})},n.send(),this},r.Audio.prototype.setLoop=function(t){this.source.loop=t},r.Audio.prototype.setRefDistance=function(t){this.panner.refDistance=t},r.Audio.prototype.setRolloffFactor=function(t){this.panner.rolloffFactor=t},r.Audio.prototype.updateMatrixWorld=function(){var t=new r.Vector3;return function(e){r.Object3D.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}(),r.AudioListener=function(){r.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},r.AudioListener.prototype=Object.create(r.Object3D.prototype),r.AudioListener.prototype.constructor=r.AudioListener,r.AudioListener.prototype.updateMatrixWorld=function(){var t=new r.Vector3,e=new r.Quaternion,n=new r.Vector3,i=new r.Vector3,o=new r.Vector3,a=new r.Vector3;return function(s){r.Object3D.prototype.updateMatrixWorld.call(this,s),s=this.context.listener;var u=this.up;this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),o.subVectors(t,a),s.setPosition(t.x,t.y,t.z),s.setOrientation(i.x,i.y,i.z,u.x,u.y,u.z),s.setVelocity(o.x,o.y,o.z),a.copy(t)}}(),r.Curve=function(){},r.Curve.prototype.getPoint=function(t){return console.log("Warning, getPoint() not implemented!"),null},r.Curve.prototype.getPointAt=function(t){return t=this.getUtoTmapping(t),this.getPoint(t)},r.Curve.prototype.getPoints=function(t){t||(t=5);var e,n=[];for(e=0;t>=e;e++)n.push(this.getPoint(e/t));return n},r.Curve.prototype.getSpacedPoints=function(t){t||(t=5);var e,n=[];for(e=0;t>=e;e++)n.push(this.getPointAt(e/t));return n},r.Curve.prototype.getLength=function(){var t=this.getLengths();return t[t.length-1]},r.Curve.prototype.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;t>=n;n++)e=this.getPoint(n/t),o+=e.distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r},r.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},r.Curve.prototype.getUtoTmapping=function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e?e:t*r[o-1];for(var a,s=0,u=o-1;u>=s;)if(i=Math.floor(s+(u-s)/2),a=r[i]-n,0>a)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}return i=u,r[i]==n?i/(o-1):(s=r[i],r=(i+(n-s)/(r[i+1]-s))/(o-1))},r.Curve.prototype.getTangent=function(t){var e=t-1e-4;return t+=1e-4,0>e&&(e=0),t>1&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},r.Curve.prototype.getTangentAt=function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},r.Curve.Utils={tangentQuadraticBezier:function(t,e,n,r){return 2*(1-t)*(n-e)+2*t*(r-n)},tangentCubicBezier:function(t,e,n,r,i){return-3*e*(1-t)*(1-t)+3*n*(1-t)*(1-t)-6*t*n*(1-t)+6*t*r*(1-t)-3*t*t*r+3*t*t*i},tangentSpline:function(t,e,n,r,i){return 6*t*t-6*t+(3*t*t-4*t+1)+(-6*t*t+6*t)+(3*t*t-2*t)},interpolate:function(t,e,n,r,i){t=.5*(n-t),r=.5*(r-e);var o=i*i;return(2*e-2*n+t+r)*i*o+(-3*e+3*n-2*t-r)*o+t*i+e}},r.Curve.create=function(t,e){return t.prototype=Object.create(r.Curve.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},r.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},r.CurvePath.prototype=Object.create(r.Curve.prototype),r.CurvePath.prototype.constructor=r.CurvePath,r.CurvePath.prototype.add=function(t){this.curves.push(t)},r.CurvePath.prototype.checkConnection=function(){},r.CurvePath.prototype.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new r.LineCurve(e,t))},r.CurvePath.prototype.getPoint=function(t){var e=t*this.getLength(),n=this.getCurveLengths();for(t=0;t<n.length;){if(n[t]>=e)return e=n[t]-e,t=this.curves[t],e=1-e/t.getLength(),t.getPointAt(e);t++}return null},r.CurvePath.prototype.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},r.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var t,e=[],n=0,r=this.curves.length;for(t=0;r>t;t++)n+=this.curves[t].getLength(),e.push(n);return this.cacheLengths=e},r.CurvePath.prototype.getBoundingBox=function(){var t,e,n,i,o,a,s=this.getPoints();t=e=Number.NEGATIVE_INFINITY,i=o=Number.POSITIVE_INFINITY;var u,l,c,h,f=s[0]instanceof r.Vector3;for(h=f?new r.Vector3:new r.Vector2,l=0,c=s.length;c>l;l++)u=s[l],u.x>t?t=u.x:u.x<i&&(i=u.x),u.y>e?e=u.y:u.y<o&&(o=u.y),f&&(u.z>n?n=u.z:u.z<a&&(a=u.z)),h.add(u);return s={minX:i,minY:o,maxX:t,maxY:e},f&&(s.maxZ=n,s.minZ=a),s},r.CurvePath.prototype.createPointsGeometry=function(t){return t=this.getPoints(t,!0),this.createGeometry(t)},r.CurvePath.prototype.createSpacedPointsGeometry=function(t){return t=this.getSpacedPoints(t,!0),this.createGeometry(t)},r.CurvePath.prototype.createGeometry=function(t){for(var e=new r.Geometry,n=0;n<t.length;n++)e.vertices.push(new r.Vector3(t[n].x,t[n].y,t[n].z||0));return e},r.CurvePath.prototype.addWrapPath=function(t){this.bends.push(t)},r.CurvePath.prototype.getTransformedPoints=function(t,e){var n,r,i=this.getPoints(t);for(e||(e=this.bends),n=0,r=e.length;r>n;n++)i=this.getWrapPoints(i,e[n]);return i},r.CurvePath.prototype.getTransformedSpacedPoints=function(t,e){var n,r,i=this.getSpacedPoints(t);for(e||(e=this.bends),n=0,r=e.length;r>n;n++)i=this.getWrapPoints(i,e[n]);return i},r.CurvePath.prototype.getWrapPoints=function(t,e){var n,r,i,o,a,s,u=this.getBoundingBox();for(n=0,r=t.length;r>n;n++)i=t[n],o=i.x,a=i.y,s=o/u.maxX,s=e.getUtoTmapping(s,o),o=e.getPoint(s),s=e.getTangent(s),s.set(-s.y,s.x).multiplyScalar(a),i.x=o.x+s.x,i.y=o.y+s.y;return t},r.Gyroscope=function(){r.Object3D.call(this)},r.Gyroscope.prototype=Object.create(r.Object3D.prototype),r.Gyroscope.prototype.constructor=r.Gyroscope,r.Gyroscope.prototype.updateMatrixWorld=function(){var t=new r.Vector3,e=new r.Quaternion,n=new r.Vector3,i=new r.Vector3,o=new r.Quaternion,a=new r.Vector3;return function(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(i,o,a),this.matrix.decompose(t,e,n),this.matrixWorld.compose(i,e,a)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,r=!0);for(var s=0,u=this.children.length;u>s;s++)this.children[s].updateMatrixWorld(r)}}(),r.Path=function(t){r.CurvePath.call(this),this.actions=[],t&&this.fromPoints(t)},r.Path.prototype=Object.create(r.CurvePath.prototype),r.Path.prototype.constructor=r.Path,r.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},r.Path.prototype.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;n>e;e++)this.lineTo(t[e].x,t[e].y)},r.Path.prototype.moveTo=function(t,e){var n=Array.prototype.slice.call(arguments);this.actions.push({action:r.PathActions.MOVE_TO,args:n})},r.Path.prototype.lineTo=function(t,e){var n=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,i=new r.LineCurve(new r.Vector2(i[i.length-2],i[i.length-1]),new r.Vector2(t,e));this.curves.push(i),this.actions.push({action:r.PathActions.LINE_TO,args:n})},r.Path.prototype.quadraticCurveTo=function(t,e,n,i){var o=Array.prototype.slice.call(arguments),a=this.actions[this.actions.length-1].args,a=new r.QuadraticBezierCurve(new r.Vector2(a[a.length-2],a[a.length-1]),new r.Vector2(t,e),new r.Vector2(n,i));this.curves.push(a),this.actions.push({action:r.PathActions.QUADRATIC_CURVE_TO,args:o})},r.Path.prototype.bezierCurveTo=function(t,e,n,i,o,a){var s=Array.prototype.slice.call(arguments),u=this.actions[this.actions.length-1].args,u=new r.CubicBezierCurve(new r.Vector2(u[u.length-2],u[u.length-1]),new r.Vector2(t,e),new r.Vector2(n,i),new r.Vector2(o,a));this.curves.push(u),this.actions.push({action:r.PathActions.BEZIER_CURVE_TO,args:s})},r.Path.prototype.splineThru=function(t){var e=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,n=[new r.Vector2(n[n.length-2],n[n.length-1])];Array.prototype.push.apply(n,t),n=new r.SplineCurve(n),this.curves.push(n),this.actions.push({action:r.PathActions.CSPLINE_THRU,args:e})},r.Path.prototype.arc=function(t,e,n,r,i,o){var a=this.actions[this.actions.length-1].args;this.absarc(t+a[a.length-2],e+a[a.length-1],n,r,i,o)},r.Path.prototype.absarc=function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},r.Path.prototype.ellipse=function(t,e,n,r,i,o,a){var s=this.actions[this.actions.length-1].args;this.absellipse(t+s[s.length-2],e+s[s.length-1],n,r,i,o,a)},r.Path.prototype.absellipse=function(t,e,n,i,o,a,s){var u=Array.prototype.slice.call(arguments),l=new r.EllipseCurve(t,e,n,i,o,a,s);this.curves.push(l),l=l.getPoint(1),u.push(l.x),u.push(l.y),this.actions.push({action:r.PathActions.ELLIPSE,args:u})},r.Path.prototype.getSpacedPoints=function(t,e){t||(t=40);for(var n=[],r=0;t>r;r++)n.push(this.getPoint(r/t));return n},r.Path.prototype.getPoints=function(t,e){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(t,e);t=t||12;var n,i,o,a,s,u,l,c,h,f,p,d,m,g=[];for(n=0,i=this.actions.length;i>n;n++)switch(o=this.actions[n],a=o.action,o=o.args,a){case r.PathActions.MOVE_TO:g.push(new r.Vector2(o[0],o[1]));break;case r.PathActions.LINE_TO:g.push(new r.Vector2(o[0],o[1]));break;case r.PathActions.QUADRATIC_CURVE_TO:for(s=o[2],u=o[3],h=o[0],f=o[1],0<g.length?(a=g[g.length-1],p=a.x,d=a.y):(a=this.actions[n-1].args,p=a[a.length-2],d=a[a.length-1]),o=1;t>=o;o++)m=o/t,a=r.Shape.Utils.b2(m,p,h,s),m=r.Shape.Utils.b2(m,d,f,u),g.push(new r.Vector2(a,m));break;case r.PathActions.BEZIER_CURVE_TO:for(s=o[4],u=o[5],h=o[0],f=o[1],l=o[2],c=o[3],0<g.length?(a=g[g.length-1],p=a.x,d=a.y):(a=this.actions[n-1].args,p=a[a.length-2],d=a[a.length-1]),o=1;t>=o;o++)m=o/t,a=r.Shape.Utils.b3(m,p,h,l,s),m=r.Shape.Utils.b3(m,d,f,c,u),g.push(new r.Vector2(a,m));break;case r.PathActions.CSPLINE_THRU:for(a=this.actions[n-1].args,m=[new r.Vector2(a[a.length-2],a[a.length-1])],a=t*o[0].length,m=m.concat(o[0]),m=new r.SplineCurve(m),o=1;a>=o;o++)g.push(m.getPointAt(o/a));break;case r.PathActions.ARC:for(s=o[0],u=o[1],f=o[2],l=o[3],a=o[4],h=!!o[5],p=a-l,d=2*t,o=1;d>=o;o++)m=o/d,h||(m=1-m),m=l+m*p,a=s+f*Math.cos(m),m=u+f*Math.sin(m),g.push(new r.Vector2(a,m));break;case r.PathActions.ELLIPSE:for(s=o[0],u=o[1],f=o[2],c=o[3],l=o[4],a=o[5],h=!!o[6],p=a-l,d=2*t,o=1;d>=o;o++)m=o/d,h||(m=1-m),m=l+m*p,a=s+f*Math.cos(m),m=u+c*Math.sin(m),g.push(new r.Vector2(a,m))}return n=g[g.length-1],1e-10>Math.abs(n.x-g[0].x)&&1e-10>Math.abs(n.y-g[0].y)&&g.splice(g.length-1,1),e&&g.push(g[0]),g},r.Path.prototype.toShapes=function(t,e){function n(t){for(var e=[],n=0,i=t.length;i>n;n++){var o=t[n],a=new r.Shape;a.actions=o.actions,a.curves=o.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,r=!1,i=n-1,o=0;n>o;i=o++){var a=e[i],s=e[o],u=s.x-a.x,l=s.y-a.y;if(1e-10<Math.abs(l)){if(0>l&&(a=e[o],u=-u,s=e[i],l=-l),!(t.y<a.y||t.y>s.y))if(t.y==a.y){if(t.x==a.x)return!0}else{if(i=l*(t.x-a.x)-u*(t.y-a.y),0==i)return!0;0>i||(r=!r)}}else if(t.y==a.y&&(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x))return!0}return r}var o=function(t){var e,n,i,o,a=[],s=new r.Path;for(e=0,n=t.length;n>e;e++)i=t[e],o=i.args,i=i.action,i==r.PathActions.MOVE_TO&&0!=s.actions.length&&(a.push(s),
s=new r.Path),s[i].apply(s,o);return 0!=s.actions.length&&a.push(s),a}(this.actions);if(0==o.length)return[];if(!0===e)return n(o);var a,s,u,l=[];if(1==o.length)return s=o[0],u=new r.Shape,u.actions=s.actions,u.curves=s.curves,l.push(u),l;var c=!r.Shape.Utils.isClockWise(o[0].getPoints()),c=t?!c:c;u=[];var h,f=[],p=[],d=0;f[d]=void 0,p[d]=[];var m,g;for(m=0,g=o.length;g>m;m++)s=o[m],h=s.getPoints(),a=r.Shape.Utils.isClockWise(h),(a=t?!a:a)?(!c&&f[d]&&d++,f[d]={s:new r.Shape,p:h},f[d].s.actions=s.actions,f[d].s.curves=s.curves,c&&d++,p[d]=[]):p[d].push({h:s,p:h[0]});if(!f[0])return n(o);if(1<f.length){for(m=!1,g=[],s=0,o=f.length;o>s;s++)u[s]=[];for(s=0,o=f.length;o>s;s++)for(a=p[s],c=0;c<a.length;c++){d=a[c],h=!0;for(var y=0;y<f.length;y++)i(d.p,f[y].p)&&(s!=y&&g.push({froms:s,tos:y,hole:c}),h?(h=!1,u[y].push(d)):m=!0);h&&u[s].push(d)}0<g.length&&(m||(p=u))}for(m=0,g=f.length;g>m;m++)for(u=f[m].s,l.push(u),s=p[m],o=0,a=s.length;a>o;o++)u.holes.push(s[o].h);return l},r.Shape=function(){r.Path.apply(this,arguments),this.holes=[]},r.Shape.prototype=Object.create(r.Path.prototype),r.Shape.prototype.constructor=r.Shape,r.Shape.prototype.extrude=function(t){return new r.ExtrudeGeometry(this,t)},r.Shape.prototype.makeGeometry=function(t){return new r.ShapeGeometry(this,t)},r.Shape.prototype.getPointsHoles=function(t){var e,n=this.holes.length,r=[];for(e=0;n>e;e++)r[e]=this.holes[e].getTransformedPoints(t,this.bends);return r},r.Shape.prototype.getSpacedPointsHoles=function(t){var e,n=this.holes.length,r=[];for(e=0;n>e;e++)r[e]=this.holes[e].getTransformedSpacedPoints(t,this.bends);return r},r.Shape.prototype.extractAllPoints=function(t){return{shape:this.getTransformedPoints(t),holes:this.getPointsHoles(t)}},r.Shape.prototype.extractPoints=function(t){return this.useSpacedPoints?this.extractAllSpacedPoints(t):this.extractAllPoints(t)},r.Shape.prototype.extractAllSpacedPoints=function(t){return{shape:this.getTransformedSpacedPoints(t),holes:this.getSpacedPointsHoles(t)}},r.Shape.Utils={triangulateShape:function(t,e){function n(t,e,n){return t.x!=e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function i(t,e,r,i,o){var a=e.x-t.x,s=e.y-t.y,u=i.x-r.x,l=i.y-r.y,c=t.x-r.x,h=t.y-r.y,f=s*u-a*l,p=s*c-a*h;if(1e-10<Math.abs(f)){if(f>0){if(0>p||p>f)return[];if(u=l*c-u*h,0>u||u>f)return[]}else{if(p>0||f>p)return[];if(u=l*c-u*h,u>0||f>u)return[]}return 0==u?!o||0!=p&&p!=f?[t]:[]:u==f?!o||0!=p&&p!=f?[e]:[]:0==p?[r]:p==f?[i]:(o=u/f,[{x:t.x+o*a,y:t.y+o*s}])}return 0!=p||l*c!=u*h?[]:(s=0==a&&0==s,u=0==u&&0==l,s&&u?t.x!=r.x||t.y!=r.y?[]:[t]:s?n(r,i,t)?[t]:[]:u?n(t,e,r)?[r]:[]:(0!=a?(t.x<e.x?(a=t,u=t.x,s=e,t=e.x):(a=e,u=e.x,s=t,t=t.x),r.x<i.x?(e=r,f=r.x,l=i,r=i.x):(e=i,f=i.x,l=r,r=r.x)):(t.y<e.y?(a=t,u=t.y,s=e,t=e.y):(a=e,u=e.y,s=t,t=t.y),r.y<i.y?(e=r,f=r.y,l=i,r=i.y):(e=i,f=i.y,l=r,r=r.y)),f>=u?f>t?[]:t==f?o?[]:[e]:r>=t?[e,s]:[e,l]:u>r?[]:u==r?o?[]:[a]:r>=t?[a,s]:[a,l]))}function o(t,e,n,r){var i=e.x-t.x,o=e.y-t.y;e=n.x-t.x,n=n.y-t.y;var a=r.x-t.x;return r=r.y-t.y,t=i*n-o*e,i=i*r-o*a,1e-10<Math.abs(t)?(e=a*n-r*e,t>0?i>=0&&e>=0:i>=0||e>=0):i>0}var a,s,u,l,c,h={};for(u=t.concat(),a=0,s=e.length;s>a;a++)Array.prototype.push.apply(u,e[a]);for(a=0,s=u.length;s>a;a++)c=u[a].x+":"+u[a].y,void 0!==h[c]&&console.log("Duplicate point",c),h[c]=a;a=function(t,e){function n(t,e){var n=g.length-1,r=t-1;0>r&&(r=n);var i=t+1;return i>n&&(i=0),(n=o(g[t],g[r],g[i],s[e]))?(n=s.length-1,r=e-1,0>r&&(r=n),i=e+1,i>n&&(i=0),(n=o(s[e],s[r],s[i],g[t]))?!0:!1):!1}function r(t,e){var n,r;for(n=0;n<g.length;n++)if(r=n+1,r%=g.length,r=i(t,e,g[n],g[r],!0),0<r.length)return!0;return!1}function a(t,n){var r,o,a,s;for(r=0;r<y.length;r++)for(o=e[y[r]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,s=i(t,n,o[a],o[s],!0),0<s.length)return!0;return!1}var s,u,l,c,h,f,p,d,m,g=t.concat(),y=[],v=[],b=0;for(u=e.length;u>b;b++)y.push(b);p=0;for(var _=2*y.length;0<y.length;){if(_--,0>_){console.log("Infinite Loop! Holes left:"+y.length+", Probably Hole outside Shape!");break}for(l=p;l<g.length;l++){for(c=g[l],u=-1,b=0;b<y.length;b++)if(h=y[b],f=c.x+":"+c.y+":"+h,void 0===v[f]){for(s=e[h],d=0;d<s.length;d++)if(h=s[d],n(l,d)&&!r(c,h)&&!a(c,h)){u=d,y.splice(b,1),p=g.slice(0,l+1),h=g.slice(l),d=s.slice(u),m=s.slice(0,u+1),g=p.concat(d).concat(m).concat(h),p=l;break}if(u>=0)break;v[f]=!0}if(u>=0)break}}return g}(t,e);var f=r.FontUtils.Triangulate(a,!1);for(a=0,s=f.length;s>a;a++)for(l=f[a],u=0;3>u;u++)c=l[u].x+":"+l[u].y,c=h[c],void 0!==c&&(l[u]=c);return f.concat()},isClockWise:function(t){return 0>r.FontUtils.Triangulate.area(t)},b2p0:function(t,e){var n=1-t;return n*n*e},b2p1:function(t,e){return 2*(1-t)*t*e},b2p2:function(t,e){return t*t*e},b2:function(t,e,n,r){return this.b2p0(t,e)+this.b2p1(t,n)+this.b2p2(t,r)},b3p0:function(t,e){var n=1-t;return n*n*n*e},b3p1:function(t,e){var n=1-t;return 3*n*n*t*e},b3p2:function(t,e){return 3*(1-t)*t*t*e},b3p3:function(t,e){return t*t*t*e},b3:function(t,e,n,r,i){return this.b3p0(t,e)+this.b3p1(t,n)+this.b3p2(t,r)+this.b3p3(t,i)}},r.LineCurve=function(t,e){this.v1=t,this.v2=e},r.LineCurve.prototype=Object.create(r.Curve.prototype),r.LineCurve.prototype.constructor=r.LineCurve,r.LineCurve.prototype.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},r.LineCurve.prototype.getPointAt=function(t){return this.getPoint(t)},r.LineCurve.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},r.QuadraticBezierCurve=function(t,e,n){this.v0=t,this.v1=e,this.v2=n},r.QuadraticBezierCurve.prototype=Object.create(r.Curve.prototype),r.QuadraticBezierCurve.prototype.constructor=r.QuadraticBezierCurve,r.QuadraticBezierCurve.prototype.getPoint=function(t){var e=new r.Vector2;return e.x=r.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),e.y=r.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),e},r.QuadraticBezierCurve.prototype.getTangent=function(t){var e=new r.Vector2;return e.x=r.Curve.Utils.tangentQuadraticBezier(t,this.v0.x,this.v1.x,this.v2.x),e.y=r.Curve.Utils.tangentQuadraticBezier(t,this.v0.y,this.v1.y,this.v2.y),e.normalize()},r.CubicBezierCurve=function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},r.CubicBezierCurve.prototype=Object.create(r.Curve.prototype),r.CubicBezierCurve.prototype.constructor=r.CubicBezierCurve,r.CubicBezierCurve.prototype.getPoint=function(t){var e;return e=r.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t=r.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new r.Vector2(e,t)},r.CubicBezierCurve.prototype.getTangent=function(t){var e;return e=r.Curve.Utils.tangentCubicBezier(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t=r.Curve.Utils.tangentCubicBezier(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e=new r.Vector2(e,t),e.normalize(),e},r.SplineCurve=function(t){this.points=void 0==t?[]:t},r.SplineCurve.prototype=Object.create(r.Curve.prototype),r.SplineCurve.prototype.constructor=r.SplineCurve,r.SplineCurve.prototype.getPoint=function(t){var e=this.points;t*=e.length-1;var n=Math.floor(t);t-=n;var i=e[0==n?n:n-1],o=e[n],a=e[n>e.length-2?e.length-1:n+1],e=e[n>e.length-3?e.length-1:n+2],n=new r.Vector2;return n.x=r.Curve.Utils.interpolate(i.x,o.x,a.x,e.x,t),n.y=r.Curve.Utils.interpolate(i.y,o.y,a.y,e.y,t),n},r.EllipseCurve=function(t,e,n,r,i,o,a){this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a},r.EllipseCurve.prototype=Object.create(r.Curve.prototype),r.EllipseCurve.prototype.constructor=r.EllipseCurve,r.EllipseCurve.prototype.getPoint=function(t){var e=this.aEndAngle-this.aStartAngle;return 0>e&&(e+=2*Math.PI),e>2*Math.PI&&(e-=2*Math.PI),t=!0===this.aClockwise?this.aEndAngle+(1-t)*(2*Math.PI-e):this.aStartAngle+t*e,e=new r.Vector2,e.x=this.aX+this.xRadius*Math.cos(t),e.y=this.aY+this.yRadius*Math.sin(t),e},r.ArcCurve=function(t,e,n,i,o,a){r.EllipseCurve.call(this,t,e,n,n,i,o,a)},r.ArcCurve.prototype=Object.create(r.EllipseCurve.prototype),r.ArcCurve.prototype.constructor=r.ArcCurve,r.LineCurve3=r.Curve.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new r.Vector3;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),r.QuadraticBezierCurve3=r.Curve.create(function(t,e,n){this.v0=t,this.v1=e,this.v2=n},function(t){var e=new r.Vector3;return e.x=r.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),e.y=r.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),e.z=r.Shape.Utils.b2(t,this.v0.z,this.v1.z,this.v2.z),e}),r.CubicBezierCurve3=r.Curve.create(function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},function(t){var e=new r.Vector3;return e.x=r.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e.y=r.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e.z=r.Shape.Utils.b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z),e}),r.SplineCurve3=r.Curve.create(function(t){this.points=void 0==t?[]:t},function(t){var e=this.points;t*=e.length-1;var n=Math.floor(t);t-=n;var i=e[0==n?n:n-1],o=e[n],a=e[n>e.length-2?e.length-1:n+1],e=e[n>e.length-3?e.length-1:n+2],n=new r.Vector3;return n.x=r.Curve.Utils.interpolate(i.x,o.x,a.x,e.x,t),n.y=r.Curve.Utils.interpolate(i.y,o.y,a.y,e.y,t),n.z=r.Curve.Utils.interpolate(i.z,o.z,a.z,e.z,t),n}),r.ClosedSplineCurve3=r.Curve.create(function(t){this.points=void 0==t?[]:t},function(t){var e=this.points;t*=e.length-0;var n=Math.floor(t);t-=n;var n=n+(n>0?0:(Math.floor(Math.abs(n)/e.length)+1)*e.length),i=e[(n-1)%e.length],o=e[n%e.length],a=e[(n+1)%e.length],e=e[(n+2)%e.length],n=new r.Vector3;return n.x=r.Curve.Utils.interpolate(i.x,o.x,a.x,e.x,t),n.y=r.Curve.Utils.interpolate(i.y,o.y,a.y,e.y,t),n.z=r.Curve.Utils.interpolate(i.z,o.z,a.z,e.z,t),n}),r.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(t){if(!0===t.initialized)return t;for(var e=0;e<t.hierarchy.length;e++){for(var n=0;n<t.hierarchy[e].keys.length;n++)if(0>t.hierarchy[e].keys[n].time&&(t.hierarchy[e].keys[n].time=0),void 0!==t.hierarchy[e].keys[n].rot&&!(t.hierarchy[e].keys[n].rot instanceof r.Quaternion)){var i=t.hierarchy[e].keys[n].rot;t.hierarchy[e].keys[n].rot=(new r.Quaternion).fromArray(i)}if(t.hierarchy[e].keys.length&&void 0!==t.hierarchy[e].keys[0].morphTargets){for(i={},n=0;n<t.hierarchy[e].keys.length;n++)for(var o=0;o<t.hierarchy[e].keys[n].morphTargets.length;o++){var a=t.hierarchy[e].keys[n].morphTargets[o];i[a]=-1}for(t.hierarchy[e].usedMorphTargets=i,n=0;n<t.hierarchy[e].keys.length;n++){var s={};for(a in i){for(o=0;o<t.hierarchy[e].keys[n].morphTargets.length;o++)if(t.hierarchy[e].keys[n].morphTargets[o]===a){s[a]=t.hierarchy[e].keys[n].morphTargetsInfluences[o];break}o===t.hierarchy[e].keys[n].morphTargets.length&&(s[a]=0)}t.hierarchy[e].keys[n].morphTargetsInfluences=s}}for(n=1;n<t.hierarchy[e].keys.length;n++)t.hierarchy[e].keys[n].time===t.hierarchy[e].keys[n-1].time&&(t.hierarchy[e].keys.splice(n,1),n--);for(n=0;n<t.hierarchy[e].keys.length;n++)t.hierarchy[e].keys[n].index=n}return t.initialized=!0,t},parse:function(t){var e=function(t,n){n.push(t);for(var r=0;r<t.children.length;r++)e(t.children[r],n)},n=[];if(t instanceof r.SkinnedMesh)for(var i=0;i<t.skeleton.bones.length;i++)n.push(t.skeleton.bones[i]);else e(t,n);return n},play:function(t){-1===this.animations.indexOf(t)&&this.animations.push(t)},stop:function(t){t=this.animations.indexOf(t),-1!==t&&this.animations.splice(t,1)},update:function(t){for(var e=0;e<this.animations.length;e++)this.animations[e].resetBlendWeights();for(e=0;e<this.animations.length;e++)this.animations[e].update(t)}},r.Animation=function(t,e){this.root=t,this.data=r.AnimationHandler.init(e),this.hierarchy=r.AnimationHandler.parse(t),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=r.AnimationHandler.LINEAR},r.Animation.prototype.keyTypes=["pos","rot","scl"],r.Animation.prototype.play=function(t,e){this.currentTime=void 0!==t?t:0,this.weight=void 0!==e?e:1,this.isPlaying=!0,this.reset(),r.AnimationHandler.play(this)},r.Animation.prototype.stop=function(){this.isPlaying=!1,r.AnimationHandler.stop(this)},r.Animation.prototype.reset=function(){for(var t=0,e=this.hierarchy.length;e>t;t++){var n=this.hierarchy[t];void 0===n.animationCache&&(n.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}),void 0===n.animationCache.animations[this.data.name]&&(n.animationCache.animations[this.data.name]={},n.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0},n.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0},n.animationCache.animations[this.data.name].originalMatrix=n.matrix);for(var n=n.animationCache.animations[this.data.name],r=0;3>r;r++){for(var i=this.keyTypes[r],o=this.data.hierarchy[t].keys[0],a=this.getNextKeyWith(i,t,1);a.time<this.currentTime&&a.index>o.index;)o=a,a=this.getNextKeyWith(i,t,a.index+1);n.prevKey[i]=o,n.nextKey[i]=a}}},r.Animation.prototype.resetBlendWeights=function(){for(var t=0,e=this.hierarchy.length;e>t;t++){var n=this.hierarchy[t];void 0!==n.animationCache&&(n.animationCache.blending.positionWeight=0,n.animationCache.blending.quaternionWeight=0,n.animationCache.blending.scaleWeight=0)}},r.Animation.prototype.update=function(){var t=[],e=new r.Vector3,n=new r.Vector3,i=new r.Quaternion,o=function(t,e){var n,r,i,o,s,u,l=[],c=[];return n=(t.length-1)*e,r=Math.floor(n),n-=r,l[0]=0===r?r:r-1,l[1]=r,l[2]=r>t.length-2?r:r+1,l[3]=r>t.length-3?r:r+2,r=t[l[0]],o=t[l[1]],s=t[l[2]],u=t[l[3]],l=n*n,i=n*l,c[0]=a(r[0],o[0],s[0],u[0],n,l,i),c[1]=a(r[1],o[1],s[1],u[1],n,l,i),c[2]=a(r[2],o[2],s[2],u[2],n,l,i),c},a=function(t,e,n,r,i,o,a){return t=.5*(n-t),r=.5*(r-e),(2*(e-n)+t+r)*a+(-3*(e-n)-2*t-r)*o+t*i+e};return function(a){if(!1!==this.isPlaying&&(this.currentTime+=a*this.timeScale,0!==this.weight)){a=this.data.length,(this.currentTime>a||0>this.currentTime)&&(this.loop?(this.currentTime%=a,0>this.currentTime&&(this.currentTime+=a),this.reset()):this.stop()),a=0;for(var s=this.hierarchy.length;s>a;a++)for(var u=this.hierarchy[a],l=u.animationCache.animations[this.data.name],c=u.animationCache.blending,h=0;3>h;h++){var f=this.keyTypes[h],p=l.prevKey[f],d=l.nextKey[f];if(0<this.timeScale&&d.time<=this.currentTime||0>this.timeScale&&p.time>=this.currentTime){for(p=this.data.hierarchy[a].keys[0],d=this.getNextKeyWith(f,a,1);d.time<this.currentTime&&d.index>p.index;)p=d,d=this.getNextKeyWith(f,a,d.index+1);l.prevKey[f]=p,l.nextKey[f]=d}var m=(this.currentTime-p.time)/(d.time-p.time),g=p[f],y=d[f];0>m&&(m=0),m>1&&(m=1),"pos"===f?this.interpolationType===r.AnimationHandler.LINEAR?(n.x=g[0]+(y[0]-g[0])*m,n.y=g[1]+(y[1]-g[1])*m,n.z=g[2]+(y[2]-g[2])*m,p=this.weight/(this.weight+c.positionWeight),u.position.lerp(n,p),c.positionWeight+=this.weight):(this.interpolationType===r.AnimationHandler.CATMULLROM||this.interpolationType===r.AnimationHandler.CATMULLROM_FORWARD)&&(t[0]=this.getPrevKeyWith("pos",a,p.index-1).pos,t[1]=g,t[2]=y,t[3]=this.getNextKeyWith("pos",a,d.index+1).pos,m=.33*m+.33,d=o(t,m),p=this.weight/(this.weight+c.positionWeight),c.positionWeight+=this.weight,f=u.position,f.x+=(d[0]-f.x)*p,f.y+=(d[1]-f.y)*p,f.z+=(d[2]-f.z)*p,this.interpolationType===r.AnimationHandler.CATMULLROM_FORWARD&&(m=o(t,1.01*m),e.set(m[0],m[1],m[2]),e.sub(f),e.y=0,e.normalize(),m=Math.atan2(e.x,e.z),u.rotation.set(0,m,0))):"rot"===f?(r.Quaternion.slerp(g,y,i,m),0===c.quaternionWeight?(u.quaternion.copy(i),c.quaternionWeight=this.weight):(p=this.weight/(this.weight+c.quaternionWeight),r.Quaternion.slerp(u.quaternion,i,u.quaternion,p),c.quaternionWeight+=this.weight)):"scl"===f&&(n.x=g[0]+(y[0]-g[0])*m,n.y=g[1]+(y[1]-g[1])*m,n.z=g[2]+(y[2]-g[2])*m,p=this.weight/(this.weight+c.scaleWeight),u.scale.lerp(n,p),c.scaleWeight+=this.weight)}return!0}}}(),r.Animation.prototype.getNextKeyWith=function(t,e,n){var i=this.data.hierarchy[e].keys;for(n=this.interpolationType===r.AnimationHandler.CATMULLROM||this.interpolationType===r.AnimationHandler.CATMULLROM_FORWARD?n<i.length-1?n:i.length-1:n%i.length;n<i.length;n++)if(void 0!==i[n][t])return i[n];return this.data.hierarchy[e].keys[0]},r.Animation.prototype.getPrevKeyWith=function(t,e,n){var i=this.data.hierarchy[e].keys;for(n=this.interpolationType===r.AnimationHandler.CATMULLROM||this.interpolationType===r.AnimationHandler.CATMULLROM_FORWARD?n>0?n:0:n>=0?n:n+i.length;n>=0;n--)if(void 0!==i[n][t])return i[n];return this.data.hierarchy[e].keys[i.length-1]},r.KeyFrameAnimation=function(t){this.root=t.node,this.data=r.AnimationHandler.init(t),this.hierarchy=r.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.loop=this.isPaused=!0,t=0;for(var e=this.hierarchy.length;e>t;t++){var n=this.data.hierarchy[t].sids,i=this.hierarchy[t];if(this.data.hierarchy[t].keys.length&&n){for(var o=0;o<n.length;o++){var a=n[o],s=this.getNextKeyWith(a,t,0);s&&s.apply(a)}i.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),i.matrixWorldNeedsUpdate=!0}}},r.KeyFrameAnimation.prototype.play=function(t){if(this.currentTime=void 0!==t?t:0,!1===this.isPlaying){this.isPlaying=!0;var e,n,i=this.hierarchy.length;for(t=0;i>t;t++)e=this.hierarchy[t],n=this.data.hierarchy[t],void 0===n.animationCache&&(n.animationCache={},n.animationCache.prevKey=null,n.animationCache.nextKey=null,n.animationCache.originalMatrix=e.matrix),e=this.data.hierarchy[t].keys,e.length&&(n.animationCache.prevKey=e[0],n.animationCache.nextKey=e[1],this.startTime=Math.min(e[0].time,this.startTime),this.endTime=Math.max(e[e.length-1].time,this.endTime));this.update(0)}this.isPaused=!1,r.AnimationHandler.play(this)},r.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1,r.AnimationHandler.stop(this);for(var t=0;t<this.data.hierarchy.length;t++){var e=this.hierarchy[t],n=this.data.hierarchy[t];if(void 0!==n.animationCache){var i=n.animationCache.originalMatrix;i.copy(e.matrix),e.matrix=i,delete n.animationCache}}},r.KeyFrameAnimation.prototype.update=function(t){if(!1!==this.isPlaying){this.currentTime+=t*this.timeScale,t=this.data.length,!0===this.loop&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t),t=0;for(var e=this.hierarchy.length;e>t;t++){var n=this.hierarchy[t],r=this.data.hierarchy[t],i=r.keys,r=r.animationCache;if(i.length){var o=r.prevKey,a=r.nextKey;if(a.time<=this.currentTime){for(;a.time<this.currentTime&&a.index>o.index;)o=a,a=i[o.index+1];r.prevKey=o,r.nextKey=a}a.time>=this.currentTime?o.interpolate(a,this.currentTime):o.interpolate(a,a.time),this.data.hierarchy[t].node.updateMatrix(),n.matrixWorldNeedsUpdate=!0}}}},r.KeyFrameAnimation.prototype.getNextKeyWith=function(t,e,n){for(e=this.data.hierarchy[e].keys,n%=e.length;n<e.length;n++)if(e[n].hasTarget(t))return e[n];return e[0]},r.KeyFrameAnimation.prototype.getPrevKeyWith=function(t,e,n){for(e=this.data.hierarchy[e].keys,n=n>=0?n:n+e.length;n>=0;n--)if(e[n].hasTarget(t))return e[n];return e[e.length-1]},r.MorphAnimation=function(t){this.mesh=t,this.frames=t.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.currentFrame=this.lastFrame=0,this.isPlaying=!1},r.MorphAnimation.prototype={constructor:r.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(t){if(!1!==this.isPlaying){this.currentTime+=t,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration),t=this.duration/this.frames;var e=Math.floor(this.currentTime/t);e!=this.currentFrame&&(this.mesh.morphTargetInfluences[this.lastFrame]=0,this.mesh.morphTargetInfluences[this.currentFrame]=1,this.mesh.morphTargetInfluences[e]=0,this.lastFrame=this.currentFrame,this.currentFrame=e),this.mesh.morphTargetInfluences[e]=this.currentTime%t/t,this.mesh.morphTargetInfluences[this.lastFrame]=1-this.mesh.morphTargetInfluences[e]}}},r.BoxGeometry=function(t,e,n,i,o,a){function s(t,e,n,i,o,a,s,l){var c,h=u.widthSegments,f=u.heightSegments,p=o/2,d=a/2,m=u.vertices.length;"x"===t&&"y"===e||"y"===t&&"x"===e?c="z":"x"===t&&"z"===e||"z"===t&&"x"===e?(c="y",f=u.depthSegments):("z"===t&&"y"===e||"y"===t&&"z"===e)&&(c="x",h=u.depthSegments);var g=h+1,y=f+1,v=o/h,b=a/f,_=new r.Vector3;for(_[c]=s>0?1:-1,o=0;y>o;o++)for(a=0;g>a;a++){var x=new r.Vector3;x[t]=(a*v-p)*n,x[e]=(o*b-d)*i,x[c]=s,u.vertices.push(x)}for(o=0;f>o;o++)for(a=0;h>a;a++)d=a+g*o,t=a+g*(o+1),e=a+1+g*(o+1),n=a+1+g*o,i=new r.Vector2(a/h,1-o/f),s=new r.Vector2(a/h,1-(o+1)/f),c=new r.Vector2((a+1)/h,1-(o+1)/f),p=new r.Vector2((a+1)/h,1-o/f),d=new r.Face3(d+m,t+m,n+m),d.normal.copy(_),d.vertexNormals.push(_.clone(),_.clone(),_.clone()),d.materialIndex=l,u.faces.push(d),u.faceVertexUvs[0].push([i,s,p]),d=new r.Face3(t+m,e+m,n+m),d.normal.copy(_),d.vertexNormals.push(_.clone(),_.clone(),_.clone()),d.materialIndex=l,u.faces.push(d),u.faceVertexUvs[0].push([s.clone(),c,p.clone()])}r.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:o,depthSegments:a},this.widthSegments=i||1,this.heightSegments=o||1,this.depthSegments=a||1;var u=this;i=t/2,o=e/2,a=n/2,s("z","y",-1,-1,n,e,i,0),s("z","y",1,-1,n,e,-i,1),s("x","z",1,1,t,n,o,2),s("x","z",1,-1,t,n,-o,3),s("x","y",1,-1,t,e,a,4),s("x","y",-1,-1,t,e,-a,5),this.mergeVertices()},r.BoxGeometry.prototype=Object.create(r.Geometry.prototype),r.BoxGeometry.prototype.constructor=r.BoxGeometry,r.CircleGeometry=function(t,e,n,i){r.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var o,a=[];o=new r.Vector3;var s=new r.Vector2(.5,.5);for(this.vertices.push(o),a.push(s),o=0;e>=o;o++){var u=new r.Vector3,l=n+o/e*i;u.x=t*Math.cos(l),u.y=t*Math.sin(l),this.vertices.push(u),a.push(new r.Vector2((u.x/t+1)/2,(u.y/t+1)/2))}for(n=new r.Vector3(0,0,1),o=1;e>=o;o++)this.faces.push(new r.Face3(o,o+1,0,[n.clone(),n.clone(),n.clone()])),this.faceVertexUvs[0].push([a[o].clone(),a[o+1].clone(),s.clone()]);this.computeFaceNormals(),this.boundingSphere=new r.Sphere(new r.Vector3,t)},r.CircleGeometry.prototype=Object.create(r.Geometry.prototype),r.CircleGeometry.prototype.constructor=r.CircleGeometry,r.CubeGeometry=function(t,e,n,i,o,a){return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new r.BoxGeometry(t,e,n,i,o,a)},r.CylinderGeometry=function(t,e,n,i,o,a,s,u){r.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:u},t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,i=i||8,o=o||1,a=void 0!==a?a:!1,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var l,c,h=n/2,f=[],p=[];for(c=0;o>=c;c++){var d=[],m=[],g=c/o,y=g*(e-t)+t;for(l=0;i>=l;l++){var v=l/i,b=new r.Vector3;b.x=y*Math.sin(v*u+s),b.y=-g*n+h,b.z=y*Math.cos(v*u+s),this.vertices.push(b),d.push(this.vertices.length-1),m.push(new r.Vector2(v,1-g))}f.push(d),p.push(m)}for(n=(e-t)/n,l=0;i>l;l++)for(0!==t?(s=this.vertices[f[0][l]].clone(),u=this.vertices[f[0][l+1]].clone()):(s=this.vertices[f[1][l]].clone(),u=this.vertices[f[1][l+1]].clone()),s.setY(Math.sqrt(s.x*s.x+s.z*s.z)*n).normalize(),u.setY(Math.sqrt(u.x*u.x+u.z*u.z)*n).normalize(),c=0;o>c;c++){var d=f[c][l],m=f[c+1][l],g=f[c+1][l+1],y=f[c][l+1],v=s.clone(),b=s.clone(),_=u.clone(),x=u.clone(),w=p[c][l].clone(),M=p[c+1][l].clone(),C=p[c+1][l+1].clone(),P=p[c][l+1].clone();this.faces.push(new r.Face3(d,m,y,[v,b,x])),this.faceVertexUvs[0].push([w,M,P]),this.faces.push(new r.Face3(m,g,y,[b.clone(),_,x.clone()])),this.faceVertexUvs[0].push([M.clone(),C,P.clone()])}if(!1===a&&t>0)for(this.vertices.push(new r.Vector3(0,h,0)),l=0;i>l;l++)d=f[0][l],m=f[0][l+1],g=this.vertices.length-1,v=new r.Vector3(0,1,0),b=new r.Vector3(0,1,0),_=new r.Vector3(0,1,0),w=p[0][l].clone(),M=p[0][l+1].clone(),C=new r.Vector2(M.x,0),this.faces.push(new r.Face3(d,m,g,[v,b,_])),this.faceVertexUvs[0].push([w,M,C]);if(!1===a&&e>0)for(this.vertices.push(new r.Vector3(0,-h,0)),l=0;i>l;l++)d=f[o][l+1],m=f[o][l],g=this.vertices.length-1,v=new r.Vector3(0,-1,0),b=new r.Vector3(0,-1,0),_=new r.Vector3(0,-1,0),w=p[o][l+1].clone(),M=p[o][l].clone(),C=new r.Vector2(M.x,1),this.faces.push(new r.Face3(d,m,g,[v,b,_])),this.faceVertexUvs[0].push([w,M,C]);this.computeFaceNormals()},r.CylinderGeometry.prototype=Object.create(r.Geometry.prototype),r.CylinderGeometry.prototype.constructor=r.CylinderGeometry,r.ExtrudeGeometry=function(t,e){"undefined"!=typeof t&&(r.Geometry.call(this),this.type="ExtrudeGeometry",t=t instanceof Array?t:[t],this.addShapeList(t,e),this.computeFaceNormals())},r.ExtrudeGeometry.prototype=Object.create(r.Geometry.prototype),r.ExtrudeGeometry.prototype.constructor=r.ExtrudeGeometry,r.ExtrudeGeometry.prototype.addShapeList=function(t,e){for(var n=t.length,r=0;n>r;r++)this.addShape(t[r],e)},r.ExtrudeGeometry.prototype.addShape=function(t,e){function n(t,e,n){return e||console.log("die"),e.clone().multiplyScalar(n).add(t)}function i(t,e,n){var i=1,i=t.x-e.x,o=t.y-e.y,a=n.x-t.x,s=n.y-t.y,u=i*i+o*o;if(1e-10<Math.abs(i*s-o*a)){var l=Math.sqrt(u),c=Math.sqrt(a*a+s*s),u=e.x-o/l;if(e=e.y+i/l,a=((n.x-s/c-u)*s-(n.y+a/c-e)*a)/(i*s-o*a),n=u+i*a-t.x,t=e+o*a-t.y,i=n*n+t*t,2>=i)return new r.Vector2(n,t);i=Math.sqrt(i/2)}else t=!1,i>1e-10?a>1e-10&&(t=!0):-1e-10>i?-1e-10>a&&(t=!0):Math.sign(o)==Math.sign(s)&&(t=!0),t?(n=-o,t=i,i=Math.sqrt(u)):(n=i,t=o,i=Math.sqrt(u/2));return new r.Vector2(n/i,t/i)}function o(t,e){var n,i;for(V=t.length;0<=--V;){n=V,i=V-1,0>i&&(i=t.length-1);for(var o=0,a=b+2*g,o=0;a>o;o++){var s=U*o,u=U*(o+1),l=e+n+s,s=e+i+s,c=e+i+u,u=e+n+u,l=l+L,s=s+L,c=c+L,u=u+L;S.faces.push(new r.Face3(l,s,u,null,null,M)),S.faces.push(new r.Face3(s,c,u,null,null,M)),l=C.generateSideWallUV(S,l,s,c,u),S.faceVertexUvs[0].push([l[0],l[1],l[3]]),S.faceVertexUvs[0].push([l[1],l[2],l[3]])}}}function a(t,e,n){S.vertices.push(new r.Vector3(t,e,n))}function s(t,e,n){t+=L,e+=L,n+=L,S.faces.push(new r.Face3(t,e,n,null,null,w)),t=C.generateTopUV(S,t,e,n),S.faceVertexUvs[0].push(t)}var u,l,c,h,f,p=void 0!==e.amount?e.amount:100,d=void 0!==e.bevelThickness?e.bevelThickness:6,m=void 0!==e.bevelSize?e.bevelSize:d-2,g=void 0!==e.bevelSegments?e.bevelSegments:3,y=void 0!==e.bevelEnabled?e.bevelEnabled:!0,v=void 0!==e.curveSegments?e.curveSegments:12,b=void 0!==e.steps?e.steps:1,_=e.extrudePath,x=!1,w=e.material,M=e.extrudeMaterial,C=void 0!==e.UVGenerator?e.UVGenerator:r.ExtrudeGeometry.WorldUVGenerator;_&&(u=_.getSpacedPoints(b),x=!0,y=!1,l=void 0!==e.frames?e.frames:new r.TubeGeometry.FrenetFrames(_,b,!1),c=new r.Vector3,h=new r.Vector3,f=new r.Vector3),y||(m=d=g=0);var P,E,T,S=this,L=this.vertices.length,_=t.extractPoints(v),v=_.shape,A=_.holes;if(_=!r.Shape.Utils.isClockWise(v)){for(v=v.reverse(),E=0,T=A.length;T>E;E++)P=A[E],r.Shape.Utils.isClockWise(P)&&(A[E]=P.reverse());_=!1}var D=r.Shape.Utils.triangulateShape(v,A),I=v;for(E=0,T=A.length;T>E;E++)P=A[E],v=v.concat(P);var k,N,B,O,R,F,U=v.length,z=D.length,_=[],V=0;for(B=I.length,k=B-1,N=V+1;B>V;V++,k++,N++)k===B&&(k=0),N===B&&(N=0),_[V]=i(I[V],I[k],I[N]);var G,W=[],H=_.concat();for(E=0,T=A.length;T>E;E++){for(P=A[E],G=[],V=0,B=P.length,k=B-1,N=V+1;B>V;V++,k++,N++)k===B&&(k=0),N===B&&(N=0),G[V]=i(P[V],P[k],P[N]);W.push(G),H=H.concat(G)}for(k=0;g>k;k++){for(B=k/g,O=d*(1-B),N=m*Math.sin(B*Math.PI/2),V=0,B=I.length;B>V;V++)R=n(I[V],_[V],N),a(R.x,R.y,-O);for(E=0,T=A.length;T>E;E++)for(P=A[E],G=W[E],V=0,B=P.length;B>V;V++)R=n(P[V],G[V],N),a(R.x,R.y,-O)}for(N=m,V=0;U>V;V++)R=y?n(v[V],H[V],N):v[V],x?(h.copy(l.normals[0]).multiplyScalar(R.x),c.copy(l.binormals[0]).multiplyScalar(R.y),f.copy(u[0]).add(h).add(c),a(f.x,f.y,f.z)):a(R.x,R.y,0);for(B=1;b>=B;B++)for(V=0;U>V;V++)R=y?n(v[V],H[V],N):v[V],x?(h.copy(l.normals[B]).multiplyScalar(R.x),c.copy(l.binormals[B]).multiplyScalar(R.y),f.copy(u[B]).add(h).add(c),a(f.x,f.y,f.z)):a(R.x,R.y,p/b*B);for(k=g-1;k>=0;k--){for(B=k/g,O=d*(1-B),N=m*Math.sin(B*Math.PI/2),V=0,B=I.length;B>V;V++)R=n(I[V],_[V],N),a(R.x,R.y,p+O);for(E=0,T=A.length;T>E;E++)for(P=A[E],G=W[E],V=0,B=P.length;B>V;V++)R=n(P[V],G[V],N),x?a(R.x,R.y+u[b-1].y,u[b-1].x+O):a(R.x,R.y,p+O)}!function(){if(y){var t;for(t=0*U,V=0;z>V;V++)F=D[V],s(F[2]+t,F[1]+t,F[0]+t);for(t=b+2*g,t*=U,V=0;z>V;V++)F=D[V],s(F[0]+t,F[1]+t,F[2]+t)}else{for(V=0;z>V;V++)F=D[V],s(F[2],F[1],F[0]);for(V=0;z>V;V++)F=D[V],s(F[0]+U*b,F[1]+U*b,F[2]+U*b)}}(),function(){var t=0;for(o(I,t),t+=I.length,E=0,T=A.length;T>E;E++)P=A[E],o(P,t),t+=P.length}()},r.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(t,e,n,i){return t=t.vertices,e=t[e],n=t[n],i=t[i],[new r.Vector2(e.x,e.y),new r.Vector2(n.x,n.y),new r.Vector2(i.x,i.y)]},generateSideWallUV:function(t,e,n,i,o){return t=t.vertices,e=t[e],n=t[n],i=t[i],o=t[o],.01>Math.abs(e.y-n.y)?[new r.Vector2(e.x,1-e.z),new r.Vector2(n.x,1-n.z),new r.Vector2(i.x,1-i.z),new r.Vector2(o.x,1-o.z)]:[new r.Vector2(e.y,1-e.z),new r.Vector2(n.y,1-n.z),new r.Vector2(i.y,1-i.z),new r.Vector2(o.y,1-o.z)]}},r.ShapeGeometry=function(t,e){r.Geometry.call(this),this.type="ShapeGeometry",!1==t instanceof Array&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()},r.ShapeGeometry.prototype=Object.create(r.Geometry.prototype),r.ShapeGeometry.prototype.constructor=r.ShapeGeometry,r.ShapeGeometry.prototype.addShapeList=function(t,e){for(var n=0,r=t.length;r>n;n++)this.addShape(t[n],e);return this},r.ShapeGeometry.prototype.addShape=function(t,e){void 0===e&&(e={});var n,i,o,a=e.material,s=void 0===e.UVGenerator?r.ExtrudeGeometry.WorldUVGenerator:e.UVGenerator,u=this.vertices.length;n=t.extractPoints(void 0!==e.curveSegments?e.curveSegments:12);var l=n.shape,c=n.holes;if(!r.Shape.Utils.isClockWise(l))for(l=l.reverse(),n=0,i=c.length;i>n;n++)o=c[n],r.Shape.Utils.isClockWise(o)&&(c[n]=o.reverse());var h=r.Shape.Utils.triangulateShape(l,c);for(n=0,i=c.length;i>n;n++)o=c[n],l=l.concat(o);for(c=l.length,i=h.length,n=0;c>n;n++)o=l[n],this.vertices.push(new r.Vector3(o.x,o.y,0));for(n=0;i>n;n++)c=h[n],l=c[0]+u,o=c[1]+u,c=c[2]+u,this.faces.push(new r.Face3(l,o,c,null,null,a)),this.faceVertexUvs[0].push(s.generateTopUV(this,l,o,c))},r.LatheGeometry=function(t,e,n,i){r.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=e||12,n=n||0,i=i||2*Math.PI;for(var o=1/(t.length-1),a=1/e,s=0,u=e;u>=s;s++)for(var l=n+s*a*i,c=Math.cos(l),h=Math.sin(l),l=0,f=t.length;f>l;l++){var p=t[l],d=new r.Vector3;d.x=c*p.x-h*p.y,d.y=h*p.x+c*p.y,d.z=p.z,this.vertices.push(d)}for(n=t.length,s=0,u=e;u>s;s++)for(l=0,f=t.length-1;f>l;l++){e=h=l+n*s,i=h+n;var c=h+1+n,h=h+1,p=s*a,d=l*o,m=p+a,g=d+o;this.faces.push(new r.Face3(e,i,h)),this.faceVertexUvs[0].push([new r.Vector2(p,d),new r.Vector2(m,d),new r.Vector2(p,g)]),this.faces.push(new r.Face3(i,c,h)),this.faceVertexUvs[0].push([new r.Vector2(m,d),new r.Vector2(m,g),new r.Vector2(p,g)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},r.LatheGeometry.prototype=Object.create(r.Geometry.prototype),r.LatheGeometry.prototype.constructor=r.LatheGeometry,r.PlaneGeometry=function(t,e,n,i){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),r.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new r.PlaneBufferGeometry(t,e,n,i))},r.PlaneGeometry.prototype=Object.create(r.Geometry.prototype),r.PlaneGeometry.prototype.constructor=r.PlaneGeometry,r.PlaneBufferGeometry=function(t,e,n,i){r.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var o=t/2,a=e/2;n=n||1,i=i||1;var s=n+1,u=i+1,l=t/n,c=e/i;e=new Float32Array(s*u*3),
t=new Float32Array(s*u*3);for(var h=new Float32Array(s*u*2),f=0,p=0,d=0;u>d;d++)for(var m=d*c-a,g=0;s>g;g++)e[f]=g*l-o,e[f+1]=-m,t[f+2]=1,h[p]=g/n,h[p+1]=1-d/i,f+=3,p+=2;for(f=0,o=new(65535<e.length/3?Uint32Array:Uint16Array)(n*i*6),d=0;i>d;d++)for(g=0;n>g;g++)a=g+s*(d+1),u=g+1+s*(d+1),l=g+1+s*d,o[f]=g+s*d,o[f+1]=a,o[f+2]=l,o[f+3]=a,o[f+4]=u,o[f+5]=l,f+=6;this.addAttribute("index",new r.BufferAttribute(o,1)),this.addAttribute("position",new r.BufferAttribute(e,3)),this.addAttribute("normal",new r.BufferAttribute(t,3)),this.addAttribute("uv",new r.BufferAttribute(h,2))},r.PlaneBufferGeometry.prototype=Object.create(r.BufferGeometry.prototype),r.PlaneBufferGeometry.prototype.constructor=r.PlaneBufferGeometry,r.RingGeometry=function(t,e,n,i,o,a){r.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:o,thetaLength:a},t=t||0,e=e||50,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):8;var s,u=[],l=t,c=(e-t)/i;for(t=0;i+1>t;t++){for(s=0;n+1>s;s++){var h=new r.Vector3,f=o+s/n*a;h.x=l*Math.cos(f),h.y=l*Math.sin(f),this.vertices.push(h),u.push(new r.Vector2((h.x/e+1)/2,(h.y/e+1)/2))}l+=c}for(e=new r.Vector3(0,0,1),t=0;i>t;t++)for(o=t*(n+1),s=0;n>s;s++)a=f=s+o,c=f+n+1,h=f+n+2,this.faces.push(new r.Face3(a,c,h,[e.clone(),e.clone(),e.clone()])),this.faceVertexUvs[0].push([u[a].clone(),u[c].clone(),u[h].clone()]),a=f,c=f+n+2,h=f+1,this.faces.push(new r.Face3(a,c,h,[e.clone(),e.clone(),e.clone()])),this.faceVertexUvs[0].push([u[a].clone(),u[c].clone(),u[h].clone()]);this.computeFaceNormals(),this.boundingSphere=new r.Sphere(new r.Vector3,l)},r.RingGeometry.prototype=Object.create(r.Geometry.prototype),r.RingGeometry.prototype.constructor=r.RingGeometry,r.SphereGeometry=function(t,e,n,i,o,a,s){r.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:o,thetaStart:a,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;var u,l,c=[],h=[];for(l=0;n>=l;l++){var f=[],p=[];for(u=0;e>=u;u++){var d=u/e,m=l/n,g=new r.Vector3;g.x=-t*Math.cos(i+d*o)*Math.sin(a+m*s),g.y=t*Math.cos(a+m*s),g.z=t*Math.sin(i+d*o)*Math.sin(a+m*s),this.vertices.push(g),f.push(this.vertices.length-1),p.push(new r.Vector2(d,1-m))}c.push(f),h.push(p)}for(l=0;n>l;l++)for(u=0;e>u;u++){i=c[l][u+1],o=c[l][u],a=c[l+1][u],s=c[l+1][u+1];var f=this.vertices[i].clone().normalize(),p=this.vertices[o].clone().normalize(),d=this.vertices[a].clone().normalize(),m=this.vertices[s].clone().normalize(),g=h[l][u+1].clone(),y=h[l][u].clone(),v=h[l+1][u].clone(),b=h[l+1][u+1].clone();Math.abs(this.vertices[i].y)===t?(g.x=(g.x+y.x)/2,this.faces.push(new r.Face3(i,a,s,[f,d,m])),this.faceVertexUvs[0].push([g,v,b])):Math.abs(this.vertices[a].y)===t?(v.x=(v.x+b.x)/2,this.faces.push(new r.Face3(i,o,a,[f,p,d])),this.faceVertexUvs[0].push([g,y,v])):(this.faces.push(new r.Face3(i,o,s,[f,p,m])),this.faceVertexUvs[0].push([g,y,b]),this.faces.push(new r.Face3(o,a,s,[p.clone(),d,m.clone()])),this.faceVertexUvs[0].push([y.clone(),v,b.clone()]))}this.computeFaceNormals(),this.boundingSphere=new r.Sphere(new r.Vector3,t)},r.SphereGeometry.prototype=Object.create(r.Geometry.prototype),r.SphereGeometry.prototype.constructor=r.SphereGeometry,r.TextGeometry=function(t,e){e=e||{};var n=r.FontUtils.generateShapes(t,e);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),r.ExtrudeGeometry.call(this,n,e),this.type="TextGeometry"},r.TextGeometry.prototype=Object.create(r.ExtrudeGeometry.prototype),r.TextGeometry.prototype.constructor=r.TextGeometry,r.TorusGeometry=function(t,e,n,i,o){r.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:o},t=t||100,e=e||40,n=n||8,i=i||6,o=o||2*Math.PI;for(var a=new r.Vector3,s=[],u=[],l=0;n>=l;l++)for(var c=0;i>=c;c++){var h=c/i*o,f=l/n*Math.PI*2;a.x=t*Math.cos(h),a.y=t*Math.sin(h);var p=new r.Vector3;p.x=(t+e*Math.cos(f))*Math.cos(h),p.y=(t+e*Math.cos(f))*Math.sin(h),p.z=e*Math.sin(f),this.vertices.push(p),s.push(new r.Vector2(c/i,l/n)),u.push(p.clone().sub(a).normalize())}for(l=1;n>=l;l++)for(c=1;i>=c;c++)t=(i+1)*l+c-1,e=(i+1)*(l-1)+c-1,o=(i+1)*(l-1)+c,a=(i+1)*l+c,h=new r.Face3(t,e,a,[u[t].clone(),u[e].clone(),u[a].clone()]),this.faces.push(h),this.faceVertexUvs[0].push([s[t].clone(),s[e].clone(),s[a].clone()]),h=new r.Face3(e,o,a,[u[e].clone(),u[o].clone(),u[a].clone()]),this.faces.push(h),this.faceVertexUvs[0].push([s[e].clone(),s[o].clone(),s[a].clone()]);this.computeFaceNormals()},r.TorusGeometry.prototype=Object.create(r.Geometry.prototype),r.TorusGeometry.prototype.constructor=r.TorusGeometry,r.TorusKnotGeometry=function(t,e,n,i,o,a,s){function u(t,e,n,i,o){var a=Math.cos(t),s=Math.sin(t);return t*=e/n,e=Math.cos(t),a*=i*(2+e)*.5,s=i*(2+e)*s*.5,i=o*i*Math.sin(t)*.5,new r.Vector3(a,s,i)}r.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,p:o,q:a,heightScale:s},t=t||100,e=e||40,n=n||64,i=i||8,o=o||2,a=a||3,s=s||1;for(var l=Array(n),c=new r.Vector3,h=new r.Vector3,f=new r.Vector3,p=0;n>p;++p){l[p]=Array(i);var d=p/n*2*o*Math.PI,m=u(d,a,o,t,s),d=u(d+.01,a,o,t,s);for(c.subVectors(d,m),h.addVectors(d,m),f.crossVectors(c,h),h.crossVectors(f,c),f.normalize(),h.normalize(),d=0;i>d;++d){var g=d/i*2*Math.PI,y=-e*Math.cos(g),g=e*Math.sin(g),v=new r.Vector3;v.x=m.x+y*h.x+g*f.x,v.y=m.y+y*h.y+g*f.y,v.z=m.z+y*h.z+g*f.z,l[p][d]=this.vertices.push(v)-1}}for(p=0;n>p;++p)for(d=0;i>d;++d)o=(p+1)%n,a=(d+1)%i,t=l[p][d],e=l[o][d],o=l[o][a],a=l[p][a],s=new r.Vector2(p/n,d/i),c=new r.Vector2((p+1)/n,d/i),h=new r.Vector2((p+1)/n,(d+1)/i),f=new r.Vector2(p/n,(d+1)/i),this.faces.push(new r.Face3(t,e,a)),this.faceVertexUvs[0].push([s,c,f]),this.faces.push(new r.Face3(e,o,a)),this.faceVertexUvs[0].push([c.clone(),h,f.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},r.TorusKnotGeometry.prototype=Object.create(r.Geometry.prototype),r.TorusKnotGeometry.prototype.constructor=r.TorusKnotGeometry,r.TubeGeometry=function(t,e,n,i,o,a){r.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:n,radialSegments:i,closed:o},e=e||64,n=n||1,i=i||8,o=o||!1,a=a||r.TubeGeometry.NoTaper;var s,u,l,c,h,f,p,d,m,g,y=[],v=e+1,b=new r.Vector3;for(d=new r.TubeGeometry.FrenetFrames(t,e,o),m=d.normals,g=d.binormals,this.tangents=d.tangents,this.normals=m,this.binormals=g,d=0;v>d;d++)for(y[d]=[],l=d/(v-1),p=t.getPointAt(l),s=m[d],u=g[d],h=n*a(l),l=0;i>l;l++)c=l/i*2*Math.PI,f=-h*Math.cos(c),c=h*Math.sin(c),b.copy(p),b.x+=f*s.x+c*u.x,b.y+=f*s.y+c*u.y,b.z+=f*s.z+c*u.z,y[d][l]=this.vertices.push(new r.Vector3(b.x,b.y,b.z))-1;for(d=0;e>d;d++)for(l=0;i>l;l++)a=o?(d+1)%e:d+1,v=(l+1)%i,t=y[d][l],n=y[a][l],a=y[a][v],v=y[d][v],b=new r.Vector2(d/e,l/i),m=new r.Vector2((d+1)/e,l/i),g=new r.Vector2((d+1)/e,(l+1)/i),s=new r.Vector2(d/e,(l+1)/i),this.faces.push(new r.Face3(t,n,v)),this.faceVertexUvs[0].push([b,m,s]),this.faces.push(new r.Face3(n,a,v)),this.faceVertexUvs[0].push([m.clone(),g,s.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},r.TubeGeometry.prototype=Object.create(r.Geometry.prototype),r.TubeGeometry.prototype.constructor=r.TubeGeometry,r.TubeGeometry.NoTaper=function(t){return 1},r.TubeGeometry.SinusoidalTaper=function(t){return Math.sin(Math.PI*t)},r.TubeGeometry.FrenetFrames=function(t,e,n){new r.Vector3;var i=new r.Vector3;new r.Vector3;var o=[],a=[],s=[],u=new r.Vector3,l=new r.Matrix4;e+=1;var c,h,f;for(this.tangents=o,this.normals=a,this.binormals=s,c=0;e>c;c++)h=c/(e-1),o[c]=t.getTangentAt(h),o[c].normalize();for(a[0]=new r.Vector3,s[0]=new r.Vector3,t=Number.MAX_VALUE,c=Math.abs(o[0].x),h=Math.abs(o[0].y),f=Math.abs(o[0].z),t>=c&&(t=c,i.set(1,0,0)),t>=h&&(t=h,i.set(0,1,0)),t>=f&&i.set(0,0,1),u.crossVectors(o[0],i).normalize(),a[0].crossVectors(o[0],u),s[0].crossVectors(o[0],a[0]),c=1;e>c;c++)a[c]=a[c-1].clone(),s[c]=s[c-1].clone(),u.crossVectors(o[c-1],o[c]),1e-4<u.length()&&(u.normalize(),i=Math.acos(r.Math.clamp(o[c-1].dot(o[c]),-1,1)),a[c].applyMatrix4(l.makeRotationAxis(u,i))),s[c].crossVectors(o[c],a[c]);if(n)for(i=Math.acos(r.Math.clamp(a[0].dot(a[e-1]),-1,1)),i/=e-1,0<o[0].dot(u.crossVectors(a[0],a[e-1]))&&(i=-i),c=1;e>c;c++)a[c].applyMatrix4(l.makeRotationAxis(o[c],i*c)),s[c].crossVectors(o[c],a[c])},r.PolyhedronGeometry=function(t,e,n,i){function o(t){var e=t.normalize().clone();e.index=l.vertices.push(e)-1;var n=Math.atan2(t.z,-t.x)/2/Math.PI+.5;return t=Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5,e.uv=new r.Vector2(n,1-t),e}function a(t,e,n){var i=new r.Face3(t.index,e.index,n.index,[t.clone(),e.clone(),n.clone()]);l.faces.push(i),y.copy(t).add(e).add(n).divideScalar(3),i=Math.atan2(y.z,-y.x),l.faceVertexUvs[0].push([u(t.uv,t,i),u(e.uv,e,i),u(n.uv,n,i)])}function s(t,e){var n=Math.pow(2,e);Math.pow(4,e);for(var r=o(l.vertices[t.a]),i=o(l.vertices[t.b]),s=o(l.vertices[t.c]),u=[],c=0;n>=c;c++){u[c]=[];for(var h=o(r.clone().lerp(s,c/n)),f=o(i.clone().lerp(s,c/n)),p=n-c,d=0;p>=d;d++)u[c][d]=0==d&&c==n?h:o(h.clone().lerp(f,d/p))}for(c=0;n>c;c++)for(d=0;2*(n-c)-1>d;d++)r=Math.floor(d/2),0==d%2?a(u[c][r+1],u[c+1][r],u[c][r]):a(u[c][r+1],u[c+1][r+1],u[c+1][r])}function u(t,e,n){return 0>n&&1===t.x&&(t=new r.Vector2(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new r.Vector2(n/2/Math.PI+.5,t.y)),t.clone()}r.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1,i=i||0;for(var l=this,c=0,h=t.length;h>c;c+=3)o(new r.Vector3(t[c],t[c+1],t[c+2]));t=this.vertices;for(var f=[],p=c=0,h=e.length;h>c;c+=3,p++){var d=t[e[c]],m=t[e[c+1]],g=t[e[c+2]];f[p]=new r.Face3(d.index,m.index,g.index,[d.clone(),m.clone(),g.clone()])}for(var y=new r.Vector3,c=0,h=f.length;h>c;c++)s(f[c],i);for(c=0,h=this.faceVertexUvs[0].length;h>c;c++)e=this.faceVertexUvs[0][c],i=e[0].x,t=e[1].x,f=e[2].x,p=Math.max(i,Math.max(t,f)),d=Math.min(i,Math.min(t,f)),p>.9&&.1>d&&(.2>i&&(e[0].x+=1),.2>t&&(e[1].x+=1),.2>f&&(e[2].x+=1));for(c=0,h=this.vertices.length;h>c;c++)this.vertices[c].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new r.Sphere(new r.Vector3,n)},r.PolyhedronGeometry.prototype=Object.create(r.Geometry.prototype),r.PolyhedronGeometry.prototype.constructor=r.PolyhedronGeometry,r.DodecahedronGeometry=function(t,e){this.parameters={radius:t,detail:e};var n=(1+Math.sqrt(5))/2,i=1/n;r.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e)},r.DodecahedronGeometry.prototype=Object.create(r.Geometry.prototype),r.DodecahedronGeometry.prototype.constructor=r.DodecahedronGeometry,r.IcosahedronGeometry=function(t,e){var n=(1+Math.sqrt(5))/2;r.PolyhedronGeometry.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}},r.IcosahedronGeometry.prototype=Object.create(r.Geometry.prototype),r.IcosahedronGeometry.prototype.constructor=r.IcosahedronGeometry,r.OctahedronGeometry=function(t,e){this.parameters={radius:t,detail:e},r.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}},r.OctahedronGeometry.prototype=Object.create(r.Geometry.prototype),r.OctahedronGeometry.prototype.constructor=r.OctahedronGeometry,r.TetrahedronGeometry=function(t,e){r.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}},r.TetrahedronGeometry.prototype=Object.create(r.Geometry.prototype),r.TetrahedronGeometry.prototype.constructor=r.TetrahedronGeometry,r.ParametricGeometry=function(t,e,n){r.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n};var i,o,a,s,u=this.vertices,l=this.faces,c=this.faceVertexUvs[0],h=e+1;for(i=0;n>=i;i++)for(s=i/n,o=0;e>=o;o++)a=o/e,a=t(a,s),u.push(a);var f,p,d,m;for(i=0;n>i;i++)for(o=0;e>o;o++)t=i*h+o,u=i*h+o+1,s=(i+1)*h+o+1,a=(i+1)*h+o,f=new r.Vector2(o/e,i/n),p=new r.Vector2((o+1)/e,i/n),d=new r.Vector2((o+1)/e,(i+1)/n),m=new r.Vector2(o/e,(i+1)/n),l.push(new r.Face3(t,u,a)),c.push([f,p,m]),l.push(new r.Face3(u,s,a)),c.push([p.clone(),d,m.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},r.ParametricGeometry.prototype=Object.create(r.Geometry.prototype),r.ParametricGeometry.prototype.constructor=r.ParametricGeometry,r.AxisHelper=function(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);t=new r.BufferGeometry,t.addAttribute("position",new r.BufferAttribute(e,3)),t.addAttribute("color",new r.BufferAttribute(n,3)),e=new r.LineBasicMaterial({vertexColors:r.VertexColors}),r.Line.call(this,t,e,r.LinePieces)},r.AxisHelper.prototype=Object.create(r.Line.prototype),r.AxisHelper.prototype.constructor=r.AxisHelper,r.ArrowHelper=function(){var t=new r.Geometry;t.vertices.push(new r.Vector3(0,0,0),new r.Vector3(0,1,0));var e=new r.CylinderGeometry(0,.5,1,5,1);return e.applyMatrix((new r.Matrix4).makeTranslation(0,-.5,0)),function(n,i,o,a,s,u){r.Object3D.call(this),void 0===a&&(a=16776960),void 0===o&&(o=1),void 0===s&&(s=.2*o),void 0===u&&(u=.2*s),this.position.copy(i),this.line=new r.Line(t,new r.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new r.Mesh(e,new r.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(o,s,u)}}(),r.ArrowHelper.prototype=Object.create(r.Object3D.prototype),r.ArrowHelper.prototype.constructor=r.ArrowHelper,r.ArrowHelper.prototype.setDirection=function(){var t,e=new r.Vector3;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),r.ArrowHelper.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,t-e,1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},r.ArrowHelper.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},r.BoxHelper=function(t){var e=new r.BufferGeometry;e.addAttribute("position",new r.BufferAttribute(new Float32Array(72),3)),r.Line.call(this,e,new r.LineBasicMaterial({color:16776960}),r.LinePieces),void 0!==t&&this.update(t)},r.BoxHelper.prototype=Object.create(r.Line.prototype),r.BoxHelper.prototype.constructor=r.BoxHelper,r.BoxHelper.prototype.update=function(t){var e=t.geometry;null===e.boundingBox&&e.computeBoundingBox();var n=e.boundingBox.min,e=e.boundingBox.max,r=this.geometry.attributes.position.array;r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=n.x,r[4]=e.y,r[5]=e.z,r[6]=n.x,r[7]=e.y,r[8]=e.z,r[9]=n.x,r[10]=n.y,r[11]=e.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=n.y,r[20]=e.z,r[21]=e.x,r[22]=e.y,r[23]=e.z,r[24]=e.x,r[25]=e.y,r[26]=n.z,r[27]=n.x,r[28]=e.y,r[29]=n.z,r[30]=n.x,r[31]=e.y,r[32]=n.z,r[33]=n.x,r[34]=n.y,r[35]=n.z,r[36]=n.x,r[37]=n.y,r[38]=n.z,r[39]=e.x,r[40]=n.y,r[41]=n.z,r[42]=e.x,r[43]=n.y,r[44]=n.z,r[45]=e.x,r[46]=e.y,r[47]=n.z,r[48]=e.x,r[49]=e.y,r[50]=e.z,r[51]=e.x,r[52]=e.y,r[53]=n.z,r[54]=n.x,r[55]=e.y,r[56]=e.z,r[57]=n.x,r[58]=e.y,r[59]=n.z,r[60]=n.x,r[61]=n.y,r[62]=e.z,r[63]=n.x,r[64]=n.y,r[65]=n.z,r[66]=e.x,r[67]=n.y,r[68]=e.z,r[69]=e.x,r[70]=n.y,r[71]=n.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},r.BoundingBoxHelper=function(t,e){var n=void 0!==e?e:8947848;this.object=t,this.box=new r.Box3,r.Mesh.call(this,new r.BoxGeometry(1,1,1),new r.MeshBasicMaterial({color:n,wireframe:!0}))},r.BoundingBoxHelper.prototype=Object.create(r.Mesh.prototype),r.BoundingBoxHelper.prototype.constructor=r.BoundingBoxHelper,r.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},r.CameraHelper=function(t){function e(t,e,r){n(t,r),n(e,r)}function n(t,e){i.vertices.push(new r.Vector3),i.colors.push(new r.Color(e)),void 0===a[t]&&(a[t]=[]),a[t].push(i.vertices.length-1)}var i=new r.Geometry,o=new r.LineBasicMaterial({color:16777215,vertexColors:r.FaceColors}),a={};e("n1","n2",16755200),e("n2","n4",16755200),e("n4","n3",16755200),e("n3","n1",16755200),e("f1","f2",16755200),e("f2","f4",16755200),e("f4","f3",16755200),e("f3","f1",16755200),e("n1","f1",16755200),e("n2","f2",16755200),e("n3","f3",16755200),e("n4","f4",16755200),e("p","n1",16711680),e("p","n2",16711680),e("p","n3",16711680),e("p","n4",16711680),e("u1","u2",43775),e("u2","u3",43775),e("u3","u1",43775),e("c","t",16777215),e("p","c",3355443),e("cn1","cn2",3355443),e("cn3","cn4",3355443),e("cf1","cf2",3355443),e("cf3","cf4",3355443),r.Line.call(this,i,o,r.LinePieces),this.camera=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()},r.CameraHelper.prototype=Object.create(r.Line.prototype),r.CameraHelper.prototype.constructor=r.CameraHelper,r.CameraHelper.prototype.update=function(){var t,e,n=new r.Vector3,i=new r.Camera,o=function(r,o,a,s){if(n.set(o,a,s).unproject(i),r=e[r],void 0!==r)for(o=0,a=r.length;a>o;o++)t.vertices[r[o]].copy(n)};return function(){t=this.geometry,e=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),o("c",0,0,-1),o("t",0,0,1),o("n1",-1,-1,-1),o("n2",1,-1,-1),o("n3",-1,1,-1),o("n4",1,1,-1),o("f1",-1,-1,1),o("f2",1,-1,1),o("f3",-1,1,1),o("f4",1,1,1),o("u1",.7,1.1,-1),o("u2",-.7,1.1,-1),o("u3",0,2,-1),o("cf1",-1,0,1),o("cf2",1,0,1),o("cf3",0,-1,1),o("cf4",0,1,1),o("cn1",-1,0,-1),o("cn2",1,0,-1),o("cn3",0,-1,-1),o("cn4",0,1,-1),t.verticesNeedUpdate=!0}}(),r.DirectionalLightHelper=function(t,e){r.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,e=e||1;var n=new r.Geometry;n.vertices.push(new r.Vector3(-e,e,0),new r.Vector3(e,e,0),new r.Vector3(e,-e,0),new r.Vector3(-e,-e,0),new r.Vector3(-e,e,0));var i=new r.LineBasicMaterial({fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new r.Line(n,i),this.add(this.lightPlane),n=new r.Geometry,n.vertices.push(new r.Vector3,new r.Vector3),i=new r.LineBasicMaterial({fog:!1}),i.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new r.Line(n,i),this.add(this.targetLine),this.update()},r.DirectionalLightHelper.prototype=Object.create(r.Object3D.prototype),r.DirectionalLightHelper.prototype.constructor=r.DirectionalLightHelper,r.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},r.DirectionalLightHelper.prototype.update=function(){var t=new r.Vector3,e=new r.Vector3,n=new r.Vector3;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(n),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(n),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),r.EdgesHelper=function(t,e){var n=void 0!==e?e:16777215,i=[0,0],o={},a=function(t,e){return t-e},s=["a","b","c"],u=new r.BufferGeometry,l=t.geometry.clone();l.mergeVertices(),l.computeFaceNormals();for(var c=l.vertices,l=l.faces,h=0,f=0,p=l.length;p>f;f++)for(var d=l[f],m=0;3>m;m++){i[0]=d[s[m]],i[1]=d[s[(m+1)%3]],i.sort(a);var g=i.toString();void 0===o[g]?(o[g]={vert1:i[0],vert2:i[1],face1:f,face2:void 0},h++):o[g].face2=f}i=new Float32Array(6*h),a=0;for(g in o)s=o[g],(void 0===s.face2||.9999>l[s.face1].normal.dot(l[s.face2].normal))&&(h=c[s.vert1],i[a++]=h.x,i[a++]=h.y,i[a++]=h.z,h=c[s.vert2],i[a++]=h.x,i[a++]=h.y,i[a++]=h.z);u.addAttribute("position",new r.BufferAttribute(i,3)),r.Line.call(this,u,new r.LineBasicMaterial({color:n}),r.LinePieces),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},r.EdgesHelper.prototype=Object.create(r.Line.prototype),r.EdgesHelper.prototype.constructor=r.EdgesHelper,r.FaceNormalsHelper=function(t,e,n,i){this.object=t,this.size=void 0!==e?e:1,t=void 0!==n?n:16776960,i=void 0!==i?i:1,e=new r.Geometry,n=0;for(var o=this.object.geometry.faces.length;o>n;n++)e.vertices.push(new r.Vector3,new r.Vector3);r.Line.call(this,e,new r.LineBasicMaterial({color:t,linewidth:i}),r.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new r.Matrix3,this.update()},r.FaceNormalsHelper.prototype=Object.create(r.Line.prototype),r.FaceNormalsHelper.prototype.constructor=r.FaceNormalsHelper,r.FaceNormalsHelper.prototype.update=function(){var t=this.geometry.vertices,e=this.object,n=e.geometry.vertices,r=e.geometry.faces,i=e.matrixWorld;e.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(i);for(var o=e=0,a=r.length;a>e;e++,o+=2){var s=r[e];t[o].copy(n[s.a]).add(n[s.b]).add(n[s.c]).divideScalar(3).applyMatrix4(i),t[o+1].copy(s.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(t[o])}return this.geometry.verticesNeedUpdate=!0,this},r.GridHelper=function(t,e){var n=new r.Geometry,i=new r.LineBasicMaterial({vertexColors:r.VertexColors});this.color1=new r.Color(4473924),this.color2=new r.Color(8947848);for(var o=-t;t>=o;o+=e){n.vertices.push(new r.Vector3(-t,0,o),new r.Vector3(t,0,o),new r.Vector3(o,0,-t),new r.Vector3(o,0,t));var a=0===o?this.color1:this.color2;n.colors.push(a,a,a,a)}r.Line.call(this,n,i,r.LinePieces)},r.GridHelper.prototype=Object.create(r.Line.prototype),r.GridHelper.prototype.constructor=r.GridHelper,r.GridHelper.prototype.setColors=function(t,e){this.color1.set(t),this.color2.set(e),this.geometry.colorsNeedUpdate=!0},r.HemisphereLightHelper=function(t,e,n,i){for(r.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new r.Color,new r.Color],t=new r.SphereGeometry(e,4,2),t.applyMatrix((new r.Matrix4).makeRotationX(-Math.PI/2)),e=0;8>e;e++)t.faces[e].color=this.colors[4>e?0:1];e=new r.MeshBasicMaterial({vertexColors:r.FaceColors,wireframe:!0}),this.lightSphere=new r.Mesh(t,e),this.add(this.lightSphere),this.update()},r.HemisphereLightHelper.prototype=Object.create(r.Object3D.prototype),r.HemisphereLightHelper.prototype.constructor=r.HemisphereLightHelper,r.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},r.HemisphereLightHelper.prototype.update=function(){var t=new r.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),r.PointLightHelper=function(t,e){this.light=t,this.light.updateMatrixWorld();var n=new r.SphereGeometry(e,4,2),i=new r.MeshBasicMaterial({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.Mesh.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},r.PointLightHelper.prototype=Object.create(r.Mesh.prototype),r.PointLightHelper.prototype.constructor=r.PointLightHelper,r.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},r.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},r.SkeletonHelper=function(t){this.bones=this.getBoneList(t);for(var e=new r.Geometry,n=0;n<this.bones.length;n++)this.bones[n].parent instanceof r.Bone&&(e.vertices.push(new r.Vector3),e.vertices.push(new r.Vector3),e.colors.push(new r.Color(0,0,1)),e.colors.push(new r.Color(0,1,0)));n=new r.LineBasicMaterial({vertexColors:r.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0}),r.Line.call(this,e,n,r.LinePieces),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()},r.SkeletonHelper.prototype=Object.create(r.Line.prototype),r.SkeletonHelper.prototype.constructor=r.SkeletonHelper,r.SkeletonHelper.prototype.getBoneList=function(t){var e=[];t instanceof r.Bone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,this.getBoneList(t.children[n]));return e},r.SkeletonHelper.prototype.update=function(){for(var t=this.geometry,e=(new r.Matrix4).getInverse(this.root.matrixWorld),n=new r.Matrix4,i=0,o=0;o<this.bones.length;o++){var a=this.bones[o];a.parent instanceof r.Bone&&(n.multiplyMatrices(e,a.matrixWorld),t.vertices[i].setFromMatrixPosition(n),n.multiplyMatrices(e,a.parent.matrixWorld),t.vertices[i+1].setFromMatrixPosition(n),i+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},r.SpotLightHelper=function(t){r.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,t=new r.CylinderGeometry(0,1,1,8,1,!0),t.applyMatrix((new r.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new r.Matrix4).makeRotationX(-Math.PI/2));var e=new r.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new r.Mesh(t,e),this.add(this.cone),this.update()},r.SpotLightHelper.prototype=Object.create(r.Object3D.prototype),r.SpotLightHelper.prototype.constructor=r.SpotLightHelper,r.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},r.SpotLightHelper.prototype.update=function(){var t=new r.Vector3,e=new r.Vector3;return function(){var n=this.light.distance?this.light.distance:1e4,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),r.VertexNormalsHelper=function(t,e,n,i){this.object=t,this.size=void 0!==e?e:1,e=void 0!==n?n:16711680,i=void 0!==i?i:1,n=new r.Geometry,t=t.geometry.faces;for(var o=0,a=t.length;a>o;o++)for(var s=0,u=t[o].vertexNormals.length;u>s;s++)n.vertices.push(new r.Vector3,new r.Vector3);r.Line.call(this,n,new r.LineBasicMaterial({color:e,linewidth:i}),r.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new r.Matrix3,this.update()},r.VertexNormalsHelper.prototype=Object.create(r.Line.prototype),r.VertexNormalsHelper.prototype.constructor=r.VertexNormalsHelper,r.VertexNormalsHelper.prototype.update=function(t){var e=new r.Vector3;return function(t){t=["a","b","c","d"],this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,u=i.length;u>s;s++)for(var l=i[s],c=0,h=l.vertexNormals.length;h>c;c++){var f=l.vertexNormals[c];n[a].copy(r[l[t[c]]]).applyMatrix4(o),e.copy(f).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(n[a]),a+=1,n[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),r.VertexTangentsHelper=function(t,e,n,i){this.object=t,this.size=void 0!==e?e:1,e=void 0!==n?n:255,i=void 0!==i?i:1,n=new r.Geometry,t=t.geometry.faces;for(var o=0,a=t.length;a>o;o++)for(var s=0,u=t[o].vertexTangents.length;u>s;s++)n.vertices.push(new r.Vector3),n.vertices.push(new r.Vector3);r.Line.call(this,n,new r.LineBasicMaterial({color:e,linewidth:i}),r.LinePieces),this.matrixAutoUpdate=!1,this.update()},r.VertexTangentsHelper.prototype=Object.create(r.Line.prototype),r.VertexTangentsHelper.prototype.constructor=r.VertexTangentsHelper,r.VertexTangentsHelper.prototype.update=function(t){var e=new r.Vector3;return function(t){t=["a","b","c","d"],this.object.updateMatrixWorld(!0);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,u=i.length;u>s;s++)for(var l=i[s],c=0,h=l.vertexTangents.length;h>c;c++){var f=l.vertexTangents[c];n[a].copy(r[l[t[c]]]).applyMatrix4(o),e.copy(f).transformDirection(o).multiplyScalar(this.size),e.add(n[a]),a+=1,n[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),r.WireframeHelper=function(t,e){var n=void 0!==e?e:16777215,i=[0,0],o={},a=function(t,e){return t-e},s=["a","b","c"],u=new r.BufferGeometry;if(t.geometry instanceof r.Geometry){for(var l=t.geometry.vertices,c=t.geometry.faces,h=0,f=new Uint32Array(6*c.length),p=0,d=c.length;d>p;p++)for(var m=c[p],g=0;3>g;g++){i[0]=m[s[g]],i[1]=m[s[(g+1)%3]],i.sort(a);var y=i.toString();void 0===o[y]&&(f[2*h]=i[0],f[2*h+1]=i[1],o[y]=!0,h++)}for(i=new Float32Array(6*h),p=0,d=h;d>p;p++)for(g=0;2>g;g++)h=l[f[2*p+g]],s=6*p+3*g,i[s+0]=h.x,i[s+1]=h.y,i[s+2]=h.z;u.addAttribute("position",new r.BufferAttribute(i,3))}else if(t.geometry instanceof r.BufferGeometry){if(void 0!==t.geometry.attributes.index){l=t.geometry.attributes.position.array,d=t.geometry.attributes.index.array,c=t.geometry.drawcalls,h=0,0===c.length&&(c=[{count:d.length,index:0,start:0}]);for(var f=new Uint32Array(2*d.length),m=0,v=c.length;v>m;++m)for(var g=c[m].start,y=c[m].count,s=c[m].index,p=g,b=g+y;b>p;p+=3)for(g=0;3>g;g++)i[0]=s+d[p+g],i[1]=s+d[p+(g+1)%3],i.sort(a),y=i.toString(),void 0===o[y]&&(f[2*h]=i[0],f[2*h+1]=i[1],o[y]=!0,h++);for(i=new Float32Array(6*h),p=0,d=h;d>p;p++)for(g=0;2>g;g++)s=6*p+3*g,h=3*f[2*p+g],i[s+0]=l[h],i[s+1]=l[h+1],i[s+2]=l[h+2]}else for(l=t.geometry.attributes.position.array,h=l.length/3,f=h/3,i=new Float32Array(6*h),p=0,d=f;d>p;p++)for(g=0;3>g;g++)s=18*p+6*g,f=9*p+3*g,i[s+0]=l[f],i[s+1]=l[f+1],i[s+2]=l[f+2],h=9*p+(g+1)%3*3,i[s+3]=l[h],i[s+4]=l[h+1],i[s+5]=l[h+2];u.addAttribute("position",new r.BufferAttribute(i,3))}r.Line.call(this,u,new r.LineBasicMaterial({color:n}),r.LinePieces),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},r.WireframeHelper.prototype=Object.create(r.Line.prototype),r.WireframeHelper.prototype.constructor=r.WireframeHelper,r.ImmediateRenderObject=function(){r.Object3D.call(this),this.render=function(t){}},r.ImmediateRenderObject.prototype=Object.create(r.Object3D.prototype),r.ImmediateRenderObject.prototype.constructor=r.ImmediateRenderObject,r.MorphBlendMesh=function(t,e){r.Mesh.call(this,t,e),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length;this.createAnimation("__default",0,n-1,n/1),this.setAnimationWeight("__default",1)},r.MorphBlendMesh.prototype=Object.create(r.Mesh.prototype),r.MorphBlendMesh.prototype.constructor=r.MorphBlendMesh,r.MorphBlendMesh.prototype.createAnimation=function(t,e,n,r){e={startFrame:e,endFrame:n,length:n-e+1,fps:r,duration:(n-e)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[t]=e,this.animationsList.push(e)},r.MorphBlendMesh.prototype.autoCreateAnimations=function(t){for(var e,n=/([a-z]+)_?(\d+)/,r={},i=this.geometry,o=0,a=i.morphTargets.length;a>o;o++){var s=i.morphTargets[o].name.match(n);if(s&&1<s.length){var u=s[1];r[u]||(r[u]={start:1/0,end:-(1/0)}),s=r[u],o<s.start&&(s.start=o),o>s.end&&(s.end=o),e||(e=u)}
}for(u in r)s=r[u],this.createAnimation(u,s.start,s.end,t);this.firstAnimation=e},r.MorphBlendMesh.prototype.setAnimationDirectionForward=function(t){(t=this.animationsMap[t])&&(t.direction=1,t.directionBackwards=!1)},r.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(t){(t=this.animationsMap[t])&&(t.direction=-1,t.directionBackwards=!0)},r.MorphBlendMesh.prototype.setAnimationFPS=function(t,e){var n=this.animationsMap[t];n&&(n.fps=e,n.duration=(n.end-n.start)/n.fps)},r.MorphBlendMesh.prototype.setAnimationDuration=function(t,e){var n=this.animationsMap[t];n&&(n.duration=e,n.fps=(n.end-n.start)/n.duration)},r.MorphBlendMesh.prototype.setAnimationWeight=function(t,e){var n=this.animationsMap[t];n&&(n.weight=e)},r.MorphBlendMesh.prototype.setAnimationTime=function(t,e){var n=this.animationsMap[t];n&&(n.time=e)},r.MorphBlendMesh.prototype.getAnimationTime=function(t){var e=0;return(t=this.animationsMap[t])&&(e=t.time),e},r.MorphBlendMesh.prototype.getAnimationDuration=function(t){var e=-1;return(t=this.animationsMap[t])&&(e=t.duration),e},r.MorphBlendMesh.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("animation["+t+"] undefined")},r.MorphBlendMesh.prototype.stopAnimation=function(t){(t=this.animationsMap[t])&&(t.active=!1)},r.MorphBlendMesh.prototype.update=function(t){for(var e=0,n=this.animationsList.length;n>e;e++){var i=this.animationsList[e];if(i.active){var o=i.duration/i.length;i.time+=i.direction*t,i.mirroredLoop?(i.time>i.duration||0>i.time)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),0>i.time&&(i.time=0,i.directionBackwards=!1)):(i.time%=i.duration,0>i.time&&(i.time+=i.duration));var a=i.startFrame+r.Math.clamp(Math.floor(i.time/o),0,i.length-1),s=i.weight;a!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*s,this.morphTargetInfluences[a]=0,i.lastFrame=i.currentFrame,i.currentFrame=a),o=i.time%o/o,i.directionBackwards&&(o=1-o),this.morphTargetInfluences[i.currentFrame]=o*s,this.morphTargetInfluences[i.lastFrame]=(1-o)*s}}},e.exports=r},{}],337:[function(t,e,n){"use strict";var r=t("lightning-visualization"),i=t("lodash"),o=t("three.js");t("three-fly-controls")(o);var a=t("lightning-client-utils"),s=t("d3-color"),u=r.extend({init:function(){this.defaultColor=s.rgb("#A38EF3"),this.defaultSize=6,this.scene=new o.Scene,this.geometry=new o.Geometry,this.render()},renderGrid:function(){var t,e,n=this.scene,r=this.max,i=50*r,a=r/4,s=new o.LineBasicMaterial({color:13421772}),u=new o.LineBasicMaterial({color:4473924}),l=function(r,l){for(var c=function(t,e){return 1===r[t]?e:0},h=function(t,e){return 1===l[t]?e:2===l[t]?i:0},f=0;i>f;f+=a)t=new o.Geometry,t.vertices.push(new o.Vector3(c(0,f),c(1,f),c(2,f))),t.vertices.push(new o.Vector3(h(0,f),h(1,f),h(2,f))),e=0===f?new o.Line(t,u):new o.Line(t,s),n.add(e)};l([0,1,0],[2,1,0]),l([0,0,1],[2,0,1]),l([0,1,0],[0,1,2]),l([0,0,1],[0,2,1]),l([1,0,0],[1,2,0]),l([1,0,0],[1,0,2])},render:function(){function t(){a=new o.PerspectiveCamera(50,c/h,1,3e3),s=new o.PointLight(16777215,1);var t=[0,0,0];i.each(p.points,function(e){t[0]+=e.y,t[1]+=e.z,t[2]+=e.x}),t=i.map(t,function(t){return t/p.points.length}),g.renderGrid();var e,n,y,v=[],b=new o.Geometry;i.each(p.points,function(t,r){var i=t.s||g.defaultSize,a=Math.min(64,Math.max(8,.016*d*i)),s=Math.min(64,Math.max(6,.016*d*i));e=new o.SphereGeometry(.008*d*i,a,s);var u=t.c||g.defaultColor;n=new o.MeshLambertMaterial({color:u.toString(),emissive:3355443,ambient:u.toString(),vertexColors:o.FaceColors}),v.push(n),n.opacity=t.a||1,n.transparent=!0,y=new o.Mesh(e,n),y.position.set(t.y,t.z,t.x),y.updateMatrix(),b.merge(y.geometry,y.matrix,r)});var _=new o.MeshFaceMaterial(v),x=new o.Mesh(b,_);x.updateMatrix(),m.add(x);var w=2,M=d*w;a.position.y=M,a.position.x=M,a.position.z=M,a.lookAt(new o.Vector3(0,0,0)),u=new o.WebGLRenderer({alpha:!0,antialias:!0}),u.setSize(c,h),$(f)[0].appendChild(u.domElement),$(f).children("canvas").css("border","1px solid rgb(200,200,200)"),$(f).children("canvas").css("outline","-moz-outline-style: none; "),m.add(s),g.scene=m,g.parameters=l,r=new o.FlyControls(a,$(f)[0],{movementSpeed:.025*d})}function e(){requestAnimationFrame(e),n()}function n(){r.update(),s.position.copy(a.position),u.render(m,a)}var r,a,s,u,l,c=this.width,h=this.height,f=this.selector,p=this.data,d=(this.opts,this.max),m=(p.points,this.scene),g=(this.geometry,this);t(),e()},formatData:function(t){t=t||{points:[]};var e=a.getColorFromData(t),n=t.size||[],r=t.alpha||[];console.log(t),t.points=t.points.map(function(t,i){var o=[];return o.x=t[0],o.y=t[1],o.z=t[2],o.i=i,o.c=e.length>1?e[i]:e[0],o.s=n.length>1?n[i]:n[0],o.a=r.length>1?r[i]:r[0],o});var o=i.max(t.points,function(t){return Math.max(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z))});return this.max=Math.max(Math.abs(o.x),Math.abs(o.y),Math.abs(o.z)),t},appendData:function(t){var e,n,r,a=[],s=new o.Geometry;i.each(t.points,function(t,i){var u=t.s||self.defaultSize,l=Math.min(64,Math.max(8,.016*max*u)),c=Math.min(64,Math.max(6,.016*max*u));e=new o.SphereGeometry(.008*max*u,l,c);var h=t.c||self.defaultColor;n=new o.MeshLambertMaterial({color:h.toString(),emissive:3355443,ambient:h.toString(),vertexColors:o.FaceColors}),a.push(n),n.opacity=t.a||1,n.transparent=!0,r=new o.Mesh(e,n),r.position.set(t.y,t.z,t.x),r.updateMatrix(),s.merge(r.geometry,r.matrix,i)},this);var u=new o.MeshFaceMaterial(a),l=new o.Mesh(s,u);l.updateMatrix(),this.scene.add(l)}});e.exports=u},{"d3-color":317,"lightning-client-utils":318,"lightning-visualization":331,lodash:394,"three-fly-controls":335,"three.js":336}],338:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":362,dup:6}],339:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":361,dup:6}],340:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{"./src":341,dup:30}],341:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],342:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],343:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:344,colorbrewer:350,"d3-color":351,"d3-scale":352,dup:10,lodash:353,superagent:354}],344:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":346,"color-string":347,dup:11}],345:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],346:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":345,dup:13}],347:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":348,dup:14}],348:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],349:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],350:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":349,dup:8}],351:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],352:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],353:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],354:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:355,reduce:356}],355:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],356:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],357:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:358,"insert-css":359,lodash:394,qwery:360}],358:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],359:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],360:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],361:[function(t,e,n){(function(n){"use strict";var r=t("d3"),i=t("lightning-client-utils"),o=t("d3-multiaxis-zoom"),a=t("lodash"),s=t("lightning-visualization"),u=n("QGltcG9ydCB1cmwoaHR0cDovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zKTsKCi5zY2F0dGVyLXBsb3QgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9Cgouc2NhdHRlci1wbG90LmNhbnZhcyB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBwb2ludGVyLWV2ZW50czogYWxsOwogICAgei1pbmRleDogMTsKfQoKLnNjYXR0ZXItcGxvdC5zdmcgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgei1pbmRleDogMDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsMCwwKTsKfQoKLnNjYXR0ZXItcGxvdC5yZWN0IHsKICAgIGZpbGw6ICNmZmZmZmY7CiAgICB6LWluZGV4OiAxMDA7Cn0KCi5zY2F0dGVyLXBsb3QuYnJ1c2gtY29udGFpbmVyIHsKICAgIHotaW5kZXggOiAxOwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KCi5icnVzaCB7CiAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKfQoKLmJydXNoIC5leHRlbnQgewogICAgZmlsbC1vcGFjaXR5OiAuMDg1OwogICAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzOwp9Cgouc2NhdHRlci1wbG90IC5wbG90IHsKICAgIGZpbGw6ICNmZmZmZmY7Cn0KCi5zY2F0dGVyLXBsb3QgLmdyaWQgLnRpY2sgewogICAgc3Ryb2tlOiAjQkVDOUNFOwogICAgb3BhY2l0eTogMC42Owp9Cgouc2NhdHRlci1wbG90IC5ncmlkIC5wYXRoIHsKICAgIHN0cm9rZS13aWR0aDogMDsKfQoKLnNjYXR0ZXItcGxvdCAuYXhpcyBwYXRoLCAuYXhpcyBsaW5lIHsKICAgIGZpbGw6IG5vbmU7CiAgICBzdHJva2U6IG5vbmU7CiAgICBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7Cn0KCi5zY2F0dGVyLXBsb3QgLmF4aXMgcGF0aCB7CiAgICBkaXNwbGF5OiBub25lOwp9Cgouc2NhdHRlci1wbG90IC5saW5lIHsKICAgIGZpbGw6IG5vbmU7CiAgICBzdHJva2U6ICM5MTc1ZjA7CiAgICBzdHJva2Utd2lkdGg6IDJweDsKfQoKLnNjYXR0ZXItcGxvdCB0ZXh0IHsKICAgIGZpbGw6ICNBN0E5QUM7CiAgICBmb250LWZhbWlseTogbW9ub3NwYWNlOwogICAgZm9udC1zaXplOiAxNHB4OwogICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKfQoKLnNjYXR0ZXItcGxvdCAubGFiZWwgewogICAgZm9udC1mYW1pbHk6ICdPcGVuIFNhbnMnLCBzYW5zLXNlcmlmOwogICAgZm9udC1zaXplOiAxNnB4Owp9","base64"),l=s.extend({getDefaultStyles:function(){return{color:"#deebfa",stroke:"#68a1e5",size:8,alpha:.9}},getDefaultOptions:function(){return{brush:!0,tooltips:!0,zoom:!0}},init:function(){o(r),this.margin={top:0,right:0,bottom:20,left:60},a.has(this.data,"xaxis")&&(this.margin.bottom=57),a.has(this.data,"yaxis")&&(this.margin.left=85),this.render()},css:u,render:function(){function t(t){return parseFloat(r.format(".3f")(t))}function e(){P.clearRect(0,0,h+d.left+d.right,c+d.top+d.bottom),n()}function n(){var t,e;a.forEach(m.data.points,function(n){var o,s;o=w.length>0?a.indexOf(w,n.i)>=0?.9:.1:n.a,s=f.tooltips&&a.indexOf(x,n.i)>=0?r.rgb(r.hsl(n.c).darker(.75)):n.c,t=m.x(n.x),e=m.y(n.y),P.beginPath(),P.arc(t,e,n.s,0,2*Math.PI,!1),P.fillStyle=i.buildRGBA(s,o),P.strokeWidth=k,P.strokeStyle=i.buildRGBA(n.k,o),P.fill(),P.stroke()}),f.tooltips&&x.length&&m.showTooltip(m.data.points[x[0]])}function o(){E.select(".x.axis").call(m.xAxis),E.select(".y.axis").call(m.yAxis),E.select(".x.grid").call(A().tickSize(-(c-d.top-d.bottom),0,0).tickFormat("")),E.select(".y.grid").call(D().tickSize(-(h-d.left-d.right),0,0).tickFormat(""))}function s(){P.clearRect(0,0,h-d.left-d.right,c-d.top-d.bottom),o(),n()}function u(){i.sendCommMessage(m,"selection",w);var t=a.map(w,function(t){return g[t].x}),e=a.map(w,function(t){return g[t].y});i.updateSettings(m,{selected:w,x:t,y:e},function(t){t&&console.log("err saving user data")})}var l=this.data,c=this.height,h=this.width,f=this.options,p=this.selector,d=this.margin,m=this,g=l.points,y=r.extent(g,function(t){return t.x}),v=r.extent(g,function(t){return t.y}),b=y[1]-y[0],_=v[1]-v[0];this.x=r.scale.linear().domain([y[0]-.1*b,y[1]+.1*b]).range([0,h-d.left-d.right]),this.y=r.scale.linear().domain([v[0]-.1*_,v[1]+.1*_]).range([c-d.top-d.bottom,0]),this.zoom=r.behavior.zoom().x(this.x).y(this.y).on("zoom",s);var x=[],w=[],M=r.select(p).append("div").style("width",h+"px").style("position","relative").style("overflow","hidden").style("height",c+"px"),C=M.append("canvas").attr("class","scatter-plot canvas").attr("width",h-d.left-d.right).attr("height",c-d.top-d.bottom).style("margin-left",d.left+"px").style("margin-right",d.right+"px").style("margin-top",d.top+"px").style("margin-bottom",d.bottom+"px").call(this.zoom).on("dblclick.zoom",null),P=C.node().getContext("2d"),E=M.append("svg:svg").attr("class","scatter-plot svg").attr("width",h).attr("height",c).append("svg:g").attr("transform","translate("+d.left+","+d.top+")").call(this.zoom);if(m.options.zoom||(E.on("wheel.zoom",null),E.on("mousewheel.zoom",null),C.on("wheel.zoom",null),C.on("mousewheel.zoom",null)),E.append("rect").attr("width",h-d.left-d.right).attr("height",c-d.top-d.bottom).attr("class","scatter-plot rect"),f.brush){var T,S=r.svg.brush().x(this.x).y(this.y).on("brushstart",function(){x=[],f.tooltips&&m.removeTooltip();var t=r.mouse(this),n=i.nearestPoint(m.data.points,t,m.x,m.y);n&&(-1==a.indexOf(w,n.i)?w.push(n.i):a.remove(w,function(t){return t==n.i}),e())}).on("brush",function(){var t=r.event.target.extent();Math.abs(t[0][0]-t[1][0])>0&Math.abs(t[0][1]-t[1][1])>0&&(w=[],a.forEach(g,function(e){if(-1==a.indexOf(w,e.i)){var n=e.x>t[0][0]&e.x<t[1][0],r=e.y>t[0][1]&e.y<t[1][1];n&&r&&w.push(e.i)}})),e()}).on("brushend",function(){u(),r.event.target.clear(),r.select(this).call(r.event.target)});M.append("svg:svg").attr("class","scatter-plot brush-container").attr("width",h+d.left+d.right).attr("height",c+d.top+d.bottom).append("g").attr("transform","translate("+d.left+","+d.top+")").attr("class","brush").call(S),r.selectAll(".brush .background").style("cursor","default"),r.selectAll(".brush").style("pointer-events","none"),r.select(p).on("keydown",function(){T=r.event.shiftKey,T&&(r.selectAll(".brush").style("pointer-events","all"),r.selectAll(".brush .background").style("cursor","crosshair"))}),r.select(p).on("keyup",function(){T&&(r.selectAll(".brush").style("pointer-events","none"),r.selectAll(".brush .background").style("cursor","default")),T=!1})}if(f.tooltips){var L=function(){if(!r.event.defaultPrevented){var t=r.mouse(this),n=i.nearestPoint(g,t,m.x,m.y);n?(x=[],x.push(n.i),m.emit("hover",n)):(x=[],m.removeTooltip()),w=[],e()}};C.on("click",L)}var A=function(){return r.svg.axis().scale(m.x).orient("bottom").ticks(5)},D=function(){return r.svg.axis().scale(m.y).orient("left").ticks(5)};this.xAxis=r.svg.axis().scale(m.x).orient("bottom").ticks(5).tickFormat(t),E.append("g").attr("class","x axis").attr("transform","translate(0, "+(c-d.top-d.bottom)+")").call(m.xAxis),this.yAxis=r.svg.axis().scale(m.y).orient("left").ticks(5).tickFormat(t),E.append("g").attr("class","y axis").call(m.yAxis),E.append("g").attr("class","x grid").attr("transform","translate(0,"+(c-d.top-d.bottom)+")").call(A().tickSize(-(c-d.top-d.bottom),0,0).tickFormat("")),E.append("g").attr("class","y grid").call(D().tickSize(-(h-d.left-d.right),0,0).tickFormat(""));var I,k=g.length>500?1:1.1;a.has(this.data,"xaxis")&&(I=this.data.xaxis,a.isArray(I)&&(I=I[0]),E.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",(h-d.left-d.right)/2).attr("y",c-d.top-5).text(I)),a.has(this.data,"yaxis")&&(I=this.data.yaxis,a.isArray(I)&&(I=I[0]),E.append("text").attr("class","y label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-(c-d.top-d.bottom)/2).attr("y",-d.left+20).text(I)),r.select(p).attr("tabindex",-1),n(),this.redraw=e},formatData:function(t){var e,n,r,o=i.getColorFromData(t),a=t.size||[],s=t.alpha||[],u=this.styles;return t.points=t.points.map(function(i,l){return i.x=i[0],i.y=i[1],i.i=l,e=o.length>1?o[l]:o[0],n=a.length>1?a[l]:a[0],r=s.length>1?s[l]:s[0],i.c=e?e:u.color,i.s=n?n:u.size,i.k=e?e.darker(.75):u.stroke,i.a=r?r:u.alpha,i.l=(t.labels||[]).length>l?t.labels[l]:null,i}),t},updateData:function(t){this.data=t,this.redraw()},appendData:function(t){this.data.points=this.data.points.concat(t.points),this.redraw()},getLabelForDataPoint:function(t){return a.isNull(t.l)||a.isUndefined(t.l)?"x: "+r.round(t.x,2)+"<br>y: "+r.round(t.y,2):t.l},buildTooltip:function(t){var e=this.getLabelForDataPoint(t);this.removeTooltip();var n=this.x(t.x),r=this.y(t.y);if(!(0>n||n>this.width-this.margin.left-this.margin.right||0>r||r>this.height-this.margin.top-this.margin.bottom)){this.tooltipEl=document.createElement("div"),this.tooltipEl.innerHTML=e;var i={left:this.x(t.x)+this.margin.left-50+"px",bottom:this.height-this.y(t.y)+t.s+5+"px",position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.65)",textAlign:"center",color:"white",paddingTop:"5px",paddingBottom:"5px",fontSize:"12px",borderRadius:"4px",width:"100px",zIndex:"999"};a.extend(this.tooltipEl.style,i)}},renderTooltip:function(){var t=this.qwery(this.selector+" div")[0];this.tooltipEl&&t&&t.appendChild(this.tooltipEl)},showTooltip:function(t){this.buildTooltip(t),this.renderTooltip()},removeTooltip:function(){this.tooltipEl&&(this.tooltipEl.remove(),this.tooltipEl=null)}});e.exports=l}).call(this,t("buffer").Buffer)},{buffer:1,d3:342,"d3-multiaxis-zoom":340,"lightning-client-utils":343,"lightning-visualization":357,lodash:394}],362:[function(t,e,n){"use strict";var r=t("lightning-scatter"),i=t("lodash"),o=r.extend({getDefaultOptions:function(){return{brush:!1,tooltips:!1,zoom:!0}},appendData:function(t){this.data.points=i.filter(this.data.points,function(t){return.1!=t.a}),this.data.points=i.map(this.data.points,function(t){return.9==t.a?t.a=.5:.5==t.a&&(t.a=.1),t}),this.data.points=this.data.points.concat(t.points),this.redraw()}});e.exports=o},{"lightning-scatter":339,lodash:394}],363:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":385,dup:6}],364:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{"./src":365,dup:30}],365:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],366:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],367:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{color:368,colorbrewer:374,"d3-color":375,"d3-scale":376,dup:10,lodash:377,superagent:378}],368:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{"color-convert":370,"color-string":371,dup:11}],369:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],370:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{"./conversions":369,dup:13}],371:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"color-name":372,dup:14}],372:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],373:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],374:[function(t,e,n){arguments[4][8][0].apply(n,arguments)},{"./colorbrewer.js":373,dup:8}],375:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],376:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],377:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],378:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19,emitter:379,reduce:380}],379:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],380:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],381:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:382,"insert-css":383,lodash:394,qwery:384}],382:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],383:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],384:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],385:[function(t,e,n){arguments[4][361][0].apply(n,arguments)},{buffer:1,d3:366,"d3-multiaxis-zoom":364,dup:361,"lightning-client-utils":367,"lightning-visualization":381,lodash:394}],386:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./src":393,dup:6}],387:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23,events:5,inherits:388,"insert-css":389,lodash:394,qwery:390}],388:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],389:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],390:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],391:[function(t,e,n){arguments[4][335][0].apply(n,arguments)},{dup:335}],392:[function(t,e,n){arguments[4][336][0].apply(n,arguments)},{dup:336}],393:[function(t,e,n){"use strict";var r=t("lightning-visualization"),i=t("lodash"),o=t("three.js");t("three-fly-controls")(o);var a=r.extend({getDefaultOptions:function(){return{rotateZ:!1}},init:function(){this.scene=new o.Scene;var t=new o.WebGLRenderer({alpha:!0});t.setSize(this.width,this.height),this.el.appendChild(t.domElement);var e=new o.PerspectiveCamera(50,this.width/this.height,1,500);e.position.z=175,o.ImageUtils.crossOrigin="",i.each(this.images,function(t,e){this.initializeImage(t,e)},this),e.lookAt(new o.Vector3(0,0,175)),this.controls=new o.FlyControls(e,this.el),this.renderer=t,this.camera=e,this.animate()},getHeight:function(){return.7*this.width},animate:function(){requestAnimationFrame(this.animate.bind(this)),this.render()},render:function(){this.controls.update(),this.renderer.render(this.scene,this.camera)},formatData:function(t){return t},imageOnload:function(t,e){var n=new o.PlaneGeometry(t.width,t.height,1);o.ImageUtils.crossOrigin="";var r=o.ImageUtils.loadTexture(t.src);r.magFilter=o.LinearFilter,r.minFilter=o.LinearFilter;var i=new o.MeshBasicMaterial({map:r,opacity:.05,transparent:!0,blending:o.NormalBlending});i.side=o.DoubleSide;var a=new o.Mesh(n,i);a.position.z=e,this.options.rotateZ&&(a.rotation.z=Math.PI/2),this.scene.add(a)},initializeImage:function(t,e){var n=new Image;n.crossOrigin="",n.src=t,n.onload=this.imageOnload.bind(this,n,e)},addImage:function(t){this.images.push(t),this.initializeImage(t,this.images.length-1)},appendData:function(t){i.isArray(t)?i.each(t,function(t){this.addImage(t)}):this.addImage(t)}});e.exports=a},{"lightning-visualization":387,lodash:394,"three-fly-controls":391,"three.js":392}],394:[function(t,e,n){(function(t){(function(){function r(t,e){if(t!==e){var n=null===t,r=t===P,i=t===t,o=null===e,a=e===P,s=e===e;if(t>e&&!o||!i||n&&!a&&s||r&&s)return 1;if(e>t&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function i(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function o(t,e,n){if(e!==e)return g(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function a(t){return"function"==typeof t||!1}function s(t){return null==t?"":t+""}function u(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function l(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function c(t,e){return r(t.criteria,e.criteria)||t.index-e.index}function h(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++i<s;){var l=r(o[i],a[i]);if(l){if(i>=u)return l;var c=n[i];return l*("asc"===c||c===!0?1:-1)}}return t.index-e.index}function f(t){return Ht[t]}function p(t){return jt[t]}function d(t,e,n){return e?t=qt[t]:n&&(t=Zt[t]),"\\"+t}function m(t){return"\\"+Zt[t]}function g(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function y(t){return!!t&&"object"==typeof t}function v(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function b(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=H,o[++i]=n);return o}function _(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r],u=e?e(s,r,t):s;r&&n===u||(n=u,a[++o]=s)}return a}function x(t){for(var e=-1,n=t.length;++e<n&&v(t.charCodeAt(e)););return e}function w(t){for(var e=t.length;e--&&v(t.charCodeAt(e)););return e}function M(t){return Xt[t]}function C(t){function e(t){if(y(t)&&!Ls(t)&&!(t instanceof J)){if(t instanceof v)return t;if(ea.call(t,"__chain__")&&ea.call(t,"__wrapped__"))return pr(t)}return new v(t)}function n(){}function v(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function J(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Sa,this.__views__=[]}function et(){var t=new J(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function rt(){if(this.__filtered__){var t=new J(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ht(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ls(t),r=0>e,i=n?t.length:0,o=Xn(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,p=Ma(u,this.__takeCount__);if(!n||z>i||i==u&&p==u)return nn(r&&n?t.reverse():t,this.__actions__);var d=[];t:for(;u--&&p>f;){l+=e;for(var m=-1,g=t[l];++m<h;){var y=c[m],v=y.iteratee,b=y.type,_=v(g);if(b==G)g=_;else if(!_){if(b==V)continue t;break t}}d[f++]=g}return d}function jt(){this.__data__={}}function Xt(t){return this.has(t)&&delete this.__data__[t]}function Yt(t){return"__proto__"==t?P:this.__data__[t]}function qt(t){return"__proto__"!=t&&ea.call(this.__data__,t)}function Zt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Kt(t){var e=t?t.length:0;for(this.data={hash:ya(null),set:new ha};e--;)this.push(t[e])}function Jt(t,e){var n=t.data,r="string"==typeof e||Ni(e)?n.set.has(e):n.hash[e];return r?0:-1}function Qt(t){var e=this.data;"string"==typeof t||Ni(t)?e.set.add(t):e.hash[t]=!0}function $t(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=Vo(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}function te(t,e){var n=-1,r=t.length;for(e||(e=Vo(r));++n<r;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ie(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function oe(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e,n,r){for(var i=-1,o=t.length,a=r,s=a;++i<o;){var u=t[i],l=+e(u);n(l,a)&&(a=l,s=u)}return s}function se(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function ue(t,e){for(var n=-1,r=t.length,i=Vo(r);++n<r;)i[n]=e(t[n],n,t);return i}function le(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ce(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function he(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function fe(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function pe(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function de(t,e){return t===P?e:t}function me(t,e,n,r){return t!==P&&ea.call(r,n)?t:e}function ge(t,e,n){for(var r=-1,i=zs(e),o=i.length;++r<o;){var a=i[r],s=t[a],u=n(s,e[a],a,t,e);(u===u?u===s:s!==s)&&(s!==P||a in t)||(t[a]=u)}return t}function ye(t,e){return null==e?t:be(e,zs(e),t)}function ve(t,e){for(var n=-1,r=null==t,i=!r&&Jn(t),o=i?t.length:0,a=e.length,s=Vo(a);++n<a;){var u=e[n];i?s[n]=Qn(u,o)?t[u]:P:s[n]=r?P:t[u]}return s}function be(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function _e(t,e,n){var r=typeof t;return"function"==r?e===P?t:an(t,e,n):null==t?So:"object"==r?Ue(t):e===P?No(t):ze(t,e)}function xe(t,e,n,r,i,o,a){var s;if(n&&(s=i?n(t,r,i):n(t)),s!==P)return s;if(!Ni(t))return t;var u=Ls(t);if(u){if(s=Yn(t),!e)return te(t,s)}else{var l=ra.call(t),c=l==K;if(l!=$&&l!=j&&(!c||i))return Wt[l]?Zn(t,l,e):i?t:{};if(s=qn(c?{}:t),!e)return ye(s,t)}o||(o=[]),a||(a=[]);for(var h=o.length;h--;)if(o[h]==t)return a[h];return o.push(t),a.push(s),(u?ee:De)(t,function(r,i){s[i]=xe(r,e,n,i,t,o,a)}),s}function we(t,e,n){if("function"!=typeof t)throw new Ko(W);return fa(function(){t.apply(P,n)},e)}function Me(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,a=Wn(),s=a==o,u=s&&e.length>=z?mn(e):null,l=e.length;u&&(a=Jt,s=!1,e=u);t:for(;++i<n;){var c=t[i];if(s&&c===c){for(var h=l;h--;)if(e[h]===c)continue t;r.push(c)}else a(e,c,0)<0&&r.push(c)}return r}function Ce(t,e){var n=!0;return Oa(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Pe(t,e,n,r){var i=r,o=i;return Oa(t,function(t,a,s){var u=+e(t,a,s);(n(u,i)||u===r&&u===o)&&(i=u,o=t)}),o}function Ee(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===P||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t}function Te(t,e){var n=[];return Oa(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Se(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function Le(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];y(a)&&Jn(a)&&(n||Ls(a)||Pi(a))?e?Le(a,e,n,r):le(r,a):n||(r[r.length]=a)}return r}function Ae(t,e){return Fa(t,e,to)}function De(t,e){return Fa(t,e,zs)}function Ie(t,e){return Ua(t,e,zs)}function ke(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];ki(t[a])&&(o[++i]=a)}return o}function Ne(t,e,n){if(null!=t){n!==P&&n in hr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&i>r;)t=t[e[r++]];return r&&r==i?t:P}}function Be(t,e,n,r,i,o){return t===e?!0:null==t||null==e||!Ni(t)&&!y(e)?t!==t&&e!==e:Oe(t,e,Be,n,r,i,o)}function Oe(t,e,n,r,i,o,a){var s=Ls(t),u=Ls(e),l=X,c=X;s||(l=ra.call(t),l==j?l=$:l!=$&&(s=Wi(t))),u||(c=ra.call(e),c==j?c=$:c!=$&&(u=Wi(e)));var h=l==$,f=c==$,p=l==c;if(p&&!s&&!h)return Un(t,e,l);if(!i){var d=h&&ea.call(t,"__wrapped__"),m=f&&ea.call(e,"__wrapped__");if(d||m)return n(d?t.value():t,m?e.value():e,r,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var g=o.length;g--;)if(o[g]==t)return a[g]==e;o.push(t),a.push(e);var y=(s?Fn:zn)(t,e,n,r,i,o,a);return o.pop(),a.pop(),y}function Re(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=hr(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){a=e[r];var s=a[0],u=t[s],l=a[1];if(o&&a[2]){if(u===P&&!(s in t))return!1}else{var c=n?n(u,l,s):P;if(!(c===P?Be(l,u,n,!0):c))return!1}}return!0}function Fe(t,e){var n=-1,r=Jn(t)?Vo(t.length):[];return Oa(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Ue(t){var e=Hn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==P||n in hr(t))}}return function(t){return Re(t,e)}}function ze(t,e){var n=Ls(t),r=tr(t)&&rr(e),i=t+"";return t=fr(t),function(o){if(null==o)return!1;var a=i;if(o=hr(o),(n||!r)&&!(a in o)){if(o=1==t.length?o:Ne(o,qe(t,0,-1)),null==o)return!1;a=Er(t),o=hr(o)}return o[a]===e?e!==P||a in o:Be(e,o[a],P,!0)}}function Ve(t,e,n,r,i){if(!Ni(t))return t;var o=Jn(e)&&(Ls(e)||Wi(e)),a=o?P:zs(e);return ee(a||e,function(s,u){if(a&&(u=s,s=e[u]),y(s))r||(r=[]),i||(i=[]),Ge(t,e,u,Ve,n,r,i);else{var l=t[u],c=n?n(l,s,u,t,e):P,h=c===P;h&&(c=s),c===P&&(!o||u in t)||!h&&(c===c?c===l:l!==l)||(t[u]=c)}}),t}function Ge(t,e,n,r,i,o,a){for(var s=o.length,u=e[n];s--;)if(o[s]==u)return void(t[n]=a[s]);var l=t[n],c=i?i(l,u,n,t,e):P,h=c===P;h&&(c=u,Jn(u)&&(Ls(u)||Wi(u))?c=Ls(l)?l:Jn(l)?te(l):[]:zi(u)||Pi(u)?c=Pi(l)?qi(l):zi(l)?l:{}:h=!1),o.push(u),a.push(c),h?t[n]=r(c,u,i,o,a):(c===c?c!==l:l===l)&&(t[n]=c)}function We(t){return function(e){return null==e?P:e[t]}}function He(t){var e=t+"";return t=fr(t),function(n){return Ne(n,t,e)}}function je(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Qn(r)){var i=r;pa.call(t,r,1)}}return t}function Xe(t,e){return t+va(Ea()*(e-t+1))}function Ye(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function qe(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n=n===P||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Vo(i);++r<i;)o[r]=t[r+e];return o}function Ze(t,e){var n;return Oa(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Ke(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Je(t,e,n){var r=Vn(),i=-1;e=ue(e,function(t){return r(t)});var o=Fe(t,function(t){var n=ue(e,function(e){return e(t)});return{criteria:n,index:++i,value:t}});return Ke(o,function(t,e){return h(t,e,n)})}function Qe(t,e){var n=0;return Oa(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function $e(t,e){var n=-1,r=Wn(),i=t.length,a=r==o,s=a&&i>=z,u=s?mn():null,l=[];u?(r=Jt,a=!1):(s=!1,u=e?[]:l);t:for(;++n<i;){var c=t[n],h=e?e(c,n,t):c;if(a&&c===c){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),l.push(c)}else r(u,h,0)<0&&((e||s)&&u.push(h),l.push(c))}return l}function tn(t,e){for(var n=-1,r=e.length,i=Vo(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?qe(t,r?0:o,r?o+1:i):qe(t,r?o+1:0,r?i:o)}function nn(t,e){var n=t;n instanceof J&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,le([n],o.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&Da>=i){for(;i>r;){var o=r+i>>>1,a=t[o];(n?e>=a:e>a)&&null!==a?r=o+1:i=o;
}return i}return on(t,e,So,n)}function on(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=null===e,u=e===P;o>i;){var l=va((i+o)/2),c=n(t[l]),h=c!==P,f=c===c;if(a)var p=f||r;else p=s?f&&h&&(r||null!=c):u?f&&(r||h):null==c?!1:r?e>=c:e>c;p?i=l+1:o=l}return Ma(o,Aa)}function an(t,e,n){if("function"!=typeof t)return So;if(e===P)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function sn(t){var e=new aa(t.byteLength),n=new da(e);return n.set(new da(t)),e}function un(t,e,n){for(var r=n.length,i=-1,o=wa(t.length-r,0),a=-1,s=e.length,u=Vo(s+o);++a<s;)u[a]=e[a];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[a++]=t[i++];return u}function ln(t,e,n){for(var r=-1,i=n.length,o=-1,a=wa(t.length-i,0),s=-1,u=e.length,l=Vo(a+u);++o<a;)l[o]=t[o];for(var c=o;++s<u;)l[c+s]=e[s];for(;++r<i;)l[c+n[r]]=t[o++];return l}function cn(t,e){return function(n,r,i){var o=e?e():{};if(r=Vn(r,i,3),Ls(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];t(o,u,r(u,a,n),n)}else Oa(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function hn(t){return yi(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2?n[i-2]:P,a=i>2?n[2]:P,s=i>1?n[i-1]:P;for("function"==typeof o?(o=an(o,s,5),i-=2):(o="function"==typeof s?s:P,i-=o?1:0),a&&$n(n[0],n[1],a)&&(o=3>i?P:o,i=1);++r<i;){var u=n[r];u&&t(e,u,o)}return e})}function fn(t,e){return function(n,r){var i=n?Ga(n):0;if(!nr(i))return t(n,r);for(var o=e?i:-1,a=hr(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function pn(t){return function(e,n,r){for(var i=hr(e),o=r(e),a=o.length,s=t?a:-1;t?s--:++s<a;){var u=o[s];if(n(i[u],u,i)===!1)break}return e}}function dn(t,e){function n(){var i=this&&this!==ne&&this instanceof n?r:t;return i.apply(e,arguments)}var r=yn(t);return n}function mn(t){return ya&&ha?new Kt(t):null}function gn(t){return function(e){for(var n=-1,r=Po(co(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function yn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ba(t.prototype),r=t.apply(n,e);return Ni(r)?r:n}}function vn(t){function e(n,r,i){i&&$n(n,r,i)&&(r=P);var o=Rn(n,t,P,P,P,P,P,r);return o.placeholder=e.placeholder,o}return e}function bn(t,e){return yi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(P,n))})}function _n(t,e){return function(n,r,i){if(i&&$n(n,r,i)&&(r=P),r=Vn(r,i,3),1==r.length){n=Ls(n)?n:cr(n);var o=ae(n,r,t,e);if(!n.length||o!==e)return o}return Pe(n,r,t,e)}}function xn(t,e){return function(n,r,o){if(r=Vn(r,o,3),Ls(n)){var a=i(n,r,e);return a>-1?n[a]:P}return Se(n,r,t)}}function wn(t){return function(e,n,r){return e&&e.length?(n=Vn(n,r,3),i(e,n,t)):-1}}function Mn(t){return function(e,n,r){return n=Vn(n,r,3),Se(e,n,t,!0)}}function Cn(t){return function(){for(var e,n=arguments.length,r=t?n:-1,i=0,o=Vo(n);t?r--:++r<n;){var a=o[i++]=arguments[r];if("function"!=typeof a)throw new Ko(W);!e&&v.prototype.thru&&"wrapper"==Gn(a)&&(e=new v([],!0))}for(r=e?-1:n;++r<n;){a=o[r];var s=Gn(a),u="wrapper"==s?Va(a):P;e=u&&er(u[0])&&u[1]==(N|A|I|B)&&!u[4].length&&1==u[9]?e[Gn(u[0])].apply(e,u[3]):1==a.length&&er(a)?e[s]():e.thru(a)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Ls(r)&&r.length>=z)return e.plant(r).value();for(var i=0,a=n?o[i].apply(this,t):r;++i<n;)a=o[i].call(this,a);return a}}}function Pn(t,e){return function(n,r,i){return"function"==typeof r&&i===P&&Ls(n)?t(n,r):e(n,an(r,i,3))}}function En(t){return function(e,n,r){return("function"!=typeof n||r!==P)&&(n=an(n,r,3)),t(e,n,to)}}function Tn(t){return function(e,n,r){return("function"!=typeof n||r!==P)&&(n=an(n,r,3)),t(e,n)}}function Sn(t){return function(e,n,r){var i={};return n=Vn(n,r,3),De(e,function(e,r,o){var a=n(e,r,o);r=t?a:r,e=t?e:a,i[r]=e}),i}}function Ln(t){return function(e,n,r){return e=s(e),(t?e:"")+kn(e,n,r)+(t?"":e)}}function An(t){var e=yi(function(n,r){var i=b(r,e.placeholder);return Rn(n,t,P,r,i)});return e}function Dn(t,e){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===P&&Ls(n)?t(n,r,i,a):Ye(n,Vn(r,o,4),i,a,e)}}function In(t,e,n,r,i,o,a,s,u,l){function c(){for(var v=arguments.length,_=v,x=Vo(v);_--;)x[_]=arguments[_];if(r&&(x=un(x,r,i)),o&&(x=ln(x,o,a)),d||g){var w=c.placeholder,M=b(x,w);if(v-=M.length,l>v){var C=s?te(s):P,E=wa(l-v,0),L=d?M:P,A=d?P:M,D=d?x:P,N=d?P:x;e|=d?I:k,e&=~(d?k:I),m||(e&=~(T|S));var B=[t,e,n,D,L,N,A,C,u,E],O=In.apply(P,B);return er(t)&&Wa(O,B),O.placeholder=w,O}}var R=f?n:this,F=p?R[t]:t;return s&&(x=ur(x,s)),h&&u<x.length&&(x.length=u),this&&this!==ne&&this instanceof c&&(F=y||yn(t)),F.apply(R,x)}var h=e&N,f=e&T,p=e&S,d=e&A,m=e&L,g=e&D,y=p?P:yn(t);return c}function kn(t,e,n){var r=t.length;if(e=+e,r>=e||!_a(e))return"";var i=e-r;return n=null==n?" ":n+"",yo(n,ga(i/n.length)).slice(0,i)}function Nn(t,e,n,r){function i(){for(var e=-1,s=arguments.length,u=-1,l=r.length,c=Vo(l+s);++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++e];var h=this&&this!==ne&&this instanceof i?a:t;return h.apply(o?n:this,c)}var o=e&T,a=yn(t);return i}function Bn(t){var e=jo[t];return function(t,n){return n=n===P?0:+n||0,n?(n=la(10,n),e(t*n)/n):e(t)}}function On(t){return function(e,n,r,i){var o=Vn(r);return null==r&&o===_e?rn(e,n,t):on(e,n,o(r,i,1),t)}}function Rn(t,e,n,r,i,o,a,s){var u=e&S;if(!u&&"function"!=typeof t)throw new Ko(W);var l=r?r.length:0;if(l||(e&=~(I|k),r=i=P),l-=i?i.length:0,e&k){var c=r,h=i;r=i=P}var f=u?P:Va(t),p=[t,e,n,r,i,c,h,o,a,s];if(f&&(ir(p,f),e=p[1],s=p[9]),p[9]=null==s?u?0:t.length:wa(s-l,0)||0,e==T)var d=dn(p[0],p[2]);else d=e!=I&&e!=(T|I)||p[4].length?In.apply(P,p):Nn.apply(P,p);var m=f?za:Wa;return m(d,p)}function Fn(t,e,n,r,i,o,a){var s=-1,u=t.length,l=e.length;if(u!=l&&!(i&&l>u))return!1;for(;++s<u;){var c=t[s],h=e[s],f=r?r(i?h:c,i?c:h,s):P;if(f!==P){if(f)continue;return!1}if(i){if(!fe(e,function(t){return c===t||n(c,t,r,i,o,a)}))return!1}else if(c!==h&&!n(c,h,r,i,o,a))return!1}return!0}function Un(t,e,n){switch(n){case Y:case q:return+t==+e;case Z:return t.name==e.name&&t.message==e.message;case Q:return t!=+t?e!=+e:t==+e;case tt:case nt:return t==e+""}return!1}function zn(t,e,n,r,i,o,a){var s=zs(t),u=s.length,l=zs(e),c=l.length;if(u!=c&&!i)return!1;for(var h=u;h--;){var f=s[h];if(!(i?f in e:ea.call(e,f)))return!1}for(var p=i;++h<u;){f=s[h];var d=t[f],m=e[f],g=r?r(i?m:d,i?d:m,f):P;if(!(g===P?n(d,m,r,i,o,a):g))return!1;p||(p="constructor"==f)}if(!p){var y=t.constructor,v=e.constructor;if(y!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v))return!1}return!0}function Vn(t,n,r){var i=e.callback||Eo;return i=i===Eo?_e:i,r?i(t,n,r):i}function Gn(t){for(var e=t.name,n=Na[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Wn(t,n,r){var i=e.indexOf||Cr;return i=i===Cr?o:i,t?i(t,n,r):i}function Hn(t){for(var e=eo(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function jn(t,e){var n=null==t?P:t[e];return Ri(n)?n:P}function Xn(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ma(e,t+a);break;case"takeRight":t=wa(t,e-a)}}return{start:t,end:e}}function Yn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ea.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function qn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Yo),new e}function Zn(t,e,n){var r=t.constructor;switch(e){case it:return sn(t);case Y:case q:return new r(+t);case ot:case at:case st:case ut:case lt:case ct:case ht:case ft:case pt:var i=t.buffer;return new r(n?sn(i):i,t.byteOffset,t.length);case Q:case nt:return new r(t);case tt:var o=new r(t.source,It.exec(t));o.lastIndex=t.lastIndex}return o}function Kn(t,e,n){null==t||tr(e,t)||(e=fr(e),t=1==e.length?t:Ne(t,qe(e,0,-1)),e=Er(e));var r=null==t?t:t[e];return null==r?P:r.apply(t,n)}function Jn(t){return null!=t&&nr(Ga(t))}function Qn(t,e){return t="number"==typeof t||Bt.test(t)?+t:-1,e=null==e?Ia:e,t>-1&&t%1==0&&e>t}function $n(t,e,n){if(!Ni(n))return!1;var r=typeof e;if("number"==r?Jn(n)&&Qn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;if("string"==n&&Pt.test(t)||"number"==n)return!0;if(Ls(t))return!1;var r=!Ct.test(t);return r||null!=e&&t in hr(e)}function er(t){var n=Gn(t);if(!(n in J.prototype))return!1;var r=e[n];if(t===r)return!0;var i=Va(r);return!!i&&t===i[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&Ia>=t}function rr(t){return t===t&&!Ni(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,o=N>i,a=r==N&&n==A||r==N&&n==B&&t[7].length<=e[8]||r==(N|B)&&n==A;if(!o&&!a)return t;r&T&&(t[2]=e[2],i|=n&T?0:L);var s=e[3];if(s){var u=t[3];t[3]=u?un(u,s,e[4]):te(s),t[4]=u?b(t[3],H):te(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?ln(u,s,e[6]):te(s),t[6]=u?b(t[5],H):te(e[6])),s=e[7],s&&(t[7]=te(s)),r&N&&(t[8]=null==t[8]?e[8]:Ma(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function or(t,e){return t===P?e:As(t,e,or)}function ar(t,e){t=hr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function sr(t,e){var n={};return Ae(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function ur(t,e){for(var n=t.length,r=Ma(e.length,n),i=te(t);r--;){var o=e[r];t[r]=Qn(o,n)?i[o]:P}return t}function lr(t){for(var e=to(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(Ls(t)||Pi(t)),o=-1,a=[];++o<n;){var s=e[o];(i&&Qn(s,r)||ea.call(t,s))&&a.push(s)}return a}function cr(t){return null==t?[]:Jn(t)?Ni(t)?t:Yo(t):oo(t)}function hr(t){return Ni(t)?t:Yo(t)}function fr(t){if(Ls(t))return t;var e=[];return s(t).replace(Et,function(t,n,r,i){e.push(r?i.replace(At,"$1"):n||t)}),e}function pr(t){return t instanceof J?t.clone():new v(t.__wrapped__,t.__chain__,te(t.__actions__))}function dr(t,e,n){e=(n?$n(t,e,n):null==e)?1:wa(va(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=Vo(ga(i/e));i>r;)a[++o]=qe(t,r,r+=e);return a}function mr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function gr(t,e,n){var r=t?t.length:0;return r?((n?$n(t,e,n):null==e)&&(e=1),qe(t,0>e?0:e)):[]}function yr(t,e,n){var r=t?t.length:0;return r?((n?$n(t,e,n):null==e)&&(e=1),e=r-(+e||0),qe(t,0,0>e?0:e)):[]}function vr(t,e,n){return t&&t.length?en(t,Vn(e,n,3),!0,!0):[]}function br(t,e,n){return t&&t.length?en(t,Vn(e,n,3),!0):[]}function _r(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&$n(t,e,n)&&(n=0,r=i),Ee(t,e,n,r)):[]}function xr(t){return t?t[0]:P}function wr(t,e,n){var r=t?t.length:0;return n&&$n(t,e,n)&&(e=!1),r?Le(t,e):[]}function Mr(t){var e=t?t.length:0;return e?Le(t,!0):[]}function Cr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?wa(r+n,0):n;else if(n){var i=rn(t,e);return r>i&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return o(t,e,n||0)}function Pr(t){return yr(t,1)}function Er(t){var e=t?t.length:0;return e?t[e-1]:P}function Tr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?wa(r+n,0):Ma(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return g(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Sr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Wn(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)pa.call(e,o,1);return e}function Lr(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=Vn(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return je(t,o),r}function Ar(t){return gr(t,1)}function Dr(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&$n(t,e,n)&&(e=0,n=r),qe(t,e,n)):[]}function Ir(t,e,n){var r=t?t.length:0;return r?((n?$n(t,e,n):null==e)&&(e=1),qe(t,0,0>e?0:e)):[]}function kr(t,e,n){var r=t?t.length:0;return r?((n?$n(t,e,n):null==e)&&(e=1),e=r-(+e||0),qe(t,0>e?0:e)):[]}function Nr(t,e,n){return t&&t.length?en(t,Vn(e,n,3),!1,!0):[]}function Br(t,e,n){return t&&t.length?en(t,Vn(e,n,3)):[]}function Or(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=$n(t,e,r)?P:e,e=!1);var a=Vn();return(null!=n||a!==_e)&&(n=a(n,r,3)),e&&Wn()==o?_(t,n):$e(t,n)}function Rr(t){if(!t||!t.length)return[];var e=-1,n=0;t=se(t,function(t){return Jn(t)?(n=wa(t.length,n),!0):void 0});for(var r=Vo(n);++e<n;)r[e]=ue(t,We(e));return r}function Fr(t,e,n){var r=t?t.length:0;if(!r)return[];var i=Rr(t);return null==e?i:(e=an(e,n,4),ue(i,function(t){return ce(t,e,P,!0)}))}function Ur(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Jn(n))var r=r?le(Me(r,n),Me(n,r)):n}return r?$e(r):[]}function zr(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Ls(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Vr(t){var n=e(t);return n.__chain__=!0,n}function Gr(t,e,n){return e.call(n,t),t}function Wr(t,e,n){return e.call(n,t)}function Hr(){return Vr(this)}function jr(){return new v(this.value(),this.__chain__)}function Xr(t){for(var e,r=this;r instanceof n;){var i=pr(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Yr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof J){var n=t;return this.__actions__.length&&(n=new J(this)),n=n.reverse(),n.__actions__.push({func:Wr,args:[e],thisArg:P}),new v(n,this.__chain__)}return this.thru(e)}function qr(){return this.value()+""}function Zr(){return nn(this.__wrapped__,this.__actions__)}function Kr(t,e,n){var r=Ls(t)?oe:Ce;return n&&$n(t,e,n)&&(e=P),("function"!=typeof e||n!==P)&&(e=Vn(e,n,3)),r(t,e)}function Jr(t,e,n){var r=Ls(t)?se:Te;return e=Vn(e,n,3),r(t,e)}function Qr(t,e){return is(t,Ue(e))}function $r(t,e,n,r){var i=t?Ga(t):0;return nr(i)||(t=oo(t),i=t.length),n="number"!=typeof n||r&&$n(e,n,r)?0:0>n?wa(i+n,0):n||0,"string"==typeof t||!Ls(t)&&Gi(t)?i>=n&&t.indexOf(e,n)>-1:!!i&&Wn(t,e,n)>-1}function ti(t,e,n){var r=Ls(t)?ue:Fe;return e=Vn(e,n,3),r(t,e)}function ei(t,e){return ti(t,No(e))}function ni(t,e,n){var r=Ls(t)?se:Te;return e=Vn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?$n(t,e,n):null==e){t=cr(t);var r=t.length;return r>0?t[Xe(0,r-1)]:P}var i=-1,o=Yi(t),r=o.length,a=r-1;for(e=Ma(0>e?0:+e||0,r);++i<e;){var s=Xe(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=e,o}function ii(t){return ri(t,Sa)}function oi(t){var e=t?Ga(t):0;return nr(e)?e:zs(t).length}function ai(t,e,n){var r=Ls(t)?fe:Ze;return n&&$n(t,e,n)&&(e=P),("function"!=typeof e||n!==P)&&(e=Vn(e,n,3)),r(t,e)}function si(t,e,n){if(null==t)return[];n&&$n(t,e,n)&&(e=P);var r=-1;e=Vn(e,n,3);var i=Fe(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}});return Ke(i,c)}function ui(t,e,n,r){return null==t?[]:(r&&$n(e,n,r)&&(n=P),Ls(e)||(e=null==e?[]:[e]),Ls(n)||(n=null==n?[]:[n]),Je(t,e,n))}function li(t,e){return Jr(t,Ue(e))}function ci(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Ko(W);var n=t;t=e,e=n}return t=_a(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function hi(t,e,n){return n&&$n(t,e,n)&&(e=P),e=t&&null==e?t.length:wa(+e||0,0),Rn(t,N,P,P,P,P,e)}function fi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Ko(W);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=P),n}}function pi(t,e,n){function r(){p&&sa(p),l&&sa(l),m=0,l=p=d=P}function i(e,n){n&&sa(n),l=p=d=P,e&&(m=ms(),c=t.apply(f,u),p||l||(u=f=P))}function o(){var t=e-(ms()-h);0>=t||t>e?i(d,l):p=fa(o,t)}function a(){i(y,p)}function s(){if(u=arguments,h=ms(),f=this,d=y&&(p||!v),g===!1)var n=v&&!p;else{l||v||(m=h);var r=g-(h-m),i=0>=r||r>g;i?(l&&(l=sa(l)),m=h,c=t.apply(f,u)):l||(l=fa(a,r))}return i&&p?p=sa(p):p||e===g||(p=fa(o,e)),n&&(i=!0,c=t.apply(f,u)),!i||p||l||(u=f=P),c}var u,l,c,h,f,p,d,m=0,g=!1,y=!0;if("function"!=typeof t)throw new Ko(W);if(e=0>e?0:+e||0,n===!0){var v=!0;y=!1}else Ni(n)&&(v=!!n.leading,g="maxWait"in n&&wa(+n.maxWait||0,e),y="trailing"in n?!!n.trailing:y);return s.cancel=r,s}function di(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Ko(W);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new di.Cache,n}function mi(t){if("function"!=typeof t)throw new Ko(W);return function(){return!t.apply(this,arguments)}}function gi(t){return fi(2,t)}function yi(t,e){if("function"!=typeof t)throw new Ko(W);return e=wa(e===P?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=wa(n.length-e,0),o=Vo(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var a=Vo(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=o,t.apply(this,a)}}function vi(t){if("function"!=typeof t)throw new Ko(W);return function(e){return t.apply(this,e)}}function bi(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ko(W);return n===!1?r=!1:Ni(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),pi(t,e,{leading:r,maxWait:+e,trailing:i})}function _i(t,e){return e=null==e?So:e,Rn(e,I,P,[t],[])}function xi(t,e,n,r){return e&&"boolean"!=typeof e&&$n(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?xe(t,e,an(n,r,1)):xe(t,e)}function wi(t,e,n){return"function"==typeof e?xe(t,!0,an(e,n,1)):xe(t,!0)}function Mi(t,e){return t>e}function Ci(t,e){return t>=e}function Pi(t){return y(t)&&Jn(t)&&ea.call(t,"callee")&&!ca.call(t,"callee")}function Ei(t){return t===!0||t===!1||y(t)&&ra.call(t)==Y}function Ti(t){return y(t)&&ra.call(t)==q}function Si(t){return!!t&&1===t.nodeType&&y(t)&&!zi(t)}function Li(t){return null==t?!0:Jn(t)&&(Ls(t)||Gi(t)||Pi(t)||y(t)&&ki(t.splice))?!t.length:!zs(t).length}function Ai(t,e,n,r){n="function"==typeof n?an(n,r,3):P;var i=n?n(t,e):P;return i===P?Be(t,e,n):!!i}function Di(t){return y(t)&&"string"==typeof t.message&&ra.call(t)==Z}function Ii(t){return"number"==typeof t&&_a(t)}function ki(t){return Ni(t)&&ra.call(t)==K}function Ni(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Bi(t,e,n,r){return n="function"==typeof n?an(n,r,3):P,Re(t,Hn(e),n)}function Oi(t){return Ui(t)&&t!=+t}function Ri(t){return null==t?!1:ki(t)?oa.test(ta.call(t)):y(t)&&Nt.test(t)}function Fi(t){return null===t}function Ui(t){return"number"==typeof t||y(t)&&ra.call(t)==Q}function zi(t){var e;if(!y(t)||ra.call(t)!=$||Pi(t)||!ea.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return Ae(t,function(t,e){n=e}),n===P||ea.call(t,n)}function Vi(t){return Ni(t)&&ra.call(t)==tt}function Gi(t){return"string"==typeof t||y(t)&&ra.call(t)==nt}function Wi(t){return y(t)&&nr(t.length)&&!!Gt[ra.call(t)]}function Hi(t){return t===P}function ji(t,e){return e>t}function Xi(t,e){return e>=t}function Yi(t){var e=t?Ga(t):0;return nr(e)?e?te(t):[]:oo(t)}function qi(t){return be(t,to(t))}function Zi(t,e,n){var r=Ba(t);return n&&$n(t,e,n)&&(e=P),e?ye(r,e):r}function Ki(t){return ke(t,to(t))}function Ji(t,e,n){var r=null==t?P:Ne(t,fr(e),e+"");return r===P?n:r}function Qi(t,e){if(null==t)return!1;var n=ea.call(t,e);if(!n&&!tr(e)){if(e=fr(e),t=1==e.length?t:Ne(t,qe(e,0,-1)),null==t)return!1;e=Er(e),n=ea.call(t,e)}return n||nr(t.length)&&Qn(e,t.length)&&(Ls(t)||Pi(t))}function $i(t,e,n){n&&$n(t,e,n)&&(e=P);for(var r=-1,i=zs(t),o=i.length,a={};++r<o;){var s=i[r],u=t[s];e?ea.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function to(t){if(null==t)return[];Ni(t)||(t=Yo(t));var e=t.length;e=e&&nr(e)&&(Ls(t)||Pi(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=Vo(e),a=e>0;++r<e;)o[r]=r+"";for(var s in t)a&&Qn(s,e)||"constructor"==s&&(i||!ea.call(t,s))||o.push(s);return o}function eo(t){t=hr(t);for(var e=-1,n=zs(t),r=n.length,i=Vo(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function no(t,e,n){var r=null==t?P:t[e];return r===P&&(null==t||tr(e,t)||(e=fr(e),t=1==e.length?t:Ne(t,qe(e,0,-1)),r=null==t?P:t[Er(e)]),r=r===P?n:r),ki(r)?r.call(t):r}function ro(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:fr(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];Ni(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Qn(e[i+1])?[]:{})),s=s[u]}return t}function io(t,e,n,r){var i=Ls(t)||Wi(t);if(e=Vn(e,r,4),null==n)if(i||Ni(t)){var o=t.constructor;n=i?Ls(t)?new o:[]:Ba(ki(o)?o.prototype:P)}else n={};return(i?ee:De)(t,function(t,r,i){return e(n,t,r,i)}),n}function oo(t){return tn(t,zs(t))}function ao(t){return tn(t,to(t))}function so(t,e,n){return e=+e||0,n===P?(n=e,e=0):n=+n||0,t>=Ma(e,n)&&t<wa(e,n)}function uo(t,e,n){n&&$n(t,e,n)&&(e=n=P);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=Ea();return Ma(t+o*(e-t+ua("1e-"+((o+"").length-1))),e)}return Xe(t,e)}function lo(t){return t=s(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function co(t){return t=s(t),t&&t.replace(Ot,f).replace(Lt,"")}function ho(t,e,n){t=s(t),e+="";var r=t.length;return n=n===P?r:Ma(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function fo(t){return t=s(t),t&&_t.test(t)?t.replace(vt,p):t}function po(t){return t=s(t),t&&St.test(t)?t.replace(Tt,d):t||"(?:)"}function mo(t,e,n){t=s(t),e=+e;var r=t.length;if(r>=e||!_a(e))return t;var i=(e-r)/2,o=va(i),a=ga(i);return n=kn("",a,n),n.slice(0,o)+t+n}function go(t,e,n){return(n?$n(t,e,n):null==e)?e=0:e&&(e=+e),t=_o(t),Pa(t,e||(kt.test(t)?16:10))}function yo(t,e){var n="";if(t=s(t),e=+e,1>e||!t||!_a(e))return n;do e%2&&(n+=t),e=va(e/2),t+=t;while(e);return n}function vo(t,e,n){return t=s(t),n=null==n?0:Ma(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function bo(t,n,r){var i=e.templateSettings;r&&$n(t,n,r)&&(n=r=P),t=s(t),n=ge(ye({},r||n),i,me);var o,a,u=ge(ye({},n.imports),i.imports,me),l=zs(u),c=tn(u,l),h=0,f=n.interpolate||Rt,p="__p += '",d=qo((n.escape||Rt).source+"|"+f.source+"|"+(f===Mt?Dt:Rt).source+"|"+(n.evaluate||Rt).source+"|$","g"),g="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Vt+"]")+"\n";t.replace(d,function(e,n,r,i,s,u){return r||(r=i),p+=t.slice(h,u).replace(Ft,m),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),p+="';\n";var y=n.variable;y||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(dt,""):p).replace(mt,"$1").replace(gt,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Js(function(){return Ho(l,g+"return "+p).apply(P,c)});if(v.source=p,Di(v))throw v;return v}function _o(t,e,n){var r=t;return(t=s(t))?(n?$n(r,e,n):null==e)?t.slice(x(t),w(t)+1):(e+="",t.slice(u(t,e),l(t,e)+1)):t}function xo(t,e,n){var r=t;return t=s(t),t?(n?$n(r,e,n):null==e)?t.slice(x(t)):t.slice(u(t,e+"")):t}function wo(t,e,n){var r=t;return t=s(t),t?(n?$n(r,e,n):null==e)?t.slice(0,w(t)+1):t.slice(0,l(t,e+"")+1):t}function Mo(t,e,n){n&&$n(t,e,n)&&(e=P);var r=O,i=R;if(null!=e)if(Ni(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?s(e.omission):i}else r=+e||0;if(t=s(t),r>=t.length)return t;var a=r-i.length;if(1>a)return i;var u=t.slice(0,a);if(null==o)return u+i;if(Vi(o)){if(t.slice(a).search(o)){var l,c,h=t.slice(0,a);for(o.global||(o=qo(o.source,(It.exec(o)||"")+"g")),o.lastIndex=0;l=o.exec(h);)c=l.index;u=u.slice(0,null==c?a:c)}}else if(t.indexOf(o,a)!=a){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+i}function Co(t){return t=s(t),t&&bt.test(t)?t.replace(yt,M):t}function Po(t,e,n){return n&&$n(t,e,n)&&(e=P),t=s(t),t.match(e||Ut)||[]}function Eo(t,e,n){return n&&$n(t,e,n)&&(e=P),y(t)?Lo(t):_e(t,e)}function To(t){return function(){return t}}function So(t){return t}function Lo(t){return Ue(xe(t,!0))}function Ao(t,e){return ze(t,xe(e,!0))}function Do(t,e,n){if(null==n){var r=Ni(e),i=r?zs(e):P,o=i&&i.length?ke(e,i):P;(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=ke(e,zs(e)));var a=!0,s=-1,u=ki(t),l=o.length;n===!1?a=!1:Ni(n)&&"chain"in n&&(a=n.chain);for(;++s<l;){var c=o[s],h=e[c];t[c]=h,u&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__),i=r.__actions__=te(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,le([this.value()],arguments))}}(h))}return t}function Io(){return ne._=ia,this}function ko(){}function No(t){return tr(t)?We(t):He(t)}function Bo(t){return function(e){return Ne(t,fr(e),e+"")}}function Oo(t,e,n){n&&$n(t,e,n)&&(e=n=P),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=wa(ga((e-t)/(n||1)),0),o=Vo(i);++r<i;)o[r]=t,t+=n;return o}function Ro(t,e,n){if(t=va(t),1>t||!_a(t))return[];var r=-1,i=Vo(Ma(t,La));for(e=an(e,n,1);++r<t;)La>r?i[r]=e(r):e(r);return i}function Fo(t){var e=++na;return s(t)+e}function Uo(t,e){return(+t||0)+(+e||0)}function zo(t,e,n){return n&&$n(t,e,n)&&(e=P),e=Vn(e,n,3),1==e.length?pe(Ls(t)?t:cr(t),e):Qe(t,e)}t=t?re.defaults(ne.Object(),t,re.pick(ne,zt)):ne;var Vo=t.Array,Go=t.Date,Wo=t.Error,Ho=t.Function,jo=t.Math,Xo=t.Number,Yo=t.Object,qo=t.RegExp,Zo=t.String,Ko=t.TypeError,Jo=Vo.prototype,Qo=Yo.prototype,$o=Zo.prototype,ta=Ho.prototype.toString,ea=Qo.hasOwnProperty,na=0,ra=Qo.toString,ia=ne._,oa=qo("^"+ta.call(ea).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=t.ArrayBuffer,sa=t.clearTimeout,ua=t.parseFloat,la=jo.pow,ca=Qo.propertyIsEnumerable,ha=jn(t,"Set"),fa=t.setTimeout,pa=Jo.splice,da=t.Uint8Array,ma=jn(t,"WeakMap"),ga=jo.ceil,ya=jn(Yo,"create"),va=jo.floor,ba=jn(Vo,"isArray"),_a=t.isFinite,xa=jn(Yo,"keys"),wa=jo.max,Ma=jo.min,Ca=jn(Go,"now"),Pa=t.parseInt,Ea=jo.random,Ta=Xo.NEGATIVE_INFINITY,Sa=Xo.POSITIVE_INFINITY,La=4294967295,Aa=La-1,Da=La>>>1,Ia=9007199254740991,ka=ma&&new ma,Na={};e.support={};e.templateSettings={escape:xt,evaluate:wt,interpolate:Mt,variable:"",imports:{_:e}};var Ba=function(){function t(){}return function(e){if(Ni(e)){t.prototype=e;var n=new t;t.prototype=P}return n||{}}}(),Oa=fn(De),Ra=fn(Ie,!0),Fa=pn(),Ua=pn(!0),za=ka?function(t,e){return ka.set(t,e),t}:So,Va=ka?function(t){return ka.get(t)}:ko,Ga=We("length"),Wa=function(){var t=0,e=0;return function(n,r){var i=ms(),o=U-(i-e);if(e=i,o>0){if(++t>=F)return n}else t=0;return za(n,r)}}(),Ha=yi(function(t,e){return y(t)&&Jn(t)?Me(t,Le(e,!1,!0)):[]}),ja=wn(),Xa=wn(!0),Ya=yi(function(t){for(var e=t.length,n=e,r=Vo(h),i=Wn(),a=i==o,s=[];n--;){var u=t[n]=Jn(u=t[n])?u:[];r[n]=a&&u.length>=120?mn(n&&u):null}var l=t[0],c=-1,h=l?l.length:0,f=r[0];t:for(;++c<h;)if(u=l[c],(f?Jt(f,u):i(s,u,0))<0){for(var n=e;--n;){var p=r[n];if((p?Jt(p,u):i(t[n],u,0))<0)continue t}f&&f.push(u),s.push(u)}return s}),qa=yi(function(t,e){e=Le(e);var n=ve(t,e);return je(t,e.sort(r)),n}),Za=On(),Ka=On(!0),Ja=yi(function(t){return $e(Le(t,!1,!0))}),Qa=yi(function(t,e){return Jn(t)?Me(t,e):[]}),$a=yi(Rr),ts=yi(function(t){var e=t.length,n=e>2?t[e-2]:P,r=e>1?t[e-1]:P;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):P,r=P),t.length=e,Fr(t,n,r)}),es=yi(function(t){return t=Le(t),this.thru(function(e){return $t(Ls(e)?e:[hr(e)],t)})}),ns=yi(function(t,e){return ve(t,Le(e))}),rs=cn(function(t,e,n){ea.call(t,n)?++t[n]:t[n]=1}),is=xn(Oa),os=xn(Ra,!0),as=Pn(ee,Oa),ss=Pn(ie,Ra),us=cn(function(t,e,n){ea.call(t,n)?t[n].push(e):t[n]=[e]}),ls=cn(function(t,e,n){t[n]=e}),cs=yi(function(t,e,n){var r=-1,i="function"==typeof e,o=tr(e),a=Jn(t)?Vo(t.length):[];return Oa(t,function(t){var s=i?e:o&&null!=t?t[e]:P;a[++r]=s?s.apply(t,n):Kn(t,e,n)}),a}),hs=cn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),fs=Dn(ce,Oa),ps=Dn(he,Ra),ds=yi(function(t,e){if(null==t)return[];var n=e[2];return n&&$n(e[0],e[1],n)&&(e.length=1),Je(t,Le(e),[])}),ms=Ca||function(){return(new Go).getTime()},gs=yi(function(t,e,n){var r=T;if(n.length){var i=b(n,gs.placeholder);r|=I}return Rn(t,r,e,n,i)}),ys=yi(function(t,e){e=e.length?Le(e):Ki(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Rn(t[i],T,t)}return t}),vs=yi(function(t,e,n){var r=T|S;if(n.length){var i=b(n,vs.placeholder);r|=I}return Rn(e,r,t,n,i)}),bs=vn(A),_s=vn(D),xs=yi(function(t,e){return we(t,1,e)}),ws=yi(function(t,e,n){return we(t,e,n)}),Ms=Cn(),Cs=Cn(!0),Ps=yi(function(t,e){if(e=Le(e),"function"!=typeof t||!oe(e,a))throw new Ko(W);var n=e.length;return yi(function(r){for(var i=Ma(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Es=An(I),Ts=An(k),Ss=yi(function(t,e){return Rn(t,B,P,P,P,Le(e))}),Ls=ba||function(t){return y(t)&&nr(t.length)&&ra.call(t)==X},As=hn(Ve),Ds=hn(function(t,e,n){return n?ge(t,e,n):ye(t,e)}),Is=bn(Ds,de),ks=bn(As,or),Ns=Mn(De),Bs=Mn(Ie),Os=En(Fa),Rs=En(Ua),Fs=Tn(De),Us=Tn(Ie),zs=xa?function(t){var e=null==t?P:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Jn(t)?lr(t):Ni(t)?xa(t):[]}:lr,Vs=Sn(!0),Gs=Sn(),Ws=yi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Le(e),Zo);return ar(t,Me(to(t),e))}var n=an(e[0],e[1],3);return sr(t,function(t,e,r){return!n(t,e,r)})}),Hs=yi(function(t,e){return null==t?{}:"function"==typeof e[0]?sr(t,an(e[0],e[1],3)):ar(t,Le(e))}),js=gn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Xs=gn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ys=Ln(),qs=Ln(!0),Zs=gn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Ks=gn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Js=yi(function(t,e){try{return t.apply(P,e)}catch(n){return Di(n)?n:new Wo(n)}}),Qs=yi(function(t,e){return function(n){return Kn(n,t,e)}}),$s=yi(function(t,e){return function(n){return Kn(t,n,e)}}),tu=Bn("ceil"),eu=Bn("floor"),nu=_n(Mi,Ta),ru=_n(ji,Sa),iu=Bn("round");return e.prototype=n.prototype,v.prototype=Ba(n.prototype),v.prototype.constructor=v,J.prototype=Ba(n.prototype),J.prototype.constructor=J,jt.prototype["delete"]=Xt,jt.prototype.get=Yt,jt.prototype.has=qt,jt.prototype.set=Zt,Kt.prototype.push=Qt,di.Cache=jt,e.after=ci,e.ary=hi,e.assign=Ds,e.at=ns,e.before=fi,e.bind=gs,e.bindAll=ys,e.bindKey=vs,e.callback=Eo,e.chain=Vr,e.chunk=dr,e.compact=mr,e.constant=To,e.countBy=rs,e.create=Zi,e.curry=bs,e.curryRight=_s,e.debounce=pi,e.defaults=Is,e.defaultsDeep=ks,e.defer=xs,e.delay=ws,e.difference=Ha,e.drop=gr,e.dropRight=yr,e.dropRightWhile=vr,e.dropWhile=br,e.fill=_r,e.filter=Jr,e.flatten=wr,e.flattenDeep=Mr,e.flow=Ms,e.flowRight=Cs,e.forEach=as,e.forEachRight=ss,e.forIn=Os,e.forInRight=Rs,e.forOwn=Fs,e.forOwnRight=Us,e.functions=Ki,e.groupBy=us,e.indexBy=ls,e.initial=Pr,e.intersection=Ya,e.invert=$i,e.invoke=cs,e.keys=zs,e.keysIn=to,e.map=ti,e.mapKeys=Vs,e.mapValues=Gs,e.matches=Lo,e.matchesProperty=Ao,e.memoize=di,e.merge=As,e.method=Qs,e.methodOf=$s,e.mixin=Do,e.modArgs=Ps,e.negate=mi,e.omit=Ws,e.once=gi,e.pairs=eo,e.partial=Es,e.partialRight=Ts,e.partition=hs,e.pick=Hs,e.pluck=ei,e.property=No,e.propertyOf=Bo,e.pull=Sr,e.pullAt=qa,e.range=Oo,e.rearg=Ss,e.reject=ni,e.remove=Lr,e.rest=Ar,e.restParam=yi,e.set=ro,e.shuffle=ii,e.slice=Dr,e.sortBy=si,e.sortByAll=ds,e.sortByOrder=ui,e.spread=vi,e.take=Ir,e.takeRight=kr,e.takeRightWhile=Nr,e.takeWhile=Br,e.tap=Gr,e.throttle=bi,e.thru=Wr,e.times=Ro,e.toArray=Yi,e.toPlainObject=qi,e.transform=io,e.union=Ja,e.uniq=Or,e.unzip=Rr,e.unzipWith=Fr,e.values=oo,e.valuesIn=ao,e.where=li,e.without=Qa,e.wrap=_i,e.xor=Ur,e.zip=$a,e.zipObject=zr,e.zipWith=ts,e.backflow=Cs,e.collect=ti,e.compose=Cs,e.each=as,e.eachRight=ss,e.extend=Ds,e.iteratee=Eo,e.methods=Ki,e.object=zr,e.select=Jr,e.tail=Ar,e.unique=Or,Do(e,e),e.add=Uo,e.attempt=Js,e.camelCase=js,e.capitalize=lo,e.ceil=tu,
e.clone=xi,e.cloneDeep=wi,e.deburr=co,e.endsWith=ho,e.escape=fo,e.escapeRegExp=po,e.every=Kr,e.find=is,e.findIndex=ja,e.findKey=Ns,e.findLast=os,e.findLastIndex=Xa,e.findLastKey=Bs,e.findWhere=Qr,e.first=xr,e.floor=eu,e.get=Ji,e.gt=Mi,e.gte=Ci,e.has=Qi,e.identity=So,e.includes=$r,e.indexOf=Cr,e.inRange=so,e.isArguments=Pi,e.isArray=Ls,e.isBoolean=Ei,e.isDate=Ti,e.isElement=Si,e.isEmpty=Li,e.isEqual=Ai,e.isError=Di,e.isFinite=Ii,e.isFunction=ki,e.isMatch=Bi,e.isNaN=Oi,e.isNative=Ri,e.isNull=Fi,e.isNumber=Ui,e.isObject=Ni,e.isPlainObject=zi,e.isRegExp=Vi,e.isString=Gi,e.isTypedArray=Wi,e.isUndefined=Hi,e.kebabCase=Xs,e.last=Er,e.lastIndexOf=Tr,e.lt=ji,e.lte=Xi,e.max=nu,e.min=ru,e.noConflict=Io,e.noop=ko,e.now=ms,e.pad=mo,e.padLeft=Ys,e.padRight=qs,e.parseInt=go,e.random=uo,e.reduce=fs,e.reduceRight=ps,e.repeat=yo,e.result=no,e.round=iu,e.runInContext=C,e.size=oi,e.snakeCase=Zs,e.some=ai,e.sortedIndex=Za,e.sortedLastIndex=Ka,e.startCase=Ks,e.startsWith=vo,e.sum=zo,e.template=bo,e.trim=_o,e.trimLeft=xo,e.trimRight=wo,e.trunc=Mo,e.unescape=Co,e.uniqueId=Fo,e.words=Po,e.all=Kr,e.any=ai,e.contains=$r,e.eq=Ai,e.detect=is,e.foldl=fs,e.foldr=ps,e.head=xr,e.include=$r,e.inject=fs,Do(e,function(){var t={};return De(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=E,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){J.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new J(this);n=null==n?1:wa(va(n)||0,0);var i=this.clone();return r?i.__takeCount__=Ma(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__<0?"Right":"")}),i},J.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=G;J.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Vn(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");J.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");J.prototype[t]=function(){return this.__filtered__?new J(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Ue:No;J.prototype[t]=function(t){return this[n](r(t))}}),J.prototype.compact=function(){return this.filter(So)},J.prototype.reject=function(t,e){return t=Vn(t,e,1),this.filter(function(e){return!t(e)})},J.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||0>e)?new J(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==P&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n)},J.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},J.prototype.toArray=function(){return this.take(Sa)},De(J.prototype,function(t,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),o=e[i?"take"+("last"==n?"Right":""):n];o&&(e.prototype[n]=function(){var e=i?[1]:arguments,n=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,u=a instanceof J,l=e[0],c=u||Ls(a);c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var h=function(t){return i&&n?o(t,1)[0]:o.apply(P,le([t],e))},f={func:Wr,args:[h],thisArg:P},p=u&&!s;if(i&&!n)return p?(a=a.clone(),a.__actions__.push(f),t.call(a)):o.call(P,this.value())[0];if(!i&&c){a=p?a:new J(this);var d=t.apply(a,e);return d.__actions__.push(f),new v(d,n)}return this.thru(h)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?$o:Jo)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),De(J.prototype,function(t,n){var r=e[n];if(r){var i=r.name,o=Na[i]||(Na[i]=[]);o.push({name:n,func:r})}}),Na[In(P,S).name]=[{name:"wrapper",func:P}],J.prototype.clone=et,J.prototype.reverse=rt,J.prototype.value=Ht,e.prototype.chain=Hr,e.prototype.commit=jr,e.prototype.concat=es,e.prototype.plant=Xr,e.prototype.reverse=Yr,e.prototype.toString=qr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Zr,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var P,E="3.10.1",T=1,S=2,L=4,A=8,D=16,I=32,k=64,N=128,B=256,O=30,R="...",F=150,U=16,z=200,V=1,G=2,W="Expected a function",H="__lodash_placeholder__",j="[object Arguments]",X="[object Array]",Y="[object Boolean]",q="[object Date]",Z="[object Error]",K="[object Function]",J="[object Map]",Q="[object Number]",$="[object Object]",tt="[object RegExp]",et="[object Set]",nt="[object String]",rt="[object WeakMap]",it="[object ArrayBuffer]",ot="[object Float32Array]",at="[object Float64Array]",st="[object Int8Array]",ut="[object Int16Array]",lt="[object Int32Array]",ct="[object Uint8Array]",ht="[object Uint8ClampedArray]",ft="[object Uint16Array]",pt="[object Uint32Array]",dt=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39|#96);/g,vt=/[&<>"'`]/g,bt=RegExp(yt.source),_t=RegExp(vt.source),xt=/<%-([\s\S]+?)%>/g,wt=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Pt=/^\w*$/,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Tt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,St=RegExp(Tt.source),Lt=/[\u0300-\u036f\ufe20-\ufe23]/g,At=/\\(\\)?/g,Dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,It=/\w*$/,kt=/^0[xX]/,Nt=/^\[object .+?Constructor\]$/,Bt=/^\d+$/,Ot=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Rt=/($^)/,Ft=/['\n\r\u2028\u2029\\]/g,Ut=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),zt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Vt=-1,Gt={};Gt[ot]=Gt[at]=Gt[st]=Gt[ut]=Gt[lt]=Gt[ct]=Gt[ht]=Gt[ft]=Gt[pt]=!0,Gt[j]=Gt[X]=Gt[it]=Gt[Y]=Gt[q]=Gt[Z]=Gt[K]=Gt[J]=Gt[Q]=Gt[$]=Gt[tt]=Gt[et]=Gt[nt]=Gt[rt]=!1;var Wt={};Wt[j]=Wt[X]=Wt[it]=Wt[Y]=Wt[q]=Wt[ot]=Wt[at]=Wt[st]=Wt[ut]=Wt[lt]=Wt[Q]=Wt[$]=Wt[tt]=Wt[nt]=Wt[ct]=Wt[ht]=Wt[ft]=Wt[pt]=!0,Wt[Z]=Wt[K]=Wt[J]=Wt[et]=Wt[rt]=!1;var Ht={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Xt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Yt={"function":!0,object:!0},qt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kt=Yt[typeof n]&&n&&!n.nodeType&&n,Jt=Yt[typeof e]&&e&&!e.nodeType&&e,Qt=Kt&&Jt&&"object"==typeof t&&t&&t.Object&&t,$t=Yt[typeof self]&&self&&self.Object&&self,te=Yt[typeof window]&&window&&window.Object&&window,ee=Jt&&Jt.exports===Kt&&Kt,ne=Qt||te!==(this&&this.window)&&te||$t||this,re=C();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ne._=re,define(function(){return re})):Kt&&Jt?ee?(Jt.exports=re)._=re:Kt._=re:ne._=re}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],395:[function(t,e,n){function r(t,e){var n=document.createElement("script");n.src=t,n.async=!0,n.onreadystatechange=n.onload=function(){var t=n.readyState;e.done||t&&!/loaded|complete/.test(t)||(e.done=!0,e())},document.getElementsByTagName("head")[0].appendChild(n)}function i(){$(".feed-item[data-initialized=false]").each(function(){var e,n=$(this),r=n.data("type"),i=n.data("data"),o=n.data("images"),a=n.data("options"),s=n.attr("id");try{t(r)}catch(u){e=t("lightning-"+r)}new e("#"+s,i,o,a),n.data("initialized",!0),n.attr("data-initialized",!0),$(".feed-container").animate({opacity:1})})}var o="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js";t("lightning-adjacency"),t("lightning-circle"),t("lightning-force"),t("lightning-gallery"),t("lightning-graph"),t("lightning-graph-bundled"),t("lightning-image"),t("lightning-image-poly"),t("lightning-line"),t("lightning-line-streaming"),t("lightning-map"),t("lightning-matrix"),t("lightning-scatter"),t("lightning-scatter-streaming"),t("lightning-scatter-3"),t("lightning-volume"),window.$?i():r(o,i),window.lightning=window.lightning||{},window.lightning.initVisualizations=i},{"lightning-adjacency":6,"lightning-circle":29,"lightning-force":54,"lightning-gallery":79,"lightning-graph":143,"lightning-graph-bundled":118,"lightning-image":201,"lightning-image-poly":166,"lightning-line":248,"lightning-line-streaming":223,"lightning-map":271,"lightning-matrix":295,"lightning-scatter":363,"lightning-scatter-3":316,"lightning-scatter-streaming":338,"lightning-volume":386}]},{},[395]),window.define=window._define,window.require=window._require;